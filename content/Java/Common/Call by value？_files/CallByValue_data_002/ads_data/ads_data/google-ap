var sociomantic=sociomantic||{enable:function(){sociomantic.sonar.enable()}};sociomantic.sonar=sociomantic.sonar||{enable_callbacks:[],request:{pool:{},add:function(url,load,callback){var sr=sociomantic.sonar.request;var request=sr.item;var random_num=Math.random()+'';var request_id='r'+random_num.replace('.','');url+='&rid='+request_id;sr.pool[request_id]=new request(url,load,callback);return sr.pool[request_id]},item:function(url,load,callback){var self=this;this.url=url;this.load_method=load;this.callback=callback;this.doc=document;this.https=true;this.instance=false;this.response=false;this.status=0;this.timeout=false;this.fallback=false;this.setTimeout=function(length,count){self.timeout={count:count,length:length,object:false}};this.load=function(){if(typeof self.load_method==='function'){self.load_method(self.url,self.doc,self.https);self.status=self.status<1?1:self.status}if(self.timeout){self.timeout.object=setTimeout(function(){if(!self.response){if(self.timeout.count>0){self.timeout.count--;self.status=2;self.load()}else if(self.fallback&&typeof self.fallback==='function'){self.response=true;self.status=4;self.fallback()}}},self.timeout.length)}}}},enable:function(){var so=sociomantic.sonar;for(var i=0;i<so.enable_callbacks.length;i++){if(so.enable_callbacks.hasOwnProperty(i)){var enable_callback=so.enable_callbacks[i];if(typeof enable_callback=='function'){enable_callback();so.enable_callbacks.splice(i,1);i--}}}},response:function(param,response_id){var request_pool=sociomantic.sonar.request.pool;for(var id in request_pool){if(request_pool.hasOwnProperty(id)&&id==response_id){var request=request_pool[id];var callback=request.callback;var instance=request.instance;if(!request.response){if(typeof callback==='function'){request.response=true;request.status=3;if(typeof instance==='string'){callback(param,instance)}else{callback(param)}}}else{}}}}};sociomantic.sonar.ssp=sociomantic.sonar.ssp||{};sociomantic.sonar.ssp['google-ap']=sociomantic.sonar.ssp['google-ap']||{version:'ssp1.41',adpanType:'ssp',admedia:{},admedia_identifier:'sonar-admedium-',admedia_request_properties:['size','cid','city','gid','idfa_hash'],adpan_id:'google-ap',banner_iframes:{},hooks:{},targeting_hosts:[],targeting_hosts_index:0,admedium_request_timeout_count:1,admedium_request_timeout_length:1000,admedium_request_timeout:false,admedium_display_called:{},admedium_fallback_called:{},admedium_response_timeout_count:1,brand_safety_cookie_prefix:'_bs',brand_safety_max_cookies:5,brand_safety_matched:'1',brand_safety_notmatched:'0',brand_safety_timed_out:{},brand_safety_processed:{},brand_safety_jetstart:{},inview_enabled:true,inview_min_duration:950,inview_poll_interval:0.5,inview_poll_max:300,inview_min_percent:50,view_request_count:{},view_request_timeout_count:0,view_request_timeout_length:2000,static_domain:'.sociomantic.com/',static_host:'',static_fallback:'',static_host_media:'media/',static_fallback_media:'media/',static_host_static:'static/',static_fallback_static:'static/',static_path_html5:'static_html5/',static_host_css:'css/',default_css:'css/default',static_servers:[1],show_ad_metadata:true,show_privacy_i:true,show_logo:true,click_opens_new_window:true,createCSS:true,products:{},products_loaded:{},products_errored:{},modify_metadata_callbacks:[],prepared_banners:[],window_location_timeout_length:0,css_timeout_length:100,css_timeout_count:0,css_timeout_count_total:10,allowSetCookie:true,swf_properties:'wmode=transparent, allowScriptAccess=always, loop=true, quality=high, menu=false, play=true',click_target:'_blank',ad_url_clicked:'',timespan_new_flag:3600*24*31,user_id_token:'[USER_ID]',click_target_url_token:'[TARGET_URL]',click_target_url_encoded_token:'[TARGET_URL_ENCODED]',privacy_i_url:'http://www.sociomantic.com/privacy/',currency_map:{DEF:{symbol:'',decimal:',',placement:'back',thousand:'.'}},type_map:{0:'none',1:'image'},size_map:{0:{width:'0',height:'0',count:0},1:{width:'300',height:'250',count:6},2:{width:'180',height:'150',count:1},3:{width:'728',height:'90',count:5},4:{width:'160',height:'600',count:6},5:{width:'300',height:'600',count:8},6:{width:'120',height:'60',count:0},7:{width:'88',height:'31',count:0},8:{width:'250',height:'250',count:4},9:{width:'240',height:'400',count:12},10:{width:'336',height:'280',count:6},11:{width:'300',height:'100',count:1},12:{width:'720',height:'300',count:8},13:{width:'468',height:'60',count:4},14:{width:'234',height:'60',count:1},15:{width:'120',height:'90',count:0},16:{width:'120',height:'240',count:2},17:{width:'125',height:'125',count:0},18:{width:'120',height:'600',count:6},19:{width:'88',height:'88',count:0},20:{width:'240',height:'120',count:0},21:{width:'788',height:'326',count:4},60:{width:'320',height:'50',count:4},62:{width:'750',height:'100',count:6},63:{width:'750',height:'200',count:12},67:{width:'930',height:'180',count:12},68:{width:'970',height:'90',count:12},69:{width:'980',height:'120',count:12},70:{width:'250',height:'360',count:12},71:{width:'300',height:'1050',count:12},72:{width:'200',height:'446',count:12},73:{width:'950',height:'90',count:12},74:{width:'300',height:'31',count:12},75:{width:'960',height:'90',count:12},76:{width:'750',height:'300',count:12},77:{width:'970',height:'66',count:12},78:{width:'240',height:'133',count:12},79:{width:'292',height:'30',count:12},80:{width:'580',height:'400',count:12},81:{width:'980',height:'90',count:12},82:{width:'320',height:'100',count:12},83:{width:'220',height:'90',count:12},84:{width:'970',height:'250',count:12},85:{width:'320',height:'480',count:12},86:{width:'768',height:'1024',count:12},87:{width:'480',height:'320',count:12},88:{width:'1024',height:'768',count:12}},enums:(function(){var bannerTypes;var bannerTypesDescriptor;var Banner;bannerTypes=["DYNAMIC","STATIC","HTML5_STATIC"];bannerTypesDescriptor=bannerTypes.reduce(function(descriptor,type,index){descriptor[type]={value:index};return descriptor},{});Banner=Object.defineProperties({},bannerTypesDescriptor);return{Banner:Banner}})(),utility:(function(){var utilityFunctions={constructURLQueryPart:{value:function(){return constructURLQueryPart.apply(this,arguments)}}};return Object.defineProperties({},utilityFunctions);function constructURLQueryPart(_queryParameterList,_parameterValue,_overrideValue,_prefixPath){var url;var parameterConstructor;if(parameterListIsInvalid()||parameterValueIsInvalid()){return''}if(!_prefixPath||typeof _prefixPath!=='string'){_prefixPath=''}parameterConstructor=(function(overrideValue,parameterValue){var value;if(overrideValue&&typeof overrideValue==='function'){value=function(name){var ov=overrideValue(name);return isNullOrUndefined(ov)?defaultValue(name):ov}}else{value=defaultValue}function defaultValue(name){return typeof parameterValue[name]==='undefined'?'':parameterValue[name]}function toString(){return this.name+'='+this.value}function constructor(name){return{name:name,value:value(name),toString:toString}}return constructor})(_overrideValue,_parameterValue);url=_queryParameterList.map(parameterConstructor).filter(function(parameter){if(parameter.name==='url'){return typeof parameter.value==='string'}return parameter.value!==''}).reduce(function(){return queryReducer.apply(this,arguments)},_prefixPath);function queryReducer(query,parameter){queryReducer=function(query,parameter){return query+='&'+parameter.toString()};return query+parameter.toString()}function parameterListIsInvalid(){return!Array.isArray(_queryParameterList)}function parameterValueIsInvalid(){return!_parameterValue||typeof _parameterValue!=='object'}function isNullOrUndefined(value){return!(value||value===0||value==='')}return url}})(),queryParameterList:(function(){var o=Object.defineProperties({},{forClickRequest:{get:function(){return["aid","fpc","aaid","size","cid","cid_failed","gid","ref","ao","aog","idfa_hash","ts","sig","mta","cachebuster","url"]}},forViewRequest:{get:function(){return["aid","aaid","size","cid","cid_failed","gid","bwa","fpc","ref","ao","fail_reason","aog","idfa_hash","ts","sig","mta","vw","bs_msg","cachebuster"]}}});return o})(),enable:function(){var ssp=sociomantic.sonar.ssp['google-ap'];if(!ssp.enabled){ssp.enabled=true;ssp.setStaticUrls();ssp.setTargetingHostsIndex()}ssp.init()},init:function(){var ssp=sociomantic.sonar.ssp['google-ap'];ssp.setAdmedia()},setStaticUrls:function(){var ssp=sociomantic.sonar.ssp['google-ap'];ssp.setStaticHost();var host=ssp.static_host;var fallback=ssp.static_fallback;ssp.static_fallback_static=fallback+ssp.static_fallback_static;ssp.static_fallback_media=fallback+ssp.static_fallback_media;ssp.static_fallback_host_css=fallback+ssp.static_host_css;ssp.default_fallback_css=fallback+ssp.default_css;ssp.static_host_static=host+ssp.static_host_static;ssp.static_host_media=host+ssp.static_host_media;ssp.static_host_css=host+ssp.static_host_css;ssp.default_css=host+ssp.default_css;ssp.static_path_html5=host+ssp.static_path_html5},setStaticHost:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var protocol=ssp.core.getUrlProtocol();var server_count=ssp.static_servers.length;var server_index=(Math.floor(Math.random()*server_count));var fallbackIndex=(server_index+Math.ceil(Math.random()*(server_count-1)))%server_count;var server=ssp.static_servers[server_index];var fallback=ssp.static_servers[fallbackIndex];server=(server<10?'0'+server:server);fallback=(fallback<10?'0'+fallback:fallback);ssp.static_fallback=protocol+ssp.static_host+fallback+ssp.static_domain;ssp.static_host=protocol+ssp.static_host+server+ssp.static_domain},setTargetingHostsIndex:function(){var ssp=sociomantic.sonar.ssp['google-ap'];ssp.targeting_hosts_index=Math.floor(Math.random()*ssp.targeting_hosts.length)},getData:function(){try{var ssp=sociomantic.sonar.ssp['google-ap'];var admedia=ssp.admedia;var data={admedia:[]};if(admedia){var undefinedToNull=function(value){return(typeof value==='undefined'?null:value)};for(var i in admedia){if(admedia.hasOwnProperty(i)){data.admedia.push({'mid':i,'cid':undefinedToNull(admedia[i].cid),'gid':undefinedToNull(admedia[i].gid),'size':undefinedToNull(admedia[i]['size'])})}}}return ssp.core.stringify(data)}catch(e){return'error_getting_admedia_data'}return'no_admedia_data'},getUID:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;if(typeof id!=='undefined'&&typeof ssp.admedia[id]==='object'){var uid=ssp.admedia[id].uid;if(typeof uid==='string'&&uid!==''){return uid}}return core.getCookie()},setUIDCookie:function(uid){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var cookie=core.getCookie();if(ssp.allowSetCookie&&cookie!==uid){core.setCookie(uid)}},setAdmedia:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var admedia=typeof sonar_admedia==='object'?sonar_admedia:false;if(admedia){for(var id in admedia){if(core.hasProperty(admedia,id)){var admedium=admedia[id];if(typeof admedium==='object'&&typeof admedium.ssp==='string'&&admedium.ssp===ssp.adpan_id&&typeof ssp.admedia[id]==='undefined'){ssp.admedia[id]=admedium;ssp.admedia[id].status=0;if(admedium.brand_safety){ssp.startBrandSafety(id,admedium,true)}if(typeof admedium.uid==='string'&&admedium.uid!==''){ssp.admedia[id].uid=admedium.uid;ssp.setUIDCookie(admedium.uid)}delete admedia[id]}}}}ssp.getAdmedia()},getAdmedia:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var admedia=ssp.admedia;var ads=0;var u='undefined';for(var id in admedia){if(core.hasProperty(admedia,id)){var admedium=admedia[id];ads++;if(admedium.status===0){admedium.status=1;ssp.core.getHooks('getAdmedia',admedium);if(typeof admedium.ao===u){ssp.admediaRequest(ssp.getAdmediaRequestProperties(id),id)}else{ssp.contingentDisplay(id,2)}}}}if(!ads){var msg='getAdmedia:no_admedium';ssp.core.reportError('',msg)}},getAdmediaRequestProperties:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var ao={};var admedium=ssp.admedia[id];var required_props=ssp.admedia_request_properties;for(var i in required_props){if(required_props.hasOwnProperty(i)){var property=required_props[i];if(typeof admedium[property]!=='undefined'){ao[property]=admedium[property]}}}return ao},admediaRequest:function(admedium,id){var so=sociomantic.sonar;var ssp=so.ssp['google-ap'];var core=ssp.core;var cookie=ssp.getUID(id);var load=core.load;var callback=ssp.admediumResponse;var url=ssp.getTargetingHost()+'admedium?aid='+ssp.adpan_id+(cookie?'&fpc='+cookie:'')+'&ao='+core.fixedEncodeURIComponent(core.stringify(admedium));var request=so.request.add(url,load,callback);request.instance=id;request.fallback=function(){ssp.admedia[id].fail_reason=1;ssp.displayFallback(id)};request.setTimeout(ssp.admedium_request_timeout_length,ssp.admedium_request_timeout_count);ssp.brand_safety_jetstart[id]=new Date().getTime();request.load()},getTargetingHost:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var targeting_host=ssp.targeting_hosts[ssp.targeting_hosts_index];ssp.targeting_hosts_index++;if(ssp.targeting_hosts_index>=ssp.targeting_hosts.length){ssp.targeting_hosts_index=0}return targeting_host},admediumResponse:function(admedium,id){var ssp=sociomantic.sonar.ssp['google-ap'];var params={admedium:admedium,id:id};ssp.core.getHooks('admediumResponse',params);try{for(var property in admedium){if(admedium.hasOwnProperty(property)){ssp.admedia[id][property]=admedium[property]}}ssp.contingentDisplay(id,1)}catch(e){ssp.core.reportError(e,'admediumResponse',id)}},contingentDisplay:function(id,jetcomplete){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=typeof ssp.admedia[id]==='object'?ssp.admedia[id]:false;if(admedium&&admedium.brand_safety){admedium.jetcomplete=jetcomplete;admedium.bs_jetready=new Date().getTime();if(typeof admedium.bs_status!=='undefined'){var matched=admedium.bs_matched;if(typeof matched==='string'){admedium.bs_loadorder=1;ssp.brandSafetyDisplay(id,admedium,matched,8.5)}else{admedium.bs_loadorder=2}}else{ssp.startBrandSafety(id,admedium)}}else{ssp.display(id)}},display:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=typeof ssp.admedia[id]==='object'?ssp.admedia[id]:false;var displayed=typeof ssp.admedium_display_called[id]==='undefined'?false:typeof ssp.admedium_display_called[id];if(!displayed){ssp.admedium_display_called[id]=true;ssp.updateVisible(id);ssp.filterAoByUrl(id);if(admedium){if(typeof admedium.ao==='object'){ssp.displayBanner(id,'onloadBannerIframe')}else{admedium.fail_reason=2;ssp.displayFallback(id)}}}},startBrandSafety:function(id,admedium,prejet){var ssp=sociomantic.sonar.ssp['google-ap'];admedium.bs_status=0;if(prejet){admedium.bs_loadorder=0}var matched=ssp.brandSafetyLocalCheck();if(typeof matched==='string'){admedium.bs_status=2;admedium.bs_matched=matched;if(!prejet){ssp.brandSafetyDisplay(id,admedium,matched,8.4)}}else{if(ssp.validBrandSafetyArgs(admedium.brand_safety)){ssp.loadBrandSafety(id,admedium,prejet)}else{admedium.fail_reason=8.1;ssp.displayFallback(id)}}},validBrandSafetyArgs:function(brandSafety){if(typeof brandSafety==='object'){if(typeof brandSafety.config==='object'&&typeof brandSafety.risk==='object'&&typeof brandSafety.url==='string'){return true}}return false},loadBrandSafety:function(id,admedium,prejet){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var brandSafety=admedium.brand_safety;var brandConfig=brandSafety.config;var brandTimeout=ssp.admedium_request_timeout_length;var remainingTime;var jetDuration;if(prejet){remainingTime=brandTimeout}else{jetDuration=new Date().getTime()-ssp.brand_safety_jetstart[id];remainingTime=brandTimeout-jetDuration;remainingTime=(remainingTime<0||remainingTime>brandTimeout)?0:remainingTime;admedium.bs_remain=remainingTime}var callback=function(data){try{ssp.onBrandSafetyData(id,brandSafety,data)}catch(e){var msg='brandSafetyCallback';ssp.core.reportError(e,msg,id)}};sociomantic.sonar.brandsafety.safety_callbacks.push(callback);for(var config in brandConfig){if(core.hasProperty(brandConfig,config)){window[config]=brandConfig[config]}}core.load(brandSafety.url,document,true);core.safeTimeout(function(){ssp.brandSafetyTimeout(id)},remainingTime,'loadBrandSafety',true)},brandSafetyTimeout:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=ssp.admedia[id];ssp.brand_safety_timed_out[id]=true;if(typeof ssp.brand_safety_processed[id]==='undefined'){admedium.bs_status=1;ssp.display(id)}},onBrandSafetyData:function(id,brandSafety,data){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=ssp.admedia[id];var reqRisk=brandSafety.risk;var hasRisk=data.risk;var matched=ssp.brandSafetyMatchRisk(reqRisk,hasRisk);if(ssp.brand_safety_timed_out[id]!==true){ssp.brand_safety_processed[id]=true;if(typeof admedium.jetcomplete==='undefined'){admedium.bs_matched=matched}else{ssp.brandSafetyDisplay(id,admedium,matched,8.3,data)}}ssp.brandSafetySetLocalCache(matched)},brandSafetyDisplay:function(id,admedium,matched,failReason,apiData){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;admedium.bs_matched=matched;if(matched===ssp.brand_safety_matched){if(admedium.bs_jetready){admedium.bs_jetwait=new Date().getTime()-admedium.bs_jetready;ssp.display(id)}}else{admedium.fail_reason=failReason;admedium.view_code='';if(apiData){admedium.api_data=core.stringify(apiData)}ssp.displayFallback(id)}},brandSafetyMatchRisk:function(reqRisk,hasRisk){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var matched=ssp.brand_safety_matched;var notMatched=ssp.brand_safety_notmatched;var reqCount=0;var matchCount=0;if(reqRisk&&hasRisk){for(var reqType in reqRisk){if(core.hasProperty(reqRisk,reqType)){var reqLevels=reqRisk[reqType];var riskLevel=hasRisk[reqType]?hasRisk[reqType]:false;reqCount++;if(riskLevel){if(core.isEmpty(reqLevels)||core.inArray(reqLevels,riskLevel)){matchCount++}}else{return notMatched}}}}else{return notMatched}return matchCount===reqCount?matched:notMatched},brandSafetyLocalCheck:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;try{var brandSafety=sociomantic.sonar.brandsafety;var location=document.location.href;if(location){var hash=brandSafety.brandSafetyHash().md5(location);var cookieCache=ssp.brandSafetyGetCookie(ssp.brandSafetyGetCookieKey(hash));if(typeof cookieCache==='string'){return cookieCache}}}catch(e){core.reportError(e,'brandSafetyLocalCheck')}return null},brandSafetySetLocalCache:function(matched){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;try{var brandSafety=sociomantic.sonar.brandsafety;var location=document.location.href;if(location){ssp.brandSafetyCycleCookies();var hash=brandSafety.brandSafetyHash().md5(location);if(typeof hash==='string'){ssp.brandSafetySetCookie(ssp.brandSafetyGetCookieKey(hash),matched)}}}catch(e){core.reportError(e,'brandSafetySetLocalCache')}},brandSafetyCycleCookies:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var cookieDoc=document.cookie;var regex=new RegExp(' ?'+ssp.brand_safety_cookie_prefix+'[a-f0-9]{32}=[0-1](;|$)','g');var count=cookieDoc.match(regex);if(count){if(count.length>=ssp.brand_safety_max_cookies){var regExHash=/(_bs[a-f0-9]{32})=([0-1])/;var matchHash=count[0].match(regExHash);if(matchHash){ssp.brandSafetySetCookie(matchHash[1],matchHash[2],true)}}}},brandSafetyGetCookieKey:function(key){var ssp=sociomantic.sonar.ssp['google-ap'];return ssp.brand_safety_cookie_prefix+key},brandSafetyGetCookie:function(key){var cookieDoc=document.cookie;var regex='(^|;) ?'+key+'=([^;]*)(;|$)';if(typeof cookieDoc==='string'){var cookie=cookieDoc.match(regex);if(cookie){return cookie[2]}}return false},brandSafetySetCookie:function(key,value,expired){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var domain='';try{if(ssp.allowSetCookie){var host=window.location.hostname.split('.').reverse();if(host.length>2&&host[1].length<=3&&host[0].length<=2){domain='.'+host[2]+'.'+host[1]+'.'+host[0]}else{domain='.'+host[1]+'.'+host[0]}var futdate=new Date();if(expired){futdate=new Date(1980,1,1)}else{var expdate=futdate.getTime();expdate+=core.cookie.lifetime;futdate.setTime(expdate)}document.cookie=key+'='+value+'; domain='+domain+'; expires='+futdate.toUTCString()+'; path=/'}}catch(e){core.reportError(e,'brandSafetySetCookie')}},brandSafetyMsg:function(admedium){var a=admedium;var vers='a';var u='undefined';var e='';var s='.';if(a&&typeof a.bs_status!==u){a.bs_matched=typeof a.bs_matched!==u?a.bs_matched:e;a.bs_loadorder=typeof a.bs_loadorder!==u?a.bs_loadorder:e;a.bs_remain=typeof a.bs_remain!==u?a.bs_remain:e;a.bs_jetwait=typeof a.bs_jetwait!==u?a.bs_jetwait:e;a.bs_msg=vers+s+a.bs_status+s+a.bs_matched+s+a.bs_loadorder+s+a.bs_remain+s+a.bs_jetwait+s}},updateVisible:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=ssp.admedia[id];if(typeof admedium.visible==='undefined'){admedium.visible=1}else if(typeof admedium.visible!=='number'){admedium.visible=parseInt(admedium.visible,10)}if(isNaN(admedium.visible)||admedium.visible<1){admedium.visible=ssp.size_map[admedium.size].count}},filterAoByUrl:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var admedium=ssp.admedia[id];var needed=admedium.visible;if(typeof admedium.ao==='object'){var urls=[];var newAo=[];var ao=admedium.ao;var count=0;var item;var itemsLeft;var itemsNeeded;for(var i in ao){if(core.hasProperty(ao,i)){item=ao[i];itemsLeft=ao.length-count;itemsNeeded=needed-urls.length;if(!core.inArray(urls,item.url)||itemsLeft<=itemsNeeded){urls.push(item.url);newAo.push(item)}count++}}admedium.ao=newAo}},displayBanner:function(id,callback){var ssp=sociomantic.sonar.ssp['google-ap'];var ad_id='sonar-admedium-'+id;var admedium=ssp.admedia[id];var banner_id=ad_id+'-top';var iframe_id=ad_id+'-iframe';var iframe_w='';var iframe_h='';if(document.body!=null){var banner=document.createElement('div');var script=document.getElementById(ad_id);if(script!=null){var parent=script.parentNode;var sizeMap=ssp.size_map[admedium.size];if(typeof admedium.width!=='undefined'||typeof admedium.height!=='undefined'){if(sizeMap.width!==admedium.width||sizeMap.height!==admedium.height){var msg='displayBanner:bad_admedium_size';msg+=':size:'+admedium.size;msg+=':smwidth:'+sizeMap.width;msg+=':width:'+admedium.width;msg+=':smheight:'+sizeMap.height;msg+=':height:'+admedium.height;ssp.core.reportError('',msg,id)}}if(sizeMap.width){iframe_w=' width="'+sizeMap.width+'"'}if(sizeMap.height){iframe_h=' height="'+sizeMap.height+'"'}banner.id=banner_id;banner.innerHTML='<iframe id="'+iframe_id+'" frameborder="0"'+iframe_w+iframe_h+' scrolling="no"'+' style="border:0 none transparent;"'+' onload="sociomantic.sonar.ssp['+"'google-ap'"+'].'+callback+'( \''+id+'\', this )"></iframe>';if(parent.tagName=='HEAD'){document.body.appendChild(banner)}else{parent.insertBefore(banner,script)}}else{admedium.fail_reason=5;ssp.viewRequest(id);var msg='displayBanner:_missing_instance_';ssp.core.reportError('',msg,id)}}else{ssp.core.safeTimeout(function(){ssp.displayBanner(id,callback)},0)}},displayFallback:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=ssp.admedia[id];var fallback=ssp.fallback;var fallbackCalled=typeof ssp.admedium_fallback_called[id]==='undefined'?false:ssp.admedium_fallback_called[id];admedium.fail_reason=admedium.fail_reason==='undefined'?0:admedium.fail_reason;if(typeof fallback==='function'&&!fallbackCalled){ssp.admedium_fallback_called[id]=true;fallback(id)}},onloadBannerIframe:function(id,iframe){var ssp=sociomantic.sonar.ssp['google-ap'];try{ssp.storeBannerIframe(id,iframe);var admedium=ssp.admedia[id];var doc=ssp.getIframeDocument(iframe);var placeholder=doc.body;var bannerData=ssp.prepareAdmedium(ssp,ssp.core,admedium,id);if(placeholder!==null){var bannerLoaded=ssp.bannerGenerator(ssp,ssp.core,placeholder,admedium,true,bannerData.products,bannerData.bannerType,id,doc,iframe);if(bannerLoaded){ssp.viewRequest(id);ssp.thirdPartyViewRequest(id);ssp.prepared_banners.push(id);ssp.setCssTimeout()}else{}}else{ssp.core.reportError('','Failed_to_get_placeholder',id)}}catch(e){var inst='instance_unknown';try{if(typeof document!=='undefined'&&document!=null){if(document.getElementById('sonar-admedium-'+id)!=null){inst='instance_found'}else{inst='instance_not_found'}}}catch(e1){}ssp.core.reportError(e,'onloadBannerIframe_'+inst,id)}},prepareAdmedium:function(_ssp,_core,_admedium,_id){var _util=_ssp.utility;var _enums=_ssp.enums;var _queryParameterList=_ssp.queryParameterList;var _u='undefined';var _enc=_core.fixedEncodeURIComponent;var _bannerData=initBannerData(_admedium);var _bannerType=_bannerData.bannerType;var _products=_admedium.ao;var _imageFilename;function buildLogoUrl(){var url=typeof _admedium.url!==_u?_admedium.url:_admedium.ao[0].url;return buildRedirectionUrl(url,_id)}function buildRedirectionUrl(url,id,productItem){return'http://'+_core.location.sonar+getClickRequestUrl(buildClickTrackingUrl(url),id,productItem)}function buildClickTrackingUrl(simpleTargetURL){var codeParts;var codeExists;var clickTrackingURL;var userID=_ssp.getUID(_id);var targetURL=simpleTargetURL;var clickCode=_admedium.click_code;var userIDPlaceholder=_ssp.user_id_token;var targetUrlPlaceholder=_ssp.click_target_url_token;if(!clickCode){return simpleTargetURL.replace(userIDPlaceholder,userID)}if(clickCode.indexOf(_ssp.click_target_url_encoded_token)!==-1){targetUrlPlaceholder=_ssp.click_target_url_encoded_token;targetURL=_enc(simpleTargetURL)}codeParts=clickCode.split(targetUrlPlaceholder);codeExists=codeParts.some(function(part){return part&&simpleTargetURL.toLowerCase().indexOf(part.toLowerCase())!==-1});clickTrackingURL=codeExists?simpleTargetURL:clickCode.replace(targetUrlPlaceholder,targetURL);return clickTrackingURL.replace(userIDPlaceholder,userID)}function getClickRequestUrl(targetURL,id,productItem){var ao;var url;var speciallyDerivedParameterValue;var a=_admedium;var cookie=_ssp.getUID(id);var timestamp=_core.buildCacheBuster('timestamp');if(typeof productItem==='undefined'){ao=''}else{ao=_core.stringify([{id:productItem.id,fsize:productItem.fsize}])}speciallyDerivedParameterValue={aaid:(a.aaid_fallback||a.aaid)||'',aid:_ssp.adpan_id,ao:_enc(ao),cachebuster:timestamp,fpc:cookie||'',ref:_enc(typeof a.ref==='undefined'?'':a.ref),url:(function(a,targetURL){var clickUrl=typeof a.click_url==='string'?a.click_url:false;if(targetURL!==''||_bannerType===_enums.Banner.HTML5_STATIC){if(clickUrl&&clickUrl.toLowerCase().substring(0,4)==='http'){return _enc(clickUrl+_enc(targetURL))}return _enc(targetURL)}})(a,targetURL)};url=_util.constructURLQueryPart(_queryParameterList.forClickRequest,a,function(name){return speciallyDerivedParameterValue[name]},'action/click?');return url}function initBannerData(admedium){var staticItem=null;var html5Item=null;var productCount=0;var products=[];var bannerType=null;var productTotal;if(typeof admedium.visible==='number'){productTotal=admedium.visible}else{productTotal=_ssp.size_map[admedium.size].count}for(var i=0,len=admedium.ao.length;i<len;i++){var ad=admedium.ao[i];if(ad.type=='0'){products.push(ad);productCount++}else if(ad.type=='1'&&staticItem===null){staticItem=[ad]}else if(ad.type=='2'&&html5Item===null){html5Item=[ad]}}if(productTotal!==0&&productCount>=productTotal){bannerType=_enums.Banner.DYNAMIC}else if(staticItem){products=staticItem;bannerType=_enums.Banner.STATIC}else if(html5Item){products=html5Item;bannerType=_enums.Banner.HTML5_STATIC}return{products:products,bannerType:bannerType}}_core.getHooks('prepareAdmedium',{admedium:_admedium,id:_id});if(!_admedium.logoUrl){_admedium.logoUrl=buildLogoUrl()}for(var i=0,len=_products.length;i<len;i++){var productItem=_products[i];if(!productItem.redirectionUrl){productItem.redirectionUrl=buildRedirectionUrl(productItem.url,_id,productItem)}if(!productItem.imageSource){if(_bannerType===_enums.Banner.DYNAMIC){_imageFilename=productItem.id+'_'+productItem.ftype+'_'+productItem.fsize;productItem.imageFallbackSource=_ssp.static_fallback_media+_imageFilename;productItem.imageSource=_ssp.static_host_media+_imageFilename}else if(_bannerType===_enums.Banner.STATIC){_imageFilename=productItem.id+'_'+productItem.fsize;productItem.imageFallbackSource=_ssp.static_fallback_static+_imageFilename;productItem.imageSource=_ssp.static_host_static+_imageFilename}else if(_bannerType===_enums.Banner.HTML5_STATIC){_imageFilename=productItem.id;productItem.imageSource=_ssp.static_path_html5+_imageFilename+'/';productItem.imageSource+='?click='+_enc(_admedium.logoUrl)}}}return _bannerData},storeBannerIframe:function(id,iframe){var iframes=sociomantic.sonar.ssp['google-ap'].banner_iframes;if(typeof iframes[id]==='undefined'){iframes[id]=iframe}},getBannerIframe:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var ad_id='sonar-admedium-'+id;var iframes=ssp.banner_iframes;var iframe=null;if(typeof iframes[id]!=='undefined'){iframe=iframes[id]}else{iframe=document.getElementById(ad_id+'-iframe');if(iframe){ssp.storeBannerIframe(id,iframe)}}if(iframe){return ssp.getIframeDocument(iframe)}return false},getIframeDocument:function(iframe){if(iframe.contentDocument){return iframe.contentDocument}else if(iframe.contentWindow){if(iframe.contentWindow.document){return iframe.contentWindow.document}return iframe.contentWindow}else if(iframe.document){return iframe.document}return false},addCssClass:function(element,className){var regex='(?:^|\\s)'+className+'(?!\\S)';if(element&&typeof element.className==='string'&&element.className.match(regex)===null){if(element.className!==''){element.className+=' '}element.className+=className}},removeCssClass:function(element,className){var regex=new RegExp('(?:^|\\s)'+className+'(?!\\S)','g');if(element&&typeof element.className==='string'){element.className=element.className.replace(regex,'')}},createClickLink:function(element,redirectLink,source){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;element.target=ssp.click_target;element.href=redirectLink;element.onclick=function(){var newWindow=false;try{newWindow=window.open(redirectLink)}catch(e){core.reportError(e,source+'.window.open')}if(!newWindow){try{window.top.location.href=redirectLink}catch(e){core.reportError(e,source+'.window.top.location.href')}}return false};return element},viewRequest:function(id,inView){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var admedium=ssp.admedia[id];var ao=[];var len=Math.min(admedium.ao.length,admedium.visible);if(typeof admedium==='object'){for(var i=0;i<len;i++){ao.push({id:admedium.ao[i]['id'],fsize:admedium.ao[i]['fsize']})}ao=core.stringify(ao)}ssp.admediaViewRequest(id,ao,inView);ssp.view_request_count[id]=typeof ssp.view_request_count[id]==='number'?ssp.view_request_count[id]++:1},admediaViewRequest:function(id,ao,inView){var so=sociomantic.sonar;var ssp=so.ssp['google-ap'];var core=ssp.core;var util=ssp.utility;var queryParameterList=ssp.queryParameterList;var a=ssp.admedia[id];if(typeof a!=='object'){a={};core.reportError('','admediaViewRequest:missing_admedia',id)}var speciallyDerivedParameterValue={aaid:(a.aaid_fallback||a.aaid)||"",aid:ssp.adpan_id,ao:core.fixedEncodeURIComponent(ao),cachebuster:core.buildCacheBuster(),fpc:ssp.getUID(id),ref:core.fixedEncodeURIComponent(typeof a.ref!=='undefined'?a.ref:''),vw:a.vw_started?(inView||'0'):undefined};ssp.brandSafetyMsg(a);var url=core.location.sonar+util.constructURLQueryPart(queryParameterList.forViewRequest,a,function(name){return speciallyDerivedParameterValue[name]},'action/view?');var request=so.request.add(url,core.load,ssp.viewResponse);request.instance=id;request.load()},thirdPartyViewRequest:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=ssp.admedia[id];var viewCode=typeof admedium.view_code!=='undefined'?admedium.view_code:false;var tag;if(viewCode){try{var iframe=ssp.getBannerIframe(id);viewCode.url=ssp.core.addUrlProtocol(viewCode.url);if(viewCode.type==='iframe'){tag=iframe.createElement('iframe')}else if(viewCode.type==='image'){tag=iframe.createElement('img')}var cb_num=Math.random()+'';var cb_str=cb_num.replace('.','');tag.src=viewCode.url.replace(/\[CACHEBUSTER\]/g,cb_str);tag.width='0';tag.height='0';iframe.body.appendChild(tag)}catch(e){var msg='thirdPartyViewRequest';sociomantic.sonar.ssp['google-ap'].core.reportError(e,msg,id)}}},viewResponse:function(cookie){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;try{if(ssp.allowSetCookie&&cookie!==''){core.setCookie(cookie)}}catch(e){core.reportError(e,'viewResponse')}},clearBanner:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var topID='sonar-admedium-'+id+'-top';var topDiv=document.getElementById(topID);if(topDiv){topDiv.parentNode.removeChild(topDiv);delete ssp.banner_iframes[id]}},enableBanner:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var ad_id='sonar-admedium-'+id;var iframe=ssp.getBannerIframe(id);var banner=iframe.getElementById(ad_id+'-banner');banner.style.display='block'},setCssTimeout:function(){var ssp=sociomantic.sonar.ssp['google-ap'];var callback=function(){ssp.checkCssSheets()};ssp.core.safeTimeout(callback,ssp.css_timeout_length)},checkCssSheets:function(){var ssp=sociomantic.sonar.ssp['google-ap'];for(var i in ssp.prepared_banners){if(ssp.prepared_banners.hasOwnProperty(i)){var id=ssp.prepared_banners[i];var banner_loaded=ssp.checkCssLoaded(id);if(banner_loaded){ssp.prepared_banners.splice(i,1);ssp.enableBanner(id)}}}if(ssp.prepared_banners.length){ssp.setCssTimeout()}},checkCssLoaded:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var iframe=ssp.getBannerIframe(id);var core=ssp.core;ssp.css_timeout_count++;if(ssp.css_timeout_count>ssp.css_timeout_count_total){return true}try{if(ssp.getStyleValue(id,iframe.body,'font-family')==='Loaded'){return true}}catch(e){var msg='checkCssLoaded: ssp.getStyleValue';core.reportError(e,msg,id);return true}return false},convertHyphenToCamel:function(str){return str.replace(/\-(.)/g,function(m,c){return c.toUpperCase()})},getStyleValue:function(id,el,property){var ssp=sociomantic.sonar.ssp['google-ap'];var iframe=ssp.getBannerIframe(id);var val=false;if(el.currentStyle){property=ssp.convertHyphenToCamel(property);val=el.currentStyle[property]}else if(iframe.defaultView.getComputedStyle){var cs=iframe.defaultView.getComputedStyle(el,null);if(typeof cs!=='undefined'&&cs!=null){val=cs.getPropertyValue(property)}}return val}};sociomantic.sonar.brandsafety=sociomantic.sonar.brandsafety||{safety_callbacks:[],safetycheck:function(data){try{var brand=sociomantic.sonar.brandsafety;var callbacks=brand.safety_callbacks;while(callbacks.length){var callback=callbacks.pop();if(typeof callback==='function'){callback(data)}}}catch(e){sociomantic.sonar.ssp['google-ap'].core.reportError(e,'safetycheck_1.0')}},brandSafetyHash:function(){function md5cycle(x,k){var a=x[0];var b=x[1];var c=x[2];var d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32((a<<s)|(a>>>(32-s)),b)}function ff(a,b,c,d,x,s,t){return cmn((b&c)|((~b)&d),a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn((b&d)|(c&(~d)),a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|(~d)),a,b,x,s,t)}function md51(s){var n=s.length;var state=[1732584193,-271733879,-1732584194,271733878];var i;for(i=64;i<=s.length;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++){tail[i>>2]|=s.charCodeAt(i)<<((i%4)<<3)}tail[i>>2]|=0x80<<((i%4)<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i++){tail[i]=0}}tail[14]=n*8;md5cycle(state,tail);return state}function md5blk(s){var md5blks=[];var i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}var hex_chr='0123456789abcdef'.split('');function rhex(n){var s='';var j=0;for(;j<4;j++){s+=hex_chr[(n>>(j*8+4))&0x0F]+hex_chr[(n>>(j*8))&0x0F]}return s}function hex(x){for(var i=0;i<x.length;i++){x[i]=rhex(x[i])}return x.join('')}function md5(s){return typeof s==='string'?hex(md51(s)):false}var add32=function(a,b){return(a+b)&0xFFFFFFFF};if(md5('hello')!=='5d41402abc4b2a76b9719d911017c592'){add32=function(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF),msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF)}}return{md5:md5}}};sociomantic.sonar.ssp['google-ap'].core=sociomantic.sonar.ssp['google-ap'].core||{cookie:{lifetime:((3600*24000)*365),optoutLifetime:((3600*24000)*365),optoutRegex:'(^|;) ?sonar_optout=([^;]*)(;|$)',regex:'(^|;) ?__sonar=([^;]*)(;|$)'},sonarIdRegex:/(\[SONAR-ID\])/g,protocolToken:/(\[PROTOCOL\])/g,protocolEncodedToken:/(\[PROTOCOL_ENCODED\])/g,msgCountMax:10,msgCount:0,htmlTypes:['iframe','img','script'],location:{sonar:'',debug:'',trace:'',rtb:[]},hooks:{},getCookie:function(){var cookieDoc=document.cookie;if(typeof cookieDoc==='string'){var core=sociomantic.sonar.ssp['google-ap'].core;var cookie=cookieDoc.match(core.cookie.regex);if(cookie){return cookie[2]}}return false},setCookie:function(value){var core=sociomantic.sonar.ssp['google-ap'].core;var domain='';var regex=/\D/;try{if(typeof value!=='string'||value.match(regex)!==null){core.reportError('','setCookie_bad_format')}var host=window.location.hostname.split('.').reverse();if(host.length>2&&host[1].length<=3&&host[0].length<=2){domain='.'+host[2]+'.'+host[1]+'.'+host[0]}else{domain='.'+host[1]+'.'+host[0]}var futdate=new Date();var expdate=futdate.getTime();expdate+=core.cookie.lifetime;futdate.setTime(expdate);document.cookie='__sonar='+value+'; domain='+domain+'; expires='+futdate.toUTCString()+'; path=/'}catch(e){core.reportError(e,'setCookie')}},createHtmlElement:function(src,type){var core=sociomantic.sonar.ssp['google-ap'].core;type=core.getValidType(type);var el=document.createElement(type);el.src=src;el.width=0;el.height=0;el.style.cssText='display:none !important;width:0 !important;height:0 !important;';core.appendElement(el)},getValidType:function(type){var core=sociomantic.sonar.ssp['google-ap'].core;if(typeof type==='string'&&core.inArray(core.htmlTypes,type)){return type}return'img'},appendElement:function(element){var scripts=document.getElementsByTagName('script');if(scripts.length>0){var last=scripts[scripts.length-1];last.parentNode.insertBefore(element,last.nextSibling)}else if(document.body!==null&&typeof document.body!=='undefined'){document.body.appendChild(element)}},getHooks:function(hookGroup,param){var core=sociomantic.sonar.ssp['google-ap'].core;var allHooks=core.hooks;if(typeof allHooks[hookGroup]==='object'){var hooks=allHooks[hookGroup];for(var i in hooks){if(core.hasProperty(hooks,i)){var hook=hooks[i];if(typeof hook==='function'){if(typeof param!=='undefined'){hook(param)}else{hook()}}}}}},setHooks:function(hookGroup,newHook,hookId){var core=sociomantic.sonar.ssp['google-ap'].core;var allHooks=core.hooks;hookId=hookId||Math.random()+'';allHooks[hookGroup]=allHooks[hookGroup]||{};if(typeof newHook==='function'&&typeof allHooks[hookGroup][hookId]!=='function'){allHooks[hookGroup][hookId]=newHook}},stringify:function(obj){var core=sociomantic.sonar.ssp['google-ap'].core;var t=typeof(obj);if(t!=='object'||obj===null){if(t==='string'){obj='"'+obj+'"'}return String(obj)}else{var n;var v;var json=[];var arr=(obj&&obj.constructor==Array);for(n in obj){if(core.hasProperty(obj,n)){v=obj[n];t=typeof(v);if(t==='string'){v='"'+v+'"'}else if(t==='object'&&v!==null){v=core.stringify(v)}if(t!=='undefined'){json.push((arr?'':'"'+n+'":')+String(v))}else{core.reportError('','stringify_undefined_value_in_'+n)}}}return(arr?'[':'{')+String(json)+(arr?']':'}')}},fixedEncodeURIComponent:function(str){var encodedStr=encodeURIComponent(str);var safeEscape=function(v){return escape(v)};encodedStr=encodedStr.replace(/[!'()]/g,safeEscape);encodedStr=encodedStr.replace(/\*/g,'%2A');return encodedStr},reportError:function(e,functionName,id,location){var adpan=sociomantic.sonar.ssp['google-ap'];var core=adpan.core;var u='undefined';var c=++core.msgCount;if(c>core.msgCountMax&&(c&(c-1))){return}functionName=(typeof functionName!==u&&functionName!=='')?functionName:'unknown_function';var errorParamsSep='&';var adpanData=typeof adpan.getData==='function'?adpan.getData():'no_admedia_data';var errorParamsArray=[];var viewRequests=core.stringify(adpan.view_request_count);if(typeof e!=='object'){e={name:u,message:u,lineNumber:u,stack:u}}errorParamsArray.push('e='+encodeURIComponent(e.name),'a='+adpan.adpan_id,'v='+adpan.version,'f='+encodeURIComponent(functionName),'k='+id,'d='+encodeURIComponent(adpanData),'c='+core.getCookie(),'h='+encodeURIComponent(window.location.href),'i='+encodeURIComponent(viewRequests),'l='+encodeURIComponent(e.lineNumber),'m='+encodeURIComponent(e.message),'x='+encodeURIComponent(c),'s='+encodeURIComponent(e.stack));var errorParams=core.joinErrorParam(errorParamsArray,errorParamsSep);core.reportMsg(errorParams,location)},reportTrace:function(e,functionName,id){var adpan=sociomantic.sonar.ssp['google-ap'];var core=adpan.core;core.reportError(e,functionName,id,core.location.trace)},joinErrorParam:function(params,errorParamsSep){var result='';for(var i=0;i<params.length;i++){if(params[i]!==''){result+=params[i];result+=errorParamsSep}}return result},reportMsg:function(msg,location){var core=sociomantic.sonar.ssp['google-ap'].core;location=typeof location==='string'?location:core.location.debug;var errorString=core.getUrlProtocol()+location+msg+'&cachebuster='+core.buildCacheBuster();core.createHtmlElement(errorString)},load:function(url,doc,https){var core=sociomantic.sonar.ssp['google-ap'].core;var s=doc.createElement('script');s.type='text/javascript';s.async=true;s.src=(https?core.getUrlProtocol():'http://')+url;core.appendElement(s)},hasProperty:function(obj,property){return Object.prototype.hasOwnProperty.call(obj,property)},getUrlProtocol:function(altDoc){var doc=typeof altDoc!=='undefined'?altDoc:document;return'https:'===doc.location.protocol?'https://':'http://'},addUrlProtocol:function(url,altDoc){var core=sociomantic.sonar.ssp['google-ap'].core;var newProtocol=core.getUrlProtocol(altDoc);if(typeof url==='string'){var i=url.indexOf('\/\/');if((i>=0)&&(i<9)){url=url.replace(/^.*?\/\//,newProtocol)}else{url=newProtocol+url}}return url},buildCacheBuster:function(type){var cb;switch(type){case'timestamp':cb=Math.round(new Date().getTime()/1000)+'';break;default:cb=Math.random()+''}return cb.replace('.','')},isEmpty:function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true},inArray:function(ar,item){var core=sociomantic.sonar.ssp['google-ap'].core;for(var i in ar){if(core.hasProperty(ar,i)&&ar[i]===item){return true}}return false},isArray:function(obj){if(!Array.isArray){return Object.prototype.toString.call(obj)==='[object Array]'}return Array.isArray(obj)},getLanguage:function(){var core=sociomantic.sonar.ssp['google-ap'].core;var browserLang=false;try{browserLang=navigator.userLanguage||navigator.language||'';browserLang=browserLang.toLowerCase()}catch(e){core.reportError(e,'.getLanguage')}return browserLang!==''?browserLang:false},safeTimeout:function(callback,timeout,message,logErrors){var core=sociomantic.sonar.ssp['google-ap'].core;timeout=typeof timeout==='number'&&timeout>0?timeout:0;return setTimeout(function(){try{callback()}catch(e){if(logErrors){var msg='safeTimeout';msg+=message?'_'+message:'';core.reportError(e,msg)}}},timeout)}};sociomantic.sonar.ssp['google-ap'].bannerGenerator=sociomantic.sonar.ssp['google-ap'].bannerGenerator||function bannerGenerator(ssp,core,parent,admedium,createLinks,products,bannerType,id,doc,iframe){var _admedium=admedium;var _ssp=ssp;var _core=core;var _id=id;var _fx=_ssp.fx;var _doc=doc||document;var _parent=parent;var _iframe=iframe;var _u='undefined';var _s='string';var _o='object';var _f='function';var _sonarAdIdPrefix='sonar-admedium-';var _bannerDivId=_sonarAdIdPrefix+_id+'-banner';var _productDivId=_sonarAdIdPrefix+_id+'-products';var _productItemIdPrefix=_sonarAdIdPrefix+_id+'-banner-item-';var _logoId=_sonarAdIdPrefix+_id+'-logo';var _metaPrefix='metadata-';var _defaultCSS='sonar_default_css';var _specificCSS=null;var _products=products;var _bannerType=bannerType;var _bannerDiv=null;var _productsErrored=[];var _productsLoaded=[];_ssp.products_loaded[_id]=_productsLoaded;var _createLinks=createLinks;var _viewTimeStarted;function setCSS(bannerType){if(_ssp.createCSS){var validGid=false;loadCSS(_ssp.default_css,_defaultCSS,_ssp.default_fallback_css);if(typeof _admedium.gid_fallback!==_u){validGid=_admedium.gid_fallback}else if(typeof _admedium.gid!==_u){validGid=_admedium.gid}if(validGid&&bannerType===0){var cssSrc=_ssp.static_host_css+validGid;var cssFallbackSrc=_ssp.static_fallback_host_css+validGid;_specificCSS='sonar_'+validGid+'_css';loadCSS(cssSrc,_specificCSS,cssFallbackSrc)}}}function loadCSS(cssSrc,cssLinkId,cssFallbackSrc){if(!cssLoaded(cssLinkId)){var htmlHead=_doc.getElementsByTagName('head')[0];var link=_doc.createElement('link');link.type='text/css';link.rel='stylesheet';link.media='screen';link.href=cssSrc+'.css';link.id=cssLinkId;link.onerror=function(){try{var fallback=_doc.createElement('link');fallback.type='text/css';fallback.rel='stylesheet';fallback.media='screen';fallback.href=cssFallbackSrc+'.css';link.parentNode.insertBefore(fallback,link);link.parentNode.removeChild(link);fallback.id=cssLinkId}catch(e){_core.reportError(e,'loadCSS.link.onerror',_id)}};if(typeof htmlHead===_u){htmlHead=_doc.createElement('head');_doc.body.parentNode.insertBefore(htmlHead,_doc.body)}htmlHead.appendChild(link)}}function cssLoaded(cssLinkId){if(_doc&&_doc.getElementById(cssLinkId)){return true}return false}function createBannerDiv(){var bannerDiv=_doc.createElement('div');bannerDiv.id=_bannerDivId;_ssp.addCssClass(bannerDiv,'banner');_ssp.addCssClass(bannerDiv,'banner-size-'+admedium.size);_ssp.addCssClass(_parent,'body-size-'+admedium.size);_ssp.addCssClass(_parent,'css-fully-loaded');bannerDiv.style.display='none';_parent.appendChild(bannerDiv);return bannerDiv}function createClickHolder(parentElement,product){var clickholder=_doc.createElement('a');var clickCls='clickholder-'+(product?'products':'banner');_ssp.addCssClass(clickholder,clickCls);if(_bannerType===2){_ssp.addCssClass(clickholder,'clickholder-html5')}if(_createLinks){_ssp.createClickLink(clickholder,_admedium.logoUrl,clickCls)}parentElement.appendChild(clickholder)}function createPrivacyI(parentElement){var privacyILink=null;if(_ssp.show_privacy_i){privacyILink=_doc.createElement('a');var lang=_core.getLanguage();lang=lang?lang:'en';var langShort=lang.substr(0,2);langShort=langShort===lang?false:langShort;var targetUrl=_ssp.privacy_i_url+lang+'/';if(_createLinks){_ssp.createClickLink(privacyILink,targetUrl,'privacyI')}_ssp.addCssClass(privacyILink,'privacy-i');_ssp.addCssClass(privacyILink,'privacy-i-'+lang);if(langShort){_ssp.addCssClass(privacyILink,'privacy-i-'+langShort)}parentElement.appendChild(privacyILink)}return privacyILink}function resizeStaticBanner(bannerDiv){var method='resizeBannerCategory';try{if(typeof _products[0]!==_u){var product=_products[0];if(typeof _ssp.size_map[product.fsize]!==_u){bannerDiv.style.width=_ssp.size_map[product.fsize].width;bannerDiv.style.height=_ssp.size_map[product.fsize].height}else{var msg=method+'_WrongFsize_'+product.fsize+'_productId_'+product.id;_core.reportError('',msg,_id)}}}catch(e){_core.reportError(e,method,_id)}}function createProductDiv(parentElement){var productsDiv=_doc.createElement('div');productsDiv.id=_productDivId;_ssp.addCssClass(productsDiv,'products');parentElement.appendChild(productsDiv);_ssp.addCssClass(parentElement,'product-banner');return productsDiv}function createAllProductItems(parentElement,products){for(var i=0,len=products.length;i<len;i++){var productItem=products[i];var itemIndex=i+1;var productItemLink=createProductLink(parentElement,productItem,itemIndex);createProductMetaData(productItemLink,productItem,itemIndex)}}function createProductLink(parentElement,productItem,productIndex){var productItemLink=_doc.createElement('a');var itemSize=productItem.fsize;var productItemId=_productItemIdPrefix+productIndex;productItemLink.id=productItemId;_ssp.addCssClass(productItemLink,'banner-item-size-'+itemSize);_ssp.addCssClass(productItemLink,'item');if(_createLinks){_ssp.createClickLink(productItemLink,productItem.redirectionUrl,'ProductLink')}parentElement.appendChild(productItemLink);return productItemLink}function createProductMetaData(parentElement,productItem,productIndex){var productItemType=productItem.ftype;if(productItemType===1){createProductImage(parentElement,productItem,productIndex);if(productItem.type===0){displayMetadata(parentElement,productItem)}}}function createProductImage(parentElement,productItem,productIndex){var productImageSpan=_doc.createElement('span');var productImageImg=_doc.createElement('img');var imageSource=productItem.imageSource;var imageFallbackSource=productItem.imageFallbackSource;_ssp.addCssClass(productImageSpan,'banner-item-image');if(!_createLinks){_productsLoaded.push(productIndex);productImageSpan.style.backgroundImage='url('+imageSource+')';addBannerItemClasses(parentElement,productIndex)}else{productImageRetry(parentElement,productItem,productIndex,productImageImg,productImageSpan,imageFallbackSource);productImageLoaded(parentElement,productItem,productIndex,productImageImg,productImageSpan,imageSource)}productImageSpan.appendChild(productImageImg);parentElement.appendChild(productImageSpan);productImageImg.src=imageSource}function productImageRetry(parentElement,productItem,productIndex,productImageImg,productImageSpan,imageFallbackSource){productImageImg.onerror=function(){try{var newProductImageImg=_doc.createElement('img');newProductImageImg.onerror=function(){productImageRemove(parentElement,newProductImageImg,productIndex)};productImageLoaded(parentElement,productItem,productIndex,newProductImageImg,productImageSpan,imageFallbackSource);productImageSpan.removeChild(productImageImg);productImageSpan.appendChild(newProductImageImg);newProductImageImg.src=imageFallbackSource}catch(e){_core.reportError(e,'productImageRetry.productImageImg.onerror',_id)}}}function productImageLoaded(parentElement,productItem,productIndex,productImageImg,productImageSpan,imageSource){productImageImg.onload=function(){try{productImageSpan.style.backgroundImage='url('+imageSource+')';_productsLoaded.push(productIndex);if(typeof _fx===_o){_fx.enable(_id,_doc)}checkBannerItems()}catch(e){_core.reportError(e,'productImageLoaded.productImageImg.onload',_id)}}}function productImageRemove(parentElement,productImageImg,productIndex){try{productImageImg.parentNode.removeChild(productImageImg);parentElement.parentNode.removeChild(parentElement);_productsErrored.push(productIndex);checkBannerItems()}catch(e){_core.reportError(e,'bannerImageRemove',_id)}}function displayMetadata(parentElement,productItem){if(_ssp.show_ad_metadata){displayMetadataElement(parentElement,productItem,'manufacturer');displayMetadataElement(parentElement,productItem,'title');displayMetadataElement(parentElement,productItem,'text');displayMetadataElement(parentElement,productItem,'quantity');displayMetadataElement(parentElement,_admedium,'c2a');if(typeof productItem.currency!==_u||typeof productItem.price!==_u){var cfmt=typeof _admedium.cfmt!==_u?_admedium.cfmt:0;createPriceMetadata(parentElement,productItem,cfmt)}if(typeof productItem.createtime!==_u&&isProductNew(productItem.createtime)){var newStr=typeof _admedium.new_icon==='string'?_admedium.new_icon:'Neu';createMetadataElement(parentElement,_metaPrefix+'new-icon',newStr)}}}function isProductNew(createtime){var date=new Date();var currentTime=parseInt(date.getTime()/1000,10);var newTime=currentTime-_ssp.timespan_new_flag;if(createtime>newTime){return true}return false}function checkBannerItems(){var productsTotal=_products.length;var erroredTotal=_productsErrored.length;var loadedTotal=_productsLoaded.length;var visible=typeof _admedium.visible!==_u?_admedium.visible:1;if((erroredTotal+loadedTotal)>=productsTotal){if(loadedTotal<visible){_admedium.fail_reason=6;_ssp.displayFallback(_id)}else{onAllProductImagesLoaded();if(sociomantic&&typeof sociomantic.onBannerLoadComplete===_f){try{sociomantic.onBannerLoadComplete(_id,_admedium)}catch(e){_core.reportError(e,'onBannerLoadComplete',_id)}}}}}function onAllProductImagesLoaded(){_productsLoaded.sort(function(a,b){return a-b});for(var i=0,len=_productsLoaded.length;i<len;i++){var productIndex=_productsLoaded[i];var productItemId=_productItemIdPrefix+productIndex;var productItemLink=_doc.getElementById(productItemId);addBannerItemClasses(productItemLink,i+1)}}function addBannerItemClasses(productItemLink,index){var last=parseInt(_admedium.visible,10);_ssp.addCssClass(productItemLink,'item-'+index);if(index%2===0){_ssp.addCssClass(productItemLink,'item-even')}else{_ssp.addCssClass(productItemLink,'item-odd')}if(index===1){_ssp.addCssClass(productItemLink,'item-first')}if(index===last){_ssp.addCssClass(productItemLink,'item-last')}}function createPriceMetadata(parentElement,productItem,cfmt){var price=parseFloat(productItem.price);var sprice=typeof productItem.sprice!=='undefined'?parseFloat(productItem.sprice):false;var currency;if(typeof _ssp.currency_map[productItem.currency]!==_u){currency=_ssp.currency_map[productItem.currency];currency.shortcode=productItem.currency}else{currency=ssp.currency_map['DEF'];currency.shortcode='DEF'}if(sprice&&(sprice>0)&&(sprice<price)){var reduction=Math.round((1-(sprice/price))*100);reduction=reduction===0?1:reduction;var saleIcon=createMetadataElement(parentElement,_metaPrefix+'sale-icon','');createMetadataElement(saleIcon,_metaPrefix+'sale-icon-minus','-');createMetadataElement(saleIcon,_metaPrefix+'sale-icon-number',reduction);createMetadataElement(saleIcon,_metaPrefix+'sale-icon-percentage','%');var salePrice=createPrice(parentElement,_metaPrefix+'sale-price',productItem.sprice,cfmt,currency,_admedium.sprice_p,_admedium.sprice_s);var oldPrice=createPrice(parentElement,_metaPrefix+'old-price',productItem.price,cfmt,currency,_admedium.oprice_p,_admedium.oprice_s);if(reduction<5){_ssp.addCssClass(saleIcon,_metaPrefix+'lowpercent-sale-icon');_ssp.addCssClass(salePrice,_metaPrefix+'lowpercent-sale-price');_ssp.addCssClass(oldPrice,_metaPrefix+'lowpercent-old-price')}}else{var el=createPrice(parentElement,_metaPrefix+'price',productItem.price,cfmt,currency,_admedium.price_p,_admedium.price_s);if(el&&price===0){_ssp.addCssClass(el,_metaPrefix+'zero-price')}}}function createPrice(parentElement,metaName,metaValue,cfmt,currency,prefix,suffix){var result=false;switch(cfmt){case 1:result=createPriceElement(parentElement,metaName,metaValue,currency,0,0,prefix,suffix);break;case 2:result=createPricePartsElements(parentElement,metaName,metaValue,currency,0,prefix,suffix);break;case 3:result=createPriceElement(parentElement,metaName,metaValue,currency,1,1,prefix,suffix);break;case 4:result=createPriceElement(parentElement,metaName,metaValue,currency,0,1,prefix,suffix);break;case 5:result=createPricePartsElements(parentElement,metaName,metaValue,currency,1,prefix,suffix);break;default:result=createPriceElement(parentElement,metaName,metaValue,currency,1,0,prefix,suffix)}return result}function createPriceElement(parentElement,metaName,metaValue,currency,decimal,thousand,prefix,suffix){metaValue=metaValue+'';var numberArray=metaValue.split('.');var originalInteger=numberArray[0];var originalDecimal=numberArray.length>1?numberArray[1]:'00';var newPrice=originalInteger;if(thousand===1){newPrice=addThousandSeparator(originalInteger,currency.thousand)}if(decimal===1){if(originalDecimal.length===1){originalDecimal+='0'}newPrice+=currency.decimal+originalDecimal}if(currency.placement==='front'){newPrice=currency.symbol+' '+newPrice}else{newPrice+=' '+currency.symbol}if(typeof prefix===_s){newPrice=prefix+' '+newPrice}if(typeof suffix===_s){newPrice+=' '+suffix}return createMetadataElement(parentElement,metaName,newPrice)}function createPricePartsElements(parentElement,metaName,metaValue,currency,thousand,prefix,suffix){metaValue=metaValue+'';var numberArray=metaValue.split('.');var originalInteger=numberArray[0];var originalDecimal=numberArray.length>1?numberArray[1]:'';var newInteger=originalInteger;var pricePartElement=createMetadataElement(parentElement,metaName+'-parts','');if(typeof currency.shortcode===_s){_ssp.addCssClass(pricePartElement,_metaPrefix+'price-parts-'+currency.shortcode.toLowerCase())}if(thousand===1){newInteger=addThousandSeparator(originalInteger,currency.thousand)}if(typeof prefix===_s){createMetadataElement(pricePartElement,metaName+'-before',prefix)}if(currency.placement==='front'){createMetadataElement(pricePartElement,metaName+'-currency-left',currency.symbol)}createMetadataElement(pricePartElement,metaName+'-integer',newInteger);createMetadataElement(pricePartElement,metaName+'-separator',currency.decimal);createMetadataElement(pricePartElement,metaName+'-decimal',originalDecimal);if(currency.placement==='back'){createMetadataElement(pricePartElement,metaName+'-currency-right',currency.symbol)}if(typeof suffix===_s){createMetadataElement(pricePartElement,metaName+'-after',suffix)}return pricePartElement}function addThousandSeparator(integer,thousand){var integerString=integer;var regex=/(\d+)(\d{3})/;while(regex.test(integerString)){integerString=integerString.replace(regex,'$1'+thousand+'$2')}return integerString}function createLogo(parentElement){if(_ssp.show_logo){var logo=_doc.createElement('a');logo.id=_logoId;_ssp.addCssClass(logo,'logo');if(_createLinks){_ssp.createClickLink(logo,_admedium.logoUrl,'createLogo')}if(typeof _admedium.usp===_s){createMetadataElement(logo,'usp',_admedium.usp)}parentElement.appendChild(logo)}}function displayMetadataElement(parentElement,item,metaName){var itemValue=item[metaName];if(typeof itemValue!==_u&&itemValue!==''){return createMetadataElement(parentElement,_metaPrefix+metaName,itemValue)}}function createMetadataElement(parentElement,metaName,metaValue){var el=_doc.createElement('span');_ssp.addCssClass(el,metaName);el.appendChild(_doc.createTextNode(metaValue));parentElement.appendChild(el);return el}function addHtml5Banner(bannerDiv,admedium){var method='addHtml5Banner';try{var iframe=_doc.createElement('iFrame');iframe.id='banner-html5-iframe-'+_id;iframe.scrolling='no';iframe.frameBorder='0';iframe.style.border='0 none transparent';_ssp.addCssClass(iframe,'banner-html5-iframe');var sizeMap=_ssp.size_map[admedium.size];if(sizeMap.width){iframe.width=sizeMap.width}if(sizeMap.height){iframe.height=sizeMap.height}bannerDiv.appendChild(iframe);iframe.src=admedium.ao[0].imageSource}catch(e){_core.reportError(e,method,_id)}}function startInView(){try{var pollInterval=_ssp.inview_poll_interval;var pollMax=_ssp.inview_poll_max;var minPercent=_ssp.inview_min_percent;var pollCountXY=0;var viewThrown;if(_ssp.inview_enabled&&isFF()){_admedium.vw_started=true;var pollXY=setInterval(function(){try{pollCountXY++;viewThrown=checkViewPercent(minPercent);if(viewThrown||pollCountXY>pollMax/pollInterval){clearInterval(pollXY)}}catch(e){clearInterval(pollXY);_core.reportError(e,'startInView.setInterval',_id)}},pollInterval*1000)}}catch(e){_core.reportError(e,'startInView',_id)}}function isFF(){return typeof window.mozInnerScreenX==='number'?true:false}function checkViewPercent(minPercent){var percent=0;var now=new Date().getTime();var viewDuration;if(!isTabHidden()){percent=viewPercent();if(percent>=minPercent){if(!_viewTimeStarted){_viewTimeStarted=now}viewDuration=now-_viewTimeStarted;if(viewDuration>=_ssp.inview_min_duration){_admedium.vw_viewed='1';_ssp.viewRequest(_id,_admedium.vw_viewed);return true}}else{_viewTimeStarted=null}}return false}function isTabHidden(){var hidden='';if(typeof _doc.hidden!==_u){hidden='hidden'}else if(typeof _doc.mozHidden!==_u){hidden='mozHidden'}else if(typeof _doc.msHidden!==_u){hidden='msHidden'}else if(typeof _doc.webkitHidden!==_u){hidden='webkitHidden'}return hidden!==''&&_doc[hidden]}function viewPercent(){var oTop=0;var oLeft=0;var oHeight=window.innerHeight||document.documentElement.clientHeight;var oWidth=window.innerWidth||document.documentElement.clientWidth;var percent=-1;var mozPercent;if(_iframe){var rect=_iframe.getBoundingClientRect();var iTop=rect.top;var iLeft=rect.left;var iHeight=rect.height;var iWidth=rect.width;percent=percentInView(oTop,oLeft,oHeight,oWidth,iTop,iLeft,iHeight,iWidth);mozPercent=viewPercentMoz();if(mozPercent<percent){percent=mozPercent}}return percent}function viewPercentMoz(){var iTop=window.mozInnerScreenY;var iLeft=window.mozInnerScreenX;var oTop=window.screenY;var oLeft=window.screenX;var iHeight=window.innerHeight||document.documentElement.clientHeight;var iWidth=window.innerWidth||document.documentElement.clientWidth;var oHeight=window.outerHeight;var oWidth=window.outerWidth;var percent=percentInView(oTop,oLeft,oHeight,oWidth,iTop,iLeft,iHeight,iWidth);return percent}function percentInView(oTop,oLeft,oHeight,oWidth,iTop,iLeft,iHeight,iWidth){var area=iWidth*iHeight;var oBottom=oTop+oHeight;var oRight=oLeft+oWidth;var iBottom=iTop+iHeight;var iRight=iLeft+iWidth;var minRight=Math.min(oRight,iRight);var maxLeft=Math.max(oLeft,iLeft);var minBottom=Math.min(oBottom,iBottom);var maxTop=Math.max(oTop,iTop);var intersect=Math.max(0,minRight-maxLeft)*Math.max(0,minBottom-maxTop);var percent=Math.round((intersect/area)*100);return percent}function enableBanner(banner){banner.style.display='block'}try{if(typeof _admedium.cm==='object'){var cm=_admedium.cm;for(var cur in cm){if(cm.hasOwnProperty(cur)){if(typeof _ssp.currency_map[cur]==='undefined'){_ssp.currency_map[cur]=cm[cur]}}}}if(_bannerType===null){_admedium.fail_reason=3;_ssp.displayFallback(_id);return false}else{if(_createLinks){setCSS(_bannerType)}_bannerDiv=createBannerDiv();createClickHolder(_bannerDiv);createPrivacyI(_bannerDiv);var productItemParent;if(_bannerType===1){productItemParent=_bannerDiv;_ssp.addCssClass(_bannerDiv,'banner-category');resizeStaticBanner(_bannerDiv);createAllProductItems(productItemParent,_products)}else if(_bannerType===2){productItemParent=_bannerDiv;_ssp.addCssClass(_bannerDiv,'banner-html5');addHtml5Banner(_bannerDiv,_admedium)}else{productItemParent=createProductDiv(_bannerDiv);createClickHolder(productItemParent,true);createLogo(_bannerDiv);createAllProductItems(productItemParent,_products)}startInView();enableBanner(_bannerDiv)}}catch(e){_ssp.displayFallback(_id);_core.reportError(e,'bannerGenerator',_id);return false}ssp.core.getHooks('bannerGenerator',_doc);return true};sociomantic.sonar.ssp['google-ap'].fx=sociomantic.sonar.ssp['google-ap'].fx||{runtime_max:0,runtime:{},cycleProductsTimeoutLength:2500,fadeInterval:20,countDownTimeoutLength:1000,billboardTimeoutLength:6365,billboardFirstTimeoutLength:7200,carouselCyclingTimeout:3000,autoHoverCyclingTimeout:4000,animations:{},enable:function(id,doc){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var am=ssp.admedia[id];var fx=ssp.fx;var anims=core.isArray(am.anims)?am.anims:false;var animation;fx.setRuntime(id);if(anims){fx.animations[id]=fx.animations[id]||{};for(var j=0,len=anims.length;j<len;j++){animation=anims[j];if(typeof animation==='object'){if(typeof fx.animations[id][animation.type]!=='object'){fx.animations[id][animation.type]=fx.addAnimation(id,doc,animation.type,animation.prop)}if(typeof am.anim==='undefined'||am.anim!==0){fx.animations[id][animation.type].enable()}}}}},getItems:function(products,limit){if(!products||!products.children){return[]}var items=[];var i;var child;for(i=0;i<products.children.length;i++){child=products.children[i];if(child.className.indexOf('item')>-1){items.push(child)}}if(typeof limit!=='number'||limit>=items.length){limit=items.length}return items.slice(0,limit)},addEvent:function(event,element,callback){if(element.addEventListener){element.addEventListener(event,callback,false)}if(element.attachEvent){element.attachEvent('on'+event,callback)}},removeEvent:function(event,element,callback){if(element.removeEventListener){element.removeEventListener(event,callback,false)}if(element.detachEvent){element.detachEvent('on'+event,callback)}},addAnimation:function(id,doc,type,prop){var ssp=sociomantic.sonar.ssp['google-ap'];var fx=ssp.fx;var animation;switch(type){case 0:animation=fx.startProductCycling(id,doc);break;case 1:animation=fx.createCountDownElements(id,doc,prop,false);break;case 2:animation=fx.createCountDownElements(id,doc,prop,true);break;case 3:animation=fx.createBillboard(id,doc,prop);break;case 4:animation=fx.createCarousel(id,doc,prop);break;case 5:animation=fx.startAutoHover(id,doc,prop);break;default:break}return animation},disable:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var fx=ssp.fx;var core=ssp.core;for(var i in fx.animations[id]){if(core.hasProperty(fx.animations[id],i)){fx.animations[id][i].disable()}}},setRuntime:function(id){var ssp=sociomantic.sonar.ssp['google-ap'];var core=ssp.core;var fx=ssp.fx;var rtLength=fx.runtime_max;var rtTimeout=fx.runtime[id];if(rtLength>0&&typeof rtTimeout==='undefined'){fx.runtime[id]=core.safeTimeout(function(){fx.disable(id)},rtLength)}},startProductCycling:function(_id,_iframeDoc){var _ssp=sociomantic.sonar.ssp['google-ap'];var _core=_ssp.core;var _am=_ssp.admedia[_id];var _fx=_ssp.fx;var _visible=typeof _am.visible==='number'?_am.visible:0;var _productsId=_ssp.admedia_identifier+_id+'-products';var _products=_iframeDoc.getElementById(_productsId);var _running=null;var _fadeInterval=_fx.fadeInterval;var _items=_fx.getItems(_products);var _visibleItems=_items.slice(0,_visible);var _hiddenItems=_items.slice(_visible,_items.length);var _currentItem;var _defaultTimeout=_fx.cycleProductsTimeoutLength;var _timeout;var _timeoutID;var _hoveredItem;var _listener={};function cycleProducts(){clearTimeout(_timeoutID);_timeoutID=_core.safeTimeout(function(){if(_running&&_items.length>1){if(_visible===1&&_hoveredItem){cycleProducts()}else{hideProduct()}}},_timeout)}function hideProduct(){var hiddenItem=getRandomItem(_hiddenItems);_currentItem=getRandomItem(_visibleItems,_currentItem,_hoveredItem);var callback=function(){switchProducts(_currentItem,hiddenItem)};fadeOut(_currentItem,callback)}function switchProducts(visibleItem,hiddenItem){var visibleItemHref=visibleItem.href;var hiddenItemHref=hiddenItem.href;var visibleItemOnClick=visibleItem.onclick;var sourceItemOnClick=hiddenItem.onclick;var removedNodes=[];var removedNode;while(visibleItem.childNodes.length>=1){removedNode=visibleItem.removeChild(visibleItem.firstChild);removedNodes.push(removedNode)}visibleItem.href=hiddenItemHref;visibleItem.onclick=sourceItemOnClick;hiddenItem.href=visibleItemHref;hiddenItem.onclick=visibleItemOnClick;while(hiddenItem.childNodes.length>=1){removedNode=hiddenItem.removeChild(hiddenItem.firstChild);visibleItem.appendChild(removedNode)}for(var i in removedNodes){if(removedNodes.hasOwnProperty(i)){hiddenItem.appendChild(removedNodes[i])}}fadeIn(visibleItem,cycleProducts)}function fadeOut(elem,callback){fade(elem,-1,callback)}function fadeIn(elem,callback){fade(elem,1,callback)}function fade(elem,direction,callback){var opacity;var end;var timer;if(direction===1){opacity=0;end=100}else{opacity=100;end=0}timer=setInterval(function(){try{if(opacity===end){clearInterval(timer);if(typeof callback==='function'){callback()}if(opacity===100){elem.style.filter=''}}else{opacity=Math.round(((end-opacity)*0.05)+opacity)+(1*direction);elem.style.opacity=opacity/100;elem.style.filter='alpha(opacity='+opacity+')'}}catch(e){clearInterval(timer)}},_fadeInterval)}function getRandomItem(items,currentItem,hoveredItem){var index=0;var filteredItems;var item;if(items.length===1){filteredItems=items}else{filteredItems=[];for(var i=0,len=items.length;i<len;i++){item=items[i];if((hoveredItem&&item!==hoveredItem)||(!hoveredItem&&item!==currentItem)){filteredItems.push(item)}}index=Math.floor(Math.random()*filteredItems.length)}return filteredItems[index]}function listenToHover(items){var item;for(var i=0,len=items.length;i<len;i++){item=items[i];_listener[i]=pauseTimer(item);_fx.addEvent('mouseenter',item,_listener[i]);_fx.addEvent('mouseleave',item,unPauseTimer)}}function stopListeningToHover(items){var item;for(var i=0,len=items.length;i<len;i++){item=items[i];_fx.removeEvent('mouseenter',item,_listener[i]);_fx.removeEvent('mouseleave',item,unPauseTimer)}}function pauseTimer(item){return function(){_hoveredItem=item}}function unPauseTimer(){_hoveredItem=null}function modifyTimeout(timeout){var x=6;if(typeof _visible==='number'&&_visible<6){x=_visible}return timeout+(timeout*0.06*(6-x))}_timeout=modifyTimeout(_defaultTimeout);return{enable:function(){if(_running===null){_running=true;if(_items.length>_visible){listenToHover(_items);cycleProducts()}}},disable:function(){_running=false;stopListeningToHover(_items)}}},createCountDownElements:function(_id,_iframeDoc,_prop,_promo){var _ssp=sociomantic.sonar.ssp['google-ap'];var _core=_ssp.core;var _fx=_ssp.fx;var _am=_ssp.admedia[_id];var _productIndexes=_ssp.products_loaded[_id];var _running=null;var _enableDays;var _TIMEOUT=_fx.countDownTimeoutLength;var _timeoutID;var _parentElement;var _items;var _elementsWithCountdown={};function init(){var elementId;if(_promo){elementId=_ssp.admedia_identifier+_id+'-logo';_parentElement=_iframeDoc.getElementById(elementId);_items=null}else{elementId=_ssp.admedia_identifier+_id+'-products';_parentElement=_iframeDoc.getElementById(elementId);_items=_fx.getItems(_parentElement)}switch(_prop){default:case 0:_enableDays=false;break;case 1:_enableDays=true;break}addCountdownElements()}function addCountdownElements(){var index;if(_core.isArray(_am.ao)&&_core.isArray(_productIndexes)){if(!_promo){for(var i=0,len=_productIndexes.length;i<len;i++){index=_productIndexes[i];if(_am.ao[index-1]&&_am.ao[index-1].valid&&!_elementsWithCountdown[index]){_elementsWithCountdown[index]={element:getItem(index),valid:_am.ao[index-1].valid};buildCountDown(_elementsWithCountdown[index],_enableDays,false)}}}else{_elementsWithCountdown.logo={element:_parentElement,valid:_am.end_date};buildCountDown(_elementsWithCountdown.logo,_enableDays,true)}}}function getItem(index){var itemId=_ssp.admedia_identifier+_id+'-banner-item-'+index;for(var i=0,len=_items.length;i<len;i++){if(_items[i].id===itemId){return _items[i]}}}function buildCountDown(productObj,enableDays,promo){var baseName='fx';var container;if(promo){baseName+='-promo'}baseName+='-countdown';if(productObj.element){container=addElement(productObj.element,baseName,'');if(enableDays){productObj.days=addElement(container,baseName,'-days');addElement(container,baseName,'-days-to-hrs',':')}productObj.hours=addElement(container,baseName,'-hours');addElement(container,baseName,'-hrs-to-mins',':');productObj.mins=addElement(container,baseName,'-mins');addElement(container,baseName,'-mins-to-secs',':');productObj.secs=addElement(container,baseName,'-secs')}calculateCountDown(productObj.valid,productObj.secs,productObj.mins,productObj.hours,productObj.days)}function addElement(parent,baseName,classSuffix,separator){var element=_iframeDoc.createElement('span');var baseClass=baseName;if(separator){baseClass+='-separator';element.innerHTML=separator;_ssp.addCssClass(element,baseClass)}_ssp.addCssClass(element,baseClass+classSuffix);parent.appendChild(element);return element}function resumeCountDown(){_timeoutID=setInterval(function(){if(_running){countDown()}},_TIMEOUT)}function countDown(){var product;for(var i in _elementsWithCountdown){if(_core.hasProperty(_elementsWithCountdown,i)){product=_elementsWithCountdown[i];if(product.valid&&product.hours&&product.mins&&product.secs){calculateCountDown(product.valid,product.secs,product.mins,product.hours,product.days)}}}}function calculateCountDown(timestamp,secsElem,minsElem,hoursElem,daysElem){var currentTime=Math.round((new Date()).getTime()/1000);var timeLeft=parseInt(timestamp,10)-currentTime;var days=0;var hours=0;var mins=0;var secs=0;if(timeLeft>0){secs=Math.round(timeLeft%60);mins=Math.round(((timeLeft-secs)%3600)/60);if(daysElem){hours=Math.round(((timeLeft-mins*60-secs)%86400)/3600);days=Math.round((timeLeft-hours*3600-mins*60-secs)/86400);if(days<1){days=0;_ssp.addCssClass(daysElem,'metadata-zero-days')}}else{hours=Math.round((timeLeft-mins*60-secs)/3600)}if(hours<1){hours=0}if(mins<1){mins=0}if(secs<1){secs=0}}if(daysElem){updateCountDownElement(daysElem,days)}updateCountDownElement(hoursElem,hours);updateCountDownElement(minsElem,mins);updateCountDownElement(secsElem,secs)}function updateCountDownElement(htmlElement,value){value=value<10?'0'+value:value;htmlElement.innerHTML=value}init();return{enable:function(){if(!_promo){addCountdownElements()}if(_running===null){_running=true;resumeCountDown()}},disable:function(){_running=false;clearTimeout(_timeoutID)}}},createBillboard:function(_id,_iframeDoc,_prop){var _ssp=sociomantic.sonar.ssp['google-ap'];var _core=_ssp.core;var _fx=_ssp.fx;var _admedium=_ssp.admedia[_id];var _adId=_ssp.admedia_identifier+_id;var _bannerElem=_iframeDoc.getElementById(_adId+'-banner');var _billboardElem=_iframeDoc.createElement('a');var _slugElem=_iframeDoc.createElement('span');var _slugZIndexBack='-999';var _slugZIndexFront='999';var _tweenTimeout=200;var _zIndexBack='-1000';var _zIndexFront='1000';var _fadeInterval=_fx.fadeInterval;var _TIMEOUT;var _timeoutID;var _billboardFirst;var _elements=[];var _enabled=null;var _hovered=false;var _waiting=false;function init(){switch(_prop){default:case 0:_billboardFirst=false;_TIMEOUT=_fx.billboardTimeoutLength;break;case 1:_billboardFirst=true;_TIMEOUT=_fx.billboardFirstTimeoutLength;break}createBillboardElements(_billboardFirst);getNonBillboardElements()}function createBillboardElements(billboardFirst){var url=_admedium.logoUrl;var opacity;_billboardElem.onmouseout=function(){if(_hovered){_hovered=false;if(_waiting){hide()}}};_billboardElem.onmouseover=function(){_hovered=true};_ssp.addCssClass(_billboardElem,'billboard');_ssp.addCssClass(_slugElem,'slug');_ssp.createClickLink(_billboardElem,url,'billboard.createBillboardElements');if(billboardFirst){opacity=100;_billboardElem.style.zIndex=_zIndexFront;_slugElem.style.zIndex=_slugZIndexFront}else{opacity=0;_billboardElem.style.zIndex=_zIndexBack;_slugElem.style.zIndex=_slugZIndexBack}_billboardElem.style.opacity=opacity;_slugElem.style.opacity=opacity;_billboardElem.style.filter='alpha(opacity='+opacity+')';_slugElem.style.filter='alpha(opacity='+opacity+')';_bannerElem.appendChild(_billboardElem);_bannerElem.appendChild(_slugElem)}function getNonBillboardElements(){var visible=_admedium.visible;var products=_iframeDoc.getElementById(_adId+'-products');var logo=_iframeDoc.getElementById(_adId+'-logo');_elements=_fx.getItems(products,visible);if(logo){_elements.push(logo)}}function resumeBillboard(billboardFirst){clearTimeout(_timeoutID);_timeoutID=_core.safeTimeout(function(){if(billboardFirst){hide()}else{show()}},_TIMEOUT)}function hide(){if(_hovered){_waiting=true}else{_waiting=false;var callback=function(){_billboardElem.style.zIndex=_zIndexBack;_slugElem.style.zIndex=_slugZIndexBack;_core.safeTimeout(function(){show()},_TIMEOUT)};fade(_billboardElem,-1,callback);_core.safeTimeout(function(){fade(_slugElem,-1,'')},_tweenTimeout)}}function show(){if(_enabled&&!hasElementsHovered()){_billboardElem.style.zIndex=_zIndexFront;_slugElem.style.zIndex=_slugZIndexFront;var callback=function(){_core.safeTimeout(function(){hide()},_TIMEOUT)};_core.safeTimeout(function(){fade(_billboardElem,1,callback)},_tweenTimeout);fade(_slugElem,1,'')}else if(_enabled){_core.safeTimeout(show,_tweenTimeout)}}function hasElementsHovered(){var element;for(var i=0,len=_elements.length;i<len;i++){element=_elements[i];if(_ssp.getStyleValue(_id,element,'font-family')==='hover'){return true}}return false}function fade(elem,direction,callback){var opacity;var end;var timer;if(direction===1){opacity=0;end=100}else{opacity=100;end=0}timer=setInterval(function(){try{if(opacity===end){clearInterval(timer);if(typeof callback==='function'){callback()}if(opacity===100){elem.style.filter=''}}else{opacity=Math.round(((end-opacity)*0.05)+opacity)+(1*direction);elem.style.opacity=opacity/100;elem.style.filter='alpha(opacity='+opacity+')'}}catch(e){clearInterval(timer)}},_fadeInterval)}init();return{enable:function(){if(_enabled===null){_enabled=true;resumeBillboard(_billboardFirst)}},disable:function(){_enabled=false;clearTimeout(_timeoutID)}}},createCarousel:function(_id,_iframeDoc,_prop){var _ssp=sociomantic.sonar.ssp['google-ap'];var _fx=_ssp.fx;var _core=_ssp.core;var _admedium=_ssp.admedia[_id];var _visible=_admedium.visible;var _adId=_ssp.admedia_identifier+_id;var _BASE_CLASS='fx-carousel';var _CYCLING_DURATION=_fx.carouselCyclingTimeout;var _running=null;var _products;var _items;var _arrowButtons;var _customClassNames;var _intervalId;var _autoPlayListeners;var _disableAutoCarousel;var _currentIndex=0;var _baseClasses={first:_BASE_CLASS+'-first',middle:_BASE_CLASS+'-middle',last:_BASE_CLASS+'-last',fade:_BASE_CLASS+'-fade'};var _directions={prev:'-prev',next:'-next'};function init(){_products=_iframeDoc.getElementById(_adId+'-products');if(_products){_items=_fx.getItems(_products);_arrowButtons=createArrowElements(_products);_customClassNames=customizeClassNames();addClasses(_items,_customClassNames,'next');_autoPlayListeners=listenToAutoplay(_products,_items,_customClassNames);_disableAutoCarousel=stopListeningToAutoplay(_products,_autoPlayListeners);listen(_arrowButtons,_items,_customClassNames,_disableAutoCarousel)}}function createArrowElements(products){var arrowsSetup={arrowContainer:{element:'div',name:_BASE_CLASS+'-arrows'},prevArrow:{element:'span',name:_BASE_CLASS+'-prev'},nextArrow:{element:'span',name:_BASE_CLASS+'-next'}};var arrows={};var container;var el;var info;for(var arrowName in arrowsSetup){if(_core.hasProperty(arrowsSetup,arrowName)){info=arrowsSetup[arrowName];el=_iframeDoc.createElement(info.element);el.className=info.name;arrows[arrowName]=el}}container=arrows.arrowContainer;container.id=_adId+'-'+arrowsSetup.arrowContainer.name;container.appendChild(arrows.prevArrow);container.appendChild(arrows.nextArrow);products.appendChild(container);return{prev:arrows.prevArrow,next:arrows.nextArrow}}function customizeClassNames(){var customClassNames={prev:{},next:{}};for(var name in _baseClasses){if(_core.hasProperty(_baseClasses,name)){for(var direction in customClassNames){if(_core.hasProperty(customClassNames,direction)){var names=_baseClasses[name]+_directions[direction];if(name==='middle'&&_visible>2){names=getCustomizedMiddleClassNames(names)}customClassNames[direction][name]=names}}}}return customClassNames}function getCustomizedMiddleClassNames(names){var middleItems={};for(var i=1;i<_visible;i++){middleItems[i]=names+'-'+i}middleItems.base=names;return middleItems}function getNewIndex(index,items){var length=items.length;var newIndex=index;if(index<0){newIndex=length-1}if(newIndex===length){newIndex=0}if(newIndex>length){newIndex-=length}return newIndex}function addClasses(items,customClassNames,direction){var fade;var cap=_visible-1;var first=_currentIndex;var name=customClassNames[direction];var last;var middle;var i;switch(direction){case'prev':fade=getNewIndex(_currentIndex+_visible,items);break;case'next':fade=getNewIndex(_currentIndex-1,items);break}if(_visible>1){last=getNewIndex(_currentIndex+cap,items);_ssp.addCssClass(items[last],name.last);if(_visible>2){for(i=1;i<cap;i++){middle=getNewIndex(_currentIndex+i,items);_ssp.addCssClass(items[middle],name.middle.base);_ssp.addCssClass(items[middle],name.middle[i])}}}_ssp.addCssClass(items[fade],name.fade);_ssp.addCssClass(items[first],name.first)}function resetClasses(items,customClassNames){for(var i=0;i<items.length;i++){removeClasses(items[i],customClassNames)}}function removeClasses(element,classNames){for(var name in classNames){if(_core.hasProperty(classNames,name)){if(typeof classNames[name]==='object'){removeClasses(element,classNames[name])}else if(typeof classNames[name]==='string'){_ssp.removeCssClass(element,classNames[name])}}}}function goTo(index,items,customClassNames,direction){_currentIndex=getNewIndex(index,items);resetClasses(items,customClassNames);addClasses(items,customClassNames,direction)}function goToPrev(items,customClassNames){return function(){goTo(_currentIndex-1,items,customClassNames,'prev')}}function goToNext(items,customClassNames){return function(){goTo(_currentIndex+1,items,customClassNames,'next')}}function listen(arrowButtons,items,customClassNames,disableAutoCarousel){var next=goToNext(items,customClassNames);var prev=goToPrev(items,customClassNames);_fx.addEvent('click',arrowButtons.next,function(){disableAutoCarousel();next()});_fx.addEvent('click',arrowButtons.prev,function(){disableAutoCarousel();prev()})}function listenToAutoplay(products,items,customClassNames){var start=startAutoCarousel(items,customClassNames,_CYCLING_DURATION);return{start:start,stop:stopAutoCarousel}}function startAutoCarousel(items,customClassNames,timing){return function(){stopAutoCarousel();_intervalId=setInterval(goToNext(items,customClassNames),timing)}}function stopListeningToAutoplay(products,callbacks){var first=true;return function(){if(callbacks&&first){stopAutoCarousel();_fx.removeEvent('mouseleave',products,callbacks.start);_fx.removeEvent('mouseenter',products,callbacks.stop);first=false}}}function stopAutoCarousel(){if(typeof _intervalId==='number'){clearInterval(_intervalId);_running=false}}init();return{enable:function(){if(_prop===0&&_running===null){_fx.addEvent('mouseleave',_products,_autoPlayListeners.start);_fx.addEvent('mouseenter',_products,_autoPlayListeners.stop);_autoPlayListeners.start();_running=true}},disable:_disableAutoCarousel}},startAutoHover:function(_id,_iframeDoc){var ssp=sociomantic.sonar.ssp['google-ap'];var fx=ssp.fx;var admedium=ssp.admedia[_id];var visible=admedium.visible;var ad_id=ssp.admedia_identifier+_id;var HOVER_CLASS='fx-hover';var INTERVAL_LENGTH=fx.autoHoverCyclingTimeout;var products=_iframeDoc.getElementById(ad_id+'-products');var items=fx.getItems(products);var _running=null;var _autoPlayListener;var visibleItems;var currentItem;var nextItem;var intervalId;function getVisibleItems(items){return items.slice(0,visible)}function getNextHoveredItem(items,currentItem){var filteredItems=[];var item;var index;for(var i=0,len=items.length;i<len;i++){item=items[i];if(item!==currentItem){filteredItems.push(item)}}index=Math.floor(Math.random()*filteredItems.length);return filteredItems[index]}function addHoverClass(item){ssp.addCssClass(item,HOVER_CLASS)}function removeHoverClass(item){ssp.removeCssClass(item,HOVER_CLASS)}function startCycling(items){clearInterval(intervalId);intervalId=setInterval(function(){visibleItems=getVisibleItems(items);nextItem=getNextHoveredItem(visibleItems,currentItem);removeHoverClass(currentItem);addHoverClass(nextItem);currentItem=nextItem},INTERVAL_LENGTH)}function pauseTimer(){removeHoverClass(currentItem);clearInterval(intervalId)}function resumeTimer(items){return function resumeTimerCallback(){startCycling(items)}}function listenToPauseTimer(items){var item;var callback=resumeTimer(items);for(var i=0,len=items.length;i<len;i++){item=items[i];fx.addEvent('mouseenter',item,pauseTimer);fx.addEvent('mouseleave',item,callback)}return callback}function stopListeningToPauseTimer(items,callback){var item;for(var i=0,len=items.length;i<len;i++){item=items[i];fx.removeEvent('mouseenter',item,pauseTimer);fx.removeEvent('mouseleave',item,callback)}}return{enable:function(){if(_running===null){_running=true;_autoPlayListener=listenToPauseTimer(items);startCycling(items)}},disable:function(){if(_autoPlayListener){stopListeningToPauseTimer(items,_autoPlayListener)}clearInterval(intervalId);removeHoverClass(currentItem);_running=false}}}};sociomantic.sonar.ssp['google-ap'].core.location.sonar='ap-sonar.sociomantic.com/js/2010-07-01/';sociomantic.sonar.ssp['google-ap'].core.location.debug='ap-dbug.sociomantic.com/ssp/debug.gif?';sociomantic.sonar.ssp['google-ap'].core.location.trace='ap-dbug.sociomantic.com/ssp/trace.gif?';sociomantic.sonar.ssp['google-ap'].targeting_hosts=['ap-jet-01.sociomantic.com/js/2010-07-01/','ap-jet-02.sociomantic.com/js/2010-07-01/'];sociomantic.sonar.ssp['google-ap'].static_host='ap-static';sociomantic.sonar.ssp['google-ap'].static_servers=[1,2,3,4];sociomantic.sonar.ssp['google-ap'].admedium_request_timeout_length=2000;sociomantic.sonar.ssp['google-ap'].view_request_timeout_length=4000;sociomantic.sonar.ssp['google-ap'].redisplayBanner=function(id){var ssp=sociomantic.sonar.ssp['google-ap'];ssp.clearBanner(id);ssp.displayBanner(id,'onloadBannerIframe')};sociomantic.sonar.ssp['google-ap'].displayDefaultBanner=function(id){var u='undefined';var ssp=sociomantic.sonar.ssp['google-ap'];var admedium=ssp.admedia[id];var ao={'1':[{id:'38056',fsize:1,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'3':[{id:'38057',fsize:3,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'4':[{id:'38058',fsize:4,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'5':[{id:'38059',fsize:5,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'8':[{id:'38060',fsize:8,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'9':[{id:'38061',fsize:9,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'10':[{id:'38062',fsize:10,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'13':[{id:'38063',fsize:13,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'18':[{id:'38064',fsize:18,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'60':[{id:'38065',fsize:60,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878290,ftype:1}],'62':[],'63':[],'67':[{id:'38066',fsize:67,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878491,ftype:1}],'68':[{id:'38067',fsize:68,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878491,ftype:1}],'69':[{id:'38068',fsize:69,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413878491,ftype:1}],'70':[{id:'38069',fsize:70,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413889384,ftype:1}],'71':[{id:'44052',fsize:71,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en',currency:'AED',price:'0.00',sprice:'0.00',createtime:1449246121,ftype:1}],'84':[{id:'36500',fsize:84,type:1,url:'http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-programmatic&utm_term=EN',currency:'AED',price:'0.00',sprice:'0.00',createtime:1413889384,ftype:1}]};admedium.ao=ao[admedium.size];admedium.aaid_fallback=typeof ssp.admedia[id]['aaid']!==u?ssp.admedia[id]['aaid']:'13226473329179094974';admedium.aaid='13226473329179094974';admedium.cid_fallback=1735;admedium.cid_failed=typeof admedium.cid!==u?admedium.cid:1735;admedium.cid=typeof admedium.cid!==u?admedium.cid:1735;admedium.gid=typeof admedium.gid!==u?admedium.gid:15006;admedium.gid_fallback=15006;admedium.c2a='';admedium.ccs=0;admedium.cfmt=0;admedium.url='http://www.sociomantic.com/solutions/?utm_source=rtb&utm_medium=display&utm_campaign=retargeting-individual&utm_term=ap-en';admedium.click_code='';admedium.view_url='';admedium.visible=1;ssp.redisplayBanner(id)};sociomantic.sonar.ssp['google-ap'].fallback=sociomantic.sonar.ssp['google-ap'].displayDefaultBanner;sociomantic.sonar.ssp['google-ap'].fx.runtime_max=28500;sociomantic.sonar.ssp['google-ap'].allowSetCookie=false;try{sociomantic.sonar.enable_callbacks.push(sociomantic.sonar['ssp']['google-ap'].enable);sociomantic.enable()}catch(e){sociomantic.sonar['ssp']['google-ap'].core.reportError(e,'initial_sociomantic_enable')}