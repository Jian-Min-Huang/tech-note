function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function pvFormatter(a){return a>=1e6?'<div class="pvbox mformat">'+(a/1e6).toFixed(1).replace(/\.0$/,"")+"m</div>":a>=1e3?'<div class="pvbox kformat">'+(a/1e3).toFixed(0).replace(/\.0$/,"")+"k</div>":'<div class="pvbox kformat">'+a.toFixed(0).replace(/\.0$/,"")+"</div>"}function pvFormatter2(a){return a>=1e3?'<div class="pvbox kformat">+'+(a/1e3).toFixed(1).replace(/\.0$/,"")+"k</div>":'<div class="pvbox kformat">+'+a.toFixed(0).replace(/\.0$/,"")+"</div>"}function pctFormatter(a,b){return a>=20?'<div class="pvbox mformat">'+a.toFixed(1).replace(/\.0$/,"")+"% +"+numberWithCommas(b)+"</div>":'<div class="pvbox kformat">'+a.toFixed(1).replace(/\.0$/,"")+"% +"+numberWithCommas(b)+"</div>"}function getRandomIndex(a,b,c){var d=[],e=[],f=0;for(i=0;f<a;i++){var g=Math.floor(Math.random()*(c-b))+b;d[g]||(d[g]=g,e[f++]=g)}return e}function mkyong_loadTopArticleBelowAuthor(){var a=(new Date).toISOString().slice(0,10);$.getJSON("/json/top.json",{_:a},function(a){for(var b='<div class="pvbox-container">',c=getRandomIndex(20,0,a.length),d=0;d<c.length;)index=c[d++],title=a[index].title,url=a[index].url,pv=a[index].pv,b+='<div class="row row-margin-bottom">',b+='<div class="col-md-1">'+pvFormatter(pv)+"</div>",b+='<div class="col-md-6 no-left-right-padding"><a href="'+url+'">'+title+"</a></div>",index=c[d++],title=a[index].title,url=a[index].url,pv=a[index].pv,b+='<div class="col-md-1">'+pvFormatter(pv)+"</div>",b+='<div class="col-md-7 no-left-right-padding"><a href="'+url+'">'+title+"</a></div>",b+="</div>";b+="</div>",$("#top-articles-below-author").html(b).hide().fadeIn(500)})}function mkyong_loadRelatedPost(a){var b=(new Date).toISOString().slice(0,10),c="";$.getJSON("/json/related/"+a+".json",{_:b},function(a){for(var b=0;b<a.length;b++)title=a[b].title,url=a[b].url,pv=a[b].pv,c+='<div class="row row-margin-bottom">',c+='<div class="col-xs-2 col-md-2">'+pvFormatter(pv)+"</div>",c+='<div class="col-xs-13 col-md-13 no-left-right-padding"><a href="'+url+'">'+title+"</a></div>",c+="</div>";$("#related-post").html(c).hide().fadeIn(500)})}function mkyong_loadSidebarRisingPost(){var a=(new Date).toISOString().slice(0,10);$.getJSON("/json/topdiff-all.json",{_:a},function(a){var b=mkyong_getSidebarRisingPostHtml(a["0k"]);$("#sidebar-rising-post-0k").html(b).hide().fadeIn(500);var c=mkyong_getSidebarRisingPostHtml(a["10k"]);$("#sidebar-rising-post-10k").html(c).hide().fadeIn(500);var d=mkyong_getSidebarRisingPostHtml(a["100k"]);$("#sidebar-rising-post-100k").html(d).hide().fadeIn(500)})}function mkyong_getSidebarRisingPostHtml(a){for(var b='<div class="pvbox-container">',c=0;c<a.length;c++)title=a[c].title,url=a[c].url,pv=a[c].pv,diff=a[c].diff,b+='<div class="row row-margin-bottom">',b+='<div class="col-xs-2 col-md-3">'+pvFormatter2(diff)+"</div>",b+='<div class="col-xs-13 col-md-12 no-left-right-padding"><a href="'+url+'">'+title+"</a></div>",b+="</div>";return b+="</div>"}jQuery(document).ready(function(){mkyong_loadSidebarRisingPost(),mkyong_loadTopArticleBelowAuthor();var a=jQuery("#mkyong-postId").val();""!=a&&mkyong_loadRelatedPost(a)});