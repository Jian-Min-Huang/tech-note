if (self.CavalryLogger) { CavalryLogger.start_js(["yVjUB"]); }

__d("ChannelConstants",[],(function a(b,c,d,e,f,g){var h="channel/",i={CHANNEL_MANUAL_RECONNECT_DEFER_MSEC:2e3,MUTE_WARNING_TIME_MSEC:25e3,WARNING_COUNTDOWN_THRESHOLD_MSEC:15e3,ON_SHUTDOWN:h+"shutdown",ON_INVALID_HISTORY:h+"invalid_history",ON_CONFIG:h+"config",ON_ENTER_STATE:h+"enter_state",ON_EXIT_STATE:h+"exit_state",ATTEMPT_RECONNECT:h+"attempt_reconnect",RTI_SESSION:h+"new_rti_address",GET_RTI_SESSION_REQUEST:h+"rti_session_request",SKYWALKER:h+"skywalker",CHANNEL_ESTABLISHED:h+"established",OK:"ok",ERROR:"error",ERROR_MAX:"error_max",ERROR_MISSING:"error_missing",ERROR_MSG_TYPE:"error_msg_type",ERROR_SHUTDOWN:"error_shutdown",ERROR_STALE:"error_stale",SYS_OWNER:"sys_owner",SYS_NONOWNER:"sys_nonowner",SYS_ONLINE:"sys_online",SYS_OFFLINE:"sys_offline",SYS_TIMETRAVEL:"sys_timetravel",HINT_AUTH:"shutdown auth",HINT_CONN:"shutdown conn",HINT_DISABLED:"shutdown disabled",HINT_INVALID_STATE:"shutdown invalid state",HINT_MAINT:"shutdown maint",HINT_UNSUPPORTED:"shutdown unsupported",reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,CAPABILITY_VOIP_INTEROP:8,FANTAIL_SERVICE:"WebchatClient",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",FAKE_DFF:"fake_dff",THROTTLED:h+"throttled",JUMPSTART:h+"jumpstart",ENTITY_PRESENCE_ACTIVE_PING:"entity_presence/active_ping",getArbiterType:function j(k){return h+"message:"+k},getSkywalkerArbiterType:function j(k){return h+"skywalker:"+k}};f.exports=i}),18);
__d("CurrentLocale",["LocaleInitialData"],(function a(b,c,d,e,f,g){var h={};h.get=function(){return c("LocaleInitialData").locale};f.exports=h}),null);
__d("SystemEvents",["ArbiterMixin","ErrorUtils","SystemEventsInitialData","UserAgent_DEPRECATED","TimeSlice","mixin","setIntervalAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=1e3;h=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function k(){i.constructor.call(this);this.USER="SystemEvents/USER";this.ONLINE="SystemEvents/ONLINE";this.TIME_TRAVEL="SystemEvents/TIME_TRAVEL";this.$SystemEvents1=c("SystemEventsInitialData").ORIGINAL_USER_ID;this.$SystemEvents2=this.$SystemEvents1;this.$SystemEvents3=navigator.onLine;this.$SystemEvents4=Date.now();this.$SystemEvents5()}k.prototype.isPageOwner=function(l){return(l||this.$SystemEvents6())==this.$SystemEvents1};k.prototype.isOnline=function(){return!!(c("UserAgent_DEPRECATED").chrome()||this.$SystemEvents3)};k.prototype.checkTimeTravel=function(){var l=Date.now(),m=l-this.$SystemEvents4;this.$SystemEvents4=l;if(m<0||m>1e4)this.inform(this.TIME_TRAVEL,m)};k.prototype.$SystemEvents5=function(){this.$SystemEvents7();this.$SystemEvents8();this.$SystemEvents9();this.$SystemEvents10()};k.prototype.$SystemEvents7=function(){__p&&__p();var l=c("TimeSlice").guard(function(){if(!this.$SystemEvents3){this.$SystemEvents3=true;this.inform(this.ONLINE,this.$SystemEvents3)}}.bind(this),"SystemEvents onOnline"),m=c("TimeSlice").guard(function(){if(this.$SystemEvents3){this.$SystemEvents3=false;this.inform(this.ONLINE,this.$SystemEvents3)}}.bind(this),"SystemEvents onOffline");if(c("UserAgent_DEPRECATED").ie())if(c("UserAgent_DEPRECATED").ie()>=11){window.addEventListener("online",l,false);window.addEventListener("offline",m,false)}else if(c("UserAgent_DEPRECATED").ie()>=8)window.attachEvent("onload",function(){document.body.ononline=l;document.body.onoffline=m});else c("setIntervalAcrossTransitions")(function(){(navigator.onLine?l:m)()},j);else if(window.addEventListener){window.addEventListener("online",l,false);window.addEventListener("offline",m,false)}};k.prototype.$SystemEvents8=function(){c("setIntervalAcrossTransitions")(function(){var l=this.$SystemEvents6();if(this.$SystemEvents2!=l){this.$SystemEvents2=l;this.inform(this.USER,l)}}.bind(this),j)};k.prototype.$SystemEvents9=function(){c("setIntervalAcrossTransitions")(this.checkTimeTravel.bind(this),j)};k.prototype.$SystemEvents10=function(){c("setIntervalAcrossTransitions")(function(){if(window.onerror!=c("ErrorUtils").onerror)window.onerror=c("ErrorUtils").onerror},j)};k.prototype.$SystemEvents6=function(){return/c_user=(\d+)/.test(document.cookie)&&RegExp.$1||"0"};f.exports=new k()}),19);
__d("UserActivity",["Arbiter","Event"],(function a(b,c,d,e,f,g){__p&&__p();var h=5e3,i=500,j=-5,k=Date.now(),l=k,m=false,n=Date.now(),o=document.hasFocus?document.hasFocus():true,p=0,q=Date.now(),r=-1,s=-1,t={EVENT_INTERVAL_MS:i,subscribeOnce:function x(y){var z=t.subscribe(function(A,B){t.unsubscribe(z);y(B)});return z},subscribe:function x(y){return c("Arbiter").subscribe("useractivity/activity",y)},unsubscribe:function x(y){y.unsubscribe()},isActive:function x(y){return new Date()-k<(y||h)},isOnTab:function x(){return o},hasBeenInactive:function x(){return m},resetActiveStatus:function x(){o=true;m=false},getLastInActiveEnds:function x(){return n},getLastActive:function x(){return k},setIdleTime:function x(y){p=y},getLastLeaveTime:function x(){return q},getLastInformTime:function x(){return l},reset:function x(){k=Date.now();l=k;m=false;n=Date.now();o=document.hasFocus?document.hasFocus():true;p=0;q=Date.now();r=-1;s=-1}};function u(event){__p&&__p();var x=b.MouseEvent;if(x&&event instanceof x){if(event.pageX==r&&event.pageY==s&&event.type!="click")return;r=event.pageX;s=event.pageY}k=Date.now();var y=k-l;if(y>i){l=k;if(!o)q=k;if(y>=(p||h)){m=true;n=k}c("Arbiter").inform("useractivity/activity",{event:event,idleness:y,last_inform:l})}else if(y<j)l=k}function v(event){o=true;n=Date.now();u(event)}function w(event){o=false;m=true;q=Date.now()}c("Event").listen(window,"scroll",u);c("Event").listen(window,"focus",v);c("Event").listen(window,"blur",w);c("Event").listen(document.documentElement,{DOMMouseScroll:u,mousewheel:u,keydown:u,mouseover:u,mousemove:u,click:u},undefined,undefined,{passive:true});c("Arbiter").subscribe("Event/stop",function(x,y){u(y.event)});f.exports=t}),null);
__d("RTISubscriptionManager",["invariant","Arbiter","ChannelConstants","CurrentLocale","CurrentUser","ErrorUtils","RTIFriendFanoutConfig","RTISubscriptionManagerConfig","Run","SystemEvents","UserActivity","idx","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={SUBSCRIBE:"s",UNSUBSCRIBE:"u"},j=300,k=20;function l(t){if(m(t)===false)return null;return t.split("/",2)[1]}function m(t){return t.startsWith("gqls/")}var n=void 0;function o(){if(n===undefined){var t,u=(t=c("RTISubscriptionManagerConfig"))!=null?(t=t.config)!=null?t.www_unevictable_topic_regexes:t:t;n=u?u.map(function(v){return new RegExp(v)}):null}return n}function p(t){var n=o();return n==null||n.every(function(u){return u.test(t)===false})}function q(){__p&&__p();this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=[];this.$RTISubscriptionManager3={};this.$RTISubscriptionManager4=null;this.$RTISubscriptionManager5;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=false;this.$RTISubscriptionManager8=false;this.$RTISubscriptionManager9=true;this.$RTISubscriptionManager10=document.readyState==="complete";c("Run").onAfterLoad(function(){this.$RTISubscriptionManager10=true;this.flush()}.bind(this));this.$RTISubscriptionManager11=null;c("Arbiter").subscribe(c("ChannelConstants").ON_ENTER_STATE,function(t,u){__p&&__p();if(!this.$RTISubscriptionManager11)return;var v=/pull/.test(u.state);if(!this.$RTISubscriptionManager4&&v){this.$RTISubscriptionManager5=true;if(!this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=true;c("setTimeoutAcrossTransitions")(function(){this.$RTISubscriptionManager4=this.$RTISubscriptionManager5;this.$RTISubscriptionManager6=false;if(this.$RTISubscriptionManager4)this.flush()}.bind(this),q.PULL_HINT_DELAY_MILLIS)}}else if(!v){this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager4=false}else if(v){this.$RTISubscriptionManager4=true;this.flush()}}.bind(this));c("SystemEvents").subscribe(c("SystemEvents").ONLINE,function(t,u){if(!u){this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false}}.bind(this));c("SystemEvents").subscribe(c("SystemEvents").USER,function(t,u){this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=[];this.$RTISubscriptionManager3={}}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").RTI_SESSION,function(t,u){if(!this.$RTISubscriptionManager11&&u)this.deleteSubscriptions(function(v){return v.getState()===i.UNSUBSCRIBE});this.$RTISubscriptionManager11=u;if(this.$RTISubscriptionManager11){this.$RTISubscriptionManager4=true;this.flush()}}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").ON_INVALID_HISTORY,function(){this.$RTISubscriptionManager4=true;this.forEachSubscription(function(t,u){u.setDirty(true)});this.getCurrentSession()}.bind(this));this.getCurrentSession();c("Arbiter").subscribe(c("ChannelConstants").SKYWALKER,function(t,u){var v=u.obj.topic,w={};if(u.obj.payloads===undefined)w.obj=[u.obj.payload];else w.obj=u.obj.payloads;c("Arbiter").inform(c("ChannelConstants").getSkywalkerArbiterType(v),w)})}q.prototype.subscribe=function(t,u,v,w,x){var y=this.subscribeInternal(t,u,v,w,x),z=t.substr(0,t.lastIndexOf("/"));if(!c("RTIFriendFanoutConfig").passFriendFanoutSubscribeGK||c("RTIFriendFanoutConfig").topicPrefixes.indexOf(z)<0)return y;var A=t+"_user_id_"+c("CurrentUser").getID();this.subscribeInternal(A,u,v);return y};q.prototype.subscribeInternal=function(t,u,v,w,x){__p&&__p();var y,z=this;t||h(0);u||h(0);var A=this.getMaxSubscriptions(),B=Object.keys(this.$RTISubscriptionManager1).length-Object.keys(this.$RTISubscriptionManager3).length;if(B>=A){var y=function(){__p&&__p();var I=z.getEvictionBatchSize();if(I===0)return{v:null};var J=0;z.$RTISubscriptionManager2=z.$RTISubscriptionManager2.filter(function(t){__p&&__p();if(!this.isSubscribed(t)||this.$RTISubscriptionManager1[t].getState()!==i.SUBSCRIBE)return false;if(J===0&&B<A)return true;if(J<I)if(p(t)){this.unsubscribe(t);J++;B--;if(J>=I)J=0;return false}return true}.bind(z));if(z.$RTISubscriptionManager2.length===0&&B>=A)return{v:null}}();if(typeof y==="object")return y.v}v=v||{};v.locale=c("CurrentLocale").get();if(c("RTISubscriptionManagerConfig").assimilator){v.tierType=c("RTISubscriptionManagerConfig").assimilator.tierType;v.sandboxIP=c("RTISubscriptionManagerConfig").assimilator.sandboxIP;v.sandboxPort=c("RTISubscriptionManagerConfig").assimilator.sandboxPort;v.sandboxHostname=c("RTISubscriptionManagerConfig").assimilator.sandboxHostname}var C=new s(t,u,v,w,x);if(this.isSubscribed(t)){var D=this.$RTISubscriptionManager1[t],E=JSON.stringify(C.getContext())===JSON.stringify(D.getContext());if(t in this.$RTISubscriptionManager3)if(E){C.setDirty(false);C.setSent(true);delete this.$RTISubscriptionManager3[t]}else this.flush();else{if(D&&D.getArbiterToken()){c("Arbiter").unsubscribe(D.getArbiterToken());D.setArbiterToken(null)}C.setDirty(D.isDirty());C.setSent(D.isSent());m(t)}}var F=new r(C);this.$RTISubscriptionManager1[t]=C;this.$RTISubscriptionManager2.push(t);var G=c("ChannelConstants").getSkywalkerArbiterType(t),H=c("Arbiter").subscribe(G,function(I,event){var J=event.obj.length;for(var K=0;K<J;K++){var L={topic:t,payload:event.obj[K]};c("ErrorUtils").applyWithGuard(u,this,[L])}this.$RTISubscriptionManager12()}.bind(this));C.setArbiterToken(H);this.flush();return F};q.prototype.unsubscribe=function(t){__p&&__p();t||h(0);if(t in this.$RTISubscriptionManager1){var u=this.$RTISubscriptionManager1[t];u.prepareUnsubscribe();if(u.getArbiterToken()){c("Arbiter").unsubscribe(u.getArbiterToken());u.setArbiterToken(null)}this.$RTISubscriptionManager3[t]=true}};q.prototype.unsubscribeAll=function(){if(this.isReady()){var t={reset:"t"};this.$RTISubscriptionManager11.issueRequest("/sub",t,{},function(u){})}};q.prototype.activePing=function(){if(this.isReady()){var t={state:"active"};this.$RTISubscriptionManager11.issueRequest("/active_ping",t,{},function(u){})}};q.prototype.flush=function(){__p&&__p();var t,u=this;if(this.isReady()&&!this.$RTISubscriptionManager7){var v;(function(){__p&&__p();u.$RTISubscriptionManager7=true;u.$RTISubscriptionManager8=false;var w=[],x={},y=false;u.forEachSubscription(function(C,D){__p&&__p();if(D.isDirty()){var E="subscriptions",F=x[E];if(!F){F=[];x[E]=F}w.push(D);D.setDirty(false);D.setSent(false);var G={topic:D.getTopic(),state:D.getState(),context:D.getContext()};F.push(G)}else y=true});if(!y&&x.subscriptions&&x.subscriptions.length>0){var z=[];for(v=0;v<x.subscriptions.length;v++)if(x.subscriptions[v].state!==i.UNSUBSCRIBE)z.push(x.subscriptions[v]);x.subscriptions=z;u.$RTISubscriptionManager9=true}var A=function(C){__p&&__p();var D=C.data!=null;if(this.$RTISubscriptionManager9&&D)this.$RTISubscriptionManager9=false;for(var E=0;E<w.length;E++){var F=w[E];F.setSent(D);F.setDirty(!D);if(F.getState()===i.SUBSCRIBE){var G=F.getSubscribeCallback();if(G!==null)c("ErrorUtils").applyWithGuard(G,this,[C])}else if(D)delete this.$RTISubscriptionManager3[F.getTopic()]}this.deleteSubscriptions(function(F){return F.getState()===i.UNSUBSCRIBE&&F.isSent()});this.$RTISubscriptionManager7=false;if(this.$RTISubscriptionManager8){this.$RTISubscriptionManager8=false;this.flush()}}.bind(u);if(Object.keys(x).length>0){var B={};if(u.$RTISubscriptionManager9)B.reset="t";u.$RTISubscriptionManager11.issueRequest("/sub",B,x,A)}else u.$RTISubscriptionManager7=false})()}else{this.$RTISubscriptionManager8=true;if(this.$RTISubscriptionManager11===null)this.getCurrentSession()}};q.prototype.deleteSubscriptions=function(t){t||h(0);var u=[];this.forEachSubscription(function(w,x){if(t.apply(this,[x]))u.push(w)});for(var v=0;v<u.length;v++)delete this.$RTISubscriptionManager1[u[v]]};q.prototype.forEachSubscription=function(t){t||h(0);for(var u in this.$RTISubscriptionManager1)if(Object.prototype.hasOwnProperty.call(this.$RTISubscriptionManager1,u))t.apply(this,[u,this.$RTISubscriptionManager1[u]])};q.prototype.getSubscriptions=function(){var t=[];this.forEachSubscription(function(u,v){t.push(v)});return t};q.prototype.isUnflushedUnsubscribe=function(t){t||h(0);return t in this.$RTISubscriptionManager3};q.prototype.isSubscribed=function(t){t||h(0);return t in this.$RTISubscriptionManager1};q.prototype.isReady=function(){if(this.$RTISubscriptionManager11&&this.$RTISubscriptionManager4!==null&&this.$RTISubscriptionManager4&&this.$RTISubscriptionManager10)return true;return false};q.prototype.getCurrentSession=function(){c("Arbiter").inform(c("ChannelConstants").GET_RTI_SESSION_REQUEST)};q.prototype.getEvictionBatchSize=function(){if(c("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(c("RTISubscriptionManagerConfig").config,"eviction_batch_size"))return c("RTISubscriptionManagerConfig").config.eviction_batch_size;else return k};q.prototype.getMaxSubscriptions=function(){if(c("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(c("RTISubscriptionManagerConfig").config,"max_subscriptions"))return c("RTISubscriptionManagerConfig").config.max_subscriptions;else return j};q.prototype.$RTISubscriptionManager12=function(){__p&&__p();var t=null,u=null;if(c("RTISubscriptionManagerConfig").config){t=c("RTISubscriptionManagerConfig").config.www_idle_unsubscribe_min_time_ms;u=c("RTISubscriptionManagerConfig").config.www_idle_unsubscribe_times_ms}if(!t||!u)return;if(c("UserActivity").isActive(t))return;this.forEachSubscription(function(v,w){var x=w.getTopic(),y=false,z=l(x);if(z!==null&&p(x))if(u!==null&&typeof u==="object"&&u[z]!==undefined)y=!c("UserActivity").isActive(u[z]);else y=false;if(y)this.unsubscribe(x)}.bind(this))};function r(t){this.$SubscriptionToken1=t}r.prototype.getContext=function(){return this.$SubscriptionToken1.getContext()};r.prototype.unsubscribe=function(){var t=this.$SubscriptionToken1.getUnsubscribeHook();if(t)t();var u=this.$SubscriptionToken1.getTopic();q.unsubscribe(u);var v=u.substr(0,u.lastIndexOf("/"));if(!c("RTIFriendFanoutConfig").passFriendFanoutSubscribeGK||c("RTIFriendFanoutConfig").topicPrefixes.indexOf(v)<0)return;q.unsubscribe(u+"_user_id_"+c("CurrentUser").getID())};r.prototype.fastUnsubscribe=function(){this.unsubscribe();q.flush()};function s(t,u,v,w,x){__p&&__p();this.$SubscriptionData1=t;this.$SubscriptionData2=u;this.$SubscriptionData3=true;this.$SubscriptionData4=false;this.$SubscriptionData5=i.SUBSCRIBE;this.$SubscriptionData6=null;this.$SubscriptionData7=Date.now();if(v)this.$SubscriptionData8=v;else this.$SubscriptionData8={};this.$SubscriptionData9=w?w:null;this.$SubscriptionData10=x?x:null}s.prototype.getCreatedTime=function(){return this.$SubscriptionData7};s.prototype.getTopic=function(){return this.$SubscriptionData1};s.prototype.getListener=function(){return this.$SubscriptionData2};s.prototype.getSubscribeCallback=function(){return this.$SubscriptionData9};s.prototype.getUnsubscribeHook=function(){return this.$SubscriptionData10};s.prototype.getArbiterToken=function(){return this.$SubscriptionData6};s.prototype.setArbiterToken=function(t){this.$SubscriptionData6=t};s.prototype.isDirty=function(){return this.$SubscriptionData3};s.prototype.setDirty=function(t){this.$SubscriptionData3=t};s.prototype.getState=function(){return this.$SubscriptionData5};s.prototype.setState=function(t){this.$SubscriptionData5=t};s.prototype.getContext=function(){return this.$SubscriptionData8};s.prototype.isSent=function(){return this.$SubscriptionData4};s.prototype.setSent=function(t){this.$SubscriptionData4=t};s.prototype.prepareUnsubscribe=function(){this.setState(i.UNSUBSCRIBE);this.setDirty(true);this.setSent(false);this.$SubscriptionData2=null};c("Run").onUnload(function(){q.unsubscribeAll()});q.PULL_HINT_DELAY_MILLIS=1e4;Object.keys(q.prototype).forEach(function(t){q[t]=function(){var u=q;return q.prototype[t].apply(u,arguments)}});q.call(q);f.exports=q}),null);