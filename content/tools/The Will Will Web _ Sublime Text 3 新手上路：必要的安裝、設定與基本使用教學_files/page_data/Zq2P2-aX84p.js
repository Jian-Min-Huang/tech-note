if (self.CavalryLogger) { CavalryLogger.start_js(["l1r2B"]); }

__d("VideoBroadcastStatus",[],(function a(b,c,d,e,f,g){f.exports={PREVIEW:"PREVIEW",LIVE:"LIVE",LIVE_STOPPED:"LIVE_STOPPED",VOD_READY:"VOD_READY",SEAL_STARTED:"SEAL_STARTED",SCHEDULED_PREVIEW:"SCHEDULED_PREVIEW",SCHEDULED_LIVE:"SCHEDULED_LIVE",SCHEDULED_EXPIRED:"SCHEDULED_EXPIRED",SCHEDULED_CANCELED:"SCHEDULED_CANCELED",PRE_LIVE:"PRE_LIVE"};}),null);
__d("VideoChannelLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={SESSION_START:"session_start",SESSION_PAUSE:"session_pause",SESSION_RESUME:"session_resume",SESSION_END:"session_end",IMPRESSION:"impression",VPV:"vpv",CLICK:"click",WATCH_SUMMARY:"watch_summary",FOLLOW:"follow",UNFOLLOW:"unfollow",SUBSCRIBE:"subscribe",SUBSCRIBE_SOME:"subscribe_some",UNSUBSCRIBE:"unsubscribe",PIN_TOPIC:"pin_topic",UNPIN_TOPIC:"unpin_topic",MARK_VISIT:"mark_visit",AUTO_ADVANCE:"auto_advance",STORY_FETCH_RESULTS:"story_fetch_results",FETCH_FIRST_STORY:"fetch_first_story_success",FETCH_STORIES_FROM_ENTQUERY:"fetch_stories_from_entquery",FETCH_STORIES_FORWARD:"fetch_stories_forward",FETCH_STORIES_BACKWARD:"fetch_stories_backward",FETCH_CHANNEL_PIVOTS:"fetch_channel_pivots_success",APPEND_CHANNEL_PIVOTS:"append_channel_pivots",FETCH_FIRST_STORY_SUCCESS:"fetch_first_story_success",FETCH_FIRST_STORY_ERROR:"fetch_first_story_error",FETCH_STORIES_FROM_ENTQUERY_SUCCESS:"fetch_stories_from_entquery_success",FETCH_STORIES_FROM_ENTQUERY_ERROR:"fetch_stories_from_entquery_error",FETCH_STORIES_FORWARD_SUCCESS:"fetch_stories_forward_success",FETCH_STORIES_FORWARD_ERROR:"fetch_stories_forward_error",FETCH_STORIES_BACKWARD_SUCCESS:"fetch_stories_backward_success",FETCH_STORIES_BACKWARD_ERROR:"fetch_stories_backward_error"};}),null);
__d("VideoChannelLoggerFields",[],(function a(b,c,d,e,f,g){f.exports={DEPTH_LEVEL:"depth_level",EVENT_TARGET:"event_target",EVENT_TARGET_INFO:"event_target_info",ENTRY_POINT:"entry_point",ENTRY_POINT_TYPE:"entry_point_type",ENTRY_POINT_VALUE:"entry_point_value",EXIT_POINT_TYPE:"exit_point_type",EXIT_POINT_VALUE:"exit_point_value",FOLLOW_SURFACE:"follow_surface",EVENT:"event",HAS_STORY_FETCH_CURSOR:"has_story_fetch_cursor",IS_AD:"is_ad",IS_EMPLOYEE:"is_employee",IS_TEST_USER:"is_test_user",PERF_TIME_MS:"perf_time_ms",REQUEST_STATUS:"request_status",HAS_NEXT_PAGE:"has_next_page",POSITION_IN_CHANNEL:"position_in_channel",SESSION_ID:"session_id",SUBSCRIPTION_SURFACE:"subscription_surface",STORY_ID:"story_id",STORY_FETCH_COUNT:"story_fetch_count",STORY_FETCH_CURSOR:"story_fetch_cursor",STORY_FETCH_LIMIT:"story_fetch_limit",TIME_SINCE_START:"time_since_start",TRACKING_DATA:"tracking_data",VIDEO_ID:"video",VIDEO_ID_OVERRIDE:"video_id_override",VIDEO_CHAINING_CALLER:"video_chaining_caller",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_CHANNEL_TITLE:"video_channel_title",VIDEO_HOME_SESSION_ID:"video_home_session_id",WATCH_TIME_S:"watch_time_s"};}),null);
__d("VideoChannelRequestStatus",[],(function a(b,c,d,e,f,g){f.exports={SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"};}),null);
__d("VideoStereoFormat",[],(function a(b,c,d,e,f,g){f.exports={MONO:"mono",LEFT_RIGHT:"left-right",TOP_BOTTOM:"top-bottom"};}),null);
__d("VideoWebDriverIDs",[],(function a(b,c,d,e,f,g){f.exports={FEED_VIDEO:"feed_video",FULLSCREEN_CONTROL:"fullscreen_control",MUTE_UNMUTE_CONTROL:"mute_unmute_control",PLAY_PAUSE_CONTROL:"play_pause_control",WNS_CONTROL:"wns_control"};}),null);
__d("VideoChannel",[],(function a(b,c,d,e,f,g){var h=null,i={get:function j(){return h;},set:function j(k){h=k;}};f.exports=i;}),null);
__d('VideoChannelLogger',['Arbiter','Banzai','BanzaiLogger','Run','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelViewChainLengthManager','VideoChannelViewVariables'],(function a(b,c,d,e,f,g){var h=c('VideoChannelViewVariables').channelPivots,i=0,j=null,k=null,l=null,m=0,n=null,o={startSession:function p(q,r,s){j=r;l=s;k=q;c('Arbiter').inform('LogEnterChannel',r);c('VideoChannelViewChainLengthManager').registerVideoID(q,q);var t={};t[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').SESSION_START;o.log(t);i=Date.now();c('Run').onLeave(o.endSession);c('Banzai').subscribe(c('Banzai').SHUTDOWN,o.endSession);},endSession:function p(){if(j){c('Arbiter').inform('LogExitChannel',j);var q={};q[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').SESSION_END;o.log(q);j=null;k=null;l=null;n=null;i=0;}},setOffset:function p(q){m=q;},setPosition:function p(q){n=q;},setChannel:function p(q){j=q;},getPlayerLoggingData:function p(){if(!j)return {};return {video_channel_id:j,position_in_channel:n+m};},log:function p(q){var r=c('VideoChannelViewChainLengthManager').getLoggingData(k);q[c('VideoChannelLoggerFields').SESSION_ID]=r.video_chaining_session_id;if(!h)q[c('VideoChannelLoggerFields').VIDEO_CHANNEL_ID]=j;q[c('VideoChannelLoggerFields').VIDEO_CHAINING_CALLER]=l;if(!(c('VideoChannelLoggerFields').POSITION_IN_CHANNEL in q))q[c('VideoChannelLoggerFields').POSITION_IN_CHANNEL]=n+m;if(i){var s=Date.now()-i;q[c('VideoChannelLoggerFields').TIME_SINCE_START]=s+.001;}c('BanzaiLogger').log('VideoChannelLoggerConfig',q);}};f.exports=o;}),null);
__d('VideoChannelProgressCircle.react',['cx','React','ReactDOM','Style'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$VideoChannelProgressCircle1=0,this.$VideoChannelProgressCircle2=0,n;}l.prototype.componentDidMount=function(){'use strict';this.drawProgressCircle(this.props);};l.prototype.componentWillUnmount=function(){'use strict';clearInterval(this.$VideoChannelProgressCircle1);};l.prototype.componentWillReceiveProps=function(m){'use strict';if(m.makeProgress!==this.props.makeProgress||m.timeoutSec!==this.props.timeoutSec)this.drawProgressCircle(m);};l.prototype.drawProgressCircle=function(m){'use strict';var n=c('ReactDOM').findDOMNode(this.refs.progressCircle),o=this.$VideoChannelProgressCircle2,p=o/100;c('Style').set(n,'stroke-dashoffset',o+'px');clearInterval(this.$VideoChannelProgressCircle1);if(m.makeProgress)this.$VideoChannelProgressCircle1=setInterval(function(){o-=p;c('Style').set(n,'stroke-dashoffset',o+'px');if(o<=0){clearInterval(this.$VideoChannelProgressCircle1);c('Style').set(n,'stroke-dashoffset','0px');m.onProgressDone&&m.onProgressDone();}}.bind(this),m.timeoutSec*10);};l.prototype.render=function(){'use strict';var m=this.props.watchAndScroll?34:80,n=this.props.watchAndScroll?2:4,o=m/2,p=o-n/2;this.$VideoChannelProgressCircle2=p*2*Math.PI;return c('React').createElement('div',null,c('React').createElement('svg',{className:"_20_8"},c('React').createElement('circle',{cx:o,cy:o,r:p,stroke:'#ffffff',strokeWidth:n,strokeDasharray:this.$VideoChannelProgressCircle2,fill:'transparent'}),c('React').createElement('circle',{ref:'progressCircle',cx:o,cy:o,r:p,stroke:'#5890ff',strokeWidth:n,strokeDasharray:this.$VideoChannelProgressCircle2,fill:'transparent'})),this.props.children);};l.propTypes={children:k.element,makeProgress:k.bool.isRequired,onProgressDone:k.func,timeoutSec:k.number.isRequired,watchAndScroll:k.bool};f.exports=l;}),null);
__d('VideoChannelReplayImage.react',['cx','Image.react','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement(c('Image.react'),{className:"_4nxy"+(this.props.size==='small'?' '+"_4nxz":''),src:'/images/video/channel_view/replay.svg'});};function k(){'use strict';i.apply(this,arguments);}k.defaultProps={size:'normal'};f.exports=k;}),null);
__d("XVideoChannelViewAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/channel\/view\/async\/{id}\/",{id:{type:"String",required:true},original_video_id:{type:"String",required:true},cursor:{type:"String"},story_count:{type:"Int",defaultValue:3},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1}});}),null);
__d("XVideoChannelViewStoryAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/channel\/view\/story\/async\/{root_video_id}\/",{root_video_id:{type:"String",required:true},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:false},setup_interactions:{type:"Bool",defaultValue:false},is_first_story:{type:"Bool",defaultValue:false},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"},fetch_channel_pivots:{type:"Bool",defaultValue:false}});}),null);
__d('VideoChannelStoryFetcher',['AsyncRequest','HTML','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelRequestStatus','VideoChannelViewVariables','XVideoChannelViewAsyncController','XVideoChannelViewStoryAsyncController'],(function a(b,c,d,e,f,g){var h=c('VideoChannelViewVariables').channelPivots;function i(j,k,l,m,n,o,p){'use strict';this.$VideoChannelStoryFetcher7=j;this.$VideoChannelStoryFetcher8=k;this.$VideoChannelStoryFetcher4=l;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};if(n){this.$VideoChannelStoryFetcher5=n.videoIDs;this.$VideoChannelStoryFetcher6=n.feedTrackingData;this.$VideoChannelStoryFetcher2=n.cursorInfo.cursor;this.$VideoChannelStoryFetcher3=n.cursorInfo.hasNextPage;var q=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(q);this.$VideoChannelStoryFetcher9.start=q;this.$VideoChannelStoryFetcher9.end=q+1;}if(o){this.$VideoChannelStoryFetcher5=o;this.$VideoChannelStoryFetcher3=!!p;var r=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(r);this.$VideoChannelStoryFetcher9.start=r;this.$VideoChannelStoryFetcher9.end=r+1;}c('VideoChannelLogger').setPosition(0);this.$VideoChannelStoryFetcher11=m;this.$VideoChannelStoryFetcher12=[];this.$VideoChannelStoryFetcher13=[];}i.prototype.reset=function(j,k){'use strict';this.$VideoChannelStoryFetcher7=j;this.$VideoChannelStoryFetcher8=k;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};this.$VideoChannelStoryFetcher12=[];this.$VideoChannelStoryFetcher13=[];};i.prototype.abandonRequest=function(){'use strict';this.$VideoChannelStoryFetcher1&&this.$VideoChannelStoryFetcher1.abandon();};i.prototype.hasNext=function(){'use strict';var j=this.$VideoChannelStoryFetcher5.length-this.$VideoChannelStoryFetcher9.end>0;return this.$VideoChannelStoryFetcher3||j;};i.prototype.$VideoChannelStoryFetcher14=function(event,j,k){'use strict';var l={};l[c('VideoChannelLoggerFields').EVENT]=event;l[c('VideoChannelLoggerFields').REQUEST_STATUS]=j;l[c('VideoChannelLoggerFields').PERF_TIME_MS]=Date.now()-k;if(h)l[c('VideoChannelLoggerFields').VIDEO_CHANNEL_ID]=this.$VideoChannelStoryFetcher8;c('VideoChannelLogger').log(l);};i.prototype.fetchFirstStory=function(j,k,l){'use strict';if(k===null)if(this.$VideoChannelStoryFetcher5.length!==0){var m=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);k=this.$VideoChannelStoryFetcher6[m];}var n=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',this.$VideoChannelStoryFetcher4).setStringVector('video_ids',[this.$VideoChannelStoryFetcher7]).setString('root_video_id',this.$VideoChannelStoryFetcher7).setBool('is_first_story',true).setBool('use_video_placeholder',j).setBool('setup_interactions',l).setString('channel_id',this.$VideoChannelStoryFetcher8).setString('ad_impression_token',this.$VideoChannelStoryFetcher11);if(k)n.setStringVector('feed_tracking_data',[JSON.stringify(k)]);var o=Date.now(),p=new (c('AsyncRequest'))(n.getURI()).setAllowCrossPageTransition(true).setHandler(function(){var q,r=this;this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').SUCCEEDED,o);this.$VideoChannelStoryFetcher15();if(h)(function(){var s=Date.now(),t=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',r.$VideoChannelStoryFetcher4).setStringVector('video_ids',[r.$VideoChannelStoryFetcher7]).setString('root_video_id',r.$VideoChannelStoryFetcher7).setString('channel_id',r.$VideoChannelStoryFetcher8).setBool('fetch_channel_pivots',true);if(k)t.setStringVector('feed_tracking_data',[JSON.stringify(k)]);var u=new (c('AsyncRequest'))(t.getURI()).setAllowCrossPageTransition(true).setHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_CHANNEL_PIVOTS,c('VideoChannelRequestStatus').SUCCEEDED,s);this.$VideoChannelStoryFetcher15();}.bind(r)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_CHANNEL_PIVOTS,c('VideoChannelRequestStatus').FAILED,s);this.$VideoChannelStoryFetcher15();}.bind(r)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_CHANNEL_PIVOTS,c('VideoChannelRequestStatus').ABORTED,s);this.$VideoChannelStoryFetcher15();}.bind(r));r.$VideoChannelStoryFetcher1=u;r.$VideoChannelStoryFetcher10=Date.now();u.send();})();}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').FAILED,o);this.$VideoChannelStoryFetcher15();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').ABORTED,o);this.$VideoChannelStoryFetcher15();}.bind(this));this.$VideoChannelStoryFetcher1=p;this.$VideoChannelStoryFetcher10=Date.now();p.send();};i.prototype.getPreloadedData=function(){'use strict';return {stories:this.$VideoChannelStoryFetcher12,thumbnails:this.$VideoChannelStoryFetcher13};};i.prototype.$VideoChannelStoryFetcher16=function(j,k){'use strict';if(!this.$VideoChannelStoryFetcher8)return;var l=c('XVideoChannelViewAsyncController').getURIBuilder().setString('id',this.$VideoChannelStoryFetcher8).setEnum('caller',this.$VideoChannelStoryFetcher4).setString('original_video_id',this.$VideoChannelStoryFetcher7).setInt('story_count',j);if(this.$VideoChannelStoryFetcher2)l.setString('cursor',this.$VideoChannelStoryFetcher2.toString());var m=Date.now(),n=l.getURI(),o=new (c('AsyncRequest'))(n).setAllowCrossPageTransition(true).setHandler(function(p){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').SUCCEEDED,m);this.$VideoChannelStoryFetcher2=p.getPayload().cursor;this.$VideoChannelStoryFetcher3=p.getPayload().hasNextPage;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(p,function(q,r){this.$VideoChannelStoryFetcher12=[].concat(this.$VideoChannelStoryFetcher12,q);this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,r);return k(q,r);}.bind(this));}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').FAILED,m);this.$VideoChannelStoryFetcher15();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').ABORTED,m);this.$VideoChannelStoryFetcher15();}.bind(this));this.$VideoChannelStoryFetcher1=o;o.send();};i.prototype.$VideoChannelStoryFetcher18=function(j,k,l){var m,n=this;'use strict';var o=this.$VideoChannelStoryFetcher9.end,p=this.$VideoChannelStoryFetcher5.length-o,q=o+Math.min(p,j);if(p>0){(function(){var r=n.$VideoChannelStoryFetcher5.slice(o,q),s=n.$VideoChannelStoryFetcher6.slice(o,q).map(function(v){return JSON.stringify(v);}),t=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',n.$VideoChannelStoryFetcher4).setString('channel_id',n.$VideoChannelStoryFetcher8).setString('root_video_id',n.$VideoChannelStoryFetcher7).setStringVector('video_ids',r).setStringVector('feed_tracking_data',s),u=Date.now();n.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(t.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').FAILED,u);this.$VideoChannelStoryFetcher15();}.bind(n)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').ABORTED,u);this.$VideoChannelStoryFetcher15();}.bind(n)).setHandler(function(v){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').SUCCEEDED,u);this.$VideoChannelStoryFetcher9.end=q;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(v,function(w,x){this.$VideoChannelStoryFetcher12=[].concat(this.$VideoChannelStoryFetcher12,w);this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,x);return k(w,x);}.bind(this));}.bind(n));n.$VideoChannelStoryFetcher1.send();if(l)l(p);})();}else if(this.$VideoChannelStoryFetcher3){this.$VideoChannelStoryFetcher16(j,k);if(l)l(j);}};i.prototype.$VideoChannelStoryFetcher19=function(j,k,l){var m,n=this;'use strict';var o=this.$VideoChannelStoryFetcher9.start;if(o>0)(function(){var p=Math.max(o-j,0),q=n.$VideoChannelStoryFetcher5.slice(p,o),r=n.$VideoChannelStoryFetcher6.slice(p,o).map(function(u){return JSON.stringify(u);}),s=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',n.$VideoChannelStoryFetcher4).setString('channel_id',n.$VideoChannelStoryFetcher8).setString('root_video_id',n.$VideoChannelStoryFetcher7).setStringVector('video_ids',q).setStringVector('feed_tracking_data',r),t=Date.now();n.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(s.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').FAILED,t);this.$VideoChannelStoryFetcher15();}.bind(n)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').ABORTED,t);this.$VideoChannelStoryFetcher15();}.bind(n)).setHandler(function(u){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').SUCCEEDED,t);this.$VideoChannelStoryFetcher9.start=p;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(u,k);}.bind(n));n.$VideoChannelStoryFetcher1.send();if(l)l(o-p);})();};i.prototype.fetchStories=function(j,k,l){'use strict';var m=c('VideoChannelViewVariables').defaultStoriesToLoad;if(this.$VideoChannelStoryFetcher1)return;if(j){this.$VideoChannelStoryFetcher18(m,k,l);}else this.$VideoChannelStoryFetcher19(m,k,l);};i.prototype.$VideoChannelStoryFetcher17=function(j,k){'use strict';var l=j.getPayload(),m=c('HTML').replaceJSONWrapper(l.stories).getNodes(),n=l.thumbnails.map(function(o){return c('HTML').replaceJSONWrapper(o).getRootNode();});k(m,n);};i.prototype.$VideoChannelStoryFetcher15=function(){'use strict';this.$VideoChannelStoryFetcher1=null;};f.exports=i;}),null);
__d('AbstractVideoFullscreenControl.react',['AbstractButton.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={awaitingUpdate:false},this.isFullscreen=function(){if(this.state.awaitingUpdate)return this.state.isFullscreenOverride;return !!this.props.isFullscreen;}.bind(this),this.onButtonClick=function(){this.props.onToggleFullscreen&&this.props.onToggleFullscreen();}.bind(this),m;}k.prototype.render=function(){var l=Object.assign({},this.props);delete l.isFullscreen;delete l.onToggleFullscreen;return c('React').createElement(c('AbstractButton.react'),babelHelpers['extends']({},l,{className:this.props.className,disabled:this.props.disabled,image:this.props.image,label:this.props.label,onClick:this.onButtonClick}));};k.propTypes={disabled:j.bool,image:j.element,isFullscreen:j.bool,onToggleFullscreen:j.func};f.exports=k;}),null);
__d('EmbeddedVideoFullscreenControl.react',['ix','cx','fbt','AbstractVideoFullscreenControl.react','Image.react','React','ReactDOM','VideoWebDriverIDs','VideoPlayerExperiments','fbglyph','shallowCompare'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.shouldComponentUpdate=function(o,p){return c('shallowCompare')(this,o,p);};n.prototype.onMouseOut=function(o){c('ReactDOM').findDOMNode(this.refs.button).blur();};n.prototype.render=function(){var o=void 0;if(!c('VideoPlayerExperiments').fourArrowFullScreen){o=this.props.isFullscreen?h("115501"):h("115510");}else o=this.props.isFullscreen?h("115504"):h("115507");var p=c('React').createElement(c('Image.react'),{className:"_5i0o",src:o}),q=this.props.isFullscreen?j._("\u9000\u51fa\u5168\u87a2\u5e55"):j._("\u9032\u5165\u5168\u87a2\u5e55\u6a21\u5f0f");return c('React').createElement(c('AbstractVideoFullscreenControl.react'),babelHelpers['extends']({},this.props,{className:"_3u33",'data-testid':c('VideoWebDriverIDs').FULLSCREEN_CONTROL,disabled:this.props.disabled,image:p,onMouseOut:this.onMouseOut.bind(this),ref:'button',tabIndex:this.props.tabIndex,type:'button',label:q,labelIsHidden:true}));};function n(){k.apply(this,arguments);}n.propTypes={isFullscreen:m.bool,onToggleFullscreen:m.func,tabIndex:m.string};f.exports=n;}),null);
__d('EmbeddedVideoPlaybackControl.react',['ix','cx','fbt','AbstractButton.react','Image.react','React','ReactDOM','VideoWebDriverIDs','fbglyph','shallowCompare'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){'use strict';l.constructor.call(this,o);this.state={awaitingUpdate:false,isPlayingOverwrite:false};}n.prototype.shouldComponentUpdate=function(o,p){'use strict';return c('shallowCompare')(this,o,p);};n.prototype.isPlaying=function(){'use strict';if(this.state.awaitingUpdate)return this.state.isPlayingOverwrite;return this.props.isPlaying;};n.prototype.onButtonClick=function(){'use strict';var o=this.isPlaying();this.setState({awaitingUpdate:true,isPlayingOverwrite:!o});if(o){this.props.onPause&&this.props.onPause();}else this.props.onPlay&&this.props.onPlay();};n.prototype.componentWillReceiveProps=function(){'use strict';this.setState({awaitingUpdate:false});};n.prototype.onMouseOut=function(o){'use strict';c('ReactDOM').findDOMNode(this.refs.button).blur();};n.prototype.render=function(){'use strict';var o=null;if(this.props.finishedPlaying){o=h("115482");}else o=this.isPlaying()?h("115336"):h("115398");var p=c('React').createElement(c('Image.react'),{className:"_5i0o",src:o}),q=this.isPlaying()?j._("\u66ab\u505c"):j._("\u64ad\u653e");return c('React').createElement(c('AbstractButton.react'),{className:"_3u33",'data-testid':c('VideoWebDriverIDs').PLAY_PAUSE_CONTROL,image:p,label:q,labelIsHidden:true,onClick:this.onButtonClick.bind(this),onMouseOut:this.onMouseOut.bind(this),ref:'button',tabIndex:this.props.tabIndex,type:'button'});};n.propTypes={finishedPlaying:m.bool,isPlaying:m.bool,onPlay:m.func,onPause:m.func,tabIndex:m.string};f.exports=n;}),null);
__d('EmbeddedVideoPlaybackRateControl.react',['cx','fbt','AbstractButton.react','React','ReactDOM','setImmediate','shallowCompare'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;function m(o){return o.toFixed(2).replace(/\.0+/,'.0')+'x';}j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){'use strict';k.constructor.call(this,o);this.state={isFocus:false,isFocusMenuItem:false,rate:1};}n.prototype.shouldComponentUpdate=function(o,p){'use strict';return c('shallowCompare')(this,o,p);};n.prototype.onMouseOut=function(o){'use strict';c('ReactDOM').findDOMNode(this.refs.button).blur();};n.prototype.onButtonFocus=function(o){'use strict';this.setState({isFocus:true});};n.prototype.onButtonBlur=function(){'use strict';this.setState({isFocusMenuItem:false});c('setImmediate')(function(){if(!this.state.isFocusMenuItem)this.setState({isFocus:false});}.bind(this));};n.prototype.createRateItem=function(o,p,q){'use strict';var r=function u(v){q();v.preventDefault();},s=null;if(p)s=c('React').createElement('div',{className:"_25d1"});var t=c('React').createElement('div',{className:"_4v8w",style:{backgroundColor:'inherit'}},s);return c('React').createElement('a',{href:'#',key:o,className:"_4v8v",onBlur:this.onButtonBlur.bind(this),onClick:r,onFocus:function(){this.setState({isFocusMenuItem:true});}.bind(this),tabIndex:this.props.tabIndex},t,c('React').createElement('div',{className:"_4v8x _4trg"},o));};n.prototype.render=function(){'use strict';var o=m(this.state.rate),p=null;if(!this.props.disabled){var q=[.5,1,1.25,1.5,1.75,2,2.5,3],r=q.map(function(u){return this.createRateItem(m(u),this.state.rate==u,function(){if(this.props.onSelectPlaybackRate)this.props.onSelectPlaybackRate(u);this.setState({rate:u});}.bind(this));}.bind(this));p=c('React').createElement('div',{className:"_42fl"+(this.state.isFocus?' '+"_4v4":'')},c('React').createElement('div',{className:"_4v8y"},c('React').createElement('div',{className:"_28h1"},c('React').createElement('div',{className:"_4v8x"},i._("\u64ad\u653e\u901f\u5ea6")),r)),c('React').createElement('div',{className:"_4v8z"}));}var s="_3u33 _4irg",t=c('React').createElement(c('AbstractButton.react'),{className:s,label:o,onBlur:this.onButtonBlur.bind(this),onFocus:this.onButtonFocus.bind(this),onMouseOut:this.onMouseOut.bind(this),ref:'button',tabIndex:this.props.tabIndex,type:'button'});return c('React').createElement('div',{className:"_1esn"},p,t);};n.propTypes={onSelectPlaybackRate:l.func,tabIndex:l.string};n.defaultProps={tabIndex:'-1'};f.exports=n;}),null);
__d('EmbeddedVideoPlaybackTimer.react',['cx','React','joinClasses','shallowCompare'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){'use strict';j.constructor.call(this,m);this.state={displayRemainingTime:!this.props.displayElapsedTime,displayPreferenceSet:false};}l.prototype.shouldComponentUpdate=function(m,n){'use strict';return c('shallowCompare')(this,m,n);};l.prototype.componentWillReceiveProps=function(m){'use strict';if(!this.state.displayPreferenceSet)this.setState({displayRemainingTime:!m.displayElapsedTime});};l.prototype.getClock=function(m){'use strict';var n='';if(isNaN(m)){m=0;}else if(m<0){m*=-1;n='-';}var o=Math.floor(m/3600),p=m-o*3600,q=Math.floor(p/60),r=void 0;if(this.props.displayMilliseconds){r=Math.floor(p-q*60);}else{r=Math.ceil(p-q*60);if(r===60){r=0;q++;}}var s=Math.round(p*1000),t=('0'+q).slice(-2),u=('0'+r).slice(-2),v=('00'+s).slice(-3),w=n;if(o===0){w+=q+':'+u;}else w+=o+':'+t+':'+u;if(this.props.displayMilliseconds)w+='.'+v;return w;};l.prototype.onButtonClick=function(){'use strict';this.setState({displayRemainingTime:!this.state.displayRemainingTime,displayPreferenceSet:true});};l.prototype.render=function(){'use strict';var m=this.state.displayPreferenceSet?this.state.displayRemainingTime:!this.props.displayElapsedTime,n=m?this.props.remainingTimestamp:this.props.playbackPosTimestamp,o="_4irg";if(this.props.isInScrubberPreview)o="_5lde";var p=Object.assign({},this.props);delete p.displayElapsedTime;delete p.displayMilliseconds;delete p.isInScrubberPreview;delete p.playbackPosTimestamp;delete p.remainingTimestamp;return c('React').createElement('div',babelHelpers['extends']({},p,{className:c('joinClasses')(this.props.className,o),onClick:this.onButtonClick.bind(this),role:'button',tabIndex:'0'}),this.getClock(n));};l.propTypes={isInScrubberPreview:k.bool,playbackPosTimestamp:k.number,remainingTimestamp:k.number,displayElapsedTime:k.bool,displayMilliseconds:k.bool};l.defaultProps={isInScrubberPreview:false,playbackPosTimestamp:0,remainingTimestamp:0,displayElapsedTime:false,displayMilliseconds:false};f.exports=l;}),null);
__d('EmbeddedVideoScrubberPointOfInterestBar.react',['cx','EmbeddedVideoPlaybackTimer.react','React'],(function a(b,c,d,e,f,g,h){var i,j,k,l,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={visibility:'hidden'},q;}n.prototype.render=function(){'use strict';var p=this.props.timestamp,q=p*100/this.props.playbackDuration+'%',r=c('React').createElement(c('EmbeddedVideoPlaybackTimer.react'),{className:"_2f0g",isInScrubberPreview:true,playbackPosTimestamp:0,remainingTimestamp:p,style:{left:q,visibility:this.state.visibility}});return c('React').createElement('div',null,c('React').createElement('div',{className:"_2f0h"+(this.props.isActive?' '+"_3t5h":''),onClick:function(s){return this.props.onPointOfInterestSelect(p);}.bind(this),onMouseEnter:function(s){return this.setState({visibility:'visible'});}.bind(this),onMouseLeave:function(s){return this.setState({visibility:'hidden'});}.bind(this),role:'button',style:{left:q},tabIndex:'0'}),r);};n.propTypes={playbackDuration:m.number.isRequired,timestamp:m.number.isRequired,isActive:m.bool.isRequired,onPointOfInterestSelect:m.func.isRequired};k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$EmbeddedVideoScrubberPointOfInterestBar1=function(u){return c('React').createElement(n,{key:'poi'+u,playbackDuration:this.props.playbackDuration,timestamp:u,isActive:u===this.props.currentPointOfInterest,onPointOfInterestSelect:this.props.onPointOfInterestSelect});}.bind(this),q;}o.prototype.shouldComponentUpdate=function(p,q){'use strict';return p.tabIndex!=this.props.tabIndex||p.currentPointOfInterest!==this.props.currentPointOfInterest||p.playbackDuration!=this.props.playbackDuration||p.pointsOfInterest.length!=this.props.pointsOfInterest.length||p.pointsOfInterest.some(function(r,s){return this.props.pointsOfInterest[s]!=r;}.bind(this));};o.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_2f0i",tabIndex:this.props.tabIndex},c('React').createElement('div',{className:"_2f0j"},this.props.pointsOfInterest.map(this.$EmbeddedVideoScrubberPointOfInterestBar1,this)));};o.propTypes={tabIndex:m.string.isRequired,playbackDuration:m.number.isRequired,onPointOfInterestSelect:m.func.isRequired,currentPointOfInterest:m.number,pointsOfInterest:m.array.isRequired};f.exports=o;}),null);
__d('VideoInstreamUtils',['DateConsts','VideoInstreamAdsConstants'],(function a(b,c,d,e,f,g){var h={convertFormattedTimeToSeconds:function i(j){var k=0,l=j.split('.');if(l.length>2)return null;if(l.length===2){if(l[1].length===0)return null;var m=l[1];while(m.length<3)m+='0';var n=Number(m);if(isNaN(n)||n<0||n>=c('DateConsts').MS_PER_SEC)return null;k+=n/c('DateConsts').MS_PER_SEC;}var o=l[0].split(':');if(o.length>3)return null;for(var p=0;p<o.length;p++){if(o[p].length===0)return null;var q=Number(o[p]);if(isNaN(q)||q<0||q>=60)return null;k+=q*Math.pow(60,o.length-p-1);}return k;},convertTimestampToFormattedString:function i(j){j=Math.round(j*c('DateConsts').MS_PER_SEC)/c('DateConsts').MS_PER_SEC;var k=Math.floor(j/c('DateConsts').SEC_PER_HOUR),l=j-k*c('DateConsts').SEC_PER_HOUR,m=Math.floor(l/c('DateConsts').SEC_PER_MIN),n=Math.floor(l-m*c('DateConsts').SEC_PER_MIN),o=Math.round(l*c('DateConsts').MS_PER_SEC),p=('0'+k).slice(-2),q=('0'+m).slice(-2),r=('0'+n).slice(-2),s=('00'+o).slice(-3),t='';if(k>0)t+=p+':';return t+=q+':'+r+'.'+s;},getMaxPossibleAdBreaks:function i(j){var k=Math.round(j)*c('DateConsts').MS_PER_SEC;if(k<c('VideoInstreamAdsConstants').AD_INSERTION_MINIMUM_VIDEO_LENGTH_MS)return 0;var l=(k-c('VideoInstreamAdsConstants').AD_INSERTION_END_TIME_OFFSET_MS-c('VideoInstreamAdsConstants').AD_INSERTION_START_TIME_OFFSET_MS)/c('VideoInstreamAdsConstants').AD_INSERTION_INTERVAL_MS;return Math.max(0,Math.floor(l)+1);},getEligibleTimeSegments:function i(j,k){if(h.getMaxPossibleAdBreaks(k)===0)return [];var l=c('VideoInstreamAdsConstants').AD_INSERTION_START_TIME_OFFSET_MS/c('DateConsts').MS_PER_SEC,m=k-c('VideoInstreamAdsConstants').AD_INSERTION_END_TIME_OFFSET_MS/c('DateConsts').MS_PER_SEC,n=c('VideoInstreamAdsConstants').AD_INSERTION_INTERVAL_MS/c('DateConsts').MS_PER_SEC;if(j.length===0)return [{start:l,end:m}];var o=[];j.forEach(function(p,q){if(q===0){var r=p.timeOffset-n;if(r>=l)o.push({start:l,end:r});}if(q-1>=0){var s=j[q-1].timeOffset+n,t=p.timeOffset-n;if(s<=t)o.push({start:s,end:t});}if(q===j.length-1){var u=p.timeOffset+n;if(u<=m)o.push({start:u,end:m});}});return o;},isInEligibleTimeSegments:function i(j,k,l){if(j===null||j===undefined)return false;var m=h.getEligibleTimeSegments(l,k);for(var n=0;n<m.length;n++)if(j>=m[n].start&&j<=m[n].end)return true;return false;},shouldDisableAdInsertionTab:function i(j,k){if(j||h.getMaxPossibleAdBreaks(k)===0)return true;return false;}};f.exports=h;}),null);
__d('VideoScrubberPreviewSpriteCalculation',[],(function a(b,c,d,e,f,g){var h={getImageCoordinatesInSpriteByTime:function i(j,k){var l=this.getTotalTimeInSprite(k.maxImagesPerSprite,k.timeIntervalBetweenImages),m=Math.floor(j%l/k.timeIntervalBetweenImages),n=Math.floor(m/k.imagesPerRow),o=m%k.imagesPerRow;return {x:o*k.previewScrubberWidth,y:n*k.previewScrubberHeight};},getSpriteIndex:function i(j,k,l){var m=this.getTotalTimeInSprite(k,l);return Math.floor(j/m)+1;},getTotalTimeInSprite:function i(j,k){return j*k;}};f.exports=h;}),null);
__d('EmbeddedVideoScrubber.react',['cx','fbt','EmbeddedVideoScrubberPointOfInterestBar.react','EventListener','Keys','Map','EmbeddedVideoPlaybackTimer.react','React','ReactDOM','VideoScrubberPreviewSpriteCalculation','VideoStereoFormat','JSResource','BootloadedComponent.react','VideoInstreamUtils','VideoPlayerUIComponentDrawer','emptyFunction','getElementPosition','joinClasses','shallowCompare'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){'use strict';k.constructor.call(this,n);this.$EmbeddedVideoScrubber4=new (c('Map'))();this.$EmbeddedVideoScrubber4.set(0,'');this.$EmbeddedVideoScrubber7=0;this.state={awaitingUpdate:false,barCoords:{x:0,y:0,height:0,width:0},mouseOver:false,nubEngaged:false,previewRatio:0,scrubRatio:0,timecodeRatio:0,timecodeTimestamp:0,scrubberPreviewSpriteIndex:0,scrubberPreviewBackgroundPosition:{x:0,y:0},previewThumbnailInformation:{timeIntervalBetweenImages:0,maxImagesPerSprite:0,imagesPerRow:0,imagesPerColumn:0,previewScrubberWidth:0,previewScrubberHeight:0,stereoMode:null,scrubberVideoURI:null,useScrubberVideo:false},lastSpriteDimension:{numRow:0,numColumn:0}};}m.prototype.shouldComponentUpdate=function(n,o){'use strict';return c('shallowCompare')(this,n,o);};m.prototype.onDragNubBegin=function(n){'use strict';if(n.button!==0)return;this.setState({nubEngaged:true,scrubRatio:this.getPositionRatio(n.clientX,this.state.barCoords)});this.props.onScrubBegin&&this.props.onScrubBegin();n.stopPropagation();n.preventDefault();};m.prototype.componentWillReceiveProps=function(n){'use strict';this.setState({awaitingUpdate:false});if(this.props.alwaysShowThumbnail){var o=c('getElementPosition')(c('ReactDOM').findDOMNode(this.refs.bar));this.setState({barCoords:o});this.$EmbeddedVideoScrubber6=null;this.$EmbeddedVideoScrubber5=null;this.timecodeUpdate(o.x+o.width*this.getPlayedRatio(n.playbackDuration,n.playbackPosition));}};m.prototype.componentDidUpdate=function(n,o){'use strict';if(!o.nubEngaged&&this.state.nubEngaged){this.$EmbeddedVideoScrubber1=c('EventListener').listen(document,'mousemove',function(p){this.onDragNubUpdate(p);this.onTimecodeUpdate(p);}.bind(this));this.$EmbeddedVideoScrubber2=c('EventListener').listen(document,'mouseup',this.onDragNubRelease.bind(this));}else if(o.nubEngaged&&!this.state.nubEngaged){if(this.$EmbeddedVideoScrubber1)this.$EmbeddedVideoScrubber1.remove();if(this.$EmbeddedVideoScrubber2)this.$EmbeddedVideoScrubber2.remove();}if(!o.mouseOver&&this.state.mouseOver){this.$EmbeddedVideoScrubber3=c('EventListener').listen(document,'mousemove',this.onTimecodeUpdate.bind(this));}else if(o.mouseOver&&!this.state.mouseOver)if(this.$EmbeddedVideoScrubber3)this.$EmbeddedVideoScrubber3.remove();};m.prototype.timecodeUpdate=function(n){'use strict';var o=this.props.playbackDuration;if(!o)return;var p=this.getPositionRatio(n,this.state.barCoords)*o,q=this.$EmbeddedVideoScrubber5?this.$EmbeddedVideoScrubber5:c('getElementPosition')(c('ReactDOM').findDOMNode(this.refs.timecode));this.$EmbeddedVideoScrubber5=q;if(!this.props.hasScrubberPreview){var r=this.getPositionRatio(n,this.state.barCoords)-Math.ceil(q.width/2)/this.state.barCoords.width;this.setState({timecodeTimestamp:p,timecodeRatio:r});}else if(this.props.previewThumbnailInformation){if(this.state.previewThumbnailInformation.previewScrubberWidth===0)this.retrievePreviewThumbnailInfo();c('ReactDOM').unstable_batchedUpdates(function(){if(this.state.previewThumbnailInformation.useScrubberVideo&&this.state.previewThumbnailInformation.scrubberVideoURI!==null){this.updatePreviewThumbnailVideo(p,q,n);}else if(this.props.scrubberPreviewSprites)this.updatePreviewThumbnail(this.props.scrubberPreviewSprites,p,q,n);}.bind(this));}};m.prototype.onTimecodeUpdate=function(n){'use strict';this.timecodeUpdate(n.clientX);n.preventDefault();n.stopPropagation();};m.prototype.updatePreviewThumbnail=function(n,o,p,q){'use strict';this.setState({timecodeTimestamp:o});var r=Math.floor(o),s=this.$EmbeddedVideoScrubber4;if(!this.isSpriteMapURIFetched())this.$EmbeddedVideoScrubber4=n;if(this.state.previewThumbnailInformation){var t=this.state.previewThumbnailInformation;this.updatePreviewThumbnailImage(r,t,s);}this.updatePreviewThumbnailLocation(p,q);};m.prototype.updatePreviewThumbnailVideo=function(n,o,p){'use strict';this.setState({timecodeTimestamp:n});var q=c('ReactDOM').findDOMNode(this.refs.previewThumbnailVideo);q.currentTime=n/30;this.updatePreviewThumbnailLocation(o,p);};m.prototype.updatePreviewThumbnailLocation=function(n,o){'use strict';var p=this.$EmbeddedVideoScrubber6?this.$EmbeddedVideoScrubber6:(this.$EmbeddedVideoScrubber6=c('getElementPosition')(c('ReactDOM').findDOMNode(this.refs.previewThumbnailContainer)));this.$EmbeddedVideoScrubber6=p;var q=this.getPositionRatio(o,this.state.barCoords)-Math.ceil(p.width/2)/this.state.barCoords.width,r=(p.width-n.width)/(2*p.width);this.setState({timecodeRatio:r,previewRatio:q});};m.prototype.updatePreviewThumbnailImage=function(n,o,p){var q,r=this;'use strict';var s=c('VideoScrubberPreviewSpriteCalculation').getImageCoordinatesInSpriteByTime(n,o),t=c('VideoScrubberPreviewSpriteCalculation').getSpriteIndex(n,o.maxImagesPerSprite,o.timeIntervalBetweenImages);if(t==this.getNumberOfSprites()&&this.state.lastSpriteDimension.numRow==0&&this.$EmbeddedVideoScrubber4)(function(){var u=r.$EmbeddedVideoScrubber4.get(t),v=new Image(),w=r.onLastImageLoad.bind(r);v.onload=function(){w(this.width,this.height);};v.src=u;})();this.setState({scrubberPreviewSpriteIndex:t,scrubberPreviewBackgroundPosition:s});};m.prototype.onLastImageLoad=function(n,o){'use strict';this.setState({lastSpriteDimension:{numRow:o/this.state.previewThumbnailInformation.previewScrubberHeight,numColumn:n/this.state.previewThumbnailInformation.previewScrubberWidth}});};m.prototype.retrievePreviewThumbnailInfo=function(){'use strict';this.setState({previewThumbnailInformation:this.props.previewThumbnailInformation});};m.prototype.isSpriteMapURIFetched=function(){'use strict';if(this.$EmbeddedVideoScrubber4){return this.$EmbeddedVideoScrubber4.size>1;}else return false;};m.prototype.getPositionRatio=function(n,o){'use strict';var p=n-o.x,q=p/o.width;return Math.min(Math.max(0,q),1);};m.prototype.onDragNubUpdate=function(n){'use strict';this.setState({scrubRatio:this.getPositionRatio(n.clientX,this.state.barCoords)});};m.prototype.onDragNubRelease=function(n){'use strict';var o=this.props.playbackDuration;if(!o)return;var p=this.state.awaitingUpdate;if(this.props.onScrubEnd){this.props.onScrubEnd(this.state.scrubRatio*o);p=true;}this.setState({nubEngaged:false,awaitingUpdate:p});n.preventDefault();n.stopPropagation();};m.prototype.getPlayedRatio=function(n,o){'use strict';if(this.state.nubEngaged||this.state.awaitingUpdate)return this.state.scrubRatio;if(!n||!o)return 0;var p=o/n;return this.getRangeLimitedRatio(p);};m.prototype.getBufferedRatio=function(){'use strict';var n=this.props.playbackDuration,o=this.props.bufferedPosition;if(!n||!o)return 0;var p=o/n;return this.getRangeLimitedRatio(p);};m.prototype.getRangeLimitedRatio=function(n){'use strict';if(isNaN(n)||n<0||n>1)return 0;return n;};m.prototype.getNumberOfSprites=function(){'use strict';if(this.$EmbeddedVideoScrubber4)return this.$EmbeddedVideoScrubber4.size;return 0;};m.prototype.getAdBreakIndicators=function(){'use strict';if(!this.props.playbackDuration||!this.props.adBreaksTimeOffset)return null;var n=[];for(var o=0;o<this.props.adBreaksTimeOffset.length;o++){var p=this.props.adBreaksTimeOffset[o],q=this.props.playbackDuration;if(p<0||p>q)continue;var r={left:p/q*100+'%'};n.push(c('React').createElement('div',{key:'ad_break_indicator_'+o,style:r,className:"_5z5n"}));}return c('React').createElement('div',null,n);};m.prototype.getInsertedAdBreaks=function(){'use strict';if(!this.props.playbackDuration||!this.props.insertedAdBreaks)return null;var n=[];this.props.insertedAdBreaks.map(function(o,p){var q=o.timeOffset,r=this.props.playbackDuration,s={left:q/r*100-1.4+'%'};n.push(c('React').createElement('div',{key:'inserted_ad_break'+p,style:s,className:"_2d49"+(this.props.isAdBreakDisabled?' '+"_9ob":'')},p+1));}.bind(this));return c('React').createElement('div',null,n);};m.prototype.getEligibleAdBreaksTimeSegments=function(){'use strict';if(!this.props.playbackDuration||!this.props.insertedAdBreaks)return null;var n=0;if(this.state.awaitingUpdate){n=this.$EmbeddedVideoScrubber7;}else n=this.props.playbackPosition;var o=this.props.playbackDuration,p=c('VideoInstreamUtils').getEligibleTimeSegments(this.props.insertedAdBreaks,o);if(this.state.nubEngaged){this.$EmbeddedVideoScrubber7=this.state.timecodeTimestamp;}else this.$EmbeddedVideoScrubber7=n;var q=[];p.forEach(function(r,s){var t=Math.max(2,(r.end-r.start)/o*100),u=this.$EmbeddedVideoScrubber7>=r.start&&this.$EmbeddedVideoScrubber7<=r.end;if(u){var v={left:'calc('+r.start/o*100+'% - 12px)',width:'calc('+t+'% + 16px)'};q.push(c('React').createElement('span',{key:'time_segment'+s,className:"_2xts",style:v}));}else{var w={left:'calc('+r.start/o*100+'% - 10px)',width:'calc('+t+'% + 16px)'};q.push(c('React').createElement('span',{key:'time_segment'+s,className:"_2xtr",style:w}));}}.bind(this));return c('React').createElement('div',{className:"_44bi"},q);};m.prototype.onMouseEnter=function(n){'use strict';if(this.props.alwaysShowThumbnail)return;var o=c('getElementPosition')(c('ReactDOM').findDOMNode(this.refs.bar));this.setState({mouseOver:true,barCoords:o});};m.prototype.onMouseLeave=function(n){'use strict';if(this.props.alwaysShowThumbnail)return;c('ReactDOM').findDOMNode(this.refs.bar).blur();c('ReactDOM').unstable_batchedUpdates(function(){this.setState({mouseOver:false});if(!this.state.nubEngaged)this.setState({scrubberPreviewSpriteIndex:0,scrubberPreviewBackgroundPosition:{x:0,y:0}});}.bind(this));this.$EmbeddedVideoScrubber6=null;this.$EmbeddedVideoScrubber5=null;};m.prototype.onMouseEnterOnThumbnailOrTimecode=function(n){'use strict';if(this.state.nubEngaged||this.props.alwaysShowThumbnail)return;var o=void 0;if(this.props.hasScrubberPreview){o=this.refs.previewThumbnailContainer;}else o=this.refs.timecode;var p=c('ReactDOM').findDOMNode(o);p.style.visibility='hidden';};m.prototype.onMouseLeaveOnThumbnailOrTimecode=function(n){'use strict';if(this.state.nubEngaged||this.props.alwaysShowThumbnail)return;var o=void 0;if(this.props.hasScrubberPreview){o=this.refs.previewThumbnailContainer;}else o=this.refs.timecode;var p=c('ReactDOM').findDOMNode(o);p.style.visibility='visible';};m.prototype.onKeyDown=function(n){'use strict';var o=this.props.playbackDuration,p=this.props.playbackPosition;if(!o||!p)return;var q=p;if(n.keyCode===c('Keys').RIGHT){n.preventDefault();n.stopPropagation();q+=5;if(q>=o)q=o-.01;}else if(n.keyCode===c('Keys').LEFT){n.preventDefault();n.stopPropagation();q-=5;if(q<0)q=0;}else if(n.keyCode===c('Keys').HOME){n.preventDefault();n.stopPropagation();q=0;}else if(n.keyCode===c('Keys').END){n.preventDefault();n.stopPropagation();q=o-.01;}else return;if(this.props.onScrubEnd)this.props.onScrubEnd(q);};m.prototype.canShowHeatmap=function(){'use strict';return this.props.interestLevels!=null&&this.props.isPlaying!=null&&this.props.controlsHidden!=null&&this.props.drawer!=null;};m.prototype.render=function(){'use strict';var n=c('joinClasses')(this.props.className,"_gn0"+(this.state.nubEngaged?' '+"_gn1":'')),o=(this.props.hasScrubberPreview?"_24wr":'')+(!this.props.hasScrubberPreview?' '+"_4irh":''),p={width:this.getPlayedRatio(this.props.playbackDuration,this.props.playbackPosition)*100+'%'},q={width:this.getBufferedRatio()*100+'%'},r={left:this.state.timecodeRatio*100+'%'},s={},t={},u=null,v=null,w=null;if(this.state.mouseOver||this.state.nubEngaged||this.props.alwaysShowThumbnail){w=c('React').createElement(c('EmbeddedVideoPlaybackTimer.react'),{className:o,isInScrubberPreview:true,onMouseEnter:this.onMouseEnterOnThumbnailOrTimecode.bind(this),onMouseLeave:this.onMouseLeaveOnThumbnailOrTimecode.bind(this),playbackPosTimestamp:0,ref:'timecode',remainingTimestamp:this.state.timecodeTimestamp,style:r});if(this.props.hasScrubberPreview&&this.state.previewThumbnailInformation){var x=this.state.previewThumbnailInformation.previewScrubberWidth,y=this.state.previewThumbnailInformation.previewScrubberHeight,z=100,aa=100;if(this.getNumberOfSprites()!==this.state.scrubberPreviewSpriteIndex){z*=this.state.previewThumbnailInformation.imagesPerRow;aa*=this.state.previewThumbnailInformation.imagesPerColumn;}else if(this.state.lastSpriteDimension.numRow){z*=this.state.lastSpriteDimension.numRow;aa*=this.state.lastSpriteDimension.numColumn;}var ba=this.state.previewThumbnailInformation.stereoMode;if(ba===c('VideoStereoFormat').LEFT_RIGHT){x/=2;z*=2;}else if(ba===c('VideoStereoFormat').TOP_BOTTOM){y/=2;aa*=2;}var ca=1;if(this.props.isFullscreen)ca=2;if(this.state.previewThumbnailInformation.useScrubberVideo&&this.state.previewThumbnailInformation.scrubberVideoURI!==null){s={width:x*ca+'px',height:y*ca+'px'};v=c('React').createElement('video',{muted:'true',preload:'auto',ref:'previewThumbnailVideo',src:this.state.previewThumbnailInformation.scrubberVideoURI,style:s});}else if(this.$EmbeddedVideoScrubber4){var da='';if(this.state.scrubberPreviewSpriteIndex){var ea=this.$EmbeddedVideoScrubber4.get(this.state.scrubberPreviewSpriteIndex);if(ea)da='url('+ea+')';}var fa=void 0;if(z>100){fa=z+'% '+aa+'%';}else da='';s={width:x*ca+'px',height:y*ca+'px',backgroundImage:da,backgroundPosition:'-'+this.state.scrubberPreviewBackgroundPosition.x*ca+'px '+'-'+this.state.scrubberPreviewBackgroundPosition.y*ca+'px',backgroundSize:fa};v=c('React').createElement('div',{className:"_24wt",ref:'previewThumbnail',style:s});}t={left:this.state.previewRatio*100+'%',display:this.props.alwaysShowThumbnail?'block':undefined};u=c('React').createElement('div',{onMouseEnter:this.onMouseEnterOnThumbnailOrTimecode.bind(this),onMouseLeave:this.onMouseLeaveOnThumbnailOrTimecode.bind(this),className:"_24ws",ref:'previewThumbnailContainer',style:t},v,w);}}var ga=null;if(this.props.pointsOfInterest.length>0)ga=c('React').createElement(c('EmbeddedVideoScrubberPointOfInterestBar.react'),{tabIndex:this.props.tabIndex,playbackDuration:this.props.playbackDuration,onPointOfInterestSelect:this.props.onPointOfInterestSelect,currentPointOfInterest:this.props.currentPointOfInterest,pointsOfInterest:this.props.pointsOfInterest});var ha=this.getAdBreakIndicators(),ia=null;if(this.canShowHeatmap()){var ja=this.props.hasScrubberPreview?u:w,ka=null;if(ja!=null)ka=this.refs[ja.ref];ia=c('React').createElement('div',{className:"_27ew"},c('React').createElement('div',{className:"_5h19",style:p},c('React').createElement('div',{className:"_gn5 _5ixx",ref:'nub'})),c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('LiveHeatmap.react').__setRef('EmbeddedVideoScrubber.react'),bootloadPlaceholder:c('React').createElement('div',null),controlsHidden:this.props.controlsHidden,drawer:this.props.drawer,interestLevels:this.props.interestLevels,isPlaying:this.props.isPlaying,playedRatio:this.getPlayedRatio(this.props.playbackDuration,this.props.playbackPosition),bufferedRatio:this.getBufferedRatio(),nubEngaged:this.state.nubEngaged,scrubberPreviewElement:ka,ref:'bar',tabIndex:this.props.tabIndex,'aria-label':i._("Change Position")}),ja,ha);}var la=this.props.playbackDuration>500?10:1,ma=Math.round(this.getPlayedRatio(this.props.playbackDuration,this.props.playbackPosition)*100*la)/la,na=ma+'%',oa=c('React').createElement('div',{className:n,onKeyDown:this.onKeyDown.bind(this),onMouseDown:this.onDragNubBegin.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),role:'presentation'},ia?ia:c('React').createElement('div',{tabIndex:this.props.tabIndex,role:'slider','aria-orientation':'horizontal','aria-valuemin':'0','aria-valuemax':this.props.playbackDuration,'aria-valuenow':this.props.playbackPosition,'aria-valuetext':na,'aria-label':i._("\u8b8a\u66f4\u4f4d\u7f6e"),className:"_gn2",ref:'bar'},c('React').createElement('div',{className:"_gn3",style:q}),c('React').createElement('div',{style:p,className:"_gn4"},c('React').createElement('div',{className:"_gn5 _5ixx",ref:'nub'})),this.props.hasScrubberPreview?u:w,ha,this.getInsertedAdBreaks(),this.getEligibleAdBreaksTimeSegments()));return c('React').createElement('div',null,oa,ga);};m.propTypes={alwaysShowThumbnail:l.bool,bufferedPosition:l.number.isRequired,hasScrubberPreview:l.bool,isFullscreen:l.bool,onScrubBegin:l.func.isRequired,onPointOfInterestSelect:l.func,onScrubEnd:l.func.isRequired,playbackDuration:l.number.isRequired,playbackPosition:l.number.isRequired,pointsOfInterest:l.array,previewThumbnailInformation:l.object,scrubberPreviewSprites:l.object,tabIndex:l.string.isRequired};m.defaultProps={alwaysShowThumbnail:false,hasScrubberPreview:false,pointsOfInterest:[],onPointOfInterestSelect:c('emptyFunction'),onScrubBegin:c('emptyFunction'),onScrubEnd:c('emptyFunction')};f.exports=m;}),null);
__d('EmbeddedVideoSidepaneToggleControl.react',['ix','cx','fbt','AbstractButton.react','Image.react','React','TooltipData','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.onButtonClick=function(){this.props.onSidePaneToggle();}.bind(this),p;}n.prototype.render=function(){var o=this.props.isSidePaneOpen?j._("\u9ede\u64ca\u4ee5\u96b1\u85cf\u8a73\u60c5"):j._("\u9ede\u64ca\u4ee5\u986f\u793a\u8a73\u60c5"),p=this.props.isSidePaneOpen?h("114795"):h("114783");return c('React').createElement(c('AbstractButton.react'),babelHelpers['extends']({className:"_3u33"},c('TooltipData').propsFor(o,'above'),{image:c('React').createElement(c('Image.react'),{className:"_345n",src:p}),label:this.props.label,labelIsHidden:this.props.labelIsHidden,onClick:this.onButtonClick,ref:'button',tabIndex:this.props.tabIndex,type:'button'}));};n.defaultProps={label:j._("\u5207\u63db\u8a73\u60c5"),labelIsHidden:true};n.propTypes={isSidePaneOpen:m.bool,label:m.string,onSidePaneToggle:m.func,tabIndex:m.string};f.exports=n;}),null);
__d('EmbeddedVideoVolumeSlider.react',['cx','EventListener','React','ReactDOM','getElementPosition','shallowCompare'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){'use strict';j.constructor.call(this,m);this.state={awaitingUpdate:false,engaged:false,volume:m.volume};}l.prototype.shouldComponentUpdate=function(m,n){'use strict';return c('shallowCompare')(this,m,n);};l.prototype.componentWillReceiveProps=function(m){'use strict';this.setState({awaitingUpdate:false});};l.prototype.componentDidUpdate=function(m,n){'use strict';if(!this.state.engaged&&n.engaged){if(this.$EmbeddedVideoVolumeSlider2)this.$EmbeddedVideoVolumeSlider2.remove();if(this.$EmbeddedVideoVolumeSlider1)this.$EmbeddedVideoVolumeSlider1.remove();}else if(this.state.engaged&&!n.engaged){this.$EmbeddedVideoVolumeSlider1=c('EventListener').listen(document,'mousemove',this.onMouseMove.bind(this));this.$EmbeddedVideoVolumeSlider2=c('EventListener').listen(document,'mouseup',this.onMouseUp.bind(this));}};l.prototype.onMouseDown=function(m){'use strict';if(m.button!==0)return;this.props.onVolumeChangeBegin&&this.props.onVolumeChangeBegin(this.state.volume);if(this.props.isHorizontal){this.setState({engaged:true,volume:this.getClampedClickPositionVolume(m.clientX)});}else this.setState({engaged:true,volume:this.getClampedClickPositionVolume(m.clientY)});m.preventDefault();m.stopPropagation();};l.prototype.getClampedClickPositionVolume=function(m){'use strict';var n=c('getElementPosition')(c('ReactDOM').findDOMNode(this.refs.slider)),o=c('getElementPosition')(c('ReactDOM').findDOMNode(this.refs.nub)).height;if(this.props.isHorizontal){var p=m+o/2-n.x;return Math.max(0,Math.min(1,p/n.width));}else{var q=n.y-m+n.height+o/2;return Math.max(0,Math.min(1,q/n.height));}};l.prototype.onMouseUp=function(m){'use strict';this.props.onVolumeChangeEnd&&this.props.onVolumeChangeEnd(this.state.volume);this.setState({engaged:false,awaitingUpdate:true});m.preventDefault();m.stopPropagation();};l.prototype.onMouseMove=function(m){'use strict';if(this.props.isHorizontal){this.setState({volume:this.getClampedClickPositionVolume(m.clientX)});}else this.setState({volume:this.getClampedClickPositionVolume(m.clientY)});this.props.onVolumeChange&&this.props.onVolumeChange(this.state.volume);m.preventDefault();m.stopPropagation();};l.prototype.getVolume=function(){'use strict';if(this.state.engaged||this.state.awaitingUpdate)return this.state.volume;return this.props.volume;};l.prototype.render=function(){'use strict';var m=this.props.isHorizontal||false,n=m?{width:Math.round(this.getVolume()*100)+'%'}:{height:Math.round(this.getVolume()*100)+'%'},o="_2-ml"+(m?' '+"_3cxz":'')+(this.state.engaged?' '+"_gn1":'');return c('React').createElement('div',{className:o,onMouseDown:this.onMouseDown.bind(this)},c('React').createElement('div',{className:"_3ghu"},c('React').createElement('div',{className:"_2-mm",ref:'slider'},c('React').createElement('div',{className:"_2-mn",style:n},c('React').createElement('div',{className:"_2-mo _5ixx",ref:'nub'})))),c('React').createElement('div',{className:"_2-mp"}));};l.propTypes={volume:k.number,onVolumeChangeBegin:k.func,onVolumeChangeEnd:k.func,onVolumeChange:k.func};l.defaultProps={volume:0,onVolumeChange:function m(n){},onVolumeChangeBegin:function m(n){},onVolumeChangeEnd:function m(n){}};f.exports=l;}),null);
__d('SpatialAudioFeedNUX.react',['ix','fbt','cx','AsyncRequest','Image.react','React','XBasicFBNuxDismissController','XUIAmbientNUX.react','XUIText.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=i._("\u900f\u904e Audio 360 \u66f4\u6df1\u5165\u9ad4\u9a57"),n=i._("\u6234\u4e0a\u8033\u6a5f\u5373\u53ef\u4eab\u53d7\u4f86\u81ea\u56db\u9762\u516b\u65b9\u7684\u81e8\u5834\u97f3\u6548"),o=4576;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.$SpatialAudioFeedNUX1=function(){this.setState({showNux:false});var r=c('XBasicFBNuxDismissController').getURIBuilder().setInt('nux_id',o).getURI();new (c('AsyncRequest'))().setURI(r).send();}.bind(this);this.state={showNux:true};}p.prototype.render=function(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.props.contextRef,shown:this.state.showNux,position:'below',alignment:'right',onCloseButtonClick:this.$SpatialAudioFeedNUX1,width:'auto'},c('React').createElement('div',{className:"_4r0v"},c('React').createElement('div',{className:"_4r0w"},c('React').createElement('div',{className:"_4r0x"},c('React').createElement(c('Image.react'),{src:h("114375")}))),c('React').createElement('div',{className:"_4r0y"},c('React').createElement(c('XUIText.react'),{size:'medium',className:"_4r0z"},m),c('React').createElement(c('XUIText.react'),{size:'small',className:"_4r0-"},n))));};f.exports=p;}),null);
__d('EmbeddedVideoVolumeControl.react',['ix','cx','fbt','invariant','AbstractButton.react','Image.react','Keys','React','ReactDOM','SpatialAudioFeedNUX.react','VideoPlayerExperiments','VideoPlayerVolumeSettings','VideoWebDriverIDs','EmbeddedVideoVolumeSlider.react','fbglyph','shallowCompare'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=c('React').PropTypes;l=babelHelpers.inherits(o,c('React').Component);m=l&&l.prototype;function o(p){'use strict';m.constructor.call(this,p);this.state={nubEngaged:false,focused:false,lastVolumeBeforeMute:1};}o.prototype.shouldComponentUpdate=function(p,q){'use strict';return c('shallowCompare')(this,p,q);};o.prototype.onButtonClick=function(){'use strict';this.checkLastVolumeBeforeMuteInvariant();if(this.props.volume===0)return this.onSliderVolumeChange(this.state.lastVolumeBeforeMute);this.props.onToggleMuted&&this.props.onToggleMuted();};o.prototype.onButtonFocus=function(){'use strict';this.setState({focused:true});};o.prototype.onButtonBlur=function(){'use strict';this.setState({focused:false});};o.prototype.onKeyDown=function(p){'use strict';var q=this.props.volume;if(p.keyCode===c('Keys').UP){p.preventDefault();p.stopPropagation();q+=.05;if(q>1)q=1;}else if(p.keyCode===c('Keys').DOWN){p.preventDefault();p.stopPropagation();q-=.05;if(q<0)q=0;}else return;this.onSliderVolumeChangeEnd(q);};o.prototype.onMouseOut=function(p){'use strict';c('ReactDOM').findDOMNode(this.refs.button).blur();};o.prototype.getVolume=function(){'use strict';if(this.props.isMuted)return 0;return this.props.volume;};o.prototype.onSliderVolumeChangeBegin=function(){'use strict';var p=this.props.volume;if(p>0){this.setState({nubEngaged:true,lastVolumeBeforeMute:p});c('VideoPlayerVolumeSettings').saveLastVolumeBeforeMute(p);}};o.prototype.onSliderVolumeChangeEnd=function(p){'use strict';if(p>0){this.setState({lastVolumeBeforeMute:p});c('VideoPlayerVolumeSettings').saveLastVolumeBeforeMute(p);this.onSliderVolumeChange(p);}else{this.props.onVolumeChange(this.state.lastVolumeBeforeMute);if(!this.props.isMuted)this.props.onToggleMuted&&this.props.onToggleMuted();}this.setState({nubEngaged:false});};o.prototype.onSliderVolumeChange=function(p){'use strict';if(p>0&&this.props.isMuted||p===0&&!this.props.isMuted)this.props.onToggleMuted&&this.props.onToggleMuted();this.props.onVolumeChange&&this.props.onVolumeChange(p);};o.prototype.checkLastVolumeBeforeMuteInvariant=function(){'use strict';this.state.lastVolumeBeforeMute>0&&this.state.lastVolumeBeforeMute<=1||k(0);};o.prototype.render=function(){'use strict';var p=Math.round(this.getVolume()*100),q=null;if(p==0){q=c('React').createElement(c('Image.react'),{className:"_5i0o",src:h("115743")});}else{var r=null;if(p<=33){r=h("115737");}else if(p<=66){r=h("115740");}else r=h("115746");q=c('React').createElement('div',{className:"_44_"},c('React').createElement('div',{className:"_454"},c('React').createElement(c('Image.react'),{className:"_5i0o",src:r})));}var s="_3s02"+(this.state.nubEngaged?' '+"_gn1":'')+(this.state.focused?' '+"_4v4":''),t="_3u33"+(' '+"_3s03")+(!this.getVolume()&&!c('VideoPlayerExperiments').redesign?' '+"_17bp":''),u=!this.getVolume()?j._("\u53d6\u6d88\u975c\u97f3"):j._("\u975c\u97f3"),v=c('React').createElement(c('EmbeddedVideoVolumeSlider.react'),{onVolumeChangeBegin:this.onSliderVolumeChangeBegin.bind(this),onVolumeChangeEnd:this.onSliderVolumeChangeEnd.bind(this),onVolumeChange:this.onSliderVolumeChange.bind(this),isHorizontal:this.props.isHorizontal||false,volume:this.getVolume()}),w=c('React').createElement(c('AbstractButton.react'),{className:t,'data-testid':c('VideoWebDriverIDs').MUTE_UNMUTE_CONTROL,image:q,label:u,labelIsHidden:true,onBlur:this.onButtonBlur.bind(this),onClick:this.onButtonClick.bind(this),onFocus:this.onButtonFocus.bind(this),onKeyDown:this.onKeyDown.bind(this),onMouseOut:this.onMouseOut.bind(this),ref:'button',tabIndex:this.props.tabIndex,type:'button'}),x=this.props.showSpatialAudioNUX?c('React').createElement(c('SpatialAudioFeedNUX.react'),{contextRef:function(){return this.refs.button;}.bind(this)}):null;if(this.props.isHorizontal)return c('React').createElement('div',{className:s},w,v,x);return c('React').createElement('div',{className:s},v,w,x);};o.propTypes={isMuted:n.bool,onVolumeChange:n.func,onToggleMuted:n.func,tabIndex:n.string,volume:n.number};f.exports=o;}),null);
__d('EmbeddedVideoControls.react',['ix','cx','fbt','Arbiter','BootloadedComponent.react','AbstractButton.react','EmbeddedVideoFullscreenControl.react','Image.react','JSResource','EmbeddedVideoPlaybackControl.react','EmbeddedVideoPlaybackRateControl.react','EmbeddedVideoPlaybackTimer.react','React','ReactDOM','EmbeddedVideoScrubber.react','SubscriptionsHandler','EmbeddedVideoSidepaneToggleControl.react','TooltipData','EmbeddedVideoVolumeControl.react','VideoPlayerExperiments','VideoPlayerUIComponentDrawer','fbglyph','ifRequired','shallowCompare'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;function n(){return c('ifRequired')('VideoWatchAndScrollController',function(q){return q.isActive();},function(){return false;});}function o(){return {isWNSOpen:n()};}k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){'use strict';l.constructor.call(this,q);this.state=o();if(q.allowEnqueuing)this.$EmbeddedVideoControls1=new (c('SubscriptionsHandler'))();}p.prototype.componentDidMount=function(){'use strict';if(this.$EmbeddedVideoControls1){var q;(q=this.$EmbeddedVideoControls1).addSubscriptions.apply(q,this.$EmbeddedVideoControls2());}};p.prototype.$EmbeddedVideoControls2=function(){'use strict';if(!this.props.allowEnqueuing)return [];return [c('Arbiter').subscribe('VideoWatchAndScrollController/start',function(){return this.setState({isWNSOpen:true});}.bind(this)),c('Arbiter').subscribe('VideoWatchAndScrollController/exit',function(){return this.setState({isWNSOpen:false});}.bind(this))];};p.prototype.componentWillUnmount=function(){'use strict';if(this.$EmbeddedVideoControls1)this.$EmbeddedVideoControls1.release();};p.prototype.shouldComponentUpdate=function(q,r){'use strict';return c('shallowCompare')(this,q,r);};p.prototype.isHidden=function(){'use strict';return this.props.hidden;};p.prototype.isTransparent=function(){'use strict';return this.props.transparent;};p.prototype.onMouseOut=function(q){'use strict';c('ReactDOM').findDOMNode(this.refs.button).blur();};p.prototype.$EmbeddedVideoControls3=function(){'use strict';var q=this.props,r=q.isFullscreen,s=q.hasWatchAndScroll,t=q.allowEnqueuing,u=this.state.isWNSOpen;if(t)return !u&&s&&!r;return s&&!r;};p.prototype.$EmbeddedVideoControls4=function(){'use strict';var q=this.props.allowEnqueuing,r=this.state.isWNSOpen;if(q)return r;return false;};p.prototype.render=function(){'use strict';var q=c('VideoPlayerExperiments').inlineSoundVisible,r=(!c('VideoPlayerExperiments').redesign?"_17l4":'')+(' '+"_2mbh")+(this.isHidden()?' '+"_2mbi":'')+(this.isTransparent()&&!q?' '+"_5744":''),s=(c('VideoPlayerExperiments').redesign&&c('VideoPlayerExperiments').noanim?"_fwi":'')+(c('VideoPlayerExperiments').redesign&&c('VideoPlayerExperiments').noshadow?' '+"_fwj":'')+(c('VideoPlayerExperiments').redesign?' '+"_i5q":'')+(this.props.showSidePaneToggle?' '+"_369t":''),t="_2mbj"+(' '+"_2mbk")+(this.isTransparent()&&q?' '+"_5744":''),u="_2mbj"+(' '+"_yaw")+(this.isTransparent()&&q?' '+"_5744":''),v="_2mbj"+(' '+"_2mbl")+(this.isTransparent()&&q?' '+"_5744":''),w="_2mbj"+(' '+"_4a9j")+(this.isTransparent()&&(!this.props.isInline||this.props.isFullscreen||!this.props.isPlaying)?' '+"_5744":''),x="_5rbl",y="_4lqt _4ubd",z="_4lqt"+(' '+"_4ubd")+(' '+"_3t0x")+(!this.props.isCommentAttachment?' '+"hidden_elem":''),aa=null;if(!this.props.isLive&&!this.props.hideRemainingTime){var ba=this.props.playbackPosition-this.props.playbackDuration;aa=c('React').createElement(c('EmbeddedVideoPlaybackTimer.react'),{className:"_25e2"+(this.props.displayMilliseconds?' '+"_5ziu":''),playbackPosTimestamp:this.props.playbackPosition,remainingTimestamp:ba,displayElapsedTime:this.props.displayElapsedTime,displayMilliseconds:this.props.displayMilliseconds});}var ca=null,da=null,ea=null,fa=null;if(!this.props.isLive||this.props.hasHD)if(!this.props.hideSettings)if(c('VideoPlayerExperiments').redesign){ea=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('EmbeddedVideoSettingsControl.react').__setRef('EmbeddedVideoControls.react'),bootloadPlaceholder:c('React').createElement('span',null),disabled:this.props.isCasting,hasHD:this.props.hasHD,hasSubtitles:this.props.hasSubtitles,isHD:this.props.isHD,isSphericalVideo:this.props.isSphericalVideo,areSubtitlesActive:this.props.areSubtitlesActive,onToggleHD:this.props.onToggleHD,onToggleSubtitles:this.props.onToggleSubtitles,tabIndex:'0',availableQualities:this.props.availableQualities,selectedQuality:this.props.selectedQuality,canAutoSelectVideoQuality:this.props.canAutoSelectVideoQuality,onSelectQuality:this.props.onSelectQuality,showQualitySelector:this.props.showQualitySelector,qualitySelectorMinStreams:this.props.qualitySelectorMinStreams,streamingFormat:this.props.streamingFormat});}else{if(this.props.hasHD)ca=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('EmbeddedVideoQualityControl.react').__setRef('EmbeddedVideoControls.react'),bootloadPlaceholder:c('React').createElement('span',null),isHD:this.props.isHD,onToggleHD:this.props.onToggleHD,tabIndex:'0'});if(this.props.hasSubtitles)da=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('EmbeddedVideoClosedCaptionsControl.react').__setRef('EmbeddedVideoControls.react'),areClosedCaptionsActive:this.props.areSubtitlesActive,onToggleClosedCaptions:this.props.onToggleSubtitles,tabIndex:'0'});}if(this.props.isLive)if(c('VideoPlayerExperiments').hlsButton)fa=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('EmbeddedVideoToHLSControl.react').__setRef('EmbeddedVideoControls.react'),areHLSActive:this.props.areHLSActive,onToggleHLS:this.props.onToggleHLS,tabIndex:'0'});var ga=null;if(this.props.allowFullscreen){var ha=this.props.isFullscreen?j._("\u9ede\u64ca\u53ef\u9000\u51fa\u5168\u87a2\u5e55"):j._("\u9ede\u64ca\u53ef\u9032\u5165\u5168\u87a2\u5e55");ga=c('React').createElement(c('EmbeddedVideoFullscreenControl.react'),babelHelpers['extends']({},c('TooltipData').propsFor(ha,'above'),{disabled:this.props.isCasting&&!this.props.isFullscreen,isFullscreen:this.props.isFullscreen,onToggleFullscreen:this.props.onToggleFullscreen,tabIndex:'0'}));}var ia=null;if(this.$EmbeddedVideoControls3())ia=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('EmbeddedVideoWatchAndScrollControl.react').__setRef('EmbeddedVideoControls.react'),disabled:this.props.isCasting,onEnterWatchAndScroll:this.props.onEnterWatchAndScroll,isSlidingWNSEligible:this.props.isSlidingWNSEligible,onWNSNUXClose:this.props.onWNSNUXClose,showWNSNUX:this.props.showWNSNUX});var ja=null;if(this.$EmbeddedVideoControls4())ja=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('EmbeddedVideoEnqueueControl.react').__setRef('EmbeddedVideoControls.react'),disabled:this.props.isCasting,onEnqueueVideo:this.props.onEnqueueVideo});var ka=null;if(this.props.allowCasting&&this.props.hasFoundReceiver)ka=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('EmbeddedVideoCastingControl.react').__setRef('EmbeddedVideoControls.react'),hasFoundReceiver:this.props.hasFoundReceiver,isCasting:this.props.isCasting,isCastingSupported:this.props.isCastingSupported,onStartCast:this.props.onStartCast,onStopCast:this.props.onStopCast});var la=null,ma=null;if(this.props.permalinkURL){ma=c('React').createElement(c('Image.react'),{className:"_5i0o",src:h("114229")});la=c('React').createElement(c('AbstractButton.react'),{className:"_3u33",href:this.props.permalinkURL,image:ma,label:j._("\u53e6\u958b\u65b0\u6a19\u7c64"),labelIsHidden:true,onMouseOut:this.onMouseOut.bind(this),ref:'button',tabIndex:'0',target:'_blank',type:'button'});}var na=null,oa=null,pa=null;if(!this.props.isLive&&!this.props.hidePlaybackControl){oa=c('React').createElement(c('EmbeddedVideoPlaybackControl.react'),{finishedPlaying:this.props.finishedPlaying,isPlaying:this.props.isPlaying,onPause:this.props.onPause,onPlay:this.props.onPlay,tabIndex:'0'});if(this.props.showPlaybackRateControl&&this.props.onSetVideoPlaybackRate){var qa=j._("\u64ad\u653e\u901f\u7387");pa=c('React').createElement(c('EmbeddedVideoPlaybackRateControl.react'),babelHelpers['extends']({},c('TooltipData').propsFor(qa,'above'),{tabIndex:'0',onSelectPlaybackRate:this.props.onSetVideoPlaybackRate}));}na=c('React').createElement(c('EmbeddedVideoScrubber.react'),{adBreaksTimeOffset:this.props.adBreaksTimeOffset,bufferedPosition:this.props.bufferedPosition,controlsHidden:this.props.hidden,hasScrubberPreview:this.props.hasScrubberPreview,interestLevels:this.props.interestLevels,drawer:this.props.drawer,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isFullscreen:this.props.isFullscreen,isPlaying:this.props.isPlaying,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,playbackDuration:this.props.playbackDuration,playbackPosition:this.props.playbackPosition,previewThumbnailInformation:this.props.previewThumbnailInformation,scrubberPreviewSprites:this.props.scrubberPreviewSprites,onPointOfInterestSelect:this.props.onPointOfInterestSelect,currentPointOfInterest:this.props.currentPointOfInterest,pointsOfInterest:this.props.pointsOfInterest,tabIndex:'0'});}var ra=null;if(this.props.showSidePaneToggle)ra=c('React').createElement(c('EmbeddedVideoSidepaneToggleControl.react'),{isSidePaneOpen:this.props.isSidePaneOpen,onSidePaneToggle:this.props.onSidePaneToggle,tabIndex:'0'});var sa=null;if(c('VideoPlayerExperiments').redesign)sa=c('React').createElement('div',{className:"_4lqu"+(this.isTransparent()?' '+"_5744":'')});var ta=c('React').createElement(c('EmbeddedVideoVolumeControl.react'),{isMuted:this.props.isMuted,onToggleMuted:this.props.onToggleMuted,onVolumeChange:this.props.onVolumeChange,volume:this.props.volume,tabIndex:'0',showSpatialAudioNUX:this.props.showSpatialAudioNUX}),ua=null;if(this.props.useTwoRows){var va=c('React').createElement(c('EmbeddedVideoVolumeControl.react'),{isMuted:this.props.isMuted,onToggleMuted:this.props.onToggleMuted,onVolumeChange:this.props.onVolumeChange,volume:this.props.volume,isHorizontal:true,tabIndex:'0'});ua=c('React').createElement('div',{className:z},c('React').createElement('div',{className:x},c('React').createElement('div',{className:r},c('React').createElement('div',{className:t}),c('React').createElement('div',{className:u},na),c('React').createElement('div',{className:v},aa))),c('React').createElement('div',{className:x},c('React').createElement('div',{className:r},c('React').createElement('div',{className:t},oa,pa,va),c('React').createElement('div',{className:u}),c('React').createElement('div',{className:v},da,fa,ca,ea,ia,ja,ka,ga,la))));}var wa=!this.props.useTwoRows||!this.props.isCommentAttachment?c('React').createElement('div',{className:y},c('React').createElement('div',{className:x},c('React').createElement('div',{className:r},c('React').createElement('div',{className:t},oa,pa),c('React').createElement('div',{className:u},na),c('React').createElement('div',{className:v},aa,q||ta,da,fa,ca,ea,ia,ja,ka,ra,ga,la),c('React').createElement('div',{className:w},!q||ta)))):null;return c('React').createElement('div',{className:s},sa,wa,ua);};p.propTypes={allowFullscreen:m.bool,allowEnqueuing:m.bool,finishedPlaying:m.bool,hasHD:m.bool,hasSubtitles:m.bool,hasWatchAndScroll:m.bool,hidden:m.bool,hidePlaybackControl:m.bool,hideRemainingTime:m.bool,hideSettings:m.bool,isCommentAttachment:m.bool,isFullscreen:m.bool,isHD:m.bool,isInline:m.bool,isLive:m.bool,isSphericalVideo:m.bool,isMuted:m.bool,isPlaying:m.bool,isSidePaneOpen:m.bool,isSlidingWNSEligible:m.bool,areSubtitlesActive:m.bool,areHLSActive:m.bool,onEnterWatchAndScroll:m.func,onEnqueueVideo:m.func,onPause:m.func,onPlay:m.func,onSeek:m.func,onSetVideoPlaybackRate:m.func,onToggleFullscreen:m.func,onToggleHD:m.func,onToggleHLS:m.func,onToggleMuted:m.func,onToggleSubtitles:m.func,onVolumeChange:m.func,permalinkURL:m.string,playbackDuration:m.number,playbackPosition:m.number,displayElapsedTime:m.bool,displayMilliseconds:m.bool,transparent:m.bool,volume:m.number,scrubberPreviewSprites:m.object,hasScrubberPreview:m.bool,previewThumbnailInformation:m.object,onPointOfInterestSelect:m.func,pointsOfInterest:m.array,availableQualities:m.array,selectedQuality:m.string,canAutoSelectVideoQuality:m.bool,onSelectQuality:m.func,showQualitySelector:m.bool,qualitySelectorMinStreams:m.number,streamingFormat:m.string,useTwoRows:m.bool,adBreaksTimeOffset:m.array,showSidePaneToggle:m.bool,showWNSNUX:m.bool};p.defaultProps={allowCasting:false,bufferedPosition:0,hasFoundReceiver:false,displayElapsedTime:false,displayMilliseconds:false,hidden:false,hidePlaybackControl:false,hideRemainingTime:false,hideSettings:false,isCasting:false,isCastingSupported:false,isCommentAttachment:false,isMuted:false,isPlaying:false,isSphericalVideo:false,onSidePaneToggle:function q(){},onStartCast:function q(){},onStopCast:function q(){},playbackDuration:0,playbackPosition:0,showPlaybackRateControl:false,showSidePaneToggle:false,showWNSNUX:false,transparent:false,useTwoRows:false,volume:0};f.exports=p;}),null);
__d('Tahoe',[],(function a(b,c,d,e,f,g){var h=null,i={get:function j(){return h;},set:function j(k){h=k;}};f.exports=i;}),null);
__d('VideoWatchAndScrollEndScreen.react',['ix','fbt','cx','Image.react','PopoverMenu.react','React','ReactXUIMenu','TooltipData','VideoChannelProgressCircle.react','VideoChannelReplayImage.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes,n=function r(s){var t=s.onClose;return c('React').createElement('div',{className:"_3r7h",onClick:t,role:'button',tabIndex:'0'},c('React').createElement(c('Image.react'),{src:h("114710")}));},o=function r(s){var t=s.onCollapse;return c('React').createElement('div',babelHelpers['extends']({className:"_1dtq",onClick:t,role:'button',tabIndex:'1'},c('TooltipData').propsFor(i._("\u6536\u5408\u5f71\u7247"))),c('React').createElement(c('Image.react'),{src:h("115705")}));},p=function r(s){var t=s.onClose,u=c('React').createElement(c('ReactXUIMenu'),{onItemClick:function v(w,x){var y=x.item;if(y.getValue()==='close')t();}},c('React').createElement(c('ReactXUIMenu').Item,{value:'close'},'Close'));return c('React').createElement(c('PopoverMenu.react'),{className:"_ivg",menu:u},c('React').createElement('a',{href:'#'},c('React').createElement(c('Image.react'),{src:h("114186")})));};k=babelHelpers.inherits(q,c('React').Component);l=k&&k.prototype;q.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_5qdn"+(' '+"_2se8")+(this.props.fadeOut?' '+"_2gud":'')+(' '+"_1s-2")},c('React').createElement('div',{className:"_1szz _2se8"},c('React').createElement('div',{className:"_1szy _ww8",onClick:this.props.onReplay,role:'presentation'},c('React').createElement(c('VideoChannelProgressCircle.react'),{makeProgress:this.props.makeProgress,timeoutSec:this.props.endScreenDuration,watchAndScroll:true},c('React').createElement(c('VideoChannelReplayImage.react'),{size:'small'})))),c('React').createElement(n,{onClose:this.props.onClose}),c('React').createElement('div',{className:"_ivh"},c('React').createElement(p,{onClose:this.props.onClose}),c('React').createElement(o,{onCollapse:this.props.onCollapse})));};function q(){'use strict';k.apply(this,arguments);}q.propTypes={endScreenDuration:m.number.isRequired,fadeOut:m.bool,makeProgress:m.bool.isRequired,onReplay:m.func.isRequired,onClose:m.func.isRequired};f.exports=q;}),null);
__d('shouldWNSRenderToRHC',['ge'],(function a(b,c,d,e,f,g){'use strict';function h(){return !!c('ge')('fbRHCVideoWNS-container');}f.exports=h;}),null);
__d('VideoWatchAndScrollContainer.react',['csx','cx','CSS','DOM','DOMContainer.react','DOMDimensions','Event','Locale','Parent','React','ReactCSSTransitionGroup','Rect','SubscriptionsHandler','VideoWatchAndScrollEndScreen.react','cancelAnimationFrame','getViewportDimensions','requestAnimationFrame','shallowCompare','shouldWNSRenderToRHC','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=10,n=230,o=476,p=300,q=3000,r={NW:'nw',NE:'ne',SE:'se',SW:'sw'};j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(t,u){k.constructor.call(this,t,u);this.state=this.$VideoWatchAndScrollContainer2(this.props);}s.prototype.$VideoWatchAndScrollContainer2=function(t){var u=this.$VideoWatchAndScrollContainer3(),v=this.$VideoWatchAndScrollContainer4(this.props.initialPosition,u);return {channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:u,dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,endScreenFadeOut:false,endScreenShown:false,fadeOut:false,fadeOutPlaceholder:null,height:v.height,left:v.left,overlayShown:false,resizeDirection:null,top:v.top,width:v.width,videoIndex:0};};s.prototype.shouldComponentUpdate=function(t,u){return !this.state.fadeOut&&c('shallowCompare')(this,t,u);};s.prototype.componentDidUpdate=function(t,u){if(!u)return;if(!u.dragging&&this.state.dragging){this.documentSubscriptions=new (c('SubscriptionsHandler'))();this.documentSubscriptions.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoWatchAndScrollContainer5.bind(this)),c('Event').listen(document,'mouseup',this.$VideoWatchAndScrollContainer6.bind(this)));}else if(u.dragging&&!this.state.dragging)this.documentSubscriptions.release();if(u.endScreenShown!==this.state.endScreenShown){if(this.canPlayAnotherVideo()||!c('shouldWNSRenderToRHC')())if(this.state.endScreenShown){this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.props.onChannelNavigation(1);this.setState({endScreenShown:false,endScreenFadeOut:true});}.bind(this),q);}else{clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=null;this.setState({endScreenFadeOut:false});}}else if(this.state.endScreenShown&&this.state.videoIndex>=u.channelVideoElements.length-1&&this.state.videoIndex<this.state.channelVideoElements.length-1){clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.props.onChannelNavigation(1);this.setState({endScreenShown:false,endScreenFadeOut:true});}.bind(this),q);}var v=["._23if","._23ig","._452w","._2i7a"],w=u.channelVideoElements||[];this.state.channelVideoElements.forEach(function(x){if(w.indexOf(x)!==-1)return;v.forEach(function(aa){var ba=c('DOM').scry(x,aa),ca=ba[0];if(ca)c('CSS').hide(ca);});var y=c('DOM').scry(x,"._3pay"),z=y[0];if(z){c('CSS').removeClass(z,"_3pay");c('CSS').addClass(z,"_2337");}});};s.prototype.componentDidMount=function(){this.resizeListener=c('Event').listen(window,'resize',c('throttle')(function(){var t=this.$VideoWatchAndScrollContainer3(),u=this.$VideoWatchAndScrollContainer4({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},t);this.setState({containerBoundingBox:t,height:u.height,left:u.left,top:u.top,width:u.width});}.bind(this),100));};s.prototype.componentWillUnmount=function(){if(this.documentSubscriptions)this.documentSubscriptions.release();if(this.resizeListener)this.resizeListener.remove();this.$VideoWatchAndScrollContainer1&&clearTimeout(this.$VideoWatchAndScrollContainer1);};s.prototype.getFadeOutStatus=function(){return this.state.fadeOut;};s.prototype.getChannelVideoElements=function(){return this.state.channelVideoElements;};s.prototype.$VideoWatchAndScrollContainer7=function(t,event){this.$VideoWatchAndScrollContainer8(event,t);};s.prototype.$VideoWatchAndScrollContainer9=function(event){if(c('Parent').bySelector(event.target,"._5-32")||!c('Parent').bySelector(event.target,"._3t-6"))return;this.$VideoWatchAndScrollContainer8(event,null);};s.prototype.$VideoWatchAndScrollContainer10=function(event){return event.button!==0||c('Parent').bySelector(event.target,"._3t-6")||c('Parent').bySelector(event.target,"._2se8");};s.prototype.$VideoWatchAndScrollContainer11=function(event){if(this.$VideoWatchAndScrollContainer10(event))return;this.props.onClick&&this.props.onClick();};s.prototype.$VideoWatchAndScrollContainer12=function(event){if(this.$VideoWatchAndScrollContainer10(event))return;this.props.onDoubleClick&&this.props.onDoubleClick();};s.prototype.$VideoWatchAndScrollContainer8=function(event,t){var u=event.button,v=event.target;if(u!==0)return;if(c('Parent').bySelector(v,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$VideoWatchAndScrollContainer3(),dragging:true,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:t});event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer3=function(){var t=0,u=c('DOM').scry(document.body,".fbChatSidebar");if(u.length===1)t=c('DOMDimensions').getElementDimensions(u[0]).width;var v=c('getViewportDimensions').withoutScrollbars(),w=43+m,x=v.height-m,y=m,z=v.width-m;if(c('Locale').isRTL()){y+=t;}else z-=t;return new (c('Rect'))(w,z,x,y);};s.prototype.$VideoWatchAndScrollContainer4=function(t,u){var v=new (c('Rect'))(t.top,t.left+t.width,t.top+t.height,t.left);v=v.boundWithin(u);return {height:v.h(),left:v.getLeft(),top:v.getTop(),width:v.w()};};s.prototype.$VideoWatchAndScrollContainer13=function(t,u,v){var w=t.top,x=u.getTop(),y=x-w;if(y>0){if(v===r.NE||v===r.NW)t.height-=y;t.top=x;}var z=t.left,aa=u.getLeft(),ba=aa-z;if(ba>0){if(v===r.NW||v===r.SW)t.width-=ba;t.left=aa;}var ca=t.top+t.height,da=u.getTop()+u.h(),ea=ca-da;if(ea>0)t.height=da-t.top;var fa=t.left+t.width,ga=u.getLeft()+u.w(),ha=fa-ga;if(ha>0)t.width=ga-t.left;};s.prototype.$VideoWatchAndScrollContainer14=function(t,u,v){if(t.width<n){if(v===r.NW||v===r.SW)t.left-=n-t.width;t.width=n;}if(t.height<n){if(v===r.NE||v===r.NW)t.top-=n-t.height;t.height=n;}};s.prototype.$VideoWatchAndScrollContainer15=function(t,u,v){if(t.width>o){if(v===r.NW||v===r.SW)t.left+=t.width-o;t.width=o;}if(t.height>o){if(v===r.NE||v===r.NW)t.top+=t.height-o;t.height=o;}};s.prototype.$VideoWatchAndScrollContainer16=function(t,u,v){var w=t.width/t.height,x=u.width/u.height;if(w>x){var y=t.height*x,z=t.height;if(y<n){z*=n/y;y=n;if(v===r.NE||v===r.NW)t.top+=t.height-z;}if(v===r.NW||v===r.SW)t.left+=t.width-y;t.width=y;t.height=z;}else if(w<x){var aa=t.width/x;if(v===r.NE||v===r.NW)t.top+=t.height-aa;t.height=aa;}};s.prototype.$VideoWatchAndScrollContainer17=function(t,u,v,w){this.$VideoWatchAndScrollContainer13(t,v,w);this.$VideoWatchAndScrollContainer14(t,u,w);this.$VideoWatchAndScrollContainer15(t,u,w);this.$VideoWatchAndScrollContainer16(t,u,w);return {height:t.height,left:t.left,top:t.top,width:t.width};};s.prototype.$VideoWatchAndScrollContainer5=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.dragUpdateRequestAnimationFrameID=c('requestAnimationFrame')(this.$VideoWatchAndScrollContainer18.bind(this,event));};s.prototype.$VideoWatchAndScrollContainer19=function(t){if(t.height!==this.state.height||t.width!==this.state.width)this.props.onInitialPositionUpdate(t);};s.prototype.$VideoWatchAndScrollContainer18=function(event){if(!this.state.dragging)return;var t=event.screenX-this.state.draggingStartMousePositionX,u=event.screenY-this.state.draggingStartMousePositionY,v=this.state.resizeDirection,w=void 0;if(!v){w=this.$VideoWatchAndScrollContainer4({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+t,top:this.state.draggingStartTop+u,width:this.state.draggingStartWidth},this.state.containerBoundingBox);this.$VideoWatchAndScrollContainer19(w);this.setState({height:w.height,left:w.left,top:w.top,width:w.width});}else{var x=this.state.draggingStartHeight,y=this.state.draggingStartLeft,z=this.state.draggingStartTop,aa=this.state.draggingStartWidth;if(v===r.NE||v===r.SE)aa+=t;if(v===r.NW||v===r.SW){y+=t;aa-=t;}if(v===r.SE||v===r.SW)x+=u;if(v===r.NE||v===r.NW){z+=u;x-=u;}w=this.$VideoWatchAndScrollContainer17({height:x,left:y,top:z,width:aa},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,v);this.$VideoWatchAndScrollContainer19(w);this.setState({height:w.height,left:w.left,top:w.top,width:w.width});}event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer6=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.props.onDrop();this.setState({dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null});event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer20=function(t,u){if(t>this.state.channelVideoElements.length)return null;var v=this.state.channelVideoElements[t];if(!v)return null;return c('React').createElement('div',{className:"_2yq3"+(u==='left'?' '+"_2yq4":'')+(u==='center'?' '+"_2yq5":'')+(u==='right'?' '+"_2yq6":''),key:v.id},c('React').createElement(c('DOMContainer.react'),null,v));};s.prototype.$VideoWatchAndScrollContainer21=function(){if(c('shouldWNSRenderToRHC')())return [];return [c('React').createElement('div',{className:"_52ua",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.NW),key:r.NW}),c('React').createElement('div',{className:"_52uc",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.NE),key:r.NE}),c('React').createElement('div',{className:"_52ui",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.SE),key:r.SE}),c('React').createElement('div',{className:"_52uj",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.SW),key:r.SW})];};s.prototype.getWidth=function(){return this.state.width;};s.prototype.canPlayAnotherVideo=function(){var t=this.state.channelVideoElements;return this.state.videoIndex<t.length-1;};s.prototype.render=function(){var t={height:Math.round(this.state.height)+'px',left:this.state.left+'px',top:this.state.top+'px',width:Math.round(this.state.width)+'px'},u=this.state.channelVideoElements,v=u[this.state.videoIndex];if(v){c('CSS').addClass(v,"_1kfp");c('CSS').conditionClass(v,"_1blk",this.state.width<p);}var w=null;if(this.state.endScreenShown)w=c('React').createElement(c('VideoWatchAndScrollEndScreen.react'),{endScreenDuration:q/1000,fadeOut:this.state.endScreenFadeOut,makeProgress:this.canPlayAnotherVideo(),onReplay:this.props.onReplay,onClose:function(){clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=null;this.props.onClose();}.bind(this),onCollapse:this.props.onCollapse});var x=null;if(this.state.fadeOutPlaceholder){x=c('React').createElement(c('DOMContainer.react'),null,this.state.fadeOutPlaceholder);}else x=c('React').createElement('ul',{className:"_2yq7"},u.map(function(y,z){if(z>this.state.videoIndex+1||z<this.state.videoIndex-1)c('CSS').removeClass(y,"_1kfp");if(z<=this.state.videoIndex+1)return null;return c('React').createElement('li',{key:y.id},c('React').createElement(c('DOMContainer.react'),null,y));}.bind(this)));return c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:500,transitionEnter:false,transitionLeave:false,transitionName:{appear:"_tie",appearActive:"_tik"}},c('React').createElement('div',{className:"_360g"+(this.state.fadeOut?' '+"_473b":'')+(this.props.isLiveVideo()?' '+"_29mh":''),style:t},w,c('React').createElement('div',{className:"_52u8",onClick:this.$VideoWatchAndScrollContainer11.bind(this),onDoubleClick:this.$VideoWatchAndScrollContainer12.bind(this),onMouseDown:this.$VideoWatchAndScrollContainer9.bind(this),role:'presentation'},this.$VideoWatchAndScrollContainer20(this.state.videoIndex-1,'left'),this.$VideoWatchAndScrollContainer20(this.state.videoIndex,'center'),this.$VideoWatchAndScrollContainer20(this.state.videoIndex+1,'right')),this.$VideoWatchAndScrollContainer21(),x));};s.propTypes={initialPosition:l.object.isRequired,initialVideoElement:l.instanceOf(HTMLElement).isRequired,onChannelNavigation:l.func.isRequired,onClick:l.func.isRequired,onClose:l.func.isRequired,onDoubleClick:l.func.isRequired,onDrop:l.func.isRequired,onGrab:l.func.isRequired,onInitialPositionUpdate:l.func.isRequired,onReplay:l.func.isRequired};f.exports=s;}),null);
__d("XVideoWNSSurveyController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/wns_survey\/",{__asyncDialog:{type:"Int"}});}),null);
__d('VideoWatchAndScrollController',['csx','cx','invariant','Arbiter','AsyncRequest','Bootloader','CSS','DOM','DOMDimensions','Event','EventListener','Locale','React','ReactDOM','SubscriptionsHandler','Tahoe','VideoAutoplayControllerX','VideoChannelLogger','VideoChannelStoryFetcher','VideoFrameBuffer','VideoPlayerExperiments','VideoPlayerLoggerSource','VideoPlayerReason','VideoPlayerStates','VideoPlayerVolumeSettings','ViewportBounds','VideoWatchAndScrollContainer.react','VideoWatchAndScrollVariables','XVideoWNSSurveyController','cancelAnimationFrame','destroyOnUnload','getViewportDimensions','ifRequired','shouldWNSRenderToRHC','throttle'],(function a(b,c,d,e,f,g,h,i,j){var k=158,l=280,m=10,n=42,o=n+m,p=476,q=230,r=[c('VideoPlayerReason').AUTOPLAY,c('VideoPlayerReason').PAGE_VISIBILITY],s=750,t=308,u=null,v=c('VideoPlayerExperiments').videoEnqueuingWNSEnabled,w=c('VideoPlayerExperiments').persistentWNSEnabled;function x(){return Math.max(c('getViewportDimensions')().height,400)-n-80;}function y(z,aa,ba,ca){var da;'use strict';this.$VideoWatchAndScrollController30=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;this.$VideoWatchAndScrollController4=false;this.$VideoWatchAndScrollController34=ba;this.$VideoWatchAndScrollController37=false;this.$VideoWatchAndScrollController29=false;this.$VideoWatchAndScrollController47=ca;this.$VideoWatchAndScrollController48=ca;this.$VideoWatchAndScrollController33=new (c('VideoChannelStoryFetcher'))(aa,z,this.$VideoWatchAndScrollController34,null);this.$VideoWatchAndScrollController35=[];this.$VideoWatchAndScrollController36=0;this.$VideoWatchAndScrollController38=[];this.$VideoWatchAndScrollController39=[];this.$VideoWatchAndScrollController5=k;this.$VideoWatchAndScrollController6=l;this.$VideoWatchAndScrollController10=window.document.getElementById('leftCol');this.$VideoWatchAndScrollController11=window.document.getElementById('rightCol');this.$VideoWatchAndScrollController12=window.document.getElementById('pagelet_bluebar');this.$VideoWatchAndScrollController43={};this.$VideoWatchAndScrollController46=null;this.$VideoWatchAndScrollController49();(da=this.$VideoWatchAndScrollController30).addSubscriptions.apply(da,this.$VideoWatchAndScrollController50());if(!w)c('destroyOnUnload')(function(){this.$VideoWatchAndScrollController51();if(this.$VideoWatchAndScrollController4)this.$VideoWatchAndScrollController52();if(this.$VideoWatchAndScrollController30)this.$VideoWatchAndScrollController30.release();if(this===u)u=null;}.bind(this));}y.prototype.$VideoWatchAndScrollController50=function(){var z,aa=this;'use strict';var ba=[];ba.push(c('Arbiter').subscribe('VideoChannelView/opened',function(ca,da){if(this.$VideoWatchAndScrollController4&&(!da.controller||this.$VideoWatchAndScrollController16!==da.controller))this.$VideoWatchAndScrollController52();}.bind(this)));if(v)ba.push(c('Arbiter').subscribe('EmbeddedVideoControls/enqueueVideo',function(){}));if(c('VideoPlayerExperiments').rhcWNSEnabled){ba.push(c('Arbiter').subscribe('RHCVideoWNSController/collapseStart',function(){var ca=this.$VideoWatchAndScrollController14;if(!ca||!c('shouldWNSRenderToRHC')())return;ca.setState({endScreenFadeOut:true,endScreenShown:false});}.bind(this)),c('Arbiter').subscribe('RHCVideoWNSController/collapseEnd',function(){var ca=this.$VideoWatchAndScrollController14;if(!ca||!c('shouldWNSRenderToRHC')())return;this.pauseActiveVideo(c('VideoPlayerReason').USER);ca.setState({endScreenFadeOut:false});}.bind(this)),c('Arbiter').subscribe('RHCVideoWNSController/expandStart',function(){var ca=this.$VideoWatchAndScrollController14;if(!ca||!this.isActiveVideoDonePlaying()||!c('shouldWNSRenderToRHC')())return;ca.setState({endScreenShown:true});}.bind(this)));if(w)(function(){var ca=function(){var da=this.$VideoWatchAndScrollController16.getVideoNode();da instanceof HTMLVideoElement||j(0);da.currentTime=da.currentTime;}.bind(aa);ba.push(c('Arbiter').subscribe('RHCVideoWNSController/eject',function(da,ea){if(!c('shouldWNSRenderToRHC')())return;this.$VideoWatchAndScrollController2=ea;c('DOM').appendContent(document.body,ea);ca();if(this.$VideoWatchAndScrollController16.isState(c('VideoPlayerStates').PLAYING))this.playActiveVideo(c('VideoPlayerReason').USER);}.bind(aa)),c('Arbiter').subscribe('RHCVideoWNSController/dock',function(){if(!c('shouldWNSRenderToRHC')())return;ca();if(this.$VideoWatchAndScrollController16.isState(c('VideoPlayerStates').PLAYING))this.playActiveVideo(c('VideoPlayerReason').USER);}.bind(aa)),c('Event').listen(window,'resize',c('throttle')(function(){if(!c('shouldWNSRenderToRHC')())return;this.$VideoWatchAndScrollController53();}.bind(aa))),c('Arbiter').subscribe('RHCVideoWNSController/mount',function(){this.$VideoWatchAndScrollController53();}.bind(aa)));})();}return ba;};y.prototype.$VideoWatchAndScrollController53=function(){'use strict';var z=this.$VideoWatchAndScrollController14;if(!z)return;var aa=this.$VideoWatchAndScrollController16.getVideoNode(),ba=this.$VideoWatchAndScrollController54(aa);this.$VideoWatchAndScrollController16.setDimensions(ba.width,ba.height);z.setState({width:ba.width,height:ba.height});this.$VideoWatchAndScrollController46=ba;c('Arbiter').inform('VideoWatchAndScrollController/resize');};y.prototype.isActiveVideoDonePlaying=function(){'use strict';var z=this.$VideoWatchAndScrollController16.getState();return z===c('VideoPlayerStates').FINISHED;};y.isActiveVideoDonePlaying=function(){'use strict';return u?u.isActiveVideoDonePlaying():false;};y.prototype.$VideoWatchAndScrollController55=function(z,aa,ba){'use strict';z||j(0);aa.length||j(0);this.$VideoWatchAndScrollController47=true;this.$VideoWatchAndScrollController37=false;this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController36=ba;this.$VideoWatchAndScrollController33=z;this.$VideoWatchAndScrollController38=z.getPreloadedData().thumbnails||[];this.$VideoWatchAndScrollController39=[];this.$VideoWatchAndScrollController35=aa.slice(0);this.$VideoWatchAndScrollController35.forEach(function(da){this.$VideoWatchAndScrollController56(da);this.$VideoWatchAndScrollController57(da);da.updateSource(c('VideoPlayerLoggerSource').WATCH_SCROLL);}.bind(this));var ca=this.$VideoWatchAndScrollController35.shift();this.$VideoWatchAndScrollController58(ca,c('VideoPlayerReason').USER);};y.prototype.$VideoWatchAndScrollController59=function(z,aa,ba,ca,da){'use strict';this.$VideoWatchAndScrollController9=da;this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController54(da.videoRootNode);this.$VideoWatchAndScrollController55(z,aa,ba);if(this.$VideoWatchAndScrollController14)this.$VideoWatchAndScrollController14.setState({channelVideoElements:ca},function(){this.$VideoWatchAndScrollController60();}.bind(this));this.$VideoWatchAndScrollController9=null;};y.registerVideoController=function(z,aa,ba,ca){'use strict';if(u==null)u=new y(z.getVideoChannelID(),z.getVideoID(),aa,ca);u.$VideoWatchAndScrollController30.addSubscriptions(z.addListener('enterWatchAndScroll',function(){if(u)u.$VideoWatchAndScrollController61(z);}),z.addListener('crossfadeWatchAndScroll',function(){if(u){u.$VideoWatchAndScrollController62();var ea=z.getVideoNode();u.$VideoWatchAndScrollController46=u.$VideoWatchAndScrollController54(ea);u.$VideoWatchAndScrollController58(z,c('VideoPlayerReason').USER,false,true);z.unmute();}}),z.addListener('exitWatchAndScroll',function(){if(u&&u.$VideoWatchAndScrollController4)u.$VideoWatchAndScrollController52();}),z.addListener('VideoChannelController/enterChannel',function(){if(u)u.$VideoWatchAndScrollController37=true;}),z.addListener('VideoChannelController/exitChannel',function(){if(u)u.$VideoWatchAndScrollController37=false;}),z.addListener('WatchAndScroll/close',function(){if(u){u.$VideoWatchAndScrollController63();var ea=c('XVideoWNSSurveyController').getURIBuilder().getURI(),fa=new (c('AsyncRequest'))().setURI(ea);fa.send();}}));if(!ba)return;var da=['beginPlayback','changeVolume','muteVideo','toggleFullscreen','unmuteVideo','VideoChannelController/enterChannel'];da.forEach(function(event){if(u)u.$VideoWatchAndScrollController30.addSubscriptions(z.addListener(event,function(ea){if(u)u.$VideoWatchAndScrollController64(z,event,ea);}));});};y.isActive=function(){'use strict';if(!u)return false;return u.$VideoWatchAndScrollController4&&!u.$VideoWatchAndScrollController37;};y.updateSlidingCalculations=function(){'use strict';if(!u)return;if(u.$VideoWatchAndScrollController19)u.$VideoWatchAndScrollController65(u.$VideoWatchAndScrollController19);};y.registerChannelVideoController=function(z){'use strict';if(!u)return;z.updateSource(c('VideoPlayerLoggerSource').WATCH_SCROLL);u.$VideoWatchAndScrollController56(z);u.$VideoWatchAndScrollController57(z);u.$VideoWatchAndScrollController35.push(z);};y.getStoryFetcherData=function(){'use strict';return u&&u.$VideoWatchAndScrollController66();};y.prototype.$VideoWatchAndScrollController66=function(){'use strict';return {storyFetcher:this.$VideoWatchAndScrollController33,videoPlayerControllers:this.$VideoWatchAndScrollController35,channelVideoIndex:this.$VideoWatchAndScrollController36,rootVideoPlayerController:this.$VideoWatchAndScrollController17,channelInteractionsToRegister:this.$VideoWatchAndScrollController39,isFromWNS:true};};y.getVideoPlaceholder=function(){'use strict';if(!u)return null;return u.$VideoWatchAndScrollController18;};y.getReactContainer=function(){'use strict';if(!u)return null;return u.$VideoWatchAndScrollController14;};y.registerChannelInteraction=function(z){'use strict';if(u)u.$VideoWatchAndScrollController39.push(z);};y.onEnterChannel=function(){'use strict';if(!u)return;u.$VideoWatchAndScrollController67();};y.prototype.$VideoWatchAndScrollController67=function(){'use strict';this.$VideoWatchAndScrollController37=true;this.$VideoWatchAndScrollController33.abandonRequest();var z=this.$VideoWatchAndScrollController14;if(!z)return;var aa=["._23if","._23ig","._452w","._2i7a"];z.getChannelVideoElements().forEach(function(ba){aa.forEach(function(ea){var fa=c('DOM').scry(ba,ea),ga=fa[0];if(ga)c('CSS').show(ga);});var ca=c('DOM').scry(ba,"._2337"),da=ca[0];if(da){c('CSS').removeClass(da,"_2337");c('CSS').addClass(da,"_3pay");}});};y.resetFromChannelView=function(z,aa,ba){'use strict';if(!u)return;u.$VideoWatchAndScrollController55(z,aa,ba);};y.startFromChannelView=function(z,aa,ba,ca,da){'use strict';if(!u)return;u.$VideoWatchAndScrollController59(z,aa,ba,ca,da);};y.prototype.$VideoWatchAndScrollController64=function(z,event,aa){'use strict';if(this.$VideoWatchAndScrollController4){if(this.$VideoWatchAndScrollController16===z)return;if(aa&&r.includes(aa.reason))return;if(!z.isIntentionallyViewing())return;var ba=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(ba){this.$VideoWatchAndScrollController16.mute();}else this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);}if(event==='toggleFullscreen'&&z.isFullscreen()||event==='VideoChannelController/enterChannel'){if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController51();}else if((event!=='beginPlayback'||aa&&aa.reason===c('VideoPlayerReason').USER||z.getSource()===c('VideoPlayerLoggerSource').PERMALINK)&&z.isIntentionallyViewing()&&!z.isFullscreen()&&!z.getIsInChannel()){var ca=this.$VideoWatchAndScrollController68(z.getVideoNode()),da=ca.top;if(da>window.scrollY||event==='beginPlayback'&&aa&&aa.reason===c('VideoPlayerReason').AUTOPLAY)this.$VideoWatchAndScrollController65(z);}};y.prototype.$VideoWatchAndScrollController69=function(z){'use strict';if(this.$VideoWatchAndScrollController37||z!==this.$VideoWatchAndScrollController16)return;if(this.$VideoWatchAndScrollController14)this.$VideoWatchAndScrollController14.setState({endScreenShown:true});};y.prototype.$VideoWatchAndScrollController70=function(z){'use strict';return z.addListener('finishPlayback',function(){return this.$VideoWatchAndScrollController69(z);}.bind(this));};y.prototype.$VideoWatchAndScrollController65=function(z){'use strict';var aa=z.getVideoNode();if(!aa.offsetParent)return;this.$VideoWatchAndScrollController19=z;this.$VideoWatchAndScrollController25=c('throttle')(this.$VideoWatchAndScrollController71.bind(this),100);window.addEventListener('resize',this.$VideoWatchAndScrollController25);this.$VideoWatchAndScrollController72(aa);this.$VideoWatchAndScrollController73();};y.prototype.$VideoWatchAndScrollController71=function(){'use strict';if(this.$VideoWatchAndScrollController19){this.$VideoWatchAndScrollController72(this.$VideoWatchAndScrollController18||this.$VideoWatchAndScrollController19.getVideoNode());this.$VideoWatchAndScrollController26&&this.$VideoWatchAndScrollController26();}};y.prototype.$VideoWatchAndScrollController74=function(z){'use strict';var aa=this.$VideoWatchAndScrollController68(z),ba=z.scrollWidth,ca=z.scrollHeight,da=q,ea=p;if(ba<ca){da*=ba/ca;ea*=ba/ca;}var fa=da;if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.children.length){var ga=this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController10);if(ga.left<=aa.left){fa=Math.min(ga.left-2*m,ea);}else if(this.$VideoWatchAndScrollController11&&this.$VideoWatchAndScrollController11.children.length){var ha=this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController11);fa=Math.min(ha.left-2*m,ea);}}else{var ia=document.getElementById('timeline_tab_content');if(ia){var ja=this.$VideoWatchAndScrollController68(ia).left;fa=Math.min(ja-2*m,ea);}}return Math.max(fa,da);};y.prototype.$VideoWatchAndScrollController68=function(z){'use strict';var aa={left:0,top:0};do{aa.top+=z.offsetTop;aa.left+=z.offsetLeft;}while(z=z.offsetParent);return aa;};y.prototype.$VideoWatchAndScrollController75=function(){'use strict';if(c('VideoPlayerExperiments').rhcWNSEnabled)return t;var z=0;if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.children.length){var aa=this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController10),ba=window.getComputedStyle(this.$VideoWatchAndScrollController10),ca=parseInt(ba.width,10);if(w)ca=ca||l;z=ca+aa.left-m;}else{var da=document.getElementById('timeline_tab_content');if(!da){var ea=document.getElementById('pagelet_timeline_main_column');if(ea){da=ea.parentNode;}else da=document.getElementById('contentArea');}if(da){var fa=this.$VideoWatchAndScrollController68(da).left;z=fa-2*m;}}return z;};y.prototype.$VideoWatchAndScrollController54=function(z){'use strict';var aa=!z&&this.$VideoWatchAndScrollController9,ba={left:0},ca=16,da=9;if(!aa){ba=this.$VideoWatchAndScrollController68(z);da=1;ca=parseFloat(z.getAttribute('data-original-aspect-ratio'));var ea=z.parentElement;if((!ca||da===0)&&ea){ba=this.$VideoWatchAndScrollController68(ea);ca=ea.scrollWidth;da=ea.scrollHeight;}}var fa=q,ga=p;if(ca<da){fa*=ca/da;ga*=ca/da;}var ha=this.$VideoWatchAndScrollController75(),ia=m;if(this.$VideoWatchAndScrollController12)ia+=this.$VideoWatchAndScrollController12.scrollHeight;ia=Math.max(ia,o);var ja=c('VideoPlayerExperiments').rhcWNSEnabled?ha:Math.max(Math.min(ha,ga),q),ka=void 0;if(c('VideoPlayerExperiments').rhcWNSEnabled){ka=c('Locale').isRTL()?m+c('ViewportBounds').getRight():c('getViewportDimensions')().width-ja-m;}else{ka=ha>ga?ha-ga+m:m;ka=Math.max(ka,m);}var la=ja*da/ca;if(c('VideoPlayerExperiments').rhcWNSEnabled)la=Math.min(la,x());return {hasEnoughSpace:!!aa||ha>=fa,height:la,left:ka,top:ia,width:ja};};y.hasEnoughSpaceToEnter=function(z){'use strict';if(!u||!z||!z.getVideoNode())return false;var aa=z.getVideoNode(),ba=1,ca=parseFloat(aa.getAttribute('data-original-aspect-ratio')),da=aa.parentElement;if((!ca||ba===0)&&da){ca=da.scrollWidth;ba=da.scrollHeight;}var ea=q;if(ca<ba)ea*=ca/ba;return u.$VideoWatchAndScrollController75()>ea;};y.prototype.$VideoWatchAndScrollController72=function(z){'use strict';this.$VideoWatchAndScrollController21=this.$VideoWatchAndScrollController68(z);this.$VideoWatchAndScrollController27=z.scrollWidth;this.$VideoWatchAndScrollController28=z.scrollHeight;var aa=Math.max(this.$VideoWatchAndScrollController27,this.$VideoWatchAndScrollController28);if(aa<q){var ba=q/aa;this.$VideoWatchAndScrollController27*=ba;this.$VideoWatchAndScrollController28*=ba;}this.$VideoWatchAndScrollController20=this.$VideoWatchAndScrollController21.top+this.$VideoWatchAndScrollController28*.75-n;this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController54(z);this.$VideoWatchAndScrollController29=!this.$VideoWatchAndScrollController46.hasEnoughSpace;};y.prototype.$VideoWatchAndScrollController73=function(){'use strict';if(this.$VideoWatchAndScrollController19.isIntentionallyViewing()){this.$VideoWatchAndScrollController76(this.$VideoWatchAndScrollController77.bind(this));this.$VideoWatchAndScrollController77();}else this.$VideoWatchAndScrollController51();};y.isVideoAlmostFinished=function(z){'use strict';var aa=z.getPlaybackDuration(),ba=z.getCurrentTimePosition(),ca=c('VideoWatchAndScrollVariables').noWNSRemainingTime;if(aa*.2<ca){return ba/aa>.8;}else return aa-ba<ca;};y.isSlidingEnabled=function(z){'use strict';var aa=u;if(aa==null)return false;var ba=aa.$VideoWatchAndScrollController19;if(ba==null||ba!==z)return false;if(aa.$VideoWatchAndScrollController29||!z.isIntentionallyViewing()||!z.getVideoNode().offsetParent||y.isVideoAlmostFinished(z)||z.getSource()===c('VideoPlayerLoggerSource').TAHOE||z.hasLooped()){aa.$VideoWatchAndScrollController51();return false;}return true;};y.prototype.$VideoWatchAndScrollController77=function(){'use strict';var z=this.$VideoWatchAndScrollController19;if(z==null)return;if(!z.isIntentionallyViewing()||!z.getVideoNode().offsetParent){this.$VideoWatchAndScrollController51();return;}if(window.scrollY>this.$VideoWatchAndScrollController20&&y.isSlidingEnabled(z)&&z!==this.$VideoWatchAndScrollController16){this.$VideoWatchAndScrollController62();this.$VideoWatchAndScrollController58(z,c('VideoPlayerReason').AUTOPLAY,false,true);this.$VideoWatchAndScrollController51();}};y.prototype.$VideoWatchAndScrollController62=function(){'use strict';this.$VideoWatchAndScrollController47=this.$VideoWatchAndScrollController48;};y.prototype.$VideoWatchAndScrollController76=function(z){'use strict';window.removeEventListener('scroll',this.$VideoWatchAndScrollController26);this.$VideoWatchAndScrollController26=z||null;window.addEventListener('scroll',this.$VideoWatchAndScrollController26);c('cancelAnimationFrame')(this.$VideoWatchAndScrollController32);delete this.$VideoWatchAndScrollController32;};y.prototype.$VideoWatchAndScrollController51=function(){'use strict';window.removeEventListener('resize',this.$VideoWatchAndScrollController25);this.$VideoWatchAndScrollController76();delete this.$VideoWatchAndScrollController19;this.$VideoWatchAndScrollController29=false;};y.prototype.$VideoWatchAndScrollController61=function(z){'use strict';this.$VideoWatchAndScrollController51();if(this.$VideoWatchAndScrollController4&&this.$VideoWatchAndScrollController16!==z){this.$VideoWatchAndScrollController78(z);}else{this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController54(z.getVideoNode());this.$VideoWatchAndScrollController62();this.$VideoWatchAndScrollController58(z,c('VideoPlayerReason').USER);}};y.prototype.$VideoWatchAndScrollController78=function(z){'use strict';this.$VideoWatchAndScrollController22=z;this.$VideoWatchAndScrollController79();};y.prototype.$VideoWatchAndScrollController58=function(z,aa,ba,ca){'use strict';if(z.getSource()===c('VideoPlayerLoggerSource').TAHOE){var da=c('Tahoe').get();if(da)da.onExit();}var ea=!!this.$VideoWatchAndScrollController45;if(this.$VideoWatchAndScrollController45){clearTimeout(this.$VideoWatchAndScrollController45);this.$VideoWatchAndScrollController45=null;c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollController80());this.$VideoWatchAndScrollController81();}var fa=this.$VideoWatchAndScrollController1&&(ba||ca)&&!!this.$VideoWatchAndScrollController17;if(fa){this.$VideoWatchAndScrollController36=0;this.$VideoWatchAndScrollController35=[];this.$VideoWatchAndScrollController38=[];this.$VideoWatchAndScrollController41=this.$VideoWatchAndScrollController17;this.$VideoWatchAndScrollController43=babelHelpers['extends']({},this.$VideoWatchAndScrollController8);this.$VideoWatchAndScrollController44=this.$VideoWatchAndScrollController18;this.$VideoWatchAndScrollController40=this.$VideoWatchAndScrollController14;this.$VideoWatchAndScrollController42=this.$VideoWatchAndScrollController2;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController13&&this.$VideoWatchAndScrollController13.remove();this.$VideoWatchAndScrollController31.release();this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();}this.$VideoWatchAndScrollController17=z;this.$VideoWatchAndScrollController82(this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController36>0?this.$VideoWatchAndScrollController83(this.$VideoWatchAndScrollController36):z);if(this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController35.length>this.$VideoWatchAndScrollController36)this.$VideoWatchAndScrollController83(this.$VideoWatchAndScrollController36+1).preload();this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();var ga=!this.$VideoWatchAndScrollController1||!this.$VideoWatchAndScrollController16.isMuted(),ha=!this.$VideoWatchAndScrollController1||this.$VideoWatchAndScrollController16.isState('playing'),ia=this.$VideoWatchAndScrollController1&&this.$VideoWatchAndScrollController16.isState('finished');if(!this.$VideoWatchAndScrollController1||fa){if(!this.$VideoWatchAndScrollController9)c('VideoChannelLogger').startSession(this.$VideoWatchAndScrollController17.getVideoID(),this.$VideoWatchAndScrollController17.getVideoChannelID(),this.$VideoWatchAndScrollController34);if(!ba||ea){if(ea)this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController54(this.$VideoWatchAndScrollController15);this.$VideoWatchAndScrollController49(this.$VideoWatchAndScrollController15);}if(this.$VideoWatchAndScrollController9){this.$VideoWatchAndScrollController8=this.$VideoWatchAndScrollController9;if(this.$VideoWatchAndScrollController8.videoRootNode){this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController8.dimensions,this.$VideoWatchAndScrollController17.getVideoNode());c('DOM').appendContent(this.$VideoWatchAndScrollController8.videoRootNode,this.$VideoWatchAndScrollController18);var ja=c('DOM').scry(this.$VideoWatchAndScrollController8.videoRootNode,"._344x"),ka=ja[0];if(ka)c('DOM').remove(ka);}}else{this.$VideoWatchAndScrollController8={videoRootNode:this.$VideoWatchAndScrollController15.parentNode,dimensions:c('DOMDimensions').getElementDimensions(this.$VideoWatchAndScrollController15),source:this.$VideoWatchAndScrollController16.getSource()};this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController8.dimensions,this.$VideoWatchAndScrollController16.getVideoNode());c('DOM').insertAfter(this.$VideoWatchAndScrollController15,this.$VideoWatchAndScrollController18);}var la=null;if(this.$VideoWatchAndScrollController9)la=this.$VideoWatchAndScrollController9.videoRootNode;if(!la&&this.$VideoWatchAndScrollController15)la=this.$VideoWatchAndScrollController15.parentNode;if(la)this.$VideoWatchAndScrollController13=c('EventListener').listen(la,'click',function(){this.$VideoWatchAndScrollController63();z.play(c('VideoPlayerReason').USER);setTimeout(function(){this.$VideoWatchAndScrollController64(z,'beginPlayback',{reason:c('VideoPlayerReason').USER});}.bind(this),s);}.bind(this));this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController16.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController16.detachRootNode();var ma=this.$VideoWatchAndScrollController7?this.$VideoWatchAndScrollController7.width:this.$VideoWatchAndScrollController6,na=this.$VideoWatchAndScrollController7?this.$VideoWatchAndScrollController7.height:this.$VideoWatchAndScrollController5;this.$VideoWatchAndScrollController16.setDimensions(ma,na);this.$VideoWatchAndScrollController4=true;if(fa)this.$VideoWatchAndScrollController85();this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController86();}else{this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController60();}ha&&this.$VideoWatchAndScrollController16.play(aa);if(ga){this.$VideoWatchAndScrollController16.unmute();if(this.$VideoWatchAndScrollController16.getVolume()===0){var oa=c('VideoPlayerVolumeSettings').getLastVolumeBeforeMute()||1;this.$VideoWatchAndScrollController16.setVolume(oa);this.$VideoWatchAndScrollController16.emit('unmuteVideo');}}if(ia)this.$VideoWatchAndScrollController69(this.$VideoWatchAndScrollController16);this.$VideoWatchAndScrollController16.updateSource(c('VideoPlayerLoggerSource').WATCH_SCROLL);var pa=this.$VideoWatchAndScrollController33;if((!this.$VideoWatchAndScrollController1||fa)&&pa){pa.abandonRequest();if(!this.$VideoWatchAndScrollController9)pa.reset(z.getVideoID(),z.getVideoChannelID());this.$VideoWatchAndScrollController87();this.$VideoWatchAndScrollController56(z);this.$VideoWatchAndScrollController57(z);}this.$VideoWatchAndScrollController1=true;if(c('shouldWNSRenderToRHC')()||v)c('Arbiter').inform('VideoWatchAndScrollController/start');};y.prototype.$VideoWatchAndScrollController56=function(z){'use strict';if(!z.hasOption('WatchAndScroll','isActive'))z.registerOption('WatchAndScroll','isActive',y.isActive);};y.prototype.$VideoWatchAndScrollController57=function(z){'use strict';this.$VideoWatchAndScrollController31.addSubscriptions(this.$VideoWatchAndScrollController70(z),z.addListener('VideoChannelController/enterChannel',function(){this.$VideoWatchAndScrollController31.release();}.bind(this)),z.addListener('WatchAndScroll/close',function(){this.$VideoWatchAndScrollController63();var aa=c('XVideoWNSSurveyController').getURIBuilder().getURI(),ba=new (c('AsyncRequest'))().setURI(aa);ba.send();}.bind(this)));};y.prototype.$VideoWatchAndScrollController88=function(){'use strict';if(!this.$VideoWatchAndScrollController14)return;this.$VideoWatchAndScrollController14.setState({endScreenShown:false});if(this.$VideoWatchAndScrollController16)this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').USER);};y.prototype.$VideoWatchAndScrollController87=function(){'use strict';if(!this.$VideoWatchAndScrollController47)return;this.$VideoWatchAndScrollController33.fetchStories(true,function(z,aa){var ba=this.$VideoWatchAndScrollController14;if(!z||!z.length||!ba)return;var ca=ba.getChannelVideoElements().concat(z);ba.setState({channelVideoElements:ca},function(){setTimeout(function(){this.$VideoWatchAndScrollController83(this.$VideoWatchAndScrollController36+1).preload();}.bind(this));}.bind(this));this.$VideoWatchAndScrollController38=this.$VideoWatchAndScrollController38.concat(aa);}.bind(this));};y.prototype.$VideoWatchAndScrollController83=function(z){'use strict';var aa=this.$VideoWatchAndScrollController14?this.$VideoWatchAndScrollController14.getChannelVideoElements():[],ba=[this.$VideoWatchAndScrollController17].concat(this.$VideoWatchAndScrollController35),ca=null;ba.forEach(function(da){if(aa[z].contains(da.getRootNode()))ca=da;});ca||j(0);return ca;};y.prototype.$VideoWatchAndScrollController60=function(){'use strict';var z=this.$VideoWatchAndScrollController16.isMuted();this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController16!==this.$VideoWatchAndScrollController17)this.$VideoWatchAndScrollController16.abortLoading();this.$VideoWatchAndScrollController82(this.$VideoWatchAndScrollController83(this.$VideoWatchAndScrollController36));this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();var aa=this.$VideoWatchAndScrollController16.getVideoNode(),ba=parseFloat(aa.getAttribute('data-original-aspect-ratio'));if(!ba)ba=16/9;var ca=this.$VideoWatchAndScrollController46;if(!ca)ca=this.$VideoWatchAndScrollController54(aa);this.$VideoWatchAndScrollController14&&(ca.width=this.$VideoWatchAndScrollController14.getWidth());ca.height=ca.width/ba;if(c('VideoPlayerExperiments').rhcWNSEnabled){ca.height=Math.min(ca.height,x());}else if(ca.height>p){ca.height=p;ca.width=ca.height*ba;}this.$VideoWatchAndScrollController16.setDimensions(ca.width,ca.height);this.$VideoWatchAndScrollController49(aa);this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController14.setState({videoIndex:this.$VideoWatchAndScrollController36,width:ca.width,height:ca.height},function(){if(c('shouldWNSRenderToRHC')())c('Arbiter').inform('VideoWatchAndScrollController/resize');});this.$VideoWatchAndScrollController46=ca;this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').AUTOPLAY);z&&this.$VideoWatchAndScrollController16.mute();if(this.$VideoWatchAndScrollController35.length<=this.$VideoWatchAndScrollController36){this.$VideoWatchAndScrollController87();}else this.$VideoWatchAndScrollController83(this.$VideoWatchAndScrollController36+1).preload();};y.prototype.$VideoWatchAndScrollController89=function(){'use strict';var z=m;if(this.$VideoWatchAndScrollController12)z+=this.$VideoWatchAndScrollController12.scrollHeight;return Math.max(z,o);};y.prototype.$VideoWatchAndScrollController49=function(z){'use strict';if(this.$VideoWatchAndScrollController46){this.$VideoWatchAndScrollController7={height:this.$VideoWatchAndScrollController46.height,left:this.$VideoWatchAndScrollController46.left,top:this.$VideoWatchAndScrollController46.top,width:this.$VideoWatchAndScrollController46.width};return;}if(z){var aa=z.scrollWidth,ba=z.scrollHeight,ca=this.$VideoWatchAndScrollController74(z),da=ca*ba/aa;this.$VideoWatchAndScrollController7.height=da;this.$VideoWatchAndScrollController7.width=ca;}else this.$VideoWatchAndScrollController7={height:this.$VideoWatchAndScrollController5,left:m,top:this.$VideoWatchAndScrollController89(),width:this.$VideoWatchAndScrollController6};};y.prototype.$VideoWatchAndScrollController84=function(z,aa){'use strict';var ba=c('DOM').create('canvas',{className:"_57n6"});ba.height=z.height;ba.width=z.width;if(ba.getContext&&ba.getContext('2d'))if(aa.scrollHeight===0){var ca=c('DOM').scry(aa.parentNode,"._3t5i"),da=ca[0];if(da){var ea=ba.getContext('2d');ea.drawImage(da,0,0);}}else if(aa instanceof window.HTMLVideoElement){var fa=new (c('VideoFrameBuffer'))(ba,aa);fa.updateFrameBuffer();}var ga=c('DOM').create('div');ga.appendChild(ba);var ha=c('DOM').create('i',{className:"_1jto _bsl _3htz"});ga.appendChild(ha);return ga;};y.prototype.$VideoWatchAndScrollController63=function(){'use strict';if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController51();this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController79();};y.prototype.$VideoWatchAndScrollController90=function(){'use strict';this.$VideoWatchAndScrollController16.emit('WatchAndScroll/collapse');};y.prototype.$VideoWatchAndScrollController91=function(){'use strict';var z=this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController16.getVideoNode(),true);this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController14.setState({fadeOut:true,fadeOutPlaceholder:z});this.$VideoWatchAndScrollController92(this.$VideoWatchAndScrollController17,this.$VideoWatchAndScrollController8);if(this.$VideoWatchAndScrollController18){c('DOM').remove(this.$VideoWatchAndScrollController18);this.$VideoWatchAndScrollController18=null;}if(this.$VideoWatchAndScrollController13){this.$VideoWatchAndScrollController13.remove();this.$VideoWatchAndScrollController13=null;}};y.prototype.$VideoWatchAndScrollController92=function(z,aa,ba){'use strict';var ca=z.getOption('VideoWithLiveBroadcast','isLive');z.pause(c('VideoPlayerReason').USER);if(z.isPlayerVersion('silvercity'))z.detachRootNode();ba&&c('ReactDOM').unmountComponentAtNode(ba);if(aa.dimensions&&aa.dimensions.width&&aa.dimensions.height)z.setDimensions(aa.dimensions.width,aa.dimensions.height);if(aa.videoRootNode)c('DOM').prependContent(aa.videoRootNode,z.getRootNode());z.emit('WatchAndScroll/positionUpdated');z.updateSource(aa.source||c('VideoPlayerLoggerSource').INLINE);var da=this.$VideoWatchAndScrollController68(z.getVideoNode()),ea=da.top,fa=c('getViewportDimensions')().height;if(z.getSource()!==c('VideoPlayerLoggerSource').PERMALINK)z.mute();if(ea<window.scrollY||ea>window.scrollY+fa){z.pause(c('VideoPlayerReason').AUTOPLAY);z.emit('resumeAutoplay');}else z.play(c('VideoPlayerReason').USER);};y.prototype.$VideoWatchAndScrollController85=function(){'use strict';this.$VideoWatchAndScrollController4||j(0);this.$VideoWatchAndScrollController40||j(0);this.$VideoWatchAndScrollController40.setState({fadeOut:true});this.$VideoWatchAndScrollController45=setTimeout(function(){this.$VideoWatchAndScrollController41||j(0);this.$VideoWatchAndScrollController42||j(0);this.$VideoWatchAndScrollController92(this.$VideoWatchAndScrollController41,this.$VideoWatchAndScrollController43,this.$VideoWatchAndScrollController42);if(this.$VideoWatchAndScrollController44){c('DOM').remove(this.$VideoWatchAndScrollController44);this.$VideoWatchAndScrollController44=null;}this.$VideoWatchAndScrollController45=null;}.bind(this),s);};y.prototype.$VideoWatchAndScrollController52=function(){'use strict';this.$VideoWatchAndScrollController4||j(0);this.$VideoWatchAndScrollController14||j(0);if(!this.$VideoWatchAndScrollController22&&(c('shouldWNSRenderToRHC')()||v))c('Arbiter').inform('VideoWatchAndScrollController/exit');this.$VideoWatchAndScrollController35.forEach(function(z){return z.abortLoading();});this.$VideoWatchAndScrollController91();this.$VideoWatchAndScrollController45=setTimeout(function(){c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollController80());this.$VideoWatchAndScrollController81();}.bind(this),s);};y.prototype.$VideoWatchAndScrollController81=function(){'use strict';this.$VideoWatchAndScrollController4||j(0);this.$VideoWatchAndScrollController33&&this.$VideoWatchAndScrollController33.abandonRequest();this.$VideoWatchAndScrollController36=0;this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController31.release();this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController8={};this.$VideoWatchAndScrollController16=null;this.$VideoWatchAndScrollController17=null;this.$VideoWatchAndScrollController4=false;this.$VideoWatchAndScrollController35=[];this.$VideoWatchAndScrollController38=[];this.$VideoWatchAndScrollController14=null;clearTimeout(this.$VideoWatchAndScrollController45);this.$VideoWatchAndScrollController45=null;if(this.$VideoWatchAndScrollController41&&this.$VideoWatchAndScrollController42&&this.$VideoWatchAndScrollController43)this.$VideoWatchAndScrollController92(this.$VideoWatchAndScrollController41,this.$VideoWatchAndScrollController43,this.$VideoWatchAndScrollController42);this.$VideoWatchAndScrollController41=null;this.$VideoWatchAndScrollController43={};if(this.$VideoWatchAndScrollController44){c('DOM').remove(this.$VideoWatchAndScrollController44);this.$VideoWatchAndScrollController44=null;}c('VideoAutoplayControllerX').setShouldAutoplay(true);this.$VideoWatchAndScrollController2=null;if(this.$VideoWatchAndScrollController22){this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController54(this.$VideoWatchAndScrollController22.getVideoNode());this.$VideoWatchAndScrollController62();this.$VideoWatchAndScrollController58(this.$VideoWatchAndScrollController22,c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController22=null;}this.$VideoWatchAndScrollController29=false;this.$VideoWatchAndScrollController46=null;c('VideoChannelLogger').endSession();};y.prototype.$VideoWatchAndScrollController86=function(){'use strict';return c('ReactDOM').render(c('React').createElement(c('VideoWatchAndScrollContainer.react'),{isLiveVideo:function(){return this.$VideoWatchAndScrollController16.isLiveVideo();}.bind(this),initialPosition:this.$VideoWatchAndScrollController7,initialVideoElement:this.$VideoWatchAndScrollController15,onChannelNavigation:this.$VideoWatchAndScrollController93.bind(this),onClick:this.$VideoWatchAndScrollController94.bind(this),onClose:this.$VideoWatchAndScrollController63.bind(this),onCollapse:this.$VideoWatchAndScrollController90.bind(this),onDoubleClick:this.$VideoWatchAndScrollController95.bind(this),onDrop:this.$VideoWatchAndScrollController96.bind(this),onGrab:this.$VideoWatchAndScrollController97.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollController98.bind(this),onReplay:this.$VideoWatchAndScrollController88.bind(this)}),this.$VideoWatchAndScrollController80());};y.prototype.$VideoWatchAndScrollController79=function(){'use strict';if(this.$VideoWatchAndScrollController17)this.$VideoWatchAndScrollController17.emit('exitWatchAndScroll');};y.prototype.$VideoWatchAndScrollController93=function(z){'use strict';if(z>0&&this.$VideoWatchAndScrollController35.length<=this.$VideoWatchAndScrollController36){if(!c('shouldWNSRenderToRHC')())this.$VideoWatchAndScrollController63();return;}this.$VideoWatchAndScrollController36+=z;this.$VideoWatchAndScrollController60();};y.prototype.$VideoWatchAndScrollController97=function(){'use strict';if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController51();var z=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(z)return;this.$VideoWatchAndScrollController23=this.$VideoWatchAndScrollController16.isState('playing');this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);};y.prototype.$VideoWatchAndScrollController96=function(){'use strict';var z=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(z)return;if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController23=null;};y.prototype.$VideoWatchAndScrollController94=function(){'use strict';var z=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(this.$VideoWatchAndScrollController19||z)return;if(this.$VideoWatchAndScrollController16.isState('playing')){this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);}else if(this.$VideoWatchAndScrollController16.isState('paused')||this.$VideoWatchAndScrollController16.isState('finished')||this.$VideoWatchAndScrollController16.isState('ready'))this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').USER);};y.prototype.$VideoWatchAndScrollController82=function(z){'use strict';if(this.$VideoWatchAndScrollController16===z)return;if(c('VideoPlayerExperiments').rhcWNSEnabled)z.addListener('WatchAndScroll/collapse',function(){if(z!=this.$VideoWatchAndScrollController16){z.removeCurrentListener();return;}if(!c('shouldWNSRenderToRHC')())return;c('Arbiter').inform('VideoWatchAndScrollController/collapse');}.bind(this));this.$VideoWatchAndScrollController16=z;};y.prototype.$VideoWatchAndScrollController95=function(){'use strict';if(this.$VideoWatchAndScrollController19)return;var z=this.$VideoWatchAndScrollController16.getOption('VideoWithClickToChannelView','isChannelEligible'),aa=this.$VideoWatchAndScrollController16.getVideoID()===this.$VideoWatchAndScrollController17.getVideoID();if(aa&&!z)return;c('Bootloader').loadModules(["VideoChannelController"],function(ba){this.$VideoWatchAndScrollController67();ba.openFromVideoPlayer(this.$VideoWatchAndScrollController16,this.$VideoWatchAndScrollController16.getVideoChannelID(),this.$VideoWatchAndScrollController34,this.$VideoWatchAndScrollController66());}.bind(this),'VideoWatchAndScrollController');};y.prototype.pauseActiveVideo=function(z){'use strict';if(!this.$VideoWatchAndScrollController16)return;this.$VideoWatchAndScrollController16.pause(z);};y.pauseActiveVideo=function(){var z=arguments.length<=0||arguments[0]===undefined?c('VideoPlayerReason').USER:arguments[0];'use strict';if(!u)return;u.pauseActiveVideo(z);};y.prototype.playActiveVideo=function(z){'use strict';if(!this.$VideoWatchAndScrollController16)return;this.$VideoWatchAndScrollController16.play(z);};y.playActiveVideo=function(){var z=arguments.length<=0||arguments[0]===undefined?c('VideoPlayerReason').USER:arguments[0];'use strict';if(!u)return;u.playActiveVideo(z);};y.prototype.$VideoWatchAndScrollController98=function(z){'use strict';this.$VideoWatchAndScrollController7=z;if(this.$VideoWatchAndScrollController14&&!this.$VideoWatchAndScrollController14.getFadeOutStatus()){this.$VideoWatchAndScrollController16.setDimensions(z.width,z.height);this.$VideoWatchAndScrollController16.emit('WatchAndScroll/positionUpdated');}};y.prototype.$VideoWatchAndScrollController99=function(){'use strict';var z=c('DOM').create('div');if(c('shouldWNSRenderToRHC')()){c('ifRequired')('RHCVideoWNSController',function(aa){return aa.mount(z);});}else c('DOM').appendContent(document.body,z);return z;};y.prototype.$VideoWatchAndScrollController80=function(){'use strict';if(!this.$VideoWatchAndScrollController2)this.$VideoWatchAndScrollController2=this.$VideoWatchAndScrollController99();return this.$VideoWatchAndScrollController2;};f.exports=y;}),null);
__d('EmbeddedVideoControls',['csx','Arbiter','AsyncRequest','DeferredComponent.react','EventListener','FullScreen','Map','Parent','React','ReactDOM','VideoChannelViewVariables','VideoPlayerExperiments','VideoPlayerLoggerEvent','VideoPlayerLoggerSource','VideoPlayerReason','VideoPlayerUIComponentDrawer','VideoPlayerVersions','VideoWatchAndScrollController','XBasicFBNuxGenShouldShowController','cancelAnimationFrame','containsNode','destroyOnUnload','getActiveElement','logVideosClickTracking','requestAnimationFrame','shouldWNSRenderToRHC','throttle'],(function a(b,c,d,e,f,g,h){var i=c('VideoChannelViewVariables').channelRedesign,j=4936,k=c('VideoPlayerExperiments').persistentWNSEnabled;function l(m,n,o){'use strict';this.$EmbeddedVideoControls7=function(){this.$EmbeddedVideoControls46=false;this.scheduleRenderReactComponent();}.bind(this);this.$EmbeddedVideoControls8=m;this.$EmbeddedVideoControls42=n;this.$EmbeddedVideoControls6=0;this.$EmbeddedVideoControls37=0;this.$EmbeddedVideoControls36=0;this.$EmbeddedVideoControls11=0;this.$EmbeddedVideoControls53=false;this.$EmbeddedVideoControls21=o.hideOnEvents.autoplay;this.$EmbeddedVideoControls22=o.hideOnEvents.finish;this.$EmbeddedVideoControls17=o.hideOnEvents.pause;this.$EmbeddedVideoControls18=o.hidePlaybackControl;this.$EmbeddedVideoControls45=o.showPlaybackRateControl;this.$EmbeddedVideoControls19=o.hideRemainingTime;this.$EmbeddedVideoControls20=o.hideSettings;this.$EmbeddedVideoControls51=o.useTwoRows;this.$EmbeddedVideoControls24=o.isCommentAttachment;this.$EmbeddedVideoControls70=o.pointsOfInterestConfig||{};this.$EmbeddedVideoControls71=o.displayElapsedTime||false;this.$EmbeddedVideoControls72=o.adBreaksTimeOffset;this.$EmbeddedVideoControls73=o.showSpatialAudioNUX;this.$EmbeddedVideoControls32=false;this.$EmbeddedVideoControls44=o.shouldShowWNSNUX;this.$EmbeddedVideoControls46=false;this.$EmbeddedVideoControls47=false;var p=m.isPlayerVersion(c('VideoPlayerVersions').PLEASANTVILLE);this.$EmbeddedVideoControls15=o.showButtons.watchandscroll&&p;this.$EmbeddedVideoControls1=o.showButtons.casting;this.$EmbeddedVideoControls2=o.showButtons.fullscreen&&!!c('FullScreen').isSupported();this.$EmbeddedVideoControls3=!!(o.showButtons.enqueue&&o.saveURI);this.$EmbeddedVideoControls35=o.permalinkURL;this.$EmbeddedVideoControls28=o.isLive;this.$EmbeddedVideoControls29=o.isSphericalVideo;this.$EmbeddedVideoControls40=c('VideoPlayerExperiments').redesign;this.$EmbeddedVideoControls16=false;this.$EmbeddedVideoControls67=o.showQualitySelector;this.$EmbeddedVideoControls68=o.qualitySelectorMinStreams;this.$EmbeddedVideoControls55=this.enterWatchAndScroll.bind(this);this.$EmbeddedVideoControls57=this.play.bind(this);this.$EmbeddedVideoControls56=this.pause.bind(this);this.$EmbeddedVideoControls58=this.scrubBegin.bind(this);this.$EmbeddedVideoControls59=this.scrubEnd.bind(this);this.$EmbeddedVideoControls48=this.startCasting.bind(this);this.$EmbeddedVideoControls49=this.enqueueVideo.bind(this,o.saveURI);this.$EmbeddedVideoControls50=this.stopCasting.bind(this);this.$EmbeddedVideoControls61=this.toggleFullscreen.bind(this);this.$EmbeddedVideoControls62=this.toggleHD.bind(this);this.$EmbeddedVideoControls63=this.toggleHLS.bind(this);this.$EmbeddedVideoControls64=this.toggleMuted.bind(this);this.$EmbeddedVideoControls65=this.toggleSubtitles.bind(this);this.$EmbeddedVideoControls54=this.changeVolume.bind(this);this.$EmbeddedVideoControls60=this.setVideoPlaybackRate.bind(this);this.$EmbeddedVideoControls66=this.setPreferredVideoQuality.bind(this);this.$EmbeddedVideoControls69=this.$EmbeddedVideoControls8.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.EmbeddedControls,36);this.$EmbeddedVideoControls34=o.needsInitialVideoInfoUpdate;if(!k)c('destroyOnUnload')(function(){return c('ReactDOM').unmountComponentAtNode(n);});var q=this.$EmbeddedVideoControls8.getRootNode();c('EventListener').listen(this.$EmbeddedVideoControls42,'focusin',function(){this.$EmbeddedVideoControls10=true;this.scheduleRenderReactComponent();}.bind(this));c('EventListener').listen(this.$EmbeddedVideoControls42,'focusout',function(){if(!c('containsNode')(this.$EmbeddedVideoControls42,c('getActiveElement')())){this.$EmbeddedVideoControls10=false;this.scheduleRenderReactComponent();}}.bind(this));c('EventListener').listen(q,'click',function(s){if(this.$EmbeddedVideoControls10&&s.detail)c('getActiveElement')().blur();}.bind(this));c('EventListener').listen(q,'mouseleave',function(){this.$EmbeddedVideoControls33=false;this.scheduleRenderReactComponent();}.bind(this));c('EventListener').listen(q,'mouseenter',function(){this.$EmbeddedVideoControls33=true;this.scheduleRenderReactComponent();}.bind(this));this.$EmbeddedVideoControls8.registerOption('VideoControls','acquireForceHideLock',function(){this.$EmbeddedVideoControls11++;return {release:function(){this.$EmbeddedVideoControls11--;this.scheduleRenderReactComponent();}.bind(this)};}.bind(this));this.$EmbeddedVideoControls8.registerOption('VideoControls','hideOnFinish',function(){return this.$EmbeddedVideoControls22;}.bind(this),function(s){this.$EmbeddedVideoControls22=s;}.bind(this));this.$EmbeddedVideoControls8.registerOption('VideoControls','hideOnPause',function(){return this.$EmbeddedVideoControls17;}.bind(this),function(s){this.$EmbeddedVideoControls17=s;}.bind(this));this.$EmbeddedVideoControls8.registerOption('VideoControls','available',function(){return true;});this.$EmbeddedVideoControls8.registerOption('VideoControls','areControlsVisible',this.areControlsVisible.bind(this));['mousemove','mousedown','keydown'].forEach(function(s){c('EventListener').listen(this.$EmbeddedVideoControls8.getRootNode(),s,c('throttle')(this.flashControls.bind(this),200));}.bind(this));this.scheduleRenderReactComponent();var r=['changeVolume','loadedSubtitles','muteVideo','pausePlayback','stateChange','toggleFullscreen','toggleSubtitles','updateMetadata','unmuteVideo','qualityChange','casting/receiverStateChange','casting/supportStateChange','casting/castingStateChange','casting/playStateChange'];r.forEach(function(event){return this.$EmbeddedVideoControls8.addListener(event,function(){return this.scheduleRenderReactComponentWithVideoInfoUpdate();}.bind(this));}.bind(this));this.$EmbeddedVideoControls8.addListener('beginPlayback',function(){return this.$EmbeddedVideoControls74();}.bind(this));this.$EmbeddedVideoControls8.addListener('updateStatus',function(s){this.$EmbeddedVideoControls37=s.position;this.scheduleRenderReactComponent();}.bind(this));this.$EmbeddedVideoControls8.addListener('casting/updateStatus',function(s){this.$EmbeddedVideoControls37=s.position;this.scheduleRenderReactComponent();}.bind(this));this.$EmbeddedVideoControls8.addListener('updateBuffer',function(s){this.$EmbeddedVideoControls6=s.duration+s.offset;this.scheduleRenderReactComponent();}.bind(this));this.$EmbeddedVideoControls8.addListener('optionsChange',function(s){this.$EmbeddedVideoControls75();}.bind(this));this.$EmbeddedVideoControls8.addListener('resumeAutoplay',function(s){this.$EmbeddedVideoControls76();this.scheduleRenderReactComponentWithVideoInfoUpdate();}.bind(this));this.$EmbeddedVideoControls8.addListener('turnOffAutoplay',function(s){this.$EmbeddedVideoControls23=false;}.bind(this));if(this.$EmbeddedVideoControls44){this.$EmbeddedVideoControls8.addListener('VideoWithStallRecovery/bufferingStateOn',function(){if(!this.$EmbeddedVideoControls47)this.$EmbeddedVideoControls77(j);}.bind(this));this.$EmbeddedVideoControls8.addListener('VideoWithStallRecovery/bufferingStateOff',function(){this.$EmbeddedVideoControls46=false;}.bind(this));}this.$EmbeddedVideoControls8.addListener('finishPlayback',function(){this.scheduleRenderReactComponent(true);}.bind(this));this.$EmbeddedVideoControls76();this.$EmbeddedVideoControls78();}l.prototype.enqueueVideo=function(m){'use strict';if(!m)return;c('Arbiter').inform('EmbeddedVideoControls/enqueueVideo');new (c('AsyncRequest'))().setURI(m).setHandler(function(){}).send();};l.prototype.$EmbeddedVideoControls79=function(){'use strict';return this.$EmbeddedVideoControls8.isState('playing')&&this.$EmbeddedVideoControls8.getOption('FeedAutoplay','isAutoplaying');};l.prototype.$EmbeddedVideoControls78=function(){'use strict';this.$EmbeddedVideoControls43=this.$EmbeddedVideoControls8.getOption('VideoScrubberPreviewComponent','scrubberPreviewSprites');this.$EmbeddedVideoControls13=this.$EmbeddedVideoControls8.getOption('VideoScrubberPreviewComponent','hasPreviewThumbnails');this.$EmbeddedVideoControls38=this.$EmbeddedVideoControls8.getOption('VideoScrubberPreviewComponent','previewThumbnailInformation');};l.prototype.$EmbeddedVideoControls76=function(){'use strict';this.$EmbeddedVideoControls23=this.$EmbeddedVideoControls8.getOption('FeedAutoplay','isAutoplaying');};l.prototype.$EmbeddedVideoControls75=function(){'use strict';this.$EmbeddedVideoControls76();this.$EmbeddedVideoControls78();};l.prototype.$EmbeddedVideoControls74=function(){'use strict';this.flashControls();this.$EmbeddedVideoControls31=true;this.scheduleRenderReactComponentWithVideoInfoUpdate();};l.prototype.$EmbeddedVideoControls77=function(m){'use strict';var n=c('XBasicFBNuxGenShouldShowController').getURIBuilder().setInt('nux_id',m).getURI();new (c('AsyncRequest'))().setURI(n).setMethod('GET').setReadOnly(true).setHandler(function(o){var p=o.getPayload();this.$EmbeddedVideoControls46=p.should_show_nux;}.bind(this)).send();};l.prototype.updateConfig_DEPRECATED=function(m,n){'use strict';this.$EmbeddedVideoControls35=m.permalinkURL||null;this.$EmbeddedVideoControls1=m.showButtons?m.showButtons.casting:false;this.$EmbeddedVideoControls28=!!m.isLive;this.scheduleRenderReactComponent();};l.prototype.flashControls=function(){'use strict';if(!this.$EmbeddedVideoControls39){this.$EmbeddedVideoControls39=true;this.scheduleRenderReactComponent();}clearTimeout(this.$EmbeddedVideoControls9);this.$EmbeddedVideoControls9=setTimeout(function(){this.$EmbeddedVideoControls39=false;this.scheduleRenderReactComponent();}.bind(this),3000);};l.prototype.areControlsVisible=function(){'use strict';if(!this.areControlsEnabled())return false;if(this.$EmbeddedVideoControls46)return true;if(this.$EmbeddedVideoControls8.isState('playing')){if(this.$EmbeddedVideoControls21&&this.$EmbeddedVideoControls23)return false;return this.$EmbeddedVideoControls10||this.$EmbeddedVideoControls33&&this.$EmbeddedVideoControls39;}else if(this.$EmbeddedVideoControls8.isState('finished')){return this.$EmbeddedVideoControls8.isFullscreen()||!this.$EmbeddedVideoControls22;}else if(this.$EmbeddedVideoControls8.isState('paused'))return this.$EmbeddedVideoControls8.isFullscreen()||!this.$EmbeddedVideoControls17;return false;};l.prototype.areControlsEnabled=function(){'use strict';if(this.$EmbeddedVideoControls11>0||this.$EmbeddedVideoControls8.isState('loading')||this.$EmbeddedVideoControls8.isState('fallback')||this.$EmbeddedVideoControls8.isState('finished')&&this.$EmbeddedVideoControls22&&!this.$EmbeddedVideoControls8.isFullscreen())return false;return true;};l.prototype.scheduleRenderReactComponentWithVideoInfoUpdate=function(){'use strict';this.$EmbeddedVideoControls34=true;this.scheduleRenderReactComponent(true);};l.prototype.shouldRenderComponent=function(){'use strict';if(this.$EmbeddedVideoControls8.isState('loading')||this.$EmbeddedVideoControls8.isState('fallback'))return false;if(this.areControlsVisible()){this.$EmbeddedVideoControls16=false;return true;}if(!this.$EmbeddedVideoControls16){this.$EmbeddedVideoControls16=true;return true;}return false;};l.prototype.scheduleRenderReactComponent=function(){var m=arguments.length<=0||arguments[0]===undefined?false:arguments[0];'use strict';if(!m&&!this.shouldRenderComponent())return;c('cancelAnimationFrame')(this.$EmbeddedVideoControls41);this.$EmbeddedVideoControls41=c('requestAnimationFrame')(this.renderReactComponent.bind(this));};l.prototype.renderReactComponent=function(){'use strict';if(this.$EmbeddedVideoControls34)this.$EmbeddedVideoControls80();var m=this.areControlsVisible();if(this.$EmbeddedVideoControls53!==m){this.$EmbeddedVideoControls8.emit('VideoControls/visibilityUpdate',{areControlsVisible:m});if(m){this.$EmbeddedVideoControls69.reserve();}else this.$EmbeddedVideoControls69.release();}this.$EmbeddedVideoControls53=m;var n=this.$EmbeddedVideoControls8.getAvailableVideoQualities(),o=this.$EmbeddedVideoControls8.getSelectedVideoQuality(),p=this.$EmbeddedVideoControls8.canAutoSelectVideoQuality(),q=this.$EmbeddedVideoControls8.getStreamingFormat(),r=null;if(this.$EmbeddedVideoControls8.hasOption('LiveHeatmap','interestLevels'))r=this.$EmbeddedVideoControls8.getOption('LiveHeatmap','interestLevels');var s=this.$EmbeddedVideoControls32;this.$EmbeddedVideoControls32=c('VideoPlayerExperiments').slidingWNSv3&&this.$EmbeddedVideoControls15&&c('VideoWatchAndScrollController').isSlidingEnabled(this.$EmbeddedVideoControls8);if(s!==this.$EmbeddedVideoControls32)this.$EmbeddedVideoControls8.logEvent(this.$EmbeddedVideoControls32?c('VideoPlayerLoggerEvent').WATCH_AND_SCROLL_ICON_HIGHLIGHTED:c('VideoPlayerLoggerEvent').WATCH_AND_SCROLL_ICON_UNHIGHLIGHTED);c('ReactDOM').render(c('React').createElement(c('DeferredComponent.react'),{deferredPlaceholder:c('React').createElement('span',null),deferredComponent:function t(u){return e(['EmbeddedVideoControls.react'],u);},allowCasting:this.$EmbeddedVideoControls1,allowFullscreen:this.$EmbeddedVideoControls2,allowEnqueuing:this.$EmbeddedVideoControls3,areSubtitlesActive:this.$EmbeddedVideoControls4,areHLSActive:this.$EmbeddedVideoControls5,bufferedPosition:this.$EmbeddedVideoControls6,finishedPlaying:this.$EmbeddedVideoControls8.isState('finished'),hasFoundReceiver:this.hasFoundReceiver(),hasHD:this.$EmbeddedVideoControls12,hasSubtitles:this.$EmbeddedVideoControls14,hasWatchAndScroll:this.$EmbeddedVideoControls15&&!this.getIsInChannel(),hidden:!this.areControlsEnabled(),isCasting:this.isCasting(),isCastingSupported:this.isCastingSupported(),isCommentAttachment:this.$EmbeddedVideoControls24,isFullscreen:this.$EmbeddedVideoControls25,isHD:this.$EmbeddedVideoControls26,isInline:this.$EmbeddedVideoControls27,isLive:this.$EmbeddedVideoControls28,isSphericalVideo:this.$EmbeddedVideoControls29,isMuted:this.$EmbeddedVideoControls30,isPlaying:this.$EmbeddedVideoControls31,isSidePaneOpen:this.getIsInChannel()&&!!c('Parent').bySelector(this.$EmbeddedVideoControls42,"._57bj"),isSlidingWNSEligible:this.$EmbeddedVideoControls32,interestLevels:r,drawer:this.$EmbeddedVideoControls69,onEnterWatchAndScroll:this.$EmbeddedVideoControls55,onWNSNUXClose:this.$EmbeddedVideoControls7,onEnqueueVideo:this.$EmbeddedVideoControls49,onPause:this.$EmbeddedVideoControls56,onPlay:this.$EmbeddedVideoControls57,onScrubBegin:this.$EmbeddedVideoControls58,onScrubEnd:this.$EmbeddedVideoControls59,onSetVideoPlaybackRate:this.$EmbeddedVideoControls60,onSidePaneToggle:function t(){c('Arbiter').inform('VideoChannelView/sidePaneToggle',{});},onStartCast:this.$EmbeddedVideoControls48,onStopCast:this.$EmbeddedVideoControls50,onToggleFullscreen:this.$EmbeddedVideoControls61,onToggleHD:this.$EmbeddedVideoControls62,onToggleHLS:this.$EmbeddedVideoControls63,onToggleMuted:this.$EmbeddedVideoControls64,onToggleSubtitles:this.$EmbeddedVideoControls65,onVolumeChange:this.$EmbeddedVideoControls54,permalinkURL:this.$EmbeddedVideoControls35,playbackDuration:this.$EmbeddedVideoControls36,playbackPosition:this.$EmbeddedVideoControls37,transparent:!m,redesign:this.$EmbeddedVideoControls40,hidePlaybackControl:this.$EmbeddedVideoControls18,showPlaybackRateControl:this.$EmbeddedVideoControls45,hideRemainingTime:this.$EmbeddedVideoControls19,hideSettings:this.$EmbeddedVideoControls20,useTwoRows:this.$EmbeddedVideoControls51,volume:this.$EmbeddedVideoControls52,scrubberPreviewSprites:this.$EmbeddedVideoControls43,hasScrubberPreview:this.$EmbeddedVideoControls13,previewThumbnailInformation:this.$EmbeddedVideoControls38,availableQualities:n,selectedQuality:o,canAutoSelectVideoQuality:p,onSelectQuality:this.$EmbeddedVideoControls66,showQualitySelector:this.$EmbeddedVideoControls67,qualitySelectorMinStreams:this.$EmbeddedVideoControls68,streamingFormat:q,showSpatialAudioNUX:this.$EmbeddedVideoControls73,onPointOfInterestSelect:this.$EmbeddedVideoControls70.onPointOfInterestSelect,currentPointOfInterest:this.$EmbeddedVideoControls70.currentPointOfInterest,pointsOfInterest:this.$EmbeddedVideoControls70.pointsOfInterest,displayElapsedTime:this.$EmbeddedVideoControls71,adBreaksTimeOffset:this.$EmbeddedVideoControls72,showSidePaneToggle:this.getIsInChannel()&&!this.$EmbeddedVideoControls25&&i,showWNSNUX:this.$EmbeddedVideoControls46&&this.areControlsEnabled()&&this.$EmbeddedVideoControls44}),this.$EmbeddedVideoControls42);if(this.$EmbeddedVideoControls46&&this.areControlsEnabled()&&this.$EmbeddedVideoControls44)this.$EmbeddedVideoControls47=true;};l.prototype.$EmbeddedVideoControls80=function(){'use strict';var m=this.$EmbeddedVideoControls8.getVideoInfo_DEPRECATED();if(m){this.$EmbeddedVideoControls4=m.areSubtitlesActive;this.$EmbeddedVideoControls14=m.hasSubtitles;this.$EmbeddedVideoControls12=m.hasHD;this.$EmbeddedVideoControls26=m.isHD;this.$EmbeddedVideoControls30=m.isMuted;this.$EmbeddedVideoControls31=m.isPlaying||this.isCastPlaying();this.$EmbeddedVideoControls36=m.playbackDuration;this.$EmbeddedVideoControls52=m.volume;var n=this.$EmbeddedVideoControls8.getOption('CommercialBreakVideoAdOverlay','videoController');if(n){this.$EmbeddedVideoControls25=n.isFullscreen();}else this.$EmbeddedVideoControls25=this.$EmbeddedVideoControls8.isFullscreen();this.$EmbeddedVideoControls27=this.$EmbeddedVideoControls8.getSource()===c('VideoPlayerLoggerSource').INLINE||this.$EmbeddedVideoControls8.getSource()===c('VideoPlayerLoggerSource').CONTINUE_WATCHING_RECOMMENDATION;this.$EmbeddedVideoControls28=m.isLiveStream;this.$EmbeddedVideoControls5=m.areHLSActive;this.$EmbeddedVideoControls34=false;}};l.prototype.toggleHD=function(){'use strict';this.$EmbeddedVideoControls8.toggleHD();};l.prototype.setPreferredVideoQuality=function(m){'use strict';if(m){this.$EmbeddedVideoControls8.setPreferredVideoQuality(m);}else this.$EmbeddedVideoControls8.unsetPreferredVideoQuality();};l.prototype.toggleHLS=function(){'use strict';this.$EmbeddedVideoControls8.switchToStreamType('hls');};l.prototype.enterWatchAndScroll=function(){'use strict';if(c('shouldWNSRenderToRHC')()){this.$EmbeddedVideoControls8.emit('crossfadeWatchAndScroll');}else this.$EmbeddedVideoControls8.emit('enterWatchAndScroll');};l.prototype.scrubBegin=function(){'use strict';if(!this.isCasting())this.$EmbeddedVideoControls8.pause(c('VideoPlayerReason').SEEK);};l.prototype.scrubEnd=function(m){'use strict';this.$EmbeddedVideoControls8.seek(m);this.$EmbeddedVideoControls37=m;if(!this.isCasting()&&this.$EmbeddedVideoControls31)this.$EmbeddedVideoControls8.play(c('VideoPlayerReason').SEEK);};l.prototype.toggleMuted=function(){'use strict';if(this.$EmbeddedVideoControls8.isMuted()){c('logVideosClickTracking')(this.$EmbeddedVideoControls8.getVideoNode());this.$EmbeddedVideoControls8.unmute();}else this.$EmbeddedVideoControls8.mute();};l.prototype.toggleFullscreen=function(){'use strict';if(!this.$EmbeddedVideoControls8.isFullscreen())c('logVideosClickTracking')(this.$EmbeddedVideoControls8.getVideoNode());this.$EmbeddedVideoControls8.toggleFullscreen();};l.prototype.toggleSubtitles=function(){'use strict';this.$EmbeddedVideoControls8.toggleSubtitles();this.scheduleRenderReactComponent();};l.prototype.changeVolume=function(m){'use strict';this.$EmbeddedVideoControls8.setVolume(m);};l.prototype.play=function(){'use strict';c('logVideosClickTracking')(this.$EmbeddedVideoControls8.getVideoNode());if(this.isCasting()){this.$EmbeddedVideoControls8.setOption('casting','isPlaying',true);}else this.$EmbeddedVideoControls8.play(c('VideoPlayerReason').USER);};l.prototype.pause=function(){'use strict';if(this.isCasting()){this.$EmbeddedVideoControls8.setOption('casting','isPlaying',false);}else this.$EmbeddedVideoControls8.pause(c('VideoPlayerReason').USER);};l.prototype.setVideoPlaybackRate=function(m){'use strict';this.$EmbeddedVideoControls8.setPlaybackRate(m);};l.prototype.startCasting=function(){'use strict';this.$EmbeddedVideoControls8.setOption('casting','isCasting',true);};l.prototype.stopCasting=function(){'use strict';this.$EmbeddedVideoControls8.setOption('casting','isCasting',false);};l.prototype.isCastPlaying=function(){'use strict';return this.$EmbeddedVideoControls8.getOption('casting','isPlaying');};l.prototype.hasFoundReceiver=function(){'use strict';return this.$EmbeddedVideoControls8.getOption('casting','hasFoundReceiver');};l.prototype.isCasting=function(){'use strict';return this.$EmbeddedVideoControls8.getOption('casting','isCasting');};l.prototype.isCastingSupported=function(){'use strict';return this.$EmbeddedVideoControls8.getOption('casting','isSupported');};l.prototype.updatePointsOfInterestConfig=function(m){'use strict';Object.assign(this.$EmbeddedVideoControls70,m);this.scheduleRenderReactComponent();};l.prototype.updateDisplayElapsedTime=function(m){'use strict';this.$EmbeddedVideoControls71=m;this.scheduleRenderReactComponent();};l.prototype.getIsInChannel=function(){'use strict';return this.$EmbeddedVideoControls8.getIsInChannel();};f.exports=l;}),null);
__d('SphericalVideoFallback',['cx','CSS','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','VideoPlayerStates'],(function a(b,c,d,e,f,g,h){var i={setup:function j(k,l){var m,n=l.fallbackUriList,o=l.fallbackType,p=function q(){k.emit(c('VideoPlayerFallbackEvents').ENTER);var r=k.addListener('stateChange',function(){if(k.isState(c('VideoPlayerStates').PLAYING)){k.logEvent(c('VideoPlayerLoggerEvent').SPHERICAL_FALLBACK_ENTERED,{spherical_fallback_type:o});r.remove();}});k.setFallbackSources(n);c('CSS').removeClass(k.getRootNode(),"_3-n5");k.reset();k.emit(c('VideoPlayerFallbackEvents').RECOVER);};if(k.isState(c('VideoPlayerStates').FALLBACK)){p();}else (function(){var q=k.addListener('stateChange',function(){if(k.isState(c('VideoPlayerStates').FALLBACK)){p();q.remove();}});})();}};f.exports=i;}),null);
__d('VideoErrorOverlay',['SphericalVideoFallback'],(function a(b,c,d,e,f,g){function h(k,l){if('textContent' in k)k.textContent=l;k.innerText=l;}function i(k){if('textContent' in k)return k.textContent;if(!k.innerText)return '';return k.innerText;}function j(k,l,m,n,o){'use strict';this.$VideoErrorOverlay1=l;this.$VideoErrorOverlay2=m;this.$VideoErrorOverlay3=n;k.registerOption('VideoErrorOverlay','title',function(){return this.getTitle();}.bind(this),function(p){return this.setTitle(p);}.bind(this));k.registerOption('VideoErrorOverlay','message',function(){return this.getMessage();}.bind(this),function(p){return this.setMessage(p);}.bind(this));k.registerOption('VideoErrorOverlay','linkURL',function(){return this.getLinkURL();}.bind(this),function(p){return this.setLinkURL(p);}.bind(this));k.registerOption('VideoErrorOverlay','linkTitle',function(){return this.getLinkTitle();}.bind(this),function(p){return this.setLinkTitle(p);}.bind(this));k.registerOption('VideoErrorOverlay','available',function(){return true;});if(o)c('SphericalVideoFallback').setup(k,o);}j.prototype.getTitle=function(){'use strict';return this.$VideoErrorOverlay1?i(this.$VideoErrorOverlay1):'';};j.prototype.setTitle=function(k){'use strict';if(this.$VideoErrorOverlay1)h(this.$VideoErrorOverlay1,k);};j.prototype.getMessage=function(){'use strict';return i(this.$VideoErrorOverlay2);};j.prototype.setMessage=function(k){'use strict';h(this.$VideoErrorOverlay2,k);};j.prototype.getLinkURL=function(){'use strict';return this.$VideoErrorOverlay3.href;};j.prototype.setLinkURL=function(k){'use strict';this.$VideoErrorOverlay3.href=k;};j.prototype.getLinkTitle=function(){'use strict';return i(this.$VideoErrorOverlay3);};j.prototype.setLinkTitle=function(k){'use strict';h(this.$VideoErrorOverlay3,k);};f.exports=j;}),null);
__d('StreamingReactionsTrayEvents',[],(function a(b,c,d,e,f,g){var h='streamingReactionsTray/AddReactionAnimate',i='streamingReactionsTray/HideChannelViewDetails',j='streamingReactionsTray/ShowChannelViewDetails',k='streamingReactionsTray/UpdateSurface',l='streamingReactionsTray/ResizeChannelViewWindow',m='streamingReactionsTray/ReactionStateChange',n='streamingReactionsTray/FireworksAnimating',o='streamingReactionsTray/DisableReactions',p='streamingReactionsTray/EnableReactions',q={AddReactionAnimate:h,HideChannelViewDetails:i,ReactionStateChange:m,ResizeChannelViewWindow:l,ShowChannelViewDetails:j,UpdateSurface:k,FireworksAnimating:n,DisableReactions:o,EnableReactions:p};f.exports=q;}),null);