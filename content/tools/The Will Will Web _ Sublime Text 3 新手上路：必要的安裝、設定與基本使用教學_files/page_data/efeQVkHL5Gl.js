if (self.CavalryLogger) { CavalryLogger.start_js(["DBmWn"]); }

__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",LOW_BUFFER_AVAILABILITY:"low_buffer_availability",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};}),null);
__d('VideoPlayerAbrTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('vpabr_proxy:VideoPlayerAbrLoggerConfig',this.$VideoPlayerAbrTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('vpabr_proxy:VideoPlayerAbrLoggerConfig',this.$VideoPlayerAbrTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerAbrTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerAbrTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerAbrTypedLogger1,j);return this;};h.prototype.setBandwidthEstimate=function(j){this.$VideoPlayerAbrTypedLogger1.bandwidth_estimate=j;return this;};h.prototype.setBufferedAhead=function(j){this.$VideoPlayerAbrTypedLogger1.buffered_ahead=j;return this;};h.prototype.setBytes=function(j){this.$VideoPlayerAbrTypedLogger1.bytes=j;return this;};h.prototype.setClientTime=function(j){this.$VideoPlayerAbrTypedLogger1.client_time=j;return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_end=j;return this;};h.prototype.setDelayMs=function(j){this.$VideoPlayerAbrTypedLogger1.delay_ms=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerAbrTypedLogger1.event=j;return this;};h.prototype.setPlayhead=function(j){this.$VideoPlayerAbrTypedLogger1.playhead=j;return this;};h.prototype.setReason=function(j){this.$VideoPlayerAbrTypedLogger1.reason=j;return this;};h.prototype.setRepresentationID=function(j){this.$VideoPlayerAbrTypedLogger1.representation_id=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerAbrTypedLogger1.session=j;return this;};h.prototype.setUnsampledReason=function(j){this.$VideoPlayerAbrTypedLogger1.unsampled_reason=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerAbrTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerAbrTypedLogger1.video_id=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$VideoPlayerAbrTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerAbrTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={bandwidth_estimate:true,buffered_ahead:true,bytes:true,client_time:true,client_time_begin:true,client_time_end:true,delay_ms:true,event:true,playhead:true,reason:true,representation_id:true,session:true,unsampled_reason:true,vc:true,video_id:true};f.exports=h;}),null);
__d('VideoPlayerShakaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this;};h.prototype.setAccessToken=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=j;return this;};h.prototype.setAdditionalBufferedRanges=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.additional_buffered_ranges=j;return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this;};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this;};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this;};h.prototype.setInitiator=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.initiator=j;return this;};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this;};h.prototype.setLastBufferedEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_end=j;return this;};h.prototype.setLastBufferedStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_start=j;return this;};h.prototype.setLastPlayingEventTime=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_playing_event_time=j;return this;};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this;};h.prototype.setParentID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.parent_id=j;return this;};h.prototype.setPlayerOriginCallerSpecified=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.player_origin_caller_specified=j;return this;};h.prototype.setPlayhead=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.playhead=j;return this;};h.prototype.setPriority=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.priority=j;return this;};h.prototype.setPushed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.pushed=j;return this;};h.prototype.setRepresentationID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.representation_id=j;return this;};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this;};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this;};h.prototype.setScriptPath=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.script_path=j;return this;};h.prototype.setSequentialID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.sequential_id=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this;};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this;};h.prototype.setStreamSwitchReason=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.stream_switch_reason=j;return this;};h.prototype.setTimeToFirstByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_first_byte=j;return this;};h.prototype.setTimeToLastByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_last_byte=j;return this;};h.prototype.setTimeToRequestStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_start=j;return this;};h.prototype.setType=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.type=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this;};var i={access_token:true,additional_buffered_ranges:true,client_time_begin:true,client_time_end:true,code:true,error:true,event:true,initiator:true,is_live:true,last_buffered_end:true,last_buffered_start:true,last_playing_event_time:true,length:true,parent_id:true,player_origin_caller_specified:true,playhead:true,priority:true,pushed:true,representation_id:true,resource:true,result:true,script_path:true,sequential_id:true,session:true,state:true,stream_switch_reason:true,time_to_first_byte:true,time_to_last_byte:true,time_to_request_start:true,type:true,vc:true,video_id:true};f.exports=h;}),null);
__d('TaggedTimeRanges',['sprintf'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;}),null);
__d("VideoPlayerUtils",[],(function a(b,c,d,e,f,g){var h={getBufferedAheadOf:function i(j){var k=1/60,l=j.currentTime,m=j.buffered;for(var n=0;n<m.length;n++){var o=m.start(n)-k,p=m.end(n)+k;if(l>=o&&l<=p)return m.end(n)-l;}return 0;}};f.exports=h;}),null);
__d('VideoPushParametersHelper',['URI','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){var h=/(.*)\.(xx|fna)\.fbcdn\.net/;function i(j){'use strict';this.$VideoPushParametersHelper1=new (c('URI'))(j);return this;}i.prototype.setStreamEndOffset=function(j){'use strict';this.$VideoPushParametersHelper2=Math.min(Math.floor(j)+1,c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush);this.$VideoPushParametersHelper4=Math.floor(j)+1;return this;};i.prototype.setSegmentStartTime=function(j){'use strict';this.$VideoPushParametersHelper3=j;return this;};i.prototype.setPushVideoRepresentationID=function(j){'use strict';this.$VideoPushParametersHelper5=j;return this;};i.prototype.setPushAudioRepresentationID=function(j){'use strict';this.$VideoPushParametersHelper6=j;return this;};i.prototype.setUseLongCacheForManifest=function(j){'use strict';this.$VideoPushParametersHelper7=j;return this;};i.prototype.getURL=function(){'use strict';var j=h.test(this.$VideoPushParametersHelper1.toString());if(j&&c('VideoPlayerShakaExperiments').liveSendPushHeaders){if(this.$VideoPushParametersHelper2!=null)this.$VideoPushParametersHelper1.addQueryData('_nc_p_n',this.$VideoPushParametersHelper2);if(this.$VideoPushParametersHelper3!=null){this.$VideoPushParametersHelper1.addQueryData('_nc_p_ts',this.$VideoPushParametersHelper3);}else if(this.$VideoPushParametersHelper4!=null)this.$VideoPushParametersHelper1.addQueryData('_nc_p_o',this.$VideoPushParametersHelper4);if(this.$VideoPushParametersHelper5!=null&&this.$VideoPushParametersHelper6!=null){this.$VideoPushParametersHelper1.addQueryData('_nc_p_rid',this.$VideoPushParametersHelper5);this.$VideoPushParametersHelper1.addQueryData('_nc_p_arid',this.$VideoPushParametersHelper6);}if(this.$VideoPushParametersHelper7)this.$VideoPushParametersHelper1.addQueryData('_nc_nc','1');}return this.$VideoPushParametersHelper1.toString();};i.prototype.getSegmentsToPush=function(){'use strict';return this.$VideoPushParametersHelper2;};i.prototype.getSegmentStartTime=function(){'use strict';return this.$VideoPushParametersHelper3;};i.prototype.getSegmentOffset=function(){'use strict';return this.$VideoPushParametersHelper4;};i.prototype.getPushVideoRepresentationID=function(){'use strict';return this.$VideoPushParametersHelper5;};i.prototype.getPushAudioRepresentationID=function(){'use strict';return this.$VideoPushParametersHelper6;};i.prototype.getUseLongCacheForManifest=function(){'use strict';return this.$VideoPushParametersHelper7;};i.getDefaultLiveStreamEndOffset=function(){'use strict';return c('VideoPlayerShakaExperiments').liveDefaultStreamEndOffset;};f.exports=i;}),null);
__d('extractCEA608',['JSResource'],(function a(b,c,d,e,f,g){var h=null;function i(j,k){if(!h)h=c('JSResource')('CEA608Extractor').__setRef('extractCEA608').load().then(function(l){return new l(k);});return h.then(function(l){return l.extract(j);});}f.exports=i;}),null);
__d('TrackedPromise',['Promise'],(function a(b,c,d,e,f,g){'use strict';var h=window.Promise||c('Promise');c('Promise').resolve();function i(j){this.$TrackedPromise1=true;this.$TrackedPromise2=j.then(function(k){this.$TrackedPromise1=false;return k;}.bind(this),function(k){this.$TrackedPromise1=false;return h.reject(k);}.bind(this));}i.prototype.getPromise=function(){return this.$TrackedPromise2;};i.prototype.isPending=function(){return this.$TrackedPromise1;};f.exports=i;}),null);
__d('VideoPriorityCalculator',['VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.playhead,k=i.bufferEnd,l=i.isPlaying,m=c('VideoPlayerShakaExperiments').globalSchedulerPriorityThreshold,n=k-j<=m?1:0,o=l?1:0;return n+o;}f.exports={calculate:h};}),null);
__d('VideoSegmentInfoHelper',['URI','VideoDashPrefetchCache','XHRRequest','getCrossOriginTransport'],(function a(b,c,d,e,f,g){'use strict';function h(l){var m=new (c('XHRRequest'))(j(l)).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport'));return m;}function i(l){var m=l.requestInfo,n=m.startByte,o=m.endByte;if(n&&o)return o-n;return null;}function j(l){var m=l.requestInfo,n=m.baseUrl,o=m.startByte,p=m.endByte,q=new (c('URI'))(n);if(o!==null&&p!==undefined&&o!==null&&p!==undefined)q=q.addQueryData({bytestart:o,byteend:p});return q;}function k(l){return c('VideoDashPrefetchCache').hasCacheValue(j(l).toString());}f.exports={createRequest:h,estimateRequestSize:i,getRequestUri:j,isPrefetchedRequest:k};}),null);
__d('VideoSegmentPromiseBuffer',['Map','Set'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$VideoSegmentPromiseBuffer1=new (c('Map'))();}h.prototype.appendSegmentPromise=function(i,j){this.$VideoSegmentPromiseBuffer1.set(i,j);return this;};h.prototype.hasSegmentPromise=function(i){return this.$VideoSegmentPromiseBuffer1.has(i);};h.prototype.getSegmentPromise=function(i){return this.$VideoSegmentPromiseBuffer1.get(i)||null;};h.prototype.hasOtherPendingSegments=function(i){var j=new (c('Set'))(i);return Array.from(this.$VideoSegmentPromiseBuffer1.entries()).some(function(k){return k[1].isPending()&&!j.has(k[0]);});};h.prototype.isFirstPendingSegment=function(i){var j=this.$VideoSegmentPromiseBuffer1.get(i);if(!j||!j.isPending())return false;var k=void 0;for(var l=this.$VideoSegmentPromiseBuffer1.entries(),m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;if(p[1].isPending()){k=p[0];break;}}return k===i;};h.prototype.clearAllSegmentPromises=function(){this.$VideoSegmentPromiseBuffer1.clear();return this;};h.prototype.removeSegmentPromisesOlderThan=function(i){if(!this.hasSegmentPromise(i))return;for(var j=this.$VideoSegmentPromiseBuffer1.keys(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var m;if(k){if(l>=j.length)break;m=j[l++];}else{l=j.next();if(l.done)break;m=l.value;}var n=m;if(n===i)return;this.$VideoSegmentPromiseBuffer1['delete'](n);}};h.prototype.removeSegmentPromise=function(i){this.$VideoSegmentPromiseBuffer1['delete'](i);};f.exports=h;}),null);
__d('NetworkRequestPipelineStats',['Set'],(function a(b,c,d,e,f,g){'use strict';var h=5,i=.5,j=30;function k(){this.$NetworkRequestPipelineStats1={};this.$NetworkRequestPipelineStats2={};this.$NetworkRequestPipelineStats3=0;this.$NetworkRequestPipelineStats4=0;this.$NetworkRequestPipelineStats5=0;this.$NetworkRequestPipelineStats6=0;this.$NetworkRequestPipelineStats7=new (c('Set'))();}k.prototype.addEntry=function(l,m){this.$NetworkRequestPipelineStats6=Math.max(this.$NetworkRequestPipelineStats6,l);if(!m)return;this.$NetworkRequestPipelineStats1[l]=m;var n=this.$NetworkRequestPipelineStats1[l-1];if(!this.$NetworkRequestPipelineStats7.has(l-1)&&n)this.$NetworkRequestPipelineStats8(n,m,l);var o=this.$NetworkRequestPipelineStats1[l+1];if(!this.$NetworkRequestPipelineStats7.has(l)&&o)this.$NetworkRequestPipelineStats8(m,o,l+1);};k.prototype.setNetworkIdle=function(){this.$NetworkRequestPipelineStats7.add(this.$NetworkRequestPipelineStats6);};k.prototype.$NetworkRequestPipelineStats8=function(l,m,n){this.$NetworkRequestPipelineStats2[n]=m.startTime+m.timeToFirstByte-(l.startTime+l.timeToLastByte);};k.prototype.getBandwidthAlignments=function(){return this.$NetworkRequestPipelineStats2;};k.prototype.getBandwidthUtilization=function(){var l=0,m=0;Object.keys(this.$NetworkRequestPipelineStats2).forEach(function(n){var o=Number.parseInt(n,10),p=this.$NetworkRequestPipelineStats2[o],q=this.$NetworkRequestPipelineStats1[o],r=q.timeToLastByte-q.timeToFirstByte;l+=r;m+=Math.max(0,p)+r;}.bind(this));return l/Math.max(1,m);};k.prototype.$NetworkRequestPipelineStats9=function(l){var m=[],n=0;while(true){var o=this.$NetworkRequestPipelineStats1[this.$NetworkRequestPipelineStats6-n];if(!o)break;if(o.timeToLastByte-o.timeToFirstByte>=j)m.push(o);n++;}return m;};k.prototype.getEstimatedDownloadTime=function(l){if(l){var m=this.$NetworkRequestPipelineStats10();if(!m)return 0;return l/m;}return this.$NetworkRequestPipelineStats11(function(n){return n.timeToLastByte-n.timeToFirstByte;},{lastN:h,defaultValue:0});};k.prototype.$NetworkRequestPipelineStats10=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.transferSize/(l.timeToLastByte-l.timeToFirstByte||1);},{lastN:h,defaultValue:0});};k.prototype.$NetworkRequestPipelineStats11=function(l,m){var n=m.lastN,o=m.defaultValue,p=this.$NetworkRequestPipelineStats9(n);if(!p.length)return o;return p.reverse().reduce(function(q,r){return i*l(r)+(1-i)*q;},l(p[0]));};k.prototype.getEstimatedTimeToFirstByte=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.timeToFirstByte;},{lastN:h,defaultValue:5000});};k.prototype.getOptimisticTimeToFirstByte=function(){var l=this.$NetworkRequestPipelineStats9(h);if(!l.length)return 0;var m=Math.min.apply(Math,l.map(function(o){return o.timeToFirstByte;})),n=this.$NetworkRequestPipelineStats11(function(o){return o.timeToFirstByte;},{lastN:h,defaultValue:5000});return (m+n)/2;};f.exports=k;}),null);
__d('getXHRRequestHandlerHelper',[],(function a(b,c,d,e,f,g){'use strict';function h(k,l,m,n){var o=l.call(k);m.call(k,function(){o&&o.apply(undefined,arguments);n.apply(undefined,arguments);});}function i(k){this.$XHRRequestHandlerHelper1=k;}i.prototype.addResponseHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getResponseHandler,this.$XHRRequestHandlerHelper1.setResponseHandler,k);return this;};i.prototype.addAbortHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getAbortHandler,this.$XHRRequestHandlerHelper1.setAbortHandler,k);return this;};i.prototype.addErrorHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getErrorHandler,this.$XHRRequestHandlerHelper1.setErrorHandler,k);return this;};i.prototype.addNetworkFailureHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getNetworkFailureHandler,this.$XHRRequestHandlerHelper1.setNetworkFailureHandler,k);return this;};function j(k){return new i(k);}f.exports=j;}),null);
__d('NetworkRequestPipeline',['Map','NetworkRequestPipelineStats','VideoPlayerResourceTimer','getXHRRequestHandlerHelper','performanceNow'],(function a(b,c,d,e,f,g){'use strict';var h=2,i=1;function j(k,l,m){this.$NetworkRequestPipeline1=h;this.$NetworkRequestPipeline2=i;this.$NetworkRequestPipeline3=0;this.$NetworkRequestPipeline4=new (c('NetworkRequestPipelineStats'))();this.$NetworkRequestPipeline5=0;this.$NetworkRequestPipeline6=new (c('Map'))();this.$NetworkRequestPipeline10=function(){if(!this.$NetworkRequestPipeline9){this.$NetworkRequestPipeline9=this.$NetworkRequestPipeline11();this.$NetworkRequestPipeline12();}}.bind(this);this.$NetworkRequestPipeline8=k;this.$NetworkRequestPipeline8.setOnItemAdded(this.$NetworkRequestPipeline10);if(l!==undefined)this.$NetworkRequestPipeline1=l;if(m!==undefined)this.$NetworkRequestPipeline2=m;this.$NetworkRequestPipeline10();}j.prototype.$NetworkRequestPipeline13=function(){var k=this.$NetworkRequestPipeline3;this.$NetworkRequestPipeline3++;return k;};j.prototype.$NetworkRequestPipeline12=function(){if(this.$NetworkRequestPipeline9&&this.$NetworkRequestPipeline5<this.$NetworkRequestPipeline1){var k=this.$NetworkRequestPipeline14(this.$NetworkRequestPipeline9);if(!k)this.$NetworkRequestPipeline9=null;}};j.prototype.$NetworkRequestPipeline15=function(k){if(k.hasEnded)return false;clearTimeout(k.timeout);k.hasEnded=true;this.$NetworkRequestPipeline9=this.$NetworkRequestPipeline11();this.$NetworkRequestPipeline12();return true;};j.prototype.$NetworkRequestPipeline14=function(k){if(k.xhrRequest)return true;var l=c('performanceNow')(),m=this.$NetworkRequestPipeline8.dequeue();if(!m){this.$NetworkRequestPipeline4.setNetworkIdle();return false;}var n=m.xhrRequest,o=m.estimatedSize,p=function(r){var s=c('VideoPlayerResourceTimer').getResourceTimingEntry(n.getURI().toString(),l,c('performanceNow')());this.$NetworkRequestPipeline4.addEntry(k.id,s);this.$NetworkRequestPipeline5--;if(!this.$NetworkRequestPipeline15(k))this.$NetworkRequestPipeline12();}.bind(this),q=function(){this.$NetworkRequestPipeline5--;if(!this.$NetworkRequestPipeline15(k))this.$NetworkRequestPipeline12();}.bind(this);c('getXHRRequestHandlerHelper')(n).addResponseHandler(p).addAbortHandler(q).addErrorHandler(q);k.xhrRequest=n;this.$NetworkRequestPipeline5++;k.timeout=setTimeout(function(){return this.$NetworkRequestPipeline15(k);}.bind(this),this.$NetworkRequestPipeline16(n,o||undefined));n.send();return true;};j.prototype.$NetworkRequestPipeline11=function(){var k=this.$NetworkRequestPipeline13(),l={id:k,hasEnded:false,xhrRequest:null,timeout:0};return l;};j.prototype.$NetworkRequestPipeline16=function(k,l){var m=this.$NetworkRequestPipeline4.getEstimatedDownloadTime(l),n=this.$NetworkRequestPipeline4.getEstimatedTimeToFirstByte(),o=this.$NetworkRequestPipeline4.getOptimisticTimeToFirstByte();return (m+n-o)*this.$NetworkRequestPipeline2;};f.exports=j;}),null);
__d('PriorityRequestQueue',['invariant','Map','Set'],(function a(b,c,d,e,f,g,h){'use strict';function i(){this.$PriorityRequestQueue1=new (c('Map'))();this.$PriorityRequestQueue2=new (c('Map'))();this.$PriorityRequestQueue3=function(){};}i.prototype.dequeue=function(){return this.$PriorityRequestQueue4(Infinity);};i.prototype.setOnItemAdded=function(j){this.$PriorityRequestQueue3=j;};i.prototype.$PriorityRequestQueue4=function(j){var k=-Infinity;Array.from(this.$PriorityRequestQueue1.keys()).forEach(function(n){if(n<j)k=Math.max(k,n);});if(k===-Infinity)return null;var l=this.$PriorityRequestQueue1.get(k);l||h(0);var m=this.$PriorityRequestQueue5(l);if(m)return m;return this.$PriorityRequestQueue4(k);};i.prototype.$PriorityRequestQueue5=function(j){var k=j.queues,l=j.lastDequeued;if(!k.size)return null;var m=Array.from(k),n=l?m.findIndex(function(s){return s===l;}):-1;for(var o=n+1;o<=n+k.size;o++){var p=o%k.size,q=m[p],r=q.dequeue();if(r){j.lastDequeued=q;return r;}}return null;};i.prototype.setQueue=function(j,k){var l=this.$PriorityRequestQueue2.get(j);if(l===k)return;if(!l)this.$PriorityRequestQueue3();this.removeQueue(j);var m=this.$PriorityRequestQueue1.get(k);if(!m)m={lastDequeued:null,queues:new (c('Set'))()};m.queues.add(j);j.setOnItemAdded(this.$PriorityRequestQueue3);this.$PriorityRequestQueue2.set(j,k);this.$PriorityRequestQueue1.set(k,m);};i.prototype.removeQueue=function(j){var k=this.$PriorityRequestQueue2.get(j);if(k!==undefined&&k!==null){var l=this.$PriorityRequestQueue1.get(k);l||h(0);var m=l.queues;if(l.lastDequeued===j){var n=Array.from(m),o=n.findIndex(function(p){return p===j;});l.lastDequeued=n[o-1]||null;}j.setOnItemAdded(function(){});this.$PriorityRequestQueue2['delete'](j);m['delete'](j);}};f.exports=i;}),null);
__d('VideoPipelineProvider',['Map','NetworkRequestPipeline','PriorityRequestQueue','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){'use strict';var h=void 0,i=void 0,j=new (c('Map'))();function k(l){var m=j.get(l);if(!m){m=new (c('PriorityRequestQueue'))();new (c('NetworkRequestPipeline'))(m,c('VideoPlayerShakaExperiments').requestPipelineMaxConcurrentRequests,c('VideoPlayerShakaExperiments').requestPipelineSoothingFactor);j.set(l,m);}return m;}f.exports={getPriorityRequestQueue:k};}),null);
__d('VideoSegmentRequestQueue',['Map'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$VideoSegmentRequestQueue1=function(){};this.$VideoSegmentRequestQueue2=new (c('Map'))();this.$VideoSegmentRequestQueue3=new (c('Map'))();}h.prototype.dequeue=function(){var i=this.$VideoSegmentRequestQueue3.entries().next().value;if(i){this.$VideoSegmentRequestQueue3['delete'](i[0]);return i[1]||null;}i=this.$VideoSegmentRequestQueue2.entries().next().value;if(!i)return null;this.$VideoSegmentRequestQueue2['delete'](i[0]);return i[1]||null;};h.prototype.setOnItemAdded=function(i){this.$VideoSegmentRequestQueue1=i;};h.prototype.enqueue=function(i,j,k){var l={xhrRequest:j,estimatedSize:k};this.$VideoSegmentRequestQueue2.set(i,l);this.$VideoSegmentRequestQueue1();return this;};h.prototype.clearNormalQueue=function(){this.$VideoSegmentRequestQueue2.clear();};h.prototype.changeToTopPri=function(i){var j=this.$VideoSegmentRequestQueue2.get(i);if(j){this.$VideoSegmentRequestQueue2['delete'](i);this.$VideoSegmentRequestQueue3.set(i,j);}};h.prototype.removeTopPriSegment=function(i){var j=this.$VideoSegmentRequestQueue3.get(i);this.$VideoSegmentRequestQueue3['delete'](i);return j?j.xhrRequest:null;};f.exports=h;}),null);
__d('createVideoResponsePromise',['Promise','VideoPlayerShakaError','VideoPlayerShakaExperiments','getXHRRequestHandlerHelper','performanceNow'],(function a(b,c,d,e,f,g){'use strict';var h=window.Promise||c('Promise');c('Promise').resolve();function i(j){var k=void 0,l=j.getURI().toString(),m=j.send;j.send=function(){k=c('performanceNow')();m.call(j);};var n=new h(function(o,p){c('getXHRRequestHandlerHelper')(j).addResponseHandler(function(q){o({response:q,responseTime:c('performanceNow')()-k});}).addAbortHandler(function(){var q=c('VideoPlayerShakaError').translateError({errorMsg:'Request aborted.',errorType:'abort',errorCode:0},l,'aborted');p(q);}).addErrorHandler(function(q){var r=c('VideoPlayerShakaError').translateError(q,l,'net');p(r);}).addNetworkFailureHandler(function(q){if(c('VideoPlayerShakaExperiments').xhrHandleNetworkFailure){var r=c('VideoPlayerShakaError').translateError(q,l,'net');p(r);}});});return n;}f.exports=i;}),null);
__d('VideoSegmentRequestPipeline',['Map','NetworkRequestPipeline','Set','VideoPipelineProvider','VideoPlayerResourceTimer','VideoPlayerShakaError','VideoPlayerShakaExperiments','VideoSegmentInfoHelper','VideoSegmentRequestQueue','createVideoResponsePromise','getXHRRequestHandlerHelper','performanceNow'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){this.$VideoSegmentRequestPipeline1=new (c('Map'))();this.$VideoSegmentRequestPipeline2=null;this.$VideoSegmentRequestPipeline7=new (c('Map'))();this.$VideoSegmentRequestPipeline8=new (c('Set'))();this.$VideoSegmentRequestPipeline9=null;this.$VideoSegmentRequestPipeline10=0;this.$VideoSegmentRequestPipeline6=new (c('VideoSegmentRequestQueue'))();if(c('VideoPlayerShakaExperiments').enableGlobalScheduler){this.$VideoSegmentRequestPipeline9=c('VideoPipelineProvider').getPriorityRequestQueue(i);}else new (c('NetworkRequestPipeline'))(this.$VideoSegmentRequestPipeline6,c('VideoPlayerShakaExperiments').requestPipelineMaxConcurrentRequests,c('VideoPlayerShakaExperiments').requestPipelineSoothingFactor);if(this.$VideoSegmentRequestPipeline9)this.$VideoSegmentRequestPipeline9.setQueue(this.$VideoSegmentRequestPipeline6,this.$VideoSegmentRequestPipeline11());this.$VideoSegmentRequestPipeline4=i;this.$VideoSegmentRequestPipeline3=j;this.$VideoSegmentRequestPipeline5=k;}h.prototype.enqueue=function(i){var j=c('VideoSegmentInfoHelper').createRequest(i),k=c('VideoSegmentInfoHelper').estimateRequestSize(i),l=c('createVideoResponsePromise')(j),m=j.send;j.send=function(){this.$VideoSegmentRequestPipeline7.set(i,j);this.$VideoSegmentRequestPipeline12(i,j);m.call(j);}.bind(this);this.$VideoSegmentRequestPipeline6.enqueue(i,j,k);return l;};h.prototype.lockRequest=function(i){this.$VideoSegmentRequestPipeline6.changeToTopPri(i);this.$VideoSegmentRequestPipeline8.add(i);};h.prototype.cancelUnlockedRequests=function(){this.$VideoSegmentRequestPipeline6.clearNormalQueue();this.$VideoSegmentRequestPipeline7.forEach(function(i,j){if(!this.$VideoSegmentRequestPipeline8.has(j)){i.abort();this.$VideoSegmentRequestPipeline7['delete'](j);}}.bind(this));};h.prototype.abortLockedRequest=function(i){var j=this.$VideoSegmentRequestPipeline6.removeTopPriSegment(i);if(j)j.abort();j=this.$VideoSegmentRequestPipeline7.get(i);if(j){j.abort();this.$VideoSegmentRequestPipeline13(i);}};h.prototype.$VideoSegmentRequestPipeline13=function(i){this.$VideoSegmentRequestPipeline7['delete'](i);this.$VideoSegmentRequestPipeline8['delete'](i);};h.prototype.unload=function(){if(this.$VideoSegmentRequestPipeline9)this.$VideoSegmentRequestPipeline9.removeQueue(this.$VideoSegmentRequestPipeline6);};h.prototype.setPriority=function(i){this.$VideoSegmentRequestPipeline10=i;if(this.$VideoSegmentRequestPipeline9)this.$VideoSegmentRequestPipeline9.setQueue(this.$VideoSegmentRequestPipeline6,i);};h.prototype.$VideoSegmentRequestPipeline11=function(){return this.$VideoSegmentRequestPipeline10;};h.prototype.$VideoSegmentRequestPipeline12=function(i,j){var k,l=this,m=this.$VideoSegmentRequestPipeline2;this.$VideoSegmentRequestPipeline2=j;var n=j.getURI().toString(),o=this.$VideoSegmentRequestPipeline11();if(i)(function(){var p=l.$VideoSegmentRequestPipeline14(n),q=c('performanceNow')();c('getXHRRequestHandlerHelper')(j).addResponseHandler(function(r){var s=c('performanceNow')(),t=c('VideoPlayerResourceTimer').getResourceTimingEntry(n,q,s),u=r.byteLength;if(this.$VideoSegmentRequestPipeline5){var v=t?this.$VideoSegmentRequestPipeline15(t,j,m):s-q;this.$VideoSegmentRequestPipeline5.sample(v,u,this.$VideoSegmentRequestPipeline4==='video',{timeToLastByte:v});}if(p)this.$VideoSegmentRequestPipeline16(p,r.byteLength,o,t);this.$VideoSegmentRequestPipeline13(i);}.bind(l)).addAbortHandler(function(){var r=c('VideoPlayerShakaError').translateError({errorMsg:'Request aborted.',errorType:'abort',errorCode:0},n,'aborted');if(p)p.setError(r).log();this.$VideoSegmentRequestPipeline13(i);}.bind(l)).addErrorHandler(function(r){var s=c('VideoPlayerShakaError').translateError(r,n,'net');if(p)p.setError(s).log();this.$VideoSegmentRequestPipeline13(i);}.bind(l));})();};h.prototype.$VideoSegmentRequestPipeline14=function(i){var j=null;if(this.$VideoSegmentRequestPipeline3){j=this.$VideoSegmentRequestPipeline3.getOperationLogger('request').setResource(i).start();j.setType(this.$VideoSegmentRequestPipeline4||null).setInitiator('pipeline');}return j;};h.prototype.$VideoSegmentRequestPipeline16=function(i,j,k,l){i.setLength(j);if(l){var m=l.timeToFirstByte,n=l.timeToLastByte,o=l.timeToRequestStart;i.setTimeToFirstByte(Math.round(m)).setTimeToLastByte(Math.round(n)).setPriority(k).setTimeToRequestStart(Math.round(o));}i.log();};h.prototype.$VideoSegmentRequestPipeline15=function(i,j,k){var l=null;if(k){l=this.$VideoSegmentRequestPipeline1.get(k);this.$VideoSegmentRequestPipeline1['delete'](l);}this.$VideoSegmentRequestPipeline1.set(j,i);if(l){var m=l.startTime+l.timeToLastByte,n=i.startTime+i.timeToLastByte,o=Math.min(n-m,i.timeToLastByte);return Math.max(i.timeToLastByte-i.timeToFirstByte,o);}return i.timeToLastByte;};f.exports=h;}),null);
__d('SegmentRequestManager',['BinarySearch','Map','TrackedPromise','VideoPriorityCalculator','VideoSegmentInfoHelper','VideoSegmentPromiseBuffer','VideoSegmentRequestPipeline'],(function a(b,c,d,e,f,g){'use strict';var h=.1,i=3;function j(k,l,m){this.$SegmentRequestManager1=new (c('Map'))();this.$SegmentRequestManager2=new (c('Map'))();this.$SegmentRequestManager3=0;this.$SegmentRequestManager4=null;this.$SegmentRequestManager6=[];this.$SegmentRequestManager7=new (c('VideoSegmentPromiseBuffer'))();this.$SegmentRequestManager8=false;this.$SegmentRequestManager5=new (c('VideoSegmentRequestPipeline'))(k,l,m);}j.prototype.updateSegments=function(k,l){l.forEach(function(m){var n=this.$SegmentRequestManager10(m.requestInfo);this.$SegmentRequestManager2.set(n,m);}.bind(this));this.$SegmentRequestManager1.set(k,l);};j.prototype.updatePriorityWithNewPlayhead=function(k){if(this.$SegmentRequestManager9)this.$SegmentRequestManager9.playhead=k;this.$SegmentRequestManager11(this.$SegmentRequestManager9);return this;};j.prototype.updatePriorityWithNewPlayingState=function(k){if(this.$SegmentRequestManager9)this.$SegmentRequestManager9.isPlaying=k;this.$SegmentRequestManager11(this.$SegmentRequestManager9);return this;};j.prototype.updatePlayerState=function(k,l){var m=this.$SegmentRequestManager1.get(k);this.$SegmentRequestManager9=l;if(!m)return this;var n=this.$SegmentRequestManager4;this.$SegmentRequestManager4=k;if(this.$SegmentRequestManager8)return this;this.$SegmentRequestManager11(l);var o=this.$SegmentRequestManager12(l,m);if(n!==k){this.$SegmentRequestManager13();this.$SegmentRequestManager14(o);return this;}var p=[];if(this.$SegmentRequestManager7.hasOtherPendingSegments(o)){this.$SegmentRequestManager13();p=o;}else{p=o.filter(function(q){return !this.$SegmentRequestManager7.hasSegmentPromise(q);}.bind(this));this.$SegmentRequestManager7.removeSegmentPromisesOlderThan(o[0]);}this.$SegmentRequestManager14(p);return this;};j.prototype.getPromise=function(k){var l=this.$SegmentRequestManager10(k),m=this.$SegmentRequestManager2.get(l);if(!m)throw new Error('the given request info is not found it segments cache ');var n=this.$SegmentRequestManager7.getSegmentPromise(m),o=void 0;if(n&&(!n.isPending()||this.$SegmentRequestManager7.isFirstPendingSegment(m))){o=n.getPromise();}else{this.$SegmentRequestManager13();o=this.$SegmentRequestManager5.enqueue(m);n=new (c('TrackedPromise'))(o);this.$SegmentRequestManager7.appendSegmentPromise(m,n);}this.$SegmentRequestManager5.lockRequest(m);return o;};j.prototype.$SegmentRequestManager11=function(k){this.$SegmentRequestManager5.setPriority(c('VideoPriorityCalculator').calculate(k));};j.prototype.$SegmentRequestManager13=function(){this.$SegmentRequestManager5.cancelUnlockedRequests();this.$SegmentRequestManager7.clearAllSegmentPromises();};j.prototype.$SegmentRequestManager14=function(k){for(var l=k,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;if(c('VideoSegmentInfoHelper').isPrefetchedRequest(p))return;var q=this.$SegmentRequestManager5.enqueue(p);this.$SegmentRequestManager7.appendSegmentPromise(p,new (c('TrackedPromise'))(q));}};j.prototype.abortRequest=function(k){var l=this.$SegmentRequestManager10(k),m=this.$SegmentRequestManager2.get(l);if(m){this.$SegmentRequestManager5.abortLockedRequest(m);this.$SegmentRequestManager7.removeSegmentPromise(m);}};j.prototype.disable=function(){if(this.$SegmentRequestManager8)return;this.$SegmentRequestManager5.cancelUnlockedRequests();this.$SegmentRequestManager5.unload();this.$SegmentRequestManager8=true;};j.prototype.enable=function(){this.$SegmentRequestManager8=false;};j.prototype.isDisabled=function(){return this.$SegmentRequestManager8;};j.prototype.$SegmentRequestManager12=function(k,l){var m=k.playhead,n=k.bufferEnd,o=k.bufferingGoal,p=Math.max(n,m),q=[],r=this.$SegmentRequestManager15(p,l);for(var s=Math.max(r,0);s<l.length;s++){var t=l[s];if(t.startTime>m+o)break;q.push(t);}return q;};j.prototype.$SegmentRequestManager15=function(k,l){return c('BinarySearch').leastUpperBound(function(m){var n=this.$SegmentRequestManager16(l[m].startTime),o=this.$SegmentRequestManager16(l[m].endTime);k=this.$SegmentRequestManager16(k);if(n<=k&&o>k)return 0;return n-k;}.bind(this),0,0,l.length,function(m,n){return m-n;});};j.prototype.$SegmentRequestManager10=function(k){return k.baseUrl+','+(k.startByte||0)+(','+(k.endByte||0));};j.prototype.$SegmentRequestManager16=function(k){return +k.toFixed(i)||0;};f.exports=j;}),null);
__d('VideoPlayerLocalBandwidthEstimator',['guid','Banzai','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$VideoPlayerLocalBandwidthEstimator2=i;this.$VideoPlayerLocalBandwidthEstimator1=j;this.$VideoPlayerLocalBandwidthEstimator3=[];this.$VideoPlayerLocalBandwidthEstimator4=null;this.$VideoPlayerLocalBandwidthEstimator5=c('guid')();}h.prototype.setRepresentationID=function(i){'use strict';this.$VideoPlayerLocalBandwidthEstimator4=i;};h.prototype.sample=function(i,j,k,l,m){'use strict';if(k&&this.$VideoPlayerLocalBandwidthEstimator4)this.$VideoPlayerLocalBandwidthEstimator6(i,j,this.$VideoPlayerLocalBandwidthEstimator4,this.$VideoPlayerLocalBandwidthEstimator2.getVideoTracks());this.$VideoPlayerLocalBandwidthEstimator1.sample(i,j,k,l,m);};h.prototype.supportsCaching=function(){'use strict';return this.$VideoPlayerLocalBandwidthEstimator1.supportsCaching();};h.prototype.getBandwidth=function(){'use strict';return this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth();};h.prototype.$VideoPlayerLocalBandwidthEstimator6=function(i,j,k,l){'use strict';var m=8000*j/i,n=0;for(var o=0;o<l.length;o++){if(m<=l[o].bandwidth)break;n=l[o].id;}var p=l.find(function(s){return s.streamInfoID===k;});if(p){if(c('VideoPlayerShakaExperiments').videosAbrDebuggerStorage)c('Banzai').post('video_player_abr',{id:this.$VideoPlayerLocalBandwidthEstimator5,bandwidth:m,chosenBandwidth:p.bandwidth});var q=p.id,r=n===q?0:n>q?-1:1;this.$VideoPlayerLocalBandwidthEstimator3.push(r);}};h.prototype.flushABREvaluationSet=function(){'use strict';var i=this.$VideoPlayerLocalBandwidthEstimator3;this.$VideoPlayerLocalBandwidthEstimator3=[];return i;};f.exports=h;}),null);
__d('ExtendableVideoPlayerShakaPerformanceTypedLogger',['VideoPlayerShakaPerformanceTypedLogger'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('VideoPlayerShakaPerformanceTypedLogger'));i=h&&h.prototype;j.prototype.setState=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=k;return i.setState.call(this,k);};j.prototype.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1;};j.prototype.setSequentialID=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=k;i.setSequentialID.call(this,k);return this;};j.prototype.setParentLogger=function(k){this.setParentID(k.$ExtendableVideoPlayerShakaPerformanceTypedLogger2);return this;};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('VideoPlayerArtilleryOperationMarker',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){this.$VideoPlayerArtilleryOperationMarker2=i;this.$VideoPlayerArtilleryOperationMarker3=j;this.$VideoPlayerArtilleryOperationMarker4=k;this.$VideoPlayerArtilleryOperationMarker5=l;this.$VideoPlayerArtilleryOperationMarker6=false;}h.prototype.markOperationStart=function(){return this.$VideoPlayerArtilleryOperationMarker7('Starting');};h.prototype.markOperationEnd=function(){return this.$VideoPlayerArtilleryOperationMarker7('Ending');};h.prototype.$VideoPlayerArtilleryOperationMarker7=function(i){var j=this.$VideoPlayerArtilleryOperationMarker4();if(j)j.inform(i+' '+this.$VideoPlayerArtilleryOperationMarker2+' #'+this.$VideoPlayerArtilleryOperationMarker3,{pointGroup:this.$VideoPlayerArtilleryOperationMarker5.getGroupName(this.$VideoPlayerArtilleryOperationMarker2,this.$VideoPlayerArtilleryOperationMarker1),isPointOfInterest:true,type:null}).addStringAnnotation('resource',this.$VideoPlayerArtilleryOperationMarker1||'').addStringAnnotation('wasPrefetchCacheHit',this.$VideoPlayerArtilleryOperationMarker6.toString());return this;};h.prototype.setResource=function(i){this.$VideoPlayerArtilleryOperationMarker1=i;return this;};h.prototype.setWasPrefetchCacheHit=function(i){this.$VideoPlayerArtilleryOperationMarker6=i;return this;};f.exports=h;}),null);
__d('VideoPlayerArtilleryPointGrouper',['Map'],(function a(b,c,d,e,f,g){function h(){'use strict';this.$VideoPlayerArtilleryPointGrouper1=new (c('Map'))();this.$VideoPlayerArtilleryPointGrouper2=new (c('Map'))();}h.prototype.getGroupName=function(i,j){'use strict';if(!j){switch(i){case 'start_streams':i='source_attach';break;}return i;}var k=this.$VideoPlayerArtilleryPointGrouper1.get(j);if(k)return k;var l=void 0;if(j.indexOf('-init.m4v')!==-1){l='-init.m4v';}else if(j.indexOf('-init.m4a')!==-1){l='-init.m4a';}else if(j.indexOf('.mpd')!==-1){return 'source_load';}else if(j.indexOf('.m4v')!==-1){l='.m4v';}else if(j.indexOf('.m4a')!==-1){l='.m4a';}else l='unknown';var m=this.$VideoPlayerArtilleryPointGrouper2.get(l)+1||1;this.$VideoPlayerArtilleryPointGrouper2.set(l,m);k=l+' #'+m;this.$VideoPlayerArtilleryPointGrouper1.set(j,k);return k;};f.exports=h;}),null);
__d('VideoPlayerArtilleryTrace',['TimeSliceInteraction','UserAgentData','VideoPlayerArtilleryOperationMarker','VideoPlayerArtilleryPointGrouper'],(function a(b,c,d,e,f,g){'use strict';var h=30000,i=3000;function j(k,l){this.$VideoPlayerArtilleryTrace13=function(){var m=this.$VideoPlayerArtilleryTrace2;if(m){var n=m.stallTrace,o=m.hasStalls,p=m.stallTraceTimeout;o?n.finish():n.disable();clearTimeout(p);}this.$VideoPlayerArtilleryTrace2=null;}.bind(this);this.$VideoPlayerArtilleryTrace17=function(){return this.$VideoPlayerArtilleryTrace1;}.bind(this);this.$VideoPlayerArtilleryTrace18=function(){var m=this.$VideoPlayerArtilleryTrace2;return m?m.stallTrace:null;}.bind(this);this.$VideoPlayerArtilleryTrace4=l.videoID;this.$VideoPlayerArtilleryTrace5=l.video;this.$VideoPlayerArtilleryTrace6=k;this.$VideoPlayerArtilleryTrace7=l.isLive;this.$VideoPlayerArtilleryTrace9=l.playerOrigin;this.$VideoPlayerArtilleryTrace10=l.playerSuborigin;this.$VideoPlayerArtilleryTrace8=0;this.$VideoPlayerArtilleryTrace11=new (c('VideoPlayerArtilleryPointGrouper'))();}j.prototype.updateBufferAhead=function(k){var l=this.$VideoPlayerArtilleryTrace2;if(!l&&k<=i){this.$VideoPlayerArtilleryTrace2={stallTrace:this.$VideoPlayerArtilleryTrace12(c('TimeSliceInteraction').create('video_stall')),hasStalls:false,stallTraceTimeout:setTimeout(this.$VideoPlayerArtilleryTrace13,h)};}else if(k>i)this.$VideoPlayerArtilleryTrace13();};j.prototype.enterState=function(k){switch(k){case 'loading':this.$VideoPlayerArtilleryTrace14();break;case 'playing':this.$VideoPlayerArtilleryTrace15();break;default:this.$VideoPlayerArtilleryTrace16(k);break;}return this;};j.prototype.$VideoPlayerArtilleryTrace16=function(k){var l=this.$VideoPlayerArtilleryTrace1;if(l)l.inform('State: '+k);};j.prototype.getMarkers=function(k){var l=[],m=(++this.$VideoPlayerArtilleryTrace8).toString();if(this.$VideoPlayerArtilleryTrace1)l.push(new (c('VideoPlayerArtilleryOperationMarker'))(k,m,this.$VideoPlayerArtilleryTrace17,this.$VideoPlayerArtilleryTrace11));var n=this.$VideoPlayerArtilleryTrace2;if(n){if(k==='buffering')n.hasStalls=true;l.push(new (c('VideoPlayerArtilleryOperationMarker'))(k,m,this.$VideoPlayerArtilleryTrace18,this.$VideoPlayerArtilleryTrace11));}return l;};j.prototype.$VideoPlayerArtilleryTrace14=function(){var k=this.$VideoPlayerArtilleryTrace12(c('TimeSliceInteraction').create('video_psr'));this.$VideoPlayerArtilleryTrace1=k;this.$VideoPlayerArtilleryTrace16('loading');};j.prototype.$VideoPlayerArtilleryTrace15=function(){this.$VideoPlayerArtilleryTrace16('playing');var k=this.$VideoPlayerArtilleryTrace1;if(k){k.finish();this.$VideoPlayerArtilleryTrace1=null;}};j.prototype.$VideoPlayerArtilleryTrace12=function(k){k.trace().addStringAnnotation('videoID',this.$VideoPlayerArtilleryTrace4).addStringAnnotation('sessionID',this.$VideoPlayerArtilleryTrace6).addStringAnnotation('browserName',c('UserAgentData').browserName).addStringAnnotation('browserVersion',c('UserAgentData').browserVersion).addStringAnnotation('isLive',this.$VideoPlayerArtilleryTrace7.toString()).addStringAnnotation('playerOrigin',this.$VideoPlayerArtilleryTrace9||'').addStringAnnotation('playerSuborigin',this.$VideoPlayerArtilleryTrace10||'');return k;};f.exports=j;}),null);
__d('VideoPlayerShakaPerformanceLogger',['ExtendableVideoPlayerShakaPerformanceTypedLogger','ScriptPath','VideoPlayerArtilleryTrace','VideoPlayerShakaPerformanceLoggerConfig'],(function a(b,c,d,e,f,g){'use strict';h.isEnabled=function(){return c('VideoPlayerShakaPerformanceLoggerConfig').isSampled;};function h(i){this.$VideoPlayerShakaPerformanceLogger2=i.videoID;this.$VideoPlayerShakaPerformanceLogger4=i.video;this.$VideoPlayerShakaPerformanceLogger1=i.uniqueID;this.$VideoPlayerShakaPerformanceLogger3=0;this.$VideoPlayerShakaPerformanceLogger5=i.representationId;this.$VideoPlayerShakaPerformanceLogger8=i.isLive;this.$VideoPlayerShakaPerformanceLogger9=i.accessToken;this.$VideoPlayerShakaPerformanceLogger11=i.playerOrigin;this.$VideoPlayerShakaPerformanceLogger12=i.playerSuborigin;this.$VideoPlayerShakaPerformanceLogger10=new (c('VideoPlayerArtilleryTrace'))(this.$VideoPlayerShakaPerformanceLogger1,i);}h.prototype.$VideoPlayerShakaPerformanceLogger13=function(i){var j=this.$VideoPlayerShakaPerformanceLogger4.buffered;if(j.length>0){var k=j.length-1;i=i.setLastBufferedStart(Math.round(j.start(k)*1000)).setLastBufferedEnd(Math.round(j.end(k)*1000));this.$VideoPlayerShakaPerformanceLogger10.updateBufferAhead((j.end(k)-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1000);}var l=[];for(var m=0;m<j.length-1;m++){var n=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.start(m)*1000),o=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.end(m)*1000);l.push([n,o]);}if(l&&l.length)i=i.setAdditionalBufferedRanges(JSON.stringify(l));return i;};h.prototype.getEventLogger=function(event){var i=Date.now(),j=new (c('ExtendableVideoPlayerShakaPerformanceTypedLogger'))(),k=this.$VideoPlayerShakaPerformanceLogger4.currentTime;this.$VideoPlayerShakaPerformanceLogger13(j).setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setPlayerOriginCallerSpecified(this.$VideoPlayerShakaPerformanceLogger11).setScriptPath(c('ScriptPath').getScriptPath()).setRepresentationID(this.$VideoPlayerShakaPerformanceLogger5).setPlayhead(Math.round(k*1000)).setIsLive(this.$VideoPlayerShakaPerformanceLogger8).setSession(this.$VideoPlayerShakaPerformanceLogger1).setSequentialID(this.$VideoPlayerShakaPerformanceLogger3++).setState(this.$VideoPlayerShakaPerformanceLogger6).setLastPlayingEventTime(this.$VideoPlayerShakaPerformanceLogger7).setPushed(0).setResult('success').setAccessToken(this.$VideoPlayerShakaPerformanceLogger9).setClientTimeBegin(i).setClientTimeEnd(i);var l=j.setState;j.setState=function(n){if(n!==this.$VideoPlayerShakaPerformanceLogger6&&n==='playing'){this.$VideoPlayerShakaPerformanceLogger7=Date.now();}else if(n!=='playing')this.$VideoPlayerShakaPerformanceLogger7=null;this.$VideoPlayerShakaPerformanceLogger6=n;this.$VideoPlayerShakaPerformanceLogger10.enterState(n);return l.call(j,n);}.bind(this);j.updateState=function(n){if(j.getState()==this.$VideoPlayerShakaPerformanceLogger6){this.$VideoPlayerShakaPerformanceLogger10.enterState(n);return j.setState(n);}return j;}.bind(this);var m=j.setError;j.setError=function(n){if(typeof n==='object'){if(n.type==='aborted'||n.type==='delay'){this.setResult('aborted');}else{this.setResult('failed');m.call(this,n.type);}this.setCode(n.status);}else m.call(this,n);return this;};return j;};h.prototype.getArtilleryMarkers=function(i){return this.$VideoPlayerShakaPerformanceLogger10.getMarkers(i);};h.prototype.getOperationLogger=function(i){var j=this.getEventLogger(i),k=this.getArtilleryMarkers(i),l=j.setResource;j.setResource=function(n){k.forEach(function(o){return o.setResource(n);});return l.call(j,n);};var m=j.log;j.log=function(){this.setClientTimeEnd(Date.now());k.forEach(function(n){return n.markOperationEnd();});return m.call(this);};j.start=function(){k.forEach(function(n){return n.markOperationStart();});return j;};j.setWasPrefetchCacheHit=function(n){k.forEach(function(o){return o.setWasPrefetchCacheHit(n);});return j;};return j;};h.prototype.setRepresentationID=function(i){this.$VideoPlayerShakaPerformanceLogger5=i;};f.exports=h;}),null);
__d('logLongAkamaiRequest',['CurrentUser','JSLog'],(function a(b,c,d,e,f,g){var h=false,i=2,j=[];function k(l){if(c('CurrentUser').isEmployee()&&!h){j=j.filter(function(m){var n=m.time;return Date.now()-n<1000*60*2;});j.push({data:l,time:Date.now()});if(j.length>=i){h=true;c('JSLog').warn('Long latency video request to akamai: %s',j.map(function(m){var n=m.data;return n;}).join(' ; '));}}}f.exports=k;}),null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerLoggerSource','VideoPlayerStreamSwitchReasons','VideoPlayerUtils','VideoQualityClasses','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=-1;this.$CustomAbrManager6=true;this.$CustomAbrManager7=false;this.$CustomAbrManager8=j.maxWidth;this.$CustomAbrManager9=j.maxHeight;this.$CustomAbrManager10=j.minPlayQuality?j.minPlayQuality:null;this.$CustomAbrManager11=j.maxPlayQuality?j.maxPlayQuality:null;this.$CustomAbrManager12=j.initiallyForcedRepresentations;this.$CustomAbrManager13=j.video;this.$CustomAbrManager24=null;this.$CustomAbrManager21=null;this.$CustomAbrManager23=null;this.$CustomAbrManager22=j.abrLogger;this.$CustomAbrManager25=j.getSource;if(j.enableAdaptation){this.$CustomAbrManager14=j.bandwidthDowngradeTarget;this.$CustomAbrManager15=j.bandwidthUpgradeTarget;this.$CustomAbrManager16=j.useNewBandwidthBandLogic;this.$CustomAbrManager17=j.hvqUpgradeAggressiveness;this.$CustomAbrManager18=j.hvqInlineUpgradeAggressiveness;this.$CustomAbrManager19=j.preHvqUpgradeAggressiveness;this.$CustomAbrManager20=j.preHvqInlineUpgradeAggressiveness;}}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager6=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager8=j;this.$CustomAbrManager9=k;this.$CustomAbrManager26();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager7)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;if(i.FIRST_SWITCH_INTERVAL===0)this.$CustomAbrManager5=i.FIRST_SWITCH_SEGMENT_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager27.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager28.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager29.bind(this)));this.$CustomAbrManager7=true;};i.prototype.$CustomAbrManager29=function(){'use strict';this.$CustomAbrManager26();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager30(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager24=j;this.$CustomAbrManager26(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager24=null;this.$CustomAbrManager26(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager6=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager31();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager23;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager32();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager7)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager30=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager27=function(event){'use strict';if(this.$CustomAbrManager5<0){if(Date.now()<this.$CustomAbrManager4)return;}else{var j=this.$CustomAbrManager2?this.$CustomAbrManager2.getFetchedVideoSegmentsCount():0;if(this.$CustomAbrManager5>j)return;this.$CustomAbrManager5=-1;}this.$CustomAbrManager26(event);};i.prototype.$CustomAbrManager26=function(event,j){'use strict';if(!this.$CustomAbrManager6)return;var k=this.$CustomAbrManager31();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager21);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager28=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager33=function(j,k){'use strict';if(this.$CustomAbrManager22)this.$CustomAbrManager22.setEvent('track_selection').setReason(j).setRepresentationID(k.streamInfoID).log();};i.prototype.$CustomAbrManager31=function(){var j,k=this,l;'use strict';var m=this.$CustomAbrManager2.getVideoTracks();if(m.length==0)return null;if(!this.$CustomAbrManager7)for(var n=0;n<m.length;n++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(m[n].streamInfoID)){this.$CustomAbrManager21=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager23=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager33(this.$CustomAbrManager21,m[n]);return m[n];}if(this.$CustomAbrManager24){var j=function(){var ga=k.$CustomAbrManager24.id,ha=m.find(function(ia){return ia.id===ga;});if(ha){k.$CustomAbrManager21=c('VideoPlayerStreamSwitchReasons').USER;k.$CustomAbrManager33(k.$CustomAbrManager21,ha);return {v:ha};}}();if(typeof j==="object")return j.v;}m.sort(h.compare);if(this.$CustomAbrManager10!==null||this.$CustomAbrManager11!==null){var l=function(){var ga=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):0,ha=k.$CustomAbrManager11!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager11):c('VideoQualityClasses').length-1;if(ga<=ha){var ia=m.filter(function(ka){return c('VideoQualityClasses').indexOf(ka.fbQualityClass)>=ga&&c('VideoQualityClasses').indexOf(ka.fbQualityClass)<=ha;});k.$CustomAbrManager21=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!ia.length){k.$CustomAbrManager33(k.$CustomAbrManager21,m[m.length-1]);return {v:m[m.length-1]};}var ja=c('VideoQualityClasses').indexOf('sd');if(m.length==2&&ia.length==2&&ha<=ja){k.$CustomAbrManager33(k.$CustomAbrManager21,m[0]);return {v:m[0]};}m=ia;}}();if(typeof l==="object")return l.v;}var o=m[0],p=this.$CustomAbrManager9,q=this.$CustomAbrManager8,r=m;m=m.filter(function(ga){return ga.width<=q||ga.height<=p;});var s=i.$CustomAbrManager30(this.$CustomAbrManager2.getAudioTracks()),t=s?s.bandwidth:0,u=c('VideoPlayerUtils').getBufferedAheadOf(this.$CustomAbrManager13);if(u<c('VideoPlayerShakaExperiments').forceLowestRepresentationThreshold){var v=i.$CustomAbrManager30(r),w=0,x=r.indexOf(v);if(x>-1)w=Math.floor(x*c('VideoPlayerShakaExperiments').forceLowerRepresentationStepRatio);if(w>=m.length)w=m.length-1;this.$CustomAbrManager21=c('VideoPlayerStreamSwitchReasons').LOW_BUFFER_AVAILABILITY;o=m[w];this.$CustomAbrManager33(this.$CustomAbrManager21,o);return o;}else{var y=this.$CustomAbrManager1.getBandwidth(),z=0;for(var aa=0;aa<m.length;aa++){var ba=m[aa],ca=aa+1<m.length?m[aa+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!ba.bandwidth)continue;var da=this.$CustomAbrManager34(ba,ca,u,this.$CustomAbrManager25&&this.$CustomAbrManager25()),ea=this.$CustomAbrManager16?z:(ba.bandwidth+t)/this.$CustomAbrManager14,fa=(ca.bandwidth+t)/da;z=fa;if(y>=ea&&y<=fa){o=ba;if(o.active)break;}}this.$CustomAbrManager21=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;}this.$CustomAbrManager33(this.$CustomAbrManager21,o);return o;};i.prototype.$CustomAbrManager34=function(j,k,l,m){'use strict';var n=1;if(!j.isInlineHVQ&&k.isInlineHVQ){n=this.$CustomAbrManager20;}else if(j.isInlineHVQ&&m===c('VideoPlayerLoggerSource').INLINE){n=this.$CustomAbrManager18;}else if(j.isHVQ)n=this.$CustomAbrManager17;var o=c('VideoPlayerShakaExperiments').bufferTarget,p=o>-1;if(p){var q=l>o,r=q?c('VideoPlayerShakaExperiments').bufferTargetOverflowUpgradeAggressiveness:c('VideoPlayerShakaExperiments').bufferTargetUnderflowUpgradeAggressiveness;n*=r;}return this.$CustomAbrManager15*n;};i.prototype.$CustomAbrManager32=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager7)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.FIRST_SWITCH_SEGMENT_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchSegmentInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;f.exports=i;}),null);
__d('VideoPlayerAbrLogger',['VideoPlayerAbrTypedLogger','VideoPlayerShakaBandwidthEstimator','VideoPlayerUtils'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('VideoPlayerAbrTypedLogger'));i=h&&h.prototype;function j(k){i.constructor.call(this);i.setSession.call(this,k.uniqueID);i.setVideoID.call(this,k.videoID);this.$VideoPlayerAbrLogger4();}j.prototype.setVideoElement=function(k){this.$VideoPlayerAbrLogger3=k;return this;};j.prototype.setBytes=function(k){this.$VideoPlayerAbrLogger1.bytes=k;return this;};j.prototype.setDelayMs=function(k){this.$VideoPlayerAbrLogger1.delayMs=k;return this;};j.prototype.setEvent=function(event){this.$VideoPlayerAbrLogger1.event=event;return this;};j.prototype.setUnsampledReason=function(k){this.$VideoPlayerAbrLogger1.unsampledReason=k;return this;};j.prototype.setReason=function(k){this.$VideoPlayerAbrLogger1.reason=k;return this;};j.prototype.setRepresentationID=function(k){this.$VideoPlayerAbrLogger2=k;return this;};j.prototype.setClientTimeBegin=function(k){this.$VideoPlayerAbrLogger1.clientTimeBegin=k;return this;};j.prototype.setClientTimeEnd=function(k){this.$VideoPlayerAbrLogger1.clientTimeEnd=k;return this;};j.prototype.$VideoPlayerAbrLogger4=function(){this.$VideoPlayerAbrLogger1={bytes:null,delayMs:null,event:null,unsampledReason:null,reason:null,clientTimeBegin:null,clientTimeEnd:null};};j.prototype.$VideoPlayerAbrLogger5=function(){if(this.$VideoPlayerAbrLogger1.event==null)return;i.setBytes.call(this,this.$VideoPlayerAbrLogger1.bytes);i.setDelayMs.call(this,this.$VideoPlayerAbrLogger1.delayMs);i.setEvent.call(this,this.$VideoPlayerAbrLogger1.event);i.setUnsampledReason.call(this,this.$VideoPlayerAbrLogger1.unsampledReason);i.setReason.call(this,this.$VideoPlayerAbrLogger1.reason);var k=this.$VideoPlayerAbrLogger1.clientTimeBegin,l=this.$VideoPlayerAbrLogger1.clientTimeEnd;if(k==null){k=Date.now();l=k;}else if(l==null)l=k;i.setClientTimeBegin.call(this,k);i.setClientTimeEnd.call(this,l);};j.prototype.log=function(){this.$VideoPlayerAbrLogger5();i.setBandwidthEstimate.call(this,parseInt(c('VideoPlayerShakaBandwidthEstimator').getBandwidth(),10));i.setRepresentationID.call(this,this.$VideoPlayerAbrLogger2);if(this.$VideoPlayerAbrLogger3){i.setPlayhead.call(this,Math.round(this.$VideoPlayerAbrLogger3.currentTime*1000));i.setBufferedAhead.call(this,Math.round(c('VideoPlayerUtils').getBufferedAheadOf(this.$VideoPlayerAbrLogger3)));}i.log.call(this);this.$VideoPlayerAbrLogger4();};f.exports=j;}),null);
__d('PerformanceResourceBuffer',['BanzaiODS','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=b.__isResourceTimingBufferFull;delete b.__isResourceTimingBufferFull;performance.onresourcetimingbufferfull=function(){j=true;if(k)k.emit('full');};var k=void 0;h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);}l.prototype.isBufferFull=function(){return j;};k=new l();if(k.isBufferFull()){c('BanzaiODS').bumpEntityKey('performance','resourcetimingbufferfull');}else k.addListener('full',function(){return c('BanzaiODS').bumpEntityKey('performance','resourcetimingbufferfull');});f.exports=k;}),null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={interrupt:'streamInterruptAt',ended:'endedAt'};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState1=[];for(var m in j)this.$VideoPlayerLiveStreamState1.push(c('RTISubscriptionManager').subscribe('video_broadcast/'+m+'_'+l,this.$VideoPlayerLiveStreamState2.bind(this,j[m])));}k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;p.unsubscribe();}};k.prototype.$VideoPlayerLiveStreamState2=function(l,m){var n=JSON.parse(m.payload||'{}')||{},o=n.time_position;if(typeof o==='number'){o/=1000;this.emit(l,o);}};f.exports=k;}),null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','CustomAbrManager','EventEmitter','EventListener','Event','TaggedTimeRanges','URI','VideoDashPrefetchCache','VideoPlayerAbrLogger','VideoPlayerLiveStreamState','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaExperiments','VideoPlayerShakaPerformanceLogger','dispatchEvent','guid','Shaka','PerformanceResourceBuffer'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util.FailoverUri,q=window.devicePixelRatio||1,r=c('VideoPlayerShakaBandwidthEstimator').getEstimator();c('PerformanceResourceBuffer');p.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);function s(u,event){var v=c('EventListener').capture(u.parentNode,event,function(w){if(w.target!=u)return;v.remove();c('Event').kill(w);});}i=babelHelpers.inherits(t,c('EventEmitter'));j=i&&i.prototype;function t(u,v,w){var x=w.videoID,y=w.width,z=w.height,aa=w.manifest,ba=w.manifestUrl,ca=w.isLive,da=w.minPlayQuality,ea=w.maxPlayQuality,fa=w.accessToken,ga=w.startTimestamp,ha=w.playerOrigin,ia=w.playerSuborigin,ja=w.isSpherical,ka=w.getSource;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=da;this.$VideoPlayerHTML5Shaka2=ea;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ca;this.$VideoPlayerHTML5Shaka8=ca;this.$VideoPlayerHTML5Shaka9=false;this.$VideoPlayerHTML5Shaka10=ja;this.$VideoPlayerHTML5Shaka11=y;this.$VideoPlayerHTML5Shaka12=z;this.$VideoPlayerHTML5Shaka13=v;this.$VideoPlayerHTML5Shaka14=null;this.$VideoPlayerHTML5Shaka15=ka;var la=this.$VideoPlayerHTML5Shaka14,ma=c('guid')();this.$VideoPlayerHTML5Shaka16=c('VideoPlayerShakaPerformanceLogger').isEnabled()?new (c('VideoPlayerShakaPerformanceLogger'))({videoID:x,video:u,representationId:la,isLive:ca,accessToken:fa,playerOrigin:ha,playerSuborigin:ia,uniqueID:ma}):null;this.$VideoPlayerHTML5Shaka17=new (c('VideoPlayerAbrLogger'))({videoID:x,uniqueID:ma}).setRepresentationID(la).setVideoElement(u);if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)this.$VideoPlayerHTML5Shaka18=true;c('EventListener').listen(u,'playing',this.$VideoPlayerHTML5Shaka19.bind(this));c('EventListener').listen(u,'timeupdate',function(qa){this.$VideoPlayerHTML5Shaka20(qa.target.currentTime);}.bind(this));c('EventListener').listen(u,'pause',this.$VideoPlayerHTML5Shaka21.bind(this));c('EventListener').listen(u,'play',function(){this.$VideoPlayerHTML5Shaka9=true;}.bind(this));this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka23=null;this.$VideoPlayerHTML5Shaka24=null;this.$VideoPlayerHTML5Shaka25=new l(u,this.$VideoPlayerHTML5Shaka16,this.$VideoPlayerHTML5Shaka17);this.$VideoPlayerHTML5Shaka25.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka26();}.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka27();}.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('error',function(qa){return this.$VideoPlayerHTML5Shaka28(qa);}.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka29.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka30.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('debug/shakaEvent',function(qa){return this.emit('debug/shakaEvent',qa.detail);}.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka31.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('cea608-captions',function(qa){this.emit('cea608CaptionsParsed',qa.detail.captions);}.bind(this));this.$VideoPlayerHTML5Shaka25.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka32.bind(this));var na=false,oa=null,pa=null;this.$VideoPlayerHTML5Shaka33=c('VideoPlayerShakaExperiments').liveSendPushHeaders;if(aa){this.$VideoPlayerHTML5Shaka34=o(aa,ba);}else{this.$VideoPlayerHTML5Shaka34=ba;na=ba&&ba.indexOf('dash-abr')!==-1;}if(na){this.$VideoPlayerHTML5Shaka33=c('VideoPlayerShakaExperiments').liveAbrSendPushHeaders;if(this.$VideoPlayerHTML5Shaka33){oa=c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation;pa=c('VideoPlayerShakaExperiments').liveAbrAudioPushRepresentation;this.$VideoPlayerHTML5Shaka13=[c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation];}if(c('VideoPlayerShakaExperiments').liveAbrAlwaysForceRepresentation)this.$VideoPlayerHTML5Shaka13=[c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation];}this.$VideoPlayerHTML5Shaka35=u;this.$VideoPlayerHTML5Shaka36=this.$VideoPlayerHTML5Shaka37();this.$VideoPlayerHTML5Shaka38=this.$VideoPlayerHTML5Shaka39();this.$VideoPlayerHTML5Shaka25.configure({enableAdaptation:this.getIsAbrEnabled(),appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:c('VideoPlayerShakaExperiments').useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka40(),initialStreamBufferSize:t.isAutoplayBandwidthRestrained(ca)||c('VideoPlayerShakaExperiments').useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka41(),smartBufferAdjustmentParams:c('VideoPlayerShakaExperiments').smartBufferAdjustmentParams,dynamicStreamBufferSize:ca?c('VideoPlayerShakaExperiments').liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:true,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:true,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:t.isAutoplayBandwidthRestrained(ca)?false:this.$VideoPlayerHTML5Shaka42(),liveMaxManifestFetchesWithPush:c('VideoPlayerShakaExperiments').liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c('VideoPlayerShakaExperiments').enableVideoDebug,reappendInitSegmentAfterAbort:c('VideoPlayerShakaExperiments').reappendInitSegmentAfterAbort,useInlineInitSegment:c('VideoPlayerShakaExperiments').useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:c('VideoPlayerShakaExperiments').currentTimeDuringReadyStateZeroThrows,liveInitialPushRepresentation:oa,liveAudioPushRepresentation:pa,jumpToLiveThreshold:c('VideoPlayerShakaExperiments').jumpToLiveThreshold,liveDataFetchMaxRetries:c('VideoPlayerShakaExperiments').liveDataFetchMaxRetries,liveSourceBufferClearMaxRetries:c('VideoPlayerShakaExperiments').liveSourceBufferClearMaxRetries,useLongCacheForManifest:c('VideoPlayerShakaExperiments').useLongCacheForManifest,jumpToEarliestPositionInCurrentBlock:c('VideoPlayerShakaExperiments').jumpToEarliestPositionInCurrentBlock,ignoreMinBufferTime:c('VideoPlayerShakaExperiments').ignoreMinBufferTime,playheadFragmentedGapDiffAllowance:c('VideoPlayerShakaExperiments').playheadFragmentedGapDiffAllowance,fixBufferingGoalDetermination:c('VideoPlayerShakaExperiments').fixBufferingGoalDetermination,skipEmptySegments:c('VideoPlayerShakaExperiments').skipEmptySegments,useMicroTaskTimeouts:true,enableRequestPipelining:this.$VideoPlayerHTML5Shaka8?c('VideoPlayerShakaExperiments').enableRequestPipeliningForLive:c('VideoPlayerShakaExperiments').enableRequestPipeliningForVod});if(ca){this.$VideoPlayerHTML5Shaka43=new (c('VideoPlayerLiveStreamState'))(x);this.$VideoPlayerHTML5Shaka43.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka44.bind(this));['streamInterruptAt','commercialBreakAt','endedAt'].forEach(function(qa){this.$VideoPlayerHTML5Shaka43.addListener(qa,function(event){this.emit('debug/shakaEvent',{type:qa,event:event});}.bind(this));}.bind(this));}if(ga)this.$VideoPlayerHTML5Shaka25.setPlaybackStartTime(ga);this.$VideoPlayerHTML5Shaka25.load(this.$VideoPlayerHTML5Shaka38)['catch'](function(qa){if(this.$VideoPlayerHTML5Shaka3&&c('VideoPlayerShakaExperiments').ignoreErrorsAfterUnload)return;throw qa;}.bind(this));}t.prototype.hasSubtitles=function(){'use strict';return this.$VideoPlayerHTML5Shaka38.hasInlinedCea608Subtitles()&&c('VideoPlayerShakaExperiments').enableCea608Parsing;};t.prototype.enableSubtitles=function(u){'use strict';this.$VideoPlayerHTML5Shaka38.setEnableCea608Parsing(u&&c('VideoPlayerShakaExperiments').enableCea608Parsing);};t.prototype.getDebug=function(){'use strict';return {AbrManager:this.$VideoPlayerHTML5Shaka36,VideoSource:this.$VideoPlayerHTML5Shaka38,ShakaPlayer:this.$VideoPlayerHTML5Shaka25};};t.getEstimatedBandwidth=function(){'use strict';return r.getBandwidth();};t.isAutoplayBandwidthRestrained=function(u){'use strict';var v=c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained(u);return v;};t.prototype.$VideoPlayerHTML5Shaka20=function(u){'use strict';var v=this.$VideoPlayerHTML5Shaka45.get(u);if(!v)return;var w=v.id,x=v.reason,y=v.performanceLogger;if(this.$VideoPlayerHTML5Shaka14!==w){var z=this.$VideoPlayerHTML5Shaka14;this.$VideoPlayerHTML5Shaka14=w;if(y)y.setStreamSwitchReason(x).log();this.emit('representation_ended',{representationID:z,nextRepresentationID:w,streamSwitchReason:x});}};t.prototype.getStreamInfoIDForTimePosition=function(u){'use strict';var v=this.$VideoPlayerHTML5Shaka45.get(u),w=null;if(v)w=v.id;return w;};t.prototype.$VideoPlayerHTML5Shaka46=function(u,v){'use strict';if(u.fbQualityLabel){return u.fbQualityLabel;}else if(n.compare(u,v[0])==0){return 'SD';}else if(n.compare(u,v[v.length-1])==0){return 'HD';}else return null;};t.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka22;var u=this.$VideoPlayerHTML5Shaka38.getVideoTracks();u.sort(n.compare);return u.every(function(v){return v.fbQualityLabel!==null;})?u.map(function(v){return v.fbQualityLabel;}):u.length>1?['SD','HD']:['SD'];};t.prototype.getIsAbrEnabled=function(){'use strict';return true;};t.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka23;var u=this.$VideoPlayerHTML5Shaka38.getVideoTracks();u.sort(n.compare);var v=u.find(function(w){return w.active;});return v?this.$VideoPlayerHTML5Shaka46(v,u):null;};t.prototype.canAutoSelectVideoQuality=function(){'use strict';return true;};t.prototype.setPreloadDisabled=function(u){'use strict';if(c('VideoPlayerShakaExperiments').blockAutoplayAllowPreloadSettingsChange)this.$VideoPlayerHTML5Shaka25.configure({initialStreamBufferSize:u?0:this.$VideoPlayerHTML5Shaka41(),liveSendPushHeaders:u?false:this.$VideoPlayerHTML5Shaka42()});};t.prototype.restoreStreamBufferSize=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useStreamBufferSizeOverride)return;this.$VideoPlayerHTML5Shaka25.configure({initialStreamBufferSize:this.$VideoPlayerHTML5Shaka41(),streamBufferSize:this.$VideoPlayerHTML5Shaka40()});};t.prototype.$VideoPlayerHTML5Shaka41=function(){'use strict';return this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize;};t.prototype.$VideoPlayerHTML5Shaka40=function(){'use strict';return this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize;};t.prototype.$VideoPlayerHTML5Shaka42=function(){'use strict';return this.$VideoPlayerHTML5Shaka33;};t.prototype.setPreferredVideoQuality=function(u){'use strict';var v=this.$VideoPlayerHTML5Shaka38.getVideoTracks();v.sort(n.compare);var w=v.find(function(x){return u==this.$VideoPlayerHTML5Shaka46(x,v);}.bind(this));if(w){this.$VideoPlayerHTML5Shaka24=u;this.$VideoPlayerHTML5Shaka36.setPreferredVideoTrack(w);}};t.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka24=null;this.$VideoPlayerHTML5Shaka36.unsetPreferredVideoTrack();};t.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka47&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka48=true;this.$VideoPlayerHTML5Shaka49=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'pause');this.$VideoPlayerHTML5Shaka25.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka35.pause();};t.prototype.play=function(){'use strict';this.$VideoPlayerHTML5Shaka9=true;if(this.$VideoPlayerHTML5Shaka16&&(this.$VideoPlayerHTML5Shaka35.paused||this.$VideoPlayerHTML5Shaka35.ended))this.$VideoPlayerHTML5Shaka50=this.$VideoPlayerHTML5Shaka16.getOperationLogger('play').setState('pending_play').start();if(this.$VideoPlayerHTML5Shaka47&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka48=false;this.$VideoPlayerHTML5Shaka49=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'waiting');this.$VideoPlayerHTML5Shaka25.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka35.play();};t.prototype.$VideoPlayerHTML5Shaka51=function(){'use strict';var u=this.$VideoPlayerHTML5Shaka4;if(u){var v=this.$VideoPlayerHTML5Shaka35.currentTime,w=4,x=v>u-w,y=v>u;if(y){this.emit('debug/shakaEvent',{type:'streamResumedAt',event:this.$VideoPlayerHTML5Shaka4});this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka47)this.$VideoPlayerHTML5Shaka6=x;}return this.$VideoPlayerHTML5Shaka6;};t.prototype.$VideoPlayerHTML5Shaka26=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){s(this.$VideoPlayerHTML5Shaka35,'pause');this.$VideoPlayerHTML5Shaka48=false;this.$VideoPlayerHTML5Shaka49=false;}this.$VideoPlayerHTML5Shaka47=true;if(this.$VideoPlayerHTML5Shaka51()){if(!c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka16&&!this.$VideoPlayerHTML5Shaka52)this.$VideoPlayerHTML5Shaka52=this.$VideoPlayerHTML5Shaka16.getOperationLogger('stream_interrupted').start();this.$VideoPlayerHTML5Shaka38.setIsLiveInterrupted(true);}this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka25.setResumeAfterBuffering(true);this.emit('bufferingStart');}};t.prototype.$VideoPlayerHTML5Shaka27=function(){var u,v=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka48)s(this.$VideoPlayerHTML5Shaka35,'play');if(!this.$VideoPlayerHTML5Shaka49)(function(){var w=c('EventListener').capture(v.$VideoPlayerHTML5Shaka35.parentNode,'playing',function(x){if(x.target!=this.$VideoPlayerHTML5Shaka35)return;w.remove();if(this.$VideoPlayerHTML5Shaka18){this.$VideoPlayerHTML5Shaka18=false;return;}c('Event').kill(x);}.bind(v));})();}this.$VideoPlayerHTML5Shaka47=false;if(this.$VideoPlayerHTML5Shaka52){this.$VideoPlayerHTML5Shaka52.log();this.$VideoPlayerHTML5Shaka52=null;}this.$VideoPlayerHTML5Shaka38.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka53();}else this.emit('bufferingEnd');};t.prototype.$VideoPlayerHTML5Shaka28=function(u){'use strict';var v=u.detail||{},w=v.type||'undefined',x=v.status||null,y=v.url||null;if(this.$VideoPlayerHTML5Shaka7&&Object.values(c('VideoPlayerShakaExperiments').blockPlayRequestHTTPStatusList).indexOf(x)!=-1){if(this.$VideoPlayerHTML5Shaka9){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'playing');this.$VideoPlayerHTML5Shaka9=false;}return this.$VideoPlayerHTML5Shaka54();}this.emit('error',{error:'SHAKA_'+w.toUpperCase(),message:v.message,httpStatus:x,url:y});return undefined;};t.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka23=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka22=this.getAvailableVideoQualities();if(!this.$VideoPlayerHTML5Shaka38){this.$VideoPlayerHTML5Shaka7=false;}else if(this.$VideoPlayerHTML5Shaka38.isLive()!==null)this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka38.isLive();this.$VideoPlayerHTML5Shaka3=true;this.$VideoPlayerHTML5Shaka25.unload()['catch'](function(u){if(c('VideoPlayerShakaExperiments').ignoreErrorsAfterUnload)return;throw u;});};t.prototype.$VideoPlayerHTML5Shaka37=function(){'use strict';var u={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka55(),maxHeight:this.$VideoPlayerHTML5Shaka56(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka13,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthDowngradeTarget:c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthUpgradeTarget:c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget,useNewBandwidthBandLogic:c('VideoPlayerShakaExperiments').useNewBandwidthBandLogic,hvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveHvqUpgradeAggressiveness:c('VideoPlayerShakaExperiments').hvqUpgradeAggressiveness,hvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveHvqInlineUpgradeAggressiveness:c('VideoPlayerShakaExperiments').hvqInlineUpgradeAggressiveness,preHvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').livePreHvqUpgradeAggressiveness:c('VideoPlayerShakaExperiments').preHvqUpgradeAggressiveness,preHvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').livePreHvqInlineUpgradeAggressiveness:c('VideoPlayerShakaExperiments').preHvqInlineUpgradeAggressiveness,video:this.$VideoPlayerHTML5Shaka35,abrLogger:this.$VideoPlayerHTML5Shaka17,getSource:this.$VideoPlayerHTML5Shaka15};return new (c('CustomAbrManager'))(u);};t.prototype.$VideoPlayerHTML5Shaka39=function(){'use strict';this.$VideoPlayerHTML5Shaka36||h(0);this.$VideoPlayerHTML5Shaka34||h(0);var u=new m(this.$VideoPlayerHTML5Shaka34,null,r,this.$VideoPlayerHTML5Shaka36);this.$VideoPlayerHTML5Shaka45=new (c('TaggedTimeRanges'))(function(v,w){return v.id===w.id&&v.reason===w.reason;});u.setTaggedTimeRangesEntryAdder(function(v,w,x){this.$VideoPlayerHTML5Shaka45.add(v,w,x);}.bind(this));return u;};t.prototype.reload=function(u){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka36=this.$VideoPlayerHTML5Shaka37();this.$VideoPlayerHTML5Shaka38=this.$VideoPlayerHTML5Shaka39();if(this.$VideoPlayerHTML5Shaka51()){this.$VideoPlayerHTML5Shaka5=this.$VideoPlayerHTML5Shaka25.getPlaybackRate();this.$VideoPlayerHTML5Shaka35.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka25.setPlaybackStartTime(u);this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka25.load(this.$VideoPlayerHTML5Shaka38).then(function(){if(this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka38.isLive())return this.$VideoPlayerHTML5Shaka54();if(this.$VideoPlayerHTML5Shaka24)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka24);this.$VideoPlayerHTML5Shaka23=null;this.$VideoPlayerHTML5Shaka57=null;return undefined;}.bind(this))['catch'](function(v){if(this.$VideoPlayerHTML5Shaka3&&c('VideoPlayerShakaExperiments').ignoreErrorsAfterUnload)return;throw v;}.bind(this));};t.prototype.setPlaybackRate=function(u){'use strict';this.$VideoPlayerHTML5Shaka5=u;if(!this.$VideoPlayerHTML5Shaka51())this.$VideoPlayerHTML5Shaka25.setPlaybackRate(u);};t.prototype.setSmartBufferAdjustmentEnabled=function(u){'use strict';this.$VideoPlayerHTML5Shaka25.configure({smartBufferAdjustmentEnabled:u});};t.prototype.setVideoStreamOffset=function(u){'use strict';this.$VideoPlayerHTML5Shaka25.setVideoStreamOffset(u);};t.prototype.$VideoPlayerHTML5Shaka54=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'playing');if(c('VideoPlayerShakaExperiments').endLivePlaybackWithPause){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'pause');}else c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka43.unsubscribe();this.unload();};t.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka38.getLongestInitResponseTime();};t.prototype.getLocalEstimator=function(){'use strict';return this.$VideoPlayerHTML5Shaka38.getLocalEstimator();};t.$VideoPlayerHTML5Shaka58=function(){'use strict';return c('VideoPlayerShakaExperiments').resolutionConstraintFactor*q;};t.prototype.$VideoPlayerHTML5Shaka55=function(){'use strict';if(this.$VideoPlayerHTML5Shaka10||!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka11*t.$VideoPlayerHTML5Shaka58();};t.prototype.$VideoPlayerHTML5Shaka56=function(){'use strict';if(this.$VideoPlayerHTML5Shaka10||!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka12*t.$VideoPlayerHTML5Shaka58();};t.prototype.setDimensions=function(u,v){'use strict';this.$VideoPlayerHTML5Shaka11=u;this.$VideoPlayerHTML5Shaka12=v;this.$VideoPlayerHTML5Shaka36.setResolutionConstraint(this.$VideoPlayerHTML5Shaka55(),this.$VideoPlayerHTML5Shaka56());};t.isSupported=function(){'use strict';return l.isBrowserSupported();};t.prototype.$VideoPlayerHTML5Shaka30=function(){'use strict';this.emit('tracksChanged');};t.prototype.$VideoPlayerHTML5Shaka29=function(event){'use strict';if(event.contentType==='video'){if(this.$VideoPlayerHTML5Shaka16)this.$VideoPlayerHTML5Shaka16.setRepresentationID(event.id);if(this.$VideoPlayerHTML5Shaka17)this.$VideoPlayerHTML5Shaka17.setRepresentationID(event.id);this.emit('adaptation',{reason:event.reason});}};t.prototype.$VideoPlayerHTML5Shaka44=function(u){'use strict';if(c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka16&&!this.$VideoPlayerHTML5Shaka52)this.$VideoPlayerHTML5Shaka52=this.$VideoPlayerHTML5Shaka16.getOperationLogger('stream_interrupted').start();this.$VideoPlayerHTML5Shaka38.setIsLiveInterrupted(true);}this.$VideoPlayerHTML5Shaka4=u;};t.prototype.$VideoPlayerHTML5Shaka32=function(){'use strict';if(this.$VideoPlayerHTML5Shaka51())this.$VideoPlayerHTML5Shaka53();};t.prototype.$VideoPlayerHTML5Shaka53=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka38.forceResyncVideoBuffer();this.$VideoPlayerHTML5Shaka25.setPlaybackRate(this.$VideoPlayerHTML5Shaka5);this.emit('streamResumed');};t.prototype.$VideoPlayerHTML5Shaka31=function(){'use strict';var u=!this.$VideoPlayerHTML5Shaka35.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka53();if(u)this.play();}.bind(this))['catch'](function(v){});};t.prototype.$VideoPlayerHTML5Shaka19=function(){'use strict';this.$VideoPlayerHTML5Shaka9=false;if(this.$VideoPlayerHTML5Shaka18)this.$VideoPlayerHTML5Shaka18=false;if(this.$VideoPlayerHTML5Shaka50){this.$VideoPlayerHTML5Shaka50.log();this.$VideoPlayerHTML5Shaka50=null;}};t.prototype.$VideoPlayerHTML5Shaka21=function(){'use strict';if(this.$VideoPlayerHTML5Shaka9)this.$VideoPlayerHTML5Shaka9=false;if(this.$VideoPlayerHTML5Shaka50){this.$VideoPlayerHTML5Shaka50.setResult('aborted').log();this.$VideoPlayerHTML5Shaka50=null;}};f.exports=t;}),null);