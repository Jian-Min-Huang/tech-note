"use strict";function cboladebug(){Cbola.Env.DEBUG=!0,localStorage.setItem("cbolaDebug","1")}function rcboladebug(){Cbola.Env.DEBUG=!1,localStorage.setItem("cbolaDebug","0")}window.Cbola=window.Cbola||{},function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function r(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function a(e){var t=new FileReader,i=r(t);return t.readAsArrayBuffer(e),i}function l(e){var t=new FileReader,i=r(t);return t.readAsText(e),i}function d(e){for(var t=new Uint8Array(e),i=new Array(t.length),o=0;o<t.length;o++)i[o]=String.fromCharCode(t[o]);return i.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&w(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!v(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function m(e,t){t=t||{};var i=t.body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new n(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),o=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function u(e){var t=new n;return e.split(/\r?\n/).forEach(function(e){var i=e.split(":"),o=i.shift().trim();if(o){var n=i.join(":").trim();t.append(o,n)}}),t}function f(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};n.prototype.append=function(e,o){e=t(e),o=i(o);var n=this.map[e];this.map[e]=n?n+","+o:o},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,o){this.map[t(e)]=i(o)},n.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},n.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),o(e)},n.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},n.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),o(e)},g.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},p.call(m.prototype),p.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var I=[301,302,303,307,308];f.redirect=function(e,t){if(-1===I.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=m,e.Response=f,e.fetch=function(e,t){return new Promise(function(i,o){var n=new m(e,t),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:u(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;i(new f(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(n.method,n.url,!0),"include"===n.credentials&&(s.withCredentials=!0),"responseType"in s&&g.blob&&(s.responseType="blob"),n.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),function(e){function t(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function n(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void o._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._state?s:r)(t.promise,e._value);var o;try{o=i(e._value)}catch(n){return void r(t.promise,n)}s(t.promise,o)}))}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void a(e);if("function"==typeof n)return void d(i(n,t),e)}e._state=1,e._value=t,a(e)}catch(s){r(e,s)}}function r(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;i>t;t++)n(e,e._deferreds[t]);e._deferreds=null}function l(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,s(t,e))},function(e){i||(i=!0,r(t,e))})}catch(o){if(i)return;i=!0,r(t,o)}}var c=setTimeout;o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,i){var o=new this.constructor(t);return n(this,new l(e,i,o)),o},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,i){function o(s,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,function(e){o(s,e)},i)}t[s]=r,0===--n&&e(t)}catch(l){i(l)}}if(0===t.length)return e([]);for(var n=t.length,s=0;s<t.length;s++)o(s,t[s])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,i){i(e)})},o.race=function(e){return new o(function(t,i){for(var o=0,n=e.length;n>o;o++)e[o].then(t,i)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this),Cbola.tmp_=window._,function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function i(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function o(e,t,i,o){for(var n=-1,s=null==e?0:e.length;++n<s;){var r=e[n];t(o,r,i(r),e)}return o}function n(e,t){for(var i=-1,o=null==e?0:e.length;++i<o&&!1!==t(e[i],i,e););return e}function s(e,t){for(var i=-1,o=null==e?0:e.length,n=0,s=[];++i<o;){var r=e[i];t(r,i,e)&&(s[n++]=r)}return s}function r(e,t){return!(null==e||!e.length)&&-1<m(e,t,0)}function a(e,t,i){for(var o=-1,n=null==e?0:e.length;++o<n;)if(i(t,e[o]))return!0;return!1}function l(e,t){for(var i=-1,o=null==e?0:e.length,n=Array(o);++i<o;)n[i]=t(e[i],i,e);return n}function d(e,t){for(var i=-1,o=t.length,n=e.length;++i<o;)e[n+i]=t[i];return e}function c(e,t,i,o){var n=-1,s=null==e?0:e.length;for(o&&s&&(i=e[++n]);++n<s;)i=t(i,e[n],n,e);return i}function p(e,t){for(var i=-1,o=null==e?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}function h(e,t,i,o){var n=e.length;for(i+=o?1:-1;o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function m(e,t,i){if(t===t)e:{--i;for(var o=e.length;++i<o;)if(e[i]===t){e=i;break e}e=-1}else e=h(e,b,i);return e}function b(e){return e!==e}function u(e){return function(t){return null==t?zt:t[e]}}function f(e){return function(t){return null==e?zt:e[t]}}function g(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].c;return e}function y(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}function w(e){return function(t){return e(t)}}function v(e,t){return l(t,function(t){return e[t]})}function C(e,t){return e.has(t)}function I(e){return"\\"+Ai[e]}function _(e){var t=-1,i=Array(e.size);return e.forEach(function(e,o){i[++t]=[o,e]}),i}function x(e,t){return function(i){return e(t(i))}}function S(e,t){for(var i=-1,o=e.length,n=0,s=[];++i<o;){var r=e[i];r!==t&&"__lodash_placeholder__"!==r||(e[i]="__lodash_placeholder__",s[n++]=i)}return s}function E(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function k(e){if(Si.test(e)){for(var t=_i.lastIndex=0;_i.test(e);)++t;e=t}else e=qi(e);return e}function L(e){return Si.test(e)?e.match(_i)||[]:e.split("")}function T(){}function A(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function N(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function P(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function O(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function B(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new O;++t<i;)this.add(e[t])}function D(e){this.size=(this.__data__=new P(e)).size}function M(e,t){var i,o=cn(e),n=!o&&dn(e),s=!o&&!n&&pn(e),r=!o&&!n&&!s&&mn(e),n=(o=o||n||s||r)?y(e.length,String):[],a=n.length;for(i in e)!t&&!Zi.call(e,i)||o&&("length"==i||s&&("offset"==i||"parent"==i)||r&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||Ge(i,a))||n.push(i);return n}function F(e,t,i){var o=e[t];Zi.call(e,t)&&pt(o,i)&&(i!==zt||t in e)||q(e,t,i)}function V(e,t){for(var i=e.length;i--;)if(pt(e[i][0],t))return i;return-1}function R(e,t,i,o){return Uo(e,function(e,n,s){t(o,e,i(e),s)}),o}function U(e,t){return e&&ve(t,Lt(t),e)}function z(e,t){return e&&ve(t,Tt(t),e)}function q(e,t,i){"__proto__"==t&&ho?ho(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function W(e,t,i,o,s,r){var a,l=1&t,d=2&t,c=4&t;if(i&&(a=s?i(e,o,s,r):i(e)),a!==zt)return a;if(!gt(e))return e;if(o=cn(e)){if(a=qe(e),!l)return we(e,a)}else{var p=Yo(e),h="[object Function]"==p||"[object GeneratorFunction]"==p;if(pn(e))return ue(e,l);if("[object Object]"==p||"[object Arguments]"==p||h&&!s){if(a=d||h?{}:We(e),!l)return d?Ie(e,z(a,e)):Ce(e,U(a,e))}else{if(!Li[p])return s?e:{};a=He(e,p,W,l)}}if(r||(r=new D),s=r.get(e))return s;r.set(e,a);var d=c?d?Me:De:d?Tt:Lt,m=o?zt:d(e);return n(m||e,function(o,n){m&&(n=o,o=e[n]),F(a,n,W(o,t,i,n,e,r))}),a}function H(e,t,i,o){var n=-1,s=r,d=!0,c=e.length,p=[],h=t.length;if(!c)return p;i&&(t=l(t,w(i))),o?(s=a,d=!1):200<=t.length&&(s=C,d=!1,t=new B(t));e:for(;++n<c;){var m=e[n],b=null==i?m:i(m),m=o||0!==m?m:0;if(d&&b===b){for(var u=h;u--;)if(t[u]===b)continue e;p.push(m)}else s(t,b,o)||p.push(m)}return p}function X(e,t){var i=[];return Uo(e,function(e,o,n){t(e,o,n)&&i.push(e)}),i}function G(e,t,i,o,n){var s=-1,r=e.length;for(i||(i=Xe),n||(n=[]);++s<r;){var a=e[s];t>0&&i(a)?t>1?G(a,t-1,i,o,n):d(n,a):o||(n[n.length]=a)}return n}function j(e,t){t=me(t,e);for(var i=0,o=t.length;null!=e&&o>i;)e=e[et(t[i++])];return i&&i==o?e:zt}function Y(e,t,i){return t=t(e),cn(e)?t:d(t,i(e))}function Z(e){if(null==e)return e===zt?"[object Undefined]":"[object Null]";if(po&&po in Object(e)){var t=Zi.call(e,po),i=e[po];try{e[po]=zt;var o=!0}catch(e){}var n=Qi.call(e);o&&(t?e[po]=i:delete e[po]),e=n}else e=Qi.call(e);return e}function K(e){return yt(e)&&"[object Arguments]"==Z(e)}function Q(e,t,i,o,n){if(e===t)return!0;if(null==e||null==t||!yt(e)&&!yt(t))return e!==e&&t!==t;e:{var s=cn(e),r=cn(t),a=s?"[object Array]":Yo(e),l=r?"[object Array]":Yo(t),a="[object Arguments]"==a?"[object Object]":a,l="[object Arguments]"==l?"[object Object]":l,d="[object Object]"==a,r="[object Object]"==l;if((l=a==l)&&pn(e)){if(!pn(t)){t=!1;break e}s=!0,d=!1}if(l&&!d)n||(n=new D),t=s||mn(e)?Oe(e,t,i,o,Q,n):Be(e,t,a,i,o,Q,n);else{if(!(1&i)&&(s=d&&Zi.call(e,"__wrapped__"),a=r&&Zi.call(t,"__wrapped__"),s||a)){e=s?e.value():e,t=a?t.value():t,n||(n=new D),t=Q(e,t,i,o,n);break e}if(l)t:if(n||(n=new D),s=1&i,a=De(e),r=a.length,l=De(t).length,r==l||s){for(d=r;d--;){var c=a[d];if(!(s?c in t:Zi.call(t,c))){t=!1;break t}}if((l=n.get(e))&&n.get(t))t=l==t;else{l=!0,n.set(e,t),n.set(t,e);for(var p=s;++d<r;){var c=a[d],h=e[c],m=t[c];if(o)var b=s?o(m,h,c,t,e,n):o(h,m,c,e,t,n);if(b===zt?h!==m&&!Q(h,m,i,o,n):!b){l=!1;break}p||(p="constructor"==c)}l&&!p&&(i=e.constructor,o=t.constructor,i!=o&&"constructor"in e&&"constructor"in t&&!("function"==typeof i&&i instanceof i&&"function"==typeof o&&o instanceof o)&&(l=!1)),n.delete(e),n.delete(t),t=l}}else t=!1;else t=!1}}return t}function J(e,t,i,o){var n=i.length,s=n,r=!o;if(null==e)return!s;for(e=Object(e);n--;){var a=i[n];if(r&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++n<s;){var a=i[n],l=a[0],d=e[l],c=a[1];if(r&&a[2]){if(d===zt&&!(l in e))return!1}else{if(a=new D,o)var p=o(d,c,l,e,t,a);if(p===zt?!Q(c,d,3,o,a):!p)return!1}}return!0}function $(e){return yt(e)&&"[object RegExp]"==Z(e)}function ee(e){return yt(e)&&ft(e.length)&&!!ki[Z(e)]}function te(e){return"function"==typeof e?e:null==e?Dt:"object"==typeof e?cn(e)?se(e[0],e[1]):ne(e):Vt(e)}function ie(e){if(!Ze(e))return yo(e);var t,i=[];for(t in Object(e))Zi.call(e,t)&&"constructor"!=t&&i.push(t);return i}function oe(e,t){var i=-1,o=ht(e)?Array(e.length):[];return Uo(e,function(e,n,s){o[++i]=t(e,n,s)}),o}function ne(e){var t=Ue(e);return 1==t.length&&t[0][2]?Ke(t[0][0],t[0][1]):function(i){return i===e||J(i,e,t)}}function se(e,t){return Ye(e)&&t===t&&!gt(t)?Ke(et(e),t):function(i){var o=Et(i,e);return o===zt&&o===t?kt(i,e):Q(t,o,3)}}function re(e,t,i){var o=-1;return t=l(t.length?t:[Dt],w(Ve())),e=oe(e,function(e,i,n){return{a:l(t,function(t){return t(e)}),b:++o,c:e}}),g(e,function(e,t){var o;e:{o=-1;for(var n=e.a,s=t.a,r=n.length,a=i.length;++o<r;){var l;t:{l=n[o];var d=s[o];if(l!==d){var c=l!==zt,p=null===l,h=l===l,m=Ct(l),b=d!==zt,u=null===d,f=d===d,g=Ct(d);if(!u&&!g&&!m&&l>d||m&&b&&f&&!u&&!g||p&&b&&f||!c&&f||!h){l=1;break t}if(!p&&!m&&!g&&d>l||g&&c&&h&&!p&&!m||u&&c&&h||!b&&h||!f){l=-1;break t}}l=0}if(l){if(o>=a){o=l;break e}o=l*("desc"==i[o]?-1:1);break e}}o=e.b-t.b}return o})}function ae(e){return function(t){return j(t,e)}}function le(e,t){var i="";if(!e||1>t||t>9007199254740991)return i;do t%2&&(i+=e),(t=bo(t/2))&&(e+=e);while(t);return i}function de(e,t){return Ko(Qe(e,t,Dt),e+"")}function ce(e,t,i){var o=-1,n=e.length;for(0>t&&(t=-t>n?0:n+t),i=i>n?n:i,0>i&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0,i=Array(n);++o<n;)i[o]=e[o+t];return i}function pe(e){if("string"==typeof e)return e;if(cn(e))return l(e,pe)+"";if(Ct(e))return Vo?Vo.call(e):"";var t=e+"";return"0"==t&&1/e==-qt?"-0":t}function he(e,t,i){var o=-1,n=r,s=e.length,l=!0,d=[],c=d;if(i)l=!1,n=a;else if(s>=200){if(n=t?null:Ho(e))return E(n);l=!1,n=C,c=new B}else c=t?[]:d;e:for(;++o<s;){var p=e[o],h=t?t(p):p,p=i||0!==p?p:0;if(l&&h===h){for(var m=c.length;m--;)if(c[m]===h)continue e;t&&c.push(h),d.push(p)}else n(c,h,i)||(c!==d&&c.push(h),d.push(p))}return d}function me(e,t){return cn(e)?e:Ye(e,t)?[e]:Qo(St(e))}function be(e,t,i){var o=e.length;return i=i===zt?o:i,!t&&i>=o?e:ce(e,t,i)}function ue(e,t){if(t)return e.slice();var i=e.length,i=no?no(i):new e.constructor(i);return e.copy(i),i}function fe(e){var t=new e.constructor(e.byteLength);return new oo(t).set(new oo(e)),t}function ge(e,t,i,o){var n=-1,s=e.length,r=i.length,a=-1,l=t.length,d=wo(s-r,0),c=Array(l+d);for(o=!o;++a<l;)c[a]=t[a];for(;++n<r;)(o||s>n)&&(c[i[n]]=e[n]);for(;d--;)c[a++]=e[n++];return c}function ye(e,t,i,o){var n=-1,s=e.length,r=-1,a=i.length,l=-1,d=t.length,c=wo(s-a,0),p=Array(c+d);for(o=!o;++n<c;)p[n]=e[n];for(c=n;++l<d;)p[c+l]=t[l];for(;++r<a;)(o||s>n)&&(p[c+i[r]]=e[n++]);return p}function we(e,t){var i=-1,o=e.length;for(t||(t=Array(o));++i<o;)t[i]=e[i];return t}function ve(e,t,i,o){var n=!i;i||(i={});for(var s=-1,r=t.length;++s<r;){var a=t[s],l=o?o(i[a],e[a],a,i,e):zt;l===zt&&(l=e[a]),n?q(i,a,l):F(i,a,l)}return i}function Ce(e,t){return ve(e,Go(e),t)}function Ie(e,t){return ve(e,jo(e),t)}function _e(e){return de(function(t,i){var o=-1,n=i.length,s=n>1?i[n-1]:zt,r=n>2?i[2]:zt,s=3<e.length&&"function"==typeof s?(n--,s):zt;for(r&&je(i[0],i[1],r)&&(s=3>n?zt:s,n=1),t=Object(t);++o<n;)(r=i[o])&&e(t,r,o,s);return t})}function xe(e,t,i){function o(){return(this&&this!==Di&&this instanceof o?s:e).apply(n?i:this,arguments)}var n=1&t,s=Ee(e);return o}function Se(e){return function(t){return c(Ot(Pt(t).replace(Ci,"")),e,"")}}function Ee(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Ro(e.prototype),t=e.apply(i,t);return gt(t)?t:i}}function ke(e,t,o){function n(){for(var r=arguments.length,a=Array(r),l=r,d=Fe(n);l--;)a[l]=arguments[l];return l=3>r&&a[0]!==d&&a[r-1]!==d?[]:S(a,d),r-=l.length,o>r?Ae(e,t,Le,n.placeholder,zt,a,l,zt,zt,o-r):i(this&&this!==Di&&this instanceof n?s:e,this,a)}var s=Ee(e);return n}function Le(e,t,i,o,n,s,r,a,l,d){function c(){for(var g=arguments.length,y=Array(g),w=g;w--;)y[w]=arguments[w];if(b){var v,C=Fe(c),w=y.length;for(v=0;w--;)y[w]===C&&++v}if(o&&(y=ge(y,o,n,b)),s&&(y=ye(y,s,r,b)),g-=v,b&&d>g)return C=S(y,C),Ae(e,t,Le,c.placeholder,i,y,C,a,l,d-g);if(C=h?i:this,w=m?C[e]:e,g=y.length,a){v=y.length;for(var I=vo(a.length,v),_=we(y);I--;){var x=a[I];y[I]=Ge(x,v)?_[x]:zt}}else u&&g>1&&y.reverse();return p&&g>l&&(y.length=l),this&&this!==Di&&this instanceof c&&(w=f||Ee(w)),w.apply(C,y)}var p=128&t,h=1&t,m=2&t,b=24&t,u=512&t,f=m?zt:Ee(e);return c}function Te(e,t,o,n){function s(){for(var t=-1,l=arguments.length,d=-1,c=n.length,p=Array(c+l),h=this&&this!==Di&&this instanceof s?a:e;++d<c;)p[d]=n[d];for(;l--;)p[d++]=arguments[++t];return i(h,r?o:this,p)}var r=1&t,a=Ee(e);return s}function Ae(e,t,i,o,n,s,r,a,l,d){var c=8&t,p=c?r:zt;r=c?zt:r;var h=c?s:zt;s=c?zt:s,t=(t|(c?32:64))&~(c?64:32),4&t||(t&=-4),n=[e,t,n,h,p,s,r,a,l,d],i=i.apply(zt,n);e:for(a=e.name+"",l=Ao[a],d=Zi.call(Ao,a)?l.length:0;d--;)if(c=l[d],p=c.func,null==p||p==e){a=c.name;break e}return l=T[a],"function"==typeof l&&a in A.prototype?e===l?a=!0:(a=Xo(l),a=!!a&&e===a[0]):a=!1,a&&Zo(i,n),i.placeholder=o,Je(i,e,t)}function Ne(e){var t=Math[e];return function(e,i){if(e=xt(e),i=null==i?0:vo(_t(i),292)){var o=(St(e)+"e").split("e"),o=t(o[0]+"e"+(+o[1]+i)),o=(St(o)+"e").split("e");return+(o[0]+"e"+(+o[1]-i))}return t(e)}}function Pe(e,t,i,o){return e===zt||pt(e,Gi[i])&&!Zi.call(o,i)?t:e}function Oe(e,t,i,o,n,s){var r=1&i,a=e.length,l=t.length;if(a!=l&&!(r&&l>a))return!1;if((l=s.get(e))&&s.get(t))return l==t;var l=-1,d=!0,c=2&i?new B:zt;for(s.set(e,t),s.set(t,e);++l<a;){var h=e[l],m=t[l];if(o)var b=r?o(m,h,l,t,e,s):o(h,m,l,e,t,s);if(b!==zt){if(b)continue;d=!1;break}if(c){if(!p(t,function(e,t){return C(c,t)||h!==e&&!n(h,e,i,o,s)?void 0:c.push(t)})){d=!1;break}}else if(h!==m&&!n(h,m,i,o,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Be(e,t,i,o,n,s,r){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!s(new oo(e),new oo(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return pt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=_;case"[object Set]":if(a||(a=E),e.size!=t.size&&!(1&o))break;return(i=r.get(e))?i==t:(o|=2,r.set(e,t),t=Oe(a(e),a(t),o,n,s,r),r.delete(e),t);case"[object Symbol]":if(Fo)return Fo.call(e)==Fo.call(t)}return!1}function De(e){return Y(e,Lt,Go)}function Me(e){return Y(e,Tt,jo)}function Fe(e){return(Zi.call(T,"placeholder")?T:e).placeholder}function Ve(){var e=T.iteratee||Mt,e=e===Mt?te:e;return arguments.length?e(arguments[0],arguments[1]):e}function Re(e,t){var i=e.__data__,o=typeof t;return("string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function Ue(e){for(var t=Lt(e),i=t.length;i--;){var o=t[i],n=e[o];t[i]=[o,n,n===n&&!gt(n)]}return t}function ze(e,t){var i,o=null==e?zt:e[t];return i=!(!gt(o)||Ki&&Ki in o)&&(ut(o)?eo:hi).test(tt(o)),i?o:zt}function qe(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&Zi.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function We(e){return"function"!=typeof e.constructor||Ze(e)?{}:Ro(so(e))}function He(i,o,n,s){var r=i.constructor;switch(o){case"[object ArrayBuffer]":return fe(i);case"[object Boolean]":case"[object Date]":return new r(+i);case"[object DataView]":return o=s?fe(i.buffer):i.buffer,new i.constructor(o,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o=s?fe(i.buffer):i.buffer,new i.constructor(o,i.byteOffset,i.length);case"[object Map]":return o=s?n(_(i),1):_(i),c(o,e,new i.constructor);case"[object Number]":case"[object String]":return new r(i);case"[object RegExp]":return o=new i.constructor(i.source,di.exec(i)),o.lastIndex=i.lastIndex,o;case"[object Set]":return o=s?n(E(i),1):E(i),c(o,t,new i.constructor);case"[object Symbol]":return Fo?Object(Fo.call(i)):{}}}function Xe(e){return cn(e)||dn(e)||!!(co&&e&&e[co])}function Ge(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||bi.test(e))&&e>-1&&0==e%1&&t>e}function je(e,t,i){if(!gt(i))return!1;var o=typeof t;return!!("number"==o?ht(i)&&Ge(t,i.length):"string"==o&&t in i)&&pt(i[t],e)}function Ye(e,t){if(cn(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Ct(e))||Jt.test(e)||!Qt.test(e)||null!=t&&e in Object(t)}function Ze(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Gi)}function Ke(e,t){return function(i){return null!=i&&i[e]===t&&(t!==zt||e in Object(i))}}function Qe(e,t,o){return t=wo(t===zt?e.length-1:t,0),function(){for(var n=arguments,s=-1,r=wo(n.length-t,0),a=Array(r);++s<r;)a[s]=n[t+s];for(s=-1,r=Array(t+1);++s<t;)r[s]=n[s];return r[t]=o(a),i(e,this,r)}}function Je(e,t,i){var o=t+"";t=Ko;var n,s=it;return n=(n=o.match(ni))?n[1].split(si):[],i=s(n,i),(s=i.length)&&(n=s-1,i[n]=(s>1?"& ":"")+i[n],i=i.join(s>2?", ":" "),o=o.replace(oi,"{\n/* [wrapped with "+i+"] */\n")),t(e,o)}function $e(e){var t=0,i=0;return function(){var o=Co(),n=16-(o-i);if(i=o,n>0){if(800<=++t)return arguments[0]}else t=0;return e.apply(zt,arguments)}}function et(e){if("string"==typeof e||Ct(e))return e;var t=e+"";return"0"==t&&1/e==-qt?"-0":t}function tt(e){if(null!=e){try{return Yi.call(e)}catch(e){}return e+""}return""}function it(e,t){return n(Ht,function(i){var o="_."+i[0];t&i[1]&&!r(e,o)&&e.push(o)}),e.sort()}function ot(e,t,i){var o=null==e?0:e.length;return o?(i=null==i?0:_t(i),0>i&&(i=wo(o+i,0)),h(e,Ve(t,3),i)):-1}function nt(e){return e&&e.length?e[0]:zt}function st(e){var t=null==e?0:e.length;return t?e[t-1]:zt}function rt(e){if(!e||!e.length)return[];var t=0;return e=s(e,function(e){return mt(e)?(t=wo(e.length,t),!0):void 0}),y(t,function(t){return l(e,u(t))})}function at(e,t){return(cn(e)?n:Uo)(e,Ve(t,3))}function lt(e,t){var i;if("function"!=typeof t)throw new TypeError("Expected a function");return e=_t(e),function(){return 0<--e&&(i=t.apply(this,arguments)),1>=e&&(t=zt),i}}function dt(e,t,i){function o(t){var i=l,o=d;return l=d=zt,b=t,p=e.apply(o,i)}function n(e){var i=e-m;return e-=b,m===zt||i>=t||0>i||f&&e>=c}function s(){var e=an();if(n(e))return r(e);var i,o=setTimeout;i=e-b,e=t-(e-m),i=f?vo(e,c-i):e,h=o(s,i)}function r(e){return h=zt,g&&l?o(e):(l=d=zt,p)}function a(){var e=an(),i=n(e);if(l=arguments,d=this,m=e,i){if(h===zt)return b=e=m,h=setTimeout(s,t),u?o(e):p;if(f)return h=setTimeout(s,t),o(m)}return h===zt&&(h=setTimeout(s,t)),p}var l,d,c,p,h,m,b=0,u=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=xt(t)||0,gt(i)&&(u=!!i.leading,c=(f="maxWait"in i)?wo(xt(i.maxWait)||0,t):c,g="trailing"in i?!!i.trailing:g),a.cancel=function(){h!==zt&&clearTimeout(h),b=0,l=m=d=h=zt},a.flush=function(){return h===zt?p:r(an())},a}function ct(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var o=arguments,n=t?t.apply(this,o):o[0],s=i.cache;return s.has(n)?s.get(n):(o=e.apply(this,o),i.cache=s.set(n,o)||s,o)};return i.cache=new(ct.Cache||O),i}function pt(e,t){return e===t||e!==e&&t!==t}function ht(e){return null!=e&&ft(e.length)&&!ut(e)}function mt(e){return yt(e)&&ht(e)}function bt(e){if(!yt(e))return!1;var t=Z(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!wt(e)}function ut(e){return!!gt(e)&&(e=Z(e),"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function ft(e){return"number"==typeof e&&e>-1&&0==e%1&&9007199254740991>=e}function gt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function yt(e){return null!=e&&"object"==typeof e}function wt(e){return!(!yt(e)||"[object Object]"!=Z(e))&&(e=so(e),null===e||(e=Zi.call(e,"constructor")&&e.constructor,"function"==typeof e&&e instanceof e&&Yi.call(e)==Ji))}function vt(e){return"string"==typeof e||!cn(e)&&yt(e)&&"[object String]"==Z(e)}function Ct(e){return"symbol"==typeof e||yt(e)&&"[object Symbol]"==Z(e)}function It(e){return e?(e=xt(e),e===qt||e===-qt?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function _t(e){e=It(e);var t=e%1;return e===e?t?e-t:e:0}function xt(e){if("number"==typeof e)return e;if(Ct(e))return Wt;if(gt(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=gt(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(ti,"");var t=pi.test(e);return t||mi.test(e)?Pi(e.slice(2),t?2:8):ci.test(e)?Wt:+e}function St(e){return null==e?"":pe(e)}function Et(e,t,i){return e=null==e?zt:j(e,t),e===zt?i:e}function kt(e,t){var i;if(i=null!=e){i=e;var o;o=me(t,i);for(var n=-1,s=o.length,r=!1;++n<s;){var a=et(o[n]);if(!(r=null!=i&&null!=i&&a in Object(i)))break;i=i[a]}r||++n!=s?i=r:(s=null==i?0:i.length,i=!!s&&ft(s)&&Ge(a,s)&&(cn(i)||dn(i)))}return i}function Lt(e){return ht(e)?M(e):ie(e)}function Tt(e){if(ht(e))e=M(e,!0);else if(gt(e)){var t,i=Ze(e),o=[];for(t in e)("constructor"!=t||!i&&Zi.call(e,t))&&o.push(t);e=o}else{if(t=[],null!=e)for(i in Object(e))t.push(i);e=t}return e}function At(e){return null==e?[]:v(e,Lt(e))}function Nt(e){return vn(St(e).toLowerCase())}function Pt(e){return(e=St(e))&&e.replace(ui,Wi).replace(Ii,"")}function Ot(e,t,i){return e=St(e),t=i?zt:t,t===zt?Ei.test(e)?e.match(xi)||[]:e.match(ri)||[]:e.match(t)||[]}function Bt(e){return function(){return e}}function Dt(e){return e}function Mt(e){return te("function"==typeof e?e:W(e,1))}function Ft(){}function Vt(e){return Ye(e)?u(et(e)):ae(e)}function Rt(){return[]}function Ut(){return!1}var zt,qt=1/0,Wt=NaN,Ht=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Xt=/\b__p\+='';/g,Gt=/\b(__p\+=)''\+/g,jt=/(__e\(.*?\)|\b__t\))\+'';/g,Yt=/[&<>"']/g,Zt=RegExp(Yt.source),Kt=/<%=([\s\S]+?)%>/g,Qt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jt=/^\w*$/,$t=/^\./,ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ti=/^\s+|\s+$/g,ii=/\s+$/,oi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ni=/\{\n\/\* \[wrapped with (.+)\] \*/,si=/,? & /,ri=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ai=/\\(\\)?/g,li=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,di=/\w*$/,ci=/^[-+]0x[0-9a-f]+$/i,pi=/^0b[01]+$/i,hi=/^\[object .+?Constructor\]$/,mi=/^0o[0-7]+$/i,bi=/^(?:0|[1-9]\d*)$/,ui=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fi=/($^)/,gi=/['\n\r\u2028\u2029\\]/g,yi="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",wi="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+yi,vi="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Ci=RegExp("['’]","g"),Ii=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),_i=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+vi+yi,"g"),xi=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",wi].join("|"),"g"),Si=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ei=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ki={};
ki["[object Float32Array]"]=ki["[object Float64Array]"]=ki["[object Int8Array]"]=ki["[object Int16Array]"]=ki["[object Int32Array]"]=ki["[object Uint8Array]"]=ki["[object Uint8ClampedArray]"]=ki["[object Uint16Array]"]=ki["[object Uint32Array]"]=!0,ki["[object Arguments]"]=ki["[object Array]"]=ki["[object ArrayBuffer]"]=ki["[object Boolean]"]=ki["[object DataView]"]=ki["[object Date]"]=ki["[object Error]"]=ki["[object Function]"]=ki["[object Map]"]=ki["[object Number]"]=ki["[object Object]"]=ki["[object RegExp]"]=ki["[object Set]"]=ki["[object String]"]=ki["[object WeakMap]"]=!1;var Li={};Li["[object Arguments]"]=Li["[object Array]"]=Li["[object ArrayBuffer]"]=Li["[object DataView]"]=Li["[object Boolean]"]=Li["[object Date]"]=Li["[object Float32Array]"]=Li["[object Float64Array]"]=Li["[object Int8Array]"]=Li["[object Int16Array]"]=Li["[object Int32Array]"]=Li["[object Map]"]=Li["[object Number]"]=Li["[object Object]"]=Li["[object RegExp]"]=Li["[object Set]"]=Li["[object String]"]=Li["[object Symbol]"]=Li["[object Uint8Array]"]=Li["[object Uint8ClampedArray]"]=Li["[object Uint16Array]"]=Li["[object Uint32Array]"]=!0,Li["[object Error]"]=Li["[object Function]"]=Li["[object WeakMap]"]=!1;var Ti,Ai={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ni=parseFloat,Pi=parseInt,Oi="object"==typeof global&&global&&global.Object===Object&&global,Bi="object"==typeof self&&self&&self.Object===Object&&self,Di=Oi||Bi||Function("return this")(),Mi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Fi=Mi&&"object"==typeof module&&module&&!module.nodeType&&module,Vi=Fi&&Fi.exports===Mi,Ri=Vi&&Oi.process;e:{try{Ti=Ri&&Ri.binding&&Ri.binding("util");break e}catch(e){}Ti=void 0}var Ui=Ti&&Ti.isRegExp,zi=Ti&&Ti.isTypedArray,qi=u("length"),Wi=f({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Hi=f({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Xi=Array.prototype,Gi=Object.prototype,ji=Di["__core-js_shared__"],Yi=Function.prototype.toString,Zi=Gi.hasOwnProperty,Ki=function(){var e=/[^.]+$/.exec(ji&&ji.keys&&ji.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Qi=Gi.toString,Ji=Yi.call(Object),$i=Di._,eo=RegExp("^"+Yi.call(Zi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),to=Vi?Di.Buffer:zt,io=Di.Symbol,oo=Di.Uint8Array,no=to?to.allocUnsafe:zt,so=x(Object.getPrototypeOf,Object),ro=Object.create,ao=Gi.propertyIsEnumerable,lo=Xi.splice,co=io?io.isConcatSpreadable:zt,po=io?io.toStringTag:zt,ho=function(){try{var e=ze(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),mo=Math.ceil,bo=Math.floor,uo=Object.getOwnPropertySymbols,fo=to?to.isBuffer:zt,go=Xi.join,yo=x(Object.keys,Object),wo=Math.max,vo=Math.min,Co=Date.now,Io=Math.random,_o=ze(Di,"DataView"),xo=ze(Di,"Map"),So=ze(Di,"Promise"),Eo=ze(Di,"Set"),ko=ze(Di,"WeakMap"),Lo=ze(Object,"create"),To=ko&&new ko,Ao={},No=tt(_o),Po=tt(xo),Oo=tt(So),Bo=tt(Eo),Do=tt(ko),Mo=io?io.prototype:zt,Fo=Mo?Mo.valueOf:zt,Vo=Mo?Mo.toString:zt,Ro=function(){function e(){}return function(t){return gt(t)?ro?ro(t):(e.prototype=t,t=new e,e.prototype=zt,t):{}}}();T.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Kt,variable:"",imports:{_:T}},A.prototype=Ro(function(){}.prototype),A.prototype.constructor=A,N.prototype.clear=function(){this.__data__=Lo?Lo(null):{},this.size=0},N.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},N.prototype.get=function(e){var t=this.__data__;return Lo?(e=t[e],"__lodash_hash_undefined__"===e?zt:e):Zi.call(t,e)?t[e]:zt},N.prototype.has=function(e){var t=this.__data__;return Lo?t[e]!==zt:Zi.call(t,e)},N.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Lo&&t===zt?"__lodash_hash_undefined__":t,this},P.prototype.clear=function(){this.__data__=[],this.size=0},P.prototype.delete=function(e){var t=this.__data__;return e=V(t,e),!(0>e||(e==t.length-1?t.pop():lo.call(t,e,1),--this.size,0))},P.prototype.get=function(e){var t=this.__data__;return e=V(t,e),0>e?zt:t[e][1]},P.prototype.has=function(e){return-1<V(this.__data__,e)},P.prototype.set=function(e,t){var i=this.__data__,o=V(i,e);return 0>o?(++this.size,i.push([e,t])):i[o][1]=t,this},O.prototype.clear=function(){this.size=0,this.__data__={hash:new N,map:new(xo||P),string:new N}},O.prototype.delete=function(e){return e=Re(this,e).delete(e),this.size-=e?1:0,e},O.prototype.get=function(e){return Re(this,e).get(e)},O.prototype.has=function(e){return Re(this,e).has(e)},O.prototype.set=function(e,t){var i=Re(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this},B.prototype.add=B.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},B.prototype.has=function(e){return this.__data__.has(e)},D.prototype.clear=function(){this.__data__=new P,this.size=0},D.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},D.prototype.get=function(e){return this.__data__.get(e)},D.prototype.has=function(e){return this.__data__.has(e)},D.prototype.set=function(e,t){var i=this.__data__;if(i instanceof P){var o=i.__data__;if(!xo||199>o.length)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new O(o)}return i.set(e,t),this.size=i.size,this};var Uo=function(e,t){return function(i,o){if(null==i)return i;if(!ht(i))return e(i,o);for(var n=i.length,s=t?n:-1,r=Object(i);(t?s--:++s<n)&&!1!==o(r[s],s,r););return i}}(function(e,t){return e&&zo(e,t,Lt)}),zo=function(e){return function(t,i,o){var n=-1,s=Object(t);o=o(t);for(var r=o.length;r--;){var a=o[e?r:++n];if(!1===i(s[a],a,s))break}return t}}(),qo=To?function(e,t){return To.set(e,t),e}:Dt,Wo=ho?function(e,t){return ho(e,"toString",{configurable:!0,enumerable:!1,value:Bt(t),writable:!0})}:Dt,Ho=Eo&&1/E(new Eo([,-0]))[1]==qt?function(e){return new Eo(e)}:Ft,Xo=To?function(e){return To.get(e)}:Ft,Go=uo?function(e){return null==e?[]:(e=Object(e),s(uo(e),function(t){return ao.call(e,t)}))}:Rt,jo=uo?function(e){for(var t=[];e;)d(t,Go(e)),e=so(e);return t}:Rt,Yo=Z;(_o&&"[object DataView]"!=Yo(new _o(new ArrayBuffer(1)))||xo&&"[object Map]"!=Yo(new xo)||So&&"[object Promise]"!=Yo(So.resolve())||Eo&&"[object Set]"!=Yo(new Eo)||ko&&"[object WeakMap]"!=Yo(new ko))&&(Yo=function(e){var t=Z(e);if(e=(e="[object Object]"==t?e.constructor:zt)?tt(e):"")switch(e){case No:return"[object DataView]";case Po:return"[object Map]";case Oo:return"[object Promise]";case Bo:return"[object Set]";case Do:return"[object WeakMap]"}return t});var Zo=$e(qo),Ko=$e(Wo),Qo=function(e){e=ct(e,function(e){return 500===t.size&&t.clear(),e});var t=e.cache;return e}(function(e){var t=[];return $t.test(e)&&t.push(""),e.replace(ei,function(e,i,o,n){t.push(o?n.replace(ai,"$1"):i||e)}),t}),Jo=de(function(e,t){return mt(e)?H(e,G(t,1,mt,!0)):[]}),$o=de(function(e,t){var i=st(t);return mt(i)&&(i=zt),mt(e)?H(e,G(t,1,mt,!0),Ve(i,2)):[]}),en=de(function(e){return he(G(e,1,mt,!0))}),tn=de(function(e){var t=st(e);return mt(t)&&(t=zt),he(G(e,1,mt,!0),Ve(t,2))}),on=de(rt),nn=function(e){return function(t,i,o){var n=Object(t);if(!ht(t)){var s=Ve(i,3);t=Lt(t),i=function(e){return s(n[e],e,n)}}return i=e(t,i,o),i>-1?n[s?t[i]:i]:zt}}(ot),sn=function(e,t){return function(i,n){var s=cn(i)?o:R,r=t?t():{};return s(i,e,Ve(n,2),r)}}(function(e,t,i){Zi.call(e,i)?e[i].push(t):q(e,i,[t])}),rn=de(function(e,t){if(null==e)return[];var i=t.length;return i>1&&je(e,t[0],t[1])?t=[]:i>2&&je(t[0],t[1],t[2])&&(t=[t[0]]),re(e,G(t,1),[])}),an=function(){return Di.Date.now()};ct.Cache=O;var ln=de(function(e,t){var i=S(t,Fe(ln)),o=e,n=32,s=zt,r=t,a=i,l=void 0,d=void 0,c=2&n;if(!c&&"function"!=typeof o)throw new TypeError("Expected a function");var p=r?r.length:0;if(p||(n&=-97,r=a=zt),l=l===zt?l:wo(_t(l),0),d=d===zt?d:_t(d),p-=a?a.length:0,64&n)var h=r,m=a,r=a=zt;return i=c?zt:Xo(o),h=[o,n,s,r,a,h,m,void 0,l,d],i&&(s=h[1],o=i[1],n=s|o,r=128==o&&8==s||128==o&&256==s&&h[7].length<=i[8]||384==o&&i[7].length<=i[8]&&8==s,131>n||r)&&(1&o&&(h[2]=i[2],n|=1&s?0:4),(s=i[3])&&(r=h[3],h[3]=r?ge(r,s,i[4]):s,h[4]=r?S(h[3],"__lodash_placeholder__"):i[4]),(s=i[5])&&(r=h[5],h[5]=r?ye(r,s,i[6]):s,h[6]=r?S(h[5],"__lodash_placeholder__"):i[6]),(s=i[7])&&(h[7]=s),128&o&&(h[8]=null==h[8]?i[8]:vo(h[8],i[8])),null==h[9]&&(h[9]=i[9]),h[0]=i[0],h[1]=n),o=h[0],n=h[1],s=h[2],r=h[3],a=h[4],d=h[9]=h[9]===zt?c?0:o.length:wo(h[9]-p,0),!d&&24&n&&(n&=-25),c=n&&1!=n?8==n||16==n?ke(o,n,d):32!=n&&33!=n||a.length?Le.apply(zt,h):Te(o,n,s,r):xe(o,n,s),Je((i?qo:Zo)(c,h),o,n)}),dn=K(function(){return arguments}())?K:function(e){return yt(e)&&Zi.call(e,"callee")&&!ao.call(e,"callee")},cn=Array.isArray,pn=fo||Ut,hn=Ui?w(Ui):$,mn=zi?w(zi):ee,bn=_e(function(e,t){if(Ze(t)||ht(t))ve(t,Lt(t),e);else for(var i in t)Zi.call(t,i)&&F(e,i,t[i])}),un=_e(function(e,t){ve(t,Tt(t),e)}),fn=_e(function(e,t,i,o){ve(t,Tt(t),e,o)}),gn=de(function(e){return e.push(zt,Pe),i(fn,zt,e)}),yn=Se(function(e,t,i){return t=t.toLowerCase(),e+(i?Nt(t):t)}),wn=Se(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),vn=function(e){return function(t){t=St(t);var i=Si.test(t)?L(t):zt,o=i?i[0]:t.charAt(0);return t=i?be(i,1).join(""):t.slice(1),o[e]()+t}}("toUpperCase"),Cn=de(function(e,t){try{return i(e,zt,t)}catch(e){return bt(e)?e:Error(e)}}),In=Ne("floor"),_n=Ne("round");T.assign=bn,T.assignIn=un,T.assignInWith=fn,T.before=lt,T.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0];e--;)t[e-1]=arguments[e];return d(cn(i)?we(i):[i],G(t,1))},T.constant=Bt,T.debounce=dt,T.defaults=gn,T.difference=Jo,T.differenceBy=$o,T.filter=function(e,t){return(cn(e)?s:X)(e,Ve(t,3))},T.groupBy=sn,T.iteratee=Mt,T.keys=Lt,T.keysIn=Tt,T.map=function(e,t){return(cn(e)?l:oe)(e,Ve(t,3))},T.memoize=ct,T.once=function(e){return lt(2,e)},T.partial=ln,T.property=Vt,T.pullAll=function(e,t){if(e&&e.length&&t&&t.length){var i=t,o=m,n=-1,s=i.length;for(e===i&&(i=we(i));++n<s;)for(var r=0,a=i[n];-1<(r=o(e,a,r,void 0));)e!==e&&lo.call(e,r,1),lo.call(e,r,1)}return e},T.remove=function(e,t){var i=[];if(!e||!e.length)return i;var o=-1,n=[],s=e.length;for(t=Ve(t,3);++o<s;){var r=e[o];t(r,o,e)&&(i.push(r),n.push(o))}for(o=e?n.length:0,s=o-1;o--;){var a=n[o];if(o==s||a!==l){var l=a;Ge(a)?lo.call(e,a,1):(r=e,a=me(a,r),r=2>a.length?r:j(r,ce(a,0,-1)),null==r||delete r[et(st(a))])}}return i},T.sortBy=rn,T.split=function(e,t,i){return i&&"number"!=typeof i&&je(e,t,i)&&(t=i=zt),i=i===zt?4294967295:i>>>0,i?(e=St(e))&&("string"==typeof t||null!=t&&!hn(t))&&(t=pe(t),!t&&Si.test(e))?be(L(e),0,i):e.split(t,i):[]},T.take=function(e,t,i){return e&&e.length?(t=i||t===zt?1:_t(t),ce(e,0,0>t?0:t)):[]},T.throttle=function(e,t,i){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return gt(i)&&(o="leading"in i?!!i.leading:o,n="trailing"in i?!!i.trailing:n),dt(e,t,{leading:o,maxWait:t,trailing:n})},T.union=en,T.unionBy=tn,T.uniq=function(e){return e&&e.length?he(e):[]},T.unzip=rt,T.values=At,T.words=Ot,T.zip=on,T.extend=un,T.extendWith=fn,T.attempt=Cn,T.camelCase=yn,T.capitalize=Nt,T.clone=function(e){return W(e,4)},T.cloneDeep=function(e){return W(e,5)},T.deburr=Pt,T.eq=pt,T.escape=function(e){return(e=St(e))&&Zt.test(e)?e.replace(Yt,Hi):e},T.find=nn,T.findIndex=ot,T.floor=In,T.forEach=at,T.get=Et,T.hasIn=kt,T.head=nt,T.identity=Dt,T.includes=function(e,t,i,o){return e=ht(e)?e:At(e),i=i&&!o?_t(i):0,o=e.length,0>i&&(i=wo(o+i,0)),vt(e)?o>=i&&-1<e.indexOf(t,i):!!o&&-1<m(e,t,i)},T.indexOf=function(e,t,i){var o=null==e?0:e.length;return o?(i=null==i?0:_t(i),0>i&&(i=wo(o+i,0)),m(e,t,i)):-1},T.isArguments=dn,T.isArray=cn,T.isArrayLike=ht,T.isArrayLikeObject=mt,T.isBuffer=pn,T.isEmpty=function(e){if(null==e)return!0;if(ht(e)&&(cn(e)||"string"==typeof e||"function"==typeof e.splice||pn(e)||mn(e)||dn(e)))return!e.length;var t=Yo(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ze(e))return!ie(e).length;for(var i in e)if(Zi.call(e,i))return!1;return!0},T.isError=bt,T.isFunction=ut,T.isLength=ft,T.isNil=function(e){return null==e},T.isNull=function(e){return null===e},T.isNumber=function(e){return"number"==typeof e||yt(e)&&"[object Number]"==Z(e)},T.isObject=gt,T.isObjectLike=yt,T.isPlainObject=wt,T.isRegExp=hn,T.isString=vt,T.isSymbol=Ct,T.isTypedArray=mn,T.isUndefined=function(e){return e===zt},T.join=function(e,t){return null==e?"":go.call(e,t)},T.kebabCase=wn,T.last=st,T.stubArray=Rt,T.stubFalse=Ut,T.noConflict=function(){return Di._===this&&(Di._=$i),this},T.noop=Ft,T.now=an,T.padStart=function(e,t,i){e=St(e);var o=(t=_t(t))?k(e):0;return t&&t>o&&(t-=o,i=i===zt?" ":pe(i),o=i.length,2>o?t=o?le(i,t):i:(o=le(i,mo(t/k(i))),t=Si.test(i)?be(L(o),0,t).join(""):o.slice(0,t)),e=t+e),e},T.random=function(e,t,i){if(i&&"boolean"!=typeof i&&je(e,t,i)&&(t=i=zt),i===zt&&("boolean"==typeof t?(i=t,t=zt):"boolean"==typeof e&&(i=e,e=zt)),e===zt&&t===zt?(e=0,t=1):(e=It(e),t===zt?(t=e,e=0):t=It(t)),e>t){var o=e;e=t,t=o}return i||e%1||t%1?(i=Io(),vo(e+i*(t-e+Ni("1e-"+((i+"").length-1))),t)):e+bo(Io()*(t-e+1))},T.result=function(e,t,i){t=me(t,e);var o=-1,n=t.length;for(n||(n=1,e=zt);++o<n;){var s=null==e?zt:e[et(t[o])];s===zt&&(o=n,s=i),e=ut(s)?s.call(e):s}return e},T.round=_n,T.size=function(e){if(null==e)return 0;if(ht(e))return vt(e)?k(e):e.length;var t=Yo(e);return"[object Map]"==t||"[object Set]"==t?e.size:ie(e).length},T.startsWith=function(e,t,i){if(e=St(e),null==i)i=0;else{i=_t(i);var o=e.length;i===i&&(o!==zt&&(i=o>=i?i:o),0!==zt&&(i=i>=0?i:0))}return t=pe(t),e.slice(i,i+t.length)==t},T.template=function(e,t,i){var o=T.templateSettings;i&&je(e,t,i)&&(t=zt),e=St(e),t=fn({},t,o,Pe),i=fn({},t.imports,o.imports,Pe);var n,s,r=Lt(i),a=v(i,r),l=0;i=t.interpolate||fi;var d="__p+='",c="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(RegExp((t.escape||fi).source+"|"+i.source+"|"+(i===Kt?li:fi).source+"|"+(t.evaluate||fi).source+"|$","g"),function(t,i,o,r,a,c){return o||(o=r),d+=e.slice(l,c).replace(gi,I),i&&(n=!0,d+="'+__e("+i+")+'"),a&&(s=!0,d+="';"+a+";\n__p+='"),o&&(d+="'+((__t=("+o+"))==null?'':__t)+'"),l=c+t.length,t}),d+="';",(t=t.variable)||(d="with(obj){"+d+"}"),d=(s?d.replace(Xt,""):d).replace(Gt,"$1").replace(jt,"$1;"),d="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(n?",__e=_.escape":"")+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+d+"return __p}",t=Cn(function(){return Function(r,c+"return "+d).apply(zt,a)}),t.source=d,bt(t))throw t;return t},T.toFinite=It,T.toInteger=_t,T.toLower=function(e){return St(e).toLowerCase()},T.toNumber=xt,T.toString=St,T.trimEnd=function(e,t,i){if((e=St(e))&&(i||t===zt))return e.replace(ii,"");if(!e||!(t=pe(t)))return e;for(e=L(e),t=L(t),i=e.length;i--&&-1<m(t,e[i],0););return be(e,0,i+1).join("")},T.upperFirst=vn,T.each=at,T.first=nt,T.VERSION="4.17.4",ln.placeholder=T,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Di._=T,define(function(){return T})):Fi?((Fi.exports=T)._=T,Mi._=T):Di._=T}.call(this),window.Cbola._=_.noConflict(),Cbola.tmp_&&(window._=Cbola.tmp_),Cbola.tmp_=null;var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),s=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;e>n;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((o+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;t>o;o+=4)i.push(4294967296*e.random()|0);return s.create(i,t)}}),r=i.enc={},a=r.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++){var n=t[o>>>2]>>>24-8*(o%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return s.create(i,t/2)}},l=r.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return s.create(i,t)}},d=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=s.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,r=this.blockSize,a=n/(4*r),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0),t=a*r,n=e.min(4*t,n);if(t){for(var l=0;t>l;l+=r)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return s.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return p.HMAC.create(e,i).finalize(t)}}});var p=i.algo={};return i}(Math);!function(e){function t(e,t,i,o,n,s,r){return e=e+(t&i|~t&o)+n+r,(e<<s|e>>>32-s)+t}function i(e,t,i,o,n,s,r){return e=e+(t&o|i&~o)+n+r,(e<<s|e>>>32-s)+t}function o(e,t,i,o,n,s,r){return e=e+(t^i^o)+n+r,(e<<s|e>>>32-s)+t}function n(e,t,i,o,n,s,r){return e=e+(i^(t|~o))+n+r,(e<<s|e>>>32-s)+t}var s=CryptoJSCbola,r=s.lib,a=r.WordArray,r=r.Hasher,l=s.algo,d=[];!function(){for(var t=0;64>t;t++)d[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=r.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var r=0;16>r;r++){var a=s+r,l=e[a];e[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var a=this._hash.words,l=a[0],c=a[1],p=a[2],h=a[3],r=0;64>r;r+=4)16>r?(l=t(l,c,p,h,e[s+r],7,d[r]),h=t(h,l,c,p,e[s+r+1],12,d[r+1]),p=t(p,h,l,c,e[s+r+2],17,d[r+2]),c=t(c,p,h,l,e[s+r+3],22,d[r+3])):32>r?(l=i(l,c,p,h,e[s+(r+1)%16],5,d[r]),h=i(h,l,c,p,e[s+(r+6)%16],9,d[r+1]),p=i(p,h,l,c,e[s+(r+11)%16],14,d[r+2]),c=i(c,p,h,l,e[s+r%16],20,d[r+3])):48>r?(l=o(l,c,p,h,e[s+(3*r+5)%16],4,d[r]),h=o(h,l,c,p,e[s+(3*r+8)%16],11,d[r+1]),p=o(p,h,l,c,e[s+(3*r+11)%16],16,d[r+2]),c=o(c,p,h,l,e[s+(3*r+14)%16],23,d[r+3])):(l=n(l,c,p,h,e[s+3*r%16],6,d[r]),h=n(h,l,c,p,e[s+(3*r+7)%16],10,d[r+1]),p=n(p,h,l,c,e[s+(3*r+14)%16],15,d[r+2]),c=n(c,p,h,l,e[s+(3*r+5)%16],21,d[r+3]));a[0]=a[0]+l|0,a[1]=a[1]+c|0,a[2]=a[2]+p|0,a[3]=a[3]+h|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;for(t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)i=e[t],e[t]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}}),s.MD5=r._createHelper(l),s.HmacMD5=r._createHmacHelper(l)}(Math),function(e,t,i,o,n,s,r,a,l){function d(e){var t,i=e.length,n=this,s=0,r=n.i=n.j=0,a=n.S=[];for(i||(e=[i++]);o>s;)a[s]=s++;for(s=0;o>s;s++)a[s]=a[r=y&r+e[s%i]+(t=a[s])],a[r]=t;(n.g=function(e){for(var t,i=0,s=n.i,r=n.j,a=n.S;e--;)t=a[s=y&s+1],i=i*o+a[y&(a[s]=a[r=y&r+t])+(a[r]=t)];return n.i=s,n.j=r,i})(o)}function c(e,t){var i,o=[],n=typeof e;if(t&&"object"==n)for(i in e)try{o.push(c(e[i],t-1))}catch(s){}return o.length?o:"string"==n?e:e+"\x00"}function p(e,t){for(var i,o=e+"",n=0;n<o.length;)t[y&n]=y&(i^=19*t[y&n])+o.charCodeAt(n++);return m(t)}function h(i){try{return b?m(b.randomBytes(o)):(e.crypto.getRandomValues(i=new Uint8Array(o)),m(i))}catch(n){return[+new Date,e,(i=e.navigator)&&i.plugins,e.screen,m(t)]}}function m(e){return String.fromCharCode.apply(0,e)}var b,u=i.pow(o,n),f=i.pow(2,s),g=2*f,y=o-1,w=i["cbolaSeed"+l]=function(e,s,r){var a=[];s=1==s?{entropy:!0}:s||{};var b=p(c(s.entropy?[e,m(t)]:null==e?h():e,3),a),y=new d(a);return p(m(y.S),t),(s.pass||r||function(e,t,o){return o?(i[l]=e,t):e})(function(){for(var e=y.g(n),t=u,i=0;f>e;)e=(e+i)*o,t*=o,i=y.g(1);for(;e>=g;)e/=2,t/=2,i>>>=1;return(e+i)/t},b,"global"in s?s.global:this==i)};if(p(i[l](),t),r&&r.exports){r.exports=w;try{b=require("crypto")}catch(v){}}else a&&a.amd&&a(function(){return w})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),s=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;e>n;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((o+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;t>o;o+=4)i.push(4294967296*e.random()|0);return s.create(i,t)}}),r=i.enc={},a=r.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++){var n=t[o>>>2]>>>24-8*(o%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return s.create(i,t/2)}},l=r.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return s.create(i,t)}},d=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=s.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,r=this.blockSize,a=n/(4*r),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0),t=a*r,n=e.min(4*t,n);if(t){for(var l=0;t>l;l+=r)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return s.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return p.HMAC.create(e,i).finalize(t)}}});var p=i.algo={};return i}(Math);!function(){var e=CryptoJSCbola,t=e.lib,i=t.WordArray,t=t.Hasher,o=[],n=e.algo.SHA1=t.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],r=i[2],a=i[3],l=i[4],d=0;80>d;d++){if(16>d)o[d]=0|e[t+d];else{var c=o[d-3]^o[d-8]^o[d-14]^o[d-16];o[d]=c<<1|c>>>31}c=(n<<5|n>>>27)+l+o[d],c=20>d?c+((s&r|~s&a)+1518500249):40>d?c+((s^r^a)+1859775393):60>d?c+((s&r|s&a|r&a)-1894007588):c+((s^r^a)-899497514),l=a,a=r,r=s<<30|s>>>2,s=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+r|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+15]=i,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(n),e.HmacSHA1=t._createHmacHelper(n)}(),window.Cbola=window.Cbola||{},Cbola.Templates=Cbola.Templates||{Compiled:{},createElement:function(e){if(Cbola.Templates[e]){var t=document.createElement("div");return t.innerHTML=Cbola.Templates[e],t=t.children[0]}return null},createFragmentFromTemplate:function(e,t){var i,o,n,s;if(this.Compiled&&Cbola.Templates.Compiled[e]?i=Cbola.Templates.Compiled[e]:Cbola.Templates[e]&&(i=Cbola._.template(Cbola.Templates[e]),this.Compiled[e]=i),i){try{o=i(t)}catch(r){return Cbola.Logger.getInstance().error("Cbola.Templates.createElementFromTemplate failed generating template for: "+e+", url: "+Cbola.Env.PageProperties.hostname),null}for(n=document.createElement("div"),n.innerHTML=o,s=document.createDocumentFragment();n.childNodes.length;)s.appendChild(n.childNodes[0]);return s}return null}},Cbola.Styles=Cbola.Styles||{},Cbola.Templates["advertisement_title.html"]="<div style=\"font-family:'Open Sans',sans-serif; font-size: 14px; font-weight:normal;color: rgb(200, 200, 200);text-align: center;height: 20px;margin:0;padding:0;\">- Advertisement -</div>",Cbola.Templates["ad_banner_structure.html"]='<div  id="cbola-banner-structure<%= elemId %>_<%= apperance %>" class="cbola-banner-structure cbola-banner-structure<%= elemId %>_<%= apperance %> unselectDrag">\n  <div class="cbola-banner-preload"></div>\n  <div class="hide-ad-button hide-ad-button<%= elemId %>_<%= triggerIndex %> hide-ad-button<%= elemId %> cbola-fade-out" elelmId="<%= elemId %>" apperance="<%= apperance %>" triggerIndex="<%= triggerIndex %>"></div>\n  <div id="cbola-banner<%= elemId %>_<%= apperance %>" class="cbola-banner cbola-banner<%= elemId %>_<%= apperance %>"></div>\n</div>',Cbola.Templates["desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;clear:both">\n  <div class="in-content-container-coverage" style="margin:0 auto;max-width:700px;min-width:440px;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;clear:both">\n  <div class="in-content-container-coverage" style="box-sizing:content-box;margin:0 auto;position:relative;opacity:0;padding:0;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-ms-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_loading.html"]='\n<div class="InContent-container-coverage-perceive" style="height: 100%; width: 100%;position: absolute;">\n    <div style="height: 100%; z-index: 0; background-color: white; box-shadow: 0 0 1px rgb(171, 171, 171); position: relative;">\n        <div style="width: 180px;height: 180px;background-color: #f7f7f7;box-shadow: 0 0 1px rgb(224, 224, 224);border-radius: 200px;top: 15px;left: 24px;position: absolute;"></div>\n        <div style="width: 125px;height: 125px;background-color: #f7f7f7;border: 2px solid white;border-radius: 200px;top: 74px;left: 145px;position: absolute;"></div>\n        <div style="  width: 314px;height: 15px;background-color: #f7f7f7;border-radius: 0px;top: 30px;right: 19px;position: absolute;"></div>\n        <div style="  width: 260px;height: 15px;background-color: #f7f7f7;border-radius: 0px;top: 52px;right: 40px;position: absolute;"></div>\n        <div style="  width: 250px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 102px;right: 43px;position: absolute;"></div>\n        <div style="  width: 250px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 116px;right: 43px;position: absolute;"></div>\n        <div style="  width: 210px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 130px;right: 63px;position: absolute;"></div>\n        <div style="  width: 79px;height: 40px;background-color: #f7f7f7;border-radius: 11px;bottom: 44px;right: 78px;position: absolute;"></div>\n        <div style="  width: 79px;height: 40px;background-color: #f7f7f7;border-radius: 11px;bottom: 44px;right: 180px;position: absolute;"></div>\n        <div style="  width: 100%;height: 35px;background-color: #f7f7f7;border-radius: 0px;bottom: 0px;right: 0px;position: absolute;"></div>\n    </div>\n</div>',Cbola.Templates["ic_container_too_small.html"]='<div style="width:400px;height:400px;backgroundColor:#ff000f">Carambola:parent of InContent-container is too small</div>',Cbola.Templates["mobile_container.html"]='<div class="InContent-container-centerWrapper" style="line-height: normal;clear:both">\n	<div class="in-content-container-coverage" style="float: none;opacity:0;position:relative;width:100%;padding-top:0;box-sizing: content-box;margin:0 auto">\n	</div>\n</div>',Cbola.Templates["mobile_in_item_banner_structure.html"]='<div id="cbola-box-item-ad_<%= elemId %>_<%= adId %>" data-ad-id="<%= adId %>" class="cbola-box-item-ad">\n  <div class="cbola-banner">\n\n  </div>\n</div>',Cbola.Templates["sidebar_container.html"]='<div class="cbola-layer in-content-container-centerWrapper " style="position:relative;line-height: normal;">\n  <div style="float: none;opacity:0;position:relative;padding-top: 0;box-sizing: content-box; display: inline-block;" class="in-content-container-coverage">\n\n  </div>\n</div>',
Cbola.Templates["width_check.html"]='<div id="carambola_InContent_checkWidth" style="width:100%"></div>',Cbola.Templates["cbolaPlatform.css"]='.cbola-fa,.cbola-ion:before{text-rendering:auto;-moz-osx-font-smoothing:grayscale}.cbola-banner-structure{position:absolute;font-size:10px;color:#999;text-align:center;opacity:1;font-family:\'Open Sans\';cursor:default;padding:0;z-index:3;line-height:normal!important;overflow:hidden}.hide-ad-button{display:block;position:absolute;cursor:pointer;right:3px;margin-top:0;box-shadow:0 0 0 #000!important;z-index:999999;width:18px;height:18px;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -52px -25px no-repeat}.cbola-fa,.cbola-ion:before,[class^=arr-]{display:inline-block}.cbola-banner-preload{background-color:transparent}.cbola-banner-preload--active{height:90%;width:90%;position:absolute;z-index:0;top:5%;left:5%;background-color:#c3d9ff}.cbola-banner{position:relative;z-index:5;opacity:1;height:100%;overflow:visible;text-align:center;-webkit-transform-origin:50% 0 0;transform-origin:50% 0 0;margin-right:auto!important;margin-left:auto!important}.cbola-banner iframe{max-width:none;border:0}.cbola-banner__tag{position:absolute;top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') right bottom/5px 8px no-repeat}.cbola-banner__tag--front{z-index:10}.cbola-banner__tag--back{z-index:5}.cbola-sponsored-links-list{list-style-type:none!important;width:100%;height:100%;padding:0;margin:0}.cbola-sponsored-link{text-decoration:none!important}.cbola-sponsored-link .cbola-sponsored-link__description{color:#000;text-transform:capitalize}.cbola-ion:before{font-family:Ionicons;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased}.cbola-ion-share-alt:before{content:"\\f3ac"}.cbola-fa{font:normal normal normal 14px/1 FontAwesome;font-family:FontAwesome!important;font-size:inherit;-webkit-font-smoothing:antialiased;-webkit-transform:translate(-1px,1px);transform:translate(-1px,1px);font-style:inherit!important}.cbola-fa-facebook:before{content:"\\f09a"}.cbola-fa-twitter:before{content:"\\f099"}.cbola-fa-check:before{content:"\\f00c"}.cbola-fa-times:before{content:"\\f00d"}.cbola-fa-share-alt:before{content:"\\f1e0"}.cbola-fa-arrow-left:before{content:"\\f060"}.cbola-fa-arrow-right:before{content:"\\f061"}.cbola-fa-hand-o-up:before{content:"\\f0a6"}.cbola-fa-info:before{content:"\\f129"}.cbola-fa-angle-left:before{content:"\\f104"}.cbola-fa-angle-right:before{content:"\\f105"}.cbola-no-select>*,.unselectDrag{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.cbolaDisableTransitionOnLoad{transition:none!important;-webkit-transition:none!important}.cbola-clearfix{overflow:auto;zoom:1}[class^=arr-]{border:solid currentColor;border-width:0 .2em .2em 0;padding:.2em}.arr-right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.arr-left{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.arr-up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.arr-down{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.cbola-loader{position:absolute;top:50%;left:50%;margin-left:-19px!important;margin-top:-19px!important;height:38px;width:38px;border:4px solid rgba(100,100,100,.3);border-top:4px solid rgba(100,100,100,.9);border-radius:50%;-webkit-animation:cbolaLoader 1.2s infinite linear;animation:cbolaLoader 1.2s infinite linear;box-sizing:border-box}@-webkit-keyframes cbolaLoader{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cbolaLoader{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}span.cbola-clamped-text{overflow:hidden;position:relative;line-height:1.4em;max-height:2.8em;text-align:justify;display:block;padding-right:1em;margin-left:1em}span.cbola-clamped-text:before{content:\'...\';position:absolute;right:0;bottom:0}span.cbola-clamped-text:after{content:\'\';position:absolute;right:0;width:1em;height:1em;margin-top:.2em;background:#fff}.cbola-fade-out{opacity:0!important;pointer-events:none}.cbola-fade-in{opacity:1!important;pointer-events:auto}.cbola-hidden{visibility:hidden!important;pointer-events:none}.cbola-hide-scrollbars::-webkit-scrollbar{display:none}.cbola-ghost-center-container:before,.cbola-ghost-center-inner{display:inline-block;vertical-align:middle}.cbola-ghost-center-container{position:relative;font-size:0}.cbola-ghost-center-container:before{content:\' \';height:100%}',function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),Cbola.EventBus=Cbola.EventBus||window.document.createElement("span"),Cbola.EventBus.fire=function(e,t){var i=new CustomEvent(e,{detail:t});Cbola.EventBus.dispatchEvent(i)},Cbola.EventBus.Events={LAYER_READY:"LayerReadyEvent",LAYER_ATTACHED:"LayerAttached",LAYER_IS_VIEWABLE:"LayerBecameViewable",COVERING_TRIGGER_ON:"coveringTriggerOn",COVERING_TRIGGER_OFF:"coveringTriggerOff",ELEMENT_SUCCESS:"ElementSuccess",ELEMENT_FAILED:"ElementFailed",TIMER_ENDED:"TimerEnded",PAGE_ELEMENTS_DATA_RECEIVED:"PageElementsDataReceived",ADS_POOL_MANAGER_READY:"AdsPoolManagerReady",RESIZE_ON_AD:"ResizeOnAd",TRIVIA_BEFORE_END:"triviaBeforeEnd",HEADER_BIDDING_BATCH_FINISHED:"HeaderBiddingBatchFinished",GET_ADS_READY:"GetAdsReady",SPONSORED_LINKS_MANAGER_READY:"SponsoredLinksMngReady",TRIGGER_IS_VIEWABLE:"TriggerBecameViewable"},window.Cbola=window.Cbola||{},Cbola.Enums=Cbola.Enums||{ProductTypes:{IN_IMAGE:1,IN_CONTENT:2,IN_IMAGE_PENDING:101},ServerCallTypes:{CDN:0,SERVER:1},IntegrationTypes:{ERROR:0,NORMAL:1,DFP:2,SAFE_FRAME:3,IFRAME:4},SetClickTypes:{ITEM_LINK:1,FEEDBACK_ICON_ON:2,FEEDBACK_ICON_OFF:3,FEEDBACK_ICON_CLOSE:4,FEEDBACK_STARS_1:5,FEEDBACK_STARS_2:6,FEEDBACK_STARS_3:7,FEEDBACK_STARS_4:8,FEEDBACK_STARS_5:9,CARAMBOLA_ICON:10,SHARE_BEFORE_FACEBOOK:11,SHARE_BEFORE_TWITTER:12,SHARE_AFTER_FACEBOOK:13,SHARE_AFTER_TWITTER:14,AD_BUTTON_CLOSE:15,SHARE_BEFORE_ALT:16,ENDING_SCREEN_OUT:21,FOOTER_AD_BUTTON_CLOSE:22,SPONSORED_LINK_CLICK_ENDING_SCREEN:24,SPONSORED_LINK_CLICK_ENDING_SCREEN_AUTOPLAY:25,SPONSORED_LINK_CLICK_IN_ITEM:26,SPONSORED_LINK_CLICK_IN_ITEM_AUTOPLAY:27,TWITTER_REPLY:28,TWITTER_STAR:29,TWITTER_RETWEET:30,TWITTER_FOLLOW:31,TWITTER_TWEET_IMAGE_CLICK:32},RefreshTypes:{NONE:0,CLICK:1,TIMEOUT:2,BOTH:3,VIEWABILITY:4},AdTriggerTypes:{PAGE_LOAD:1,TIMEOUT:2,CLICK:3,APPERANCE:4,URL_CHANGE:5,PSA:6},LoadStatusTypes:{SUCCESS:1,BAD_PAGE:2,WRONG_AD_SIZE:3,FAILED:4,NOT_FOUND:5,TOO_SMALL:6,TOO_BIG:7,MAX_ELEMS_REACHED:8,GET_ADS_FAILED:9,AD_SERVER_DOWN:10,PAGE_NOT_IN_CACHE:11,AD_TOO_SMALL:12,NO_CONTENT:13,ALREADY_USED:14,GET_ADS_MAX_RETRY:15,PAGE_CLOSED:16,NO_MORE_ADS:17,SELECTOR_NOT_FOUND:18,SELECTOR_TOO_SMALL:19,SAME_ID_WIDGETS:21},AdModes:{REGULAR:1,PERFORMANCE:2,PREMIUM:3,HEADER_BIDDING:6},ItemViewTypes:{ON_HOVER:1,ON_NEXT_BTN:2,ON_PREV_BTN:3,VIEWABILITY:4,IN_IFRAME:5,UNVIEWABILITY:6,ENDING_SCREEN:7,AD:8,ON_NEXT_AUTOPLAY:9,SPONSORED_ENDING_SCREEN:10,SPONSORED_LINK_CLICK:11,ENDING_SCREEN_AUTOPLAY:12,SPONSORED_ENDING_SCREEN_AUTOPLAY:13,AD_AUTOPLAY:14,SPONSORED_IN_ITEM_SCREEN:15,SPONSORED_IN_ITEM_SCREEN_AUTOPLAY:16,NONE:255},PageRequestTypes:{ERROR:0,PAGE_VIEW:1,NOT_FOUND:2,PENDING:3,NO_ELEMS_FOUND:4,NO_CONTENT_FOUND:5,UNKNOWN_PUBLISHER:6,UNSUPPORTED_DOMAIN:7,MOBILE:8,AUTOMATION_FAILED:9,HOMEPAGE:10,REVISER:11,UNSUPPORTED_BROWSER:12,DIV_TOO_SMALL:13,CORRUPTED_JSON:14,BLOCKED_MOBILE:15,NO_SHOW_META:16,BLOCKED_DESKTOP:17,BLOCKED_TABLET:18,ADS_ONLY:19,INITIALIZE_FAILED:21,NO_PLACEHOLDER_FOUND:22,GET_ELEMENTS_ERROR:255},teaserTriggerTypes:{TIMEOUT:1,VIEWABILITY:2},isServerCallTypes:{FROM_CDN:0,FROM_SERVER:1},HeaderBiddingRequestStatus:{SUCCESS:1,TIMEOUT:2,FAIL:3},TagExtractionTypes:{APPEND:1,POSTSCRIBE:2,WRITECAPTURE:3,POSTSCRIBE_ONLY:4,SRCDOC_IFRAME:5,BILIMBI:6,WRITE_IFRAME:7},AdOpenBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4},AdCloseBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4}},window.Cbola=window.Cbola||{},window.cbolaConfig={},Cbola.Globals=Cbola.Globals||{},Cbola.Config={Language:{english:"en",spanish:"es",portuguese:"pt",russian:"ru",french:"fr",japanese:"ja"},qa_queryServer:"//qa.api.carambo.la/inimage/server/",qa_analyticsServer:"//qa.api.carambo.la/inimage/analytics/",qa_loggingServer:"//qa.api.carambo.la/inimage/logging/",prod_queryServer:"//content.carambo.la/",prod_analyticsServer:"//analytics.carambo.la/",prod_loggingServer:"//logging.carambo.la/",qa_CDN:"//qa.inimage.carambo.la/",prod_CDN:"//inimage.carambo.la/",qa_adServer:"//qa.adserver.carambo.la/",prod_adServer:"//xtr.carambo.la/",maxParentElementsCheckWidth:5,adTypeVideo:1,abTestSkipContent:!1,errorAdAlreadySent:!1,extractTypeAds:0,checkPendingICscriptsTimeLength:25,urlsForAuto:[],writeCaptureAlreadySet:!1,getAdsCheckElementRetries:100,findICSelectorElementMaxRetries:80,LoadType:1,ZIndexLayers:0,sendToPostScribeAgain:0,MaxWidgets:999,inContentFallbackWidths:[440,300],currentElementsSum:0,dateTimeWhenScriptExecute:"cbolaDt",proxyId:"carambola_proxy",inContentClass:"carambola_InContent",placeholderClass:"carambola-layer-placeholder",bitlyUrl:"",icDefaultMainTitle:"Did you know?",checkPlatformLocation:!0,errorMessage:"",adBelowSideBarMargin:1,adBelowSidebarSlideshowMargin:8,brandRedirect_default:"http://carambo.la/",adTitleStructureTriviaHeight:14,adBelowInContentExtraMargin:3,platformSuccessId:[],whiteListDomains:["diyfood.com"],adAsideOfUnitExtraMargin:5,timeouts:{pendingBeforeSkippingHeaderBidding:5e3,pendingHeaderBiddingResponseBrake:200,pendingIndexExchangeBuffer:250},autoSlideFirst:!0,autoSlideFirst_openAfterSecs:3e3,autoSlideFirst_closeAfterSecs:6e3,layouts:{inContent:{all:[121,120,112,110,102,101,100],facts:[100,101,102,110,112],trivia:[120],triviaMulti:[121],twitter:[160]},sideBars:{all:[130,131,132,133,134,135,140,150,151,152,153],facts:[130,131,132,133,136,152],diedOnThisDay:[134,150],diedOnThisWeek:[151],onThisDay:[135,153],trivia:[140],staticBanner:[130,131,133,134,135,140],teaserBanner:[132],sidebarSlideshow:[136],slideShow:[150,151,152,153]},mobile:{all:[1e3,1100,1400],facts:[1e3,1100],trivia:[1400]}},init:function(){var e=this,t=this;this.layouts.all=[],Cbola._.forEach(this.layouts,function(t){Cbola._.result(t,"all")&&[].push.apply(e.layouts.all,t.all)});var i=t.layouts;this.triggersDictionary={1:{supportedLayers:i.inContent.trivia,translatedTo:1},2:{supportedLayers:i.inContent.trivia.concat(i.inContent.triviaMulti),translatedTo:2},3:{supportedLayers:i.inContent.trivia.concat(i.inContent.triviaMulti),translatedTo:3},4:{supportedLayers:i.inContent.trivia.concat(i.inContent.triviaMulti),translatedTo:4},5:{supportedLayers:i.inContent.triviaMulti,translatedTo:5},6:{supportedLayers:i.inContent.trivia.concat(i.inContent.triviaMulti),translatedTo:6},7:{supportedLayers:i.inContent.trivia.concat(i.inContent.triviaMulti),translatedTo:7},11:{supportedLayers:i.sideBars.slideShow,translatedTo:1},12:{supportedLayers:i.sideBars.slideShow,translatedTo:12},14:{supportedLayers:i.sideBars.staticBanner.concat(i.sideBars.sidebarSlideshow),translatedTo:4},15:{supportedLayers:i.sideBars.slideShow,translatedTo:20},20:{supportedLayers:i.sideBars.staticBanner.concat(i.sideBars.teaserBanner,i.sideBars.sidebarSlideshow),translatedTo:20},18:{supportedLayers:i.sideBars.teaserBanner,translatedTo:8},19:{supportedLayers:i.sideBars.staticBanner.concat(i.sideBars.sidebarSlideshow),translatedTo:9},54:{supportedLayers:i.inContent.facts,translatedTo:4},56:{supportedLayers:i.inContent.facts,translatedTo:6},57:{supportedLayers:i.inContent.facts,translatedTo:7},58:{supportedLayers:i.inContent.facts,translatedTo:8},64:{supportedLayers:i.inContent.twitter,translatedTo:4},68:{supportedLayers:i.inContent.twitter,translatedTo:20},200:{supportedLayers:i.mobile.all,translatedTo:200},204:{supportedLayers:i.mobile.all,translatedTo:204},209:{supportedLayers:i.mobile.all,translatedTo:209},300:{supportedLayers:i.all,translatedTo:300}},this.Defaults={adServer_method:"GetAds",queryServer:this.prod_queryServer,analyticsServer:this.prod_analyticsServer,loggingServer:this.prod_loggingServer,CDN:this.prod_CDN,adServer:this.prod_adServer};try{"1"===Cbola.Env.queryServer||"qa"===Cbola.Env.queryServer?(t.Defaults.CDN=t.qa_CDN,t.Defaults.queryServer=t.qa_queryServer,t.Defaults.adServer=t.qa_adServer,t.Defaults.analyticsServer=t.qa_analyticsServer,t.Defaults.loggingServer=t.qa_loggingServer,"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(t.Defaults.adServer="//xtr.carambo.la/",t.Defaults.adServer_method="GetExtraContent")):"2"===Cbola.Env.queryServer?t.Defaults.CDN="//inimage.carambo.la/":"3"===Cbola.Env.queryServer?(t.Defaults.CDN="//s3.amazonaws.com/qa.inimage.carambo.la/",t.Defaults.queryServer=t.qa_queryServer,t.Defaults.adServer=t.qa_adServer,t.Defaults.analyticsServer=t.qa_analyticsServer,t.Defaults.loggingServer=t.qa_loggingServer):"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(t.Defaults.adServer="//xtr.carambo.la/",t.Defaults.adServer_method="GetExtraContent")}catch(o){}"undefined"==typeof t.abTestId&&(t.abTestId=Cbola.Utils.getUrlParams()["cbolaabtest"],t.abTestId?t.abTestId=parseInt(t.abTestId):(cbolaConfig.abTestId=1,t.abTestId=cbolaConfig.abTestId)),t.abTestGroupId=Cbola.Utils.getUrlParams()["cbolaabtestgroup"],t.abTestGroupId||(t.abTestGroupId="1"),30===t.abTestId||31===t.abTestId?(t.Defaults.loggingServer="//logging.carambo.la/",31===t.abTestId&&(t.Defaults.queryServer="//content.carambo.la/")):32===t.abTestId&&(t.Defaults.queryServer="//content.carambo.la/",t.Defaults.loggingServer="//logging.carambo.la/",t.Defaults.adServer="//xtr.carambo.la/")},getLayersDefaultSize:function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:250,width:640};case 120:case 121:return{height:250,width:650};case 130:case 131:return{height:350,width:300};case 132:return{height:600,width:300};case 133:case 134:case 135:case 136:case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 1400:case 1100:case 1e3:return{height:"inherit",width:0};default:return{height:230,width:100}}},getLayersDefaultSizeForIframe:function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:270,width:450};case 120:return"pgtr56"===Cbola.Env.activePid?{height:250,width:500}:{height:265,width:500};case 121:return{height:250,width:500};case 130:case 131:case 133:case 134:case 135:case 136:case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 1e3:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1100:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1400:return{height:516,width:300};default:return{height:230,width:100}}},getLayerMinWidth:function(e){switch(e){case 121:return 480;case 120:return 500;case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 140:case 150:case 151:case 152:case 153:return 300;case 160:return 545;case 1e3:case 1100:case 1400:return 0;default:return 440}},domainCut:{swtc11:[0],ppnx50:[0]},jsonRegEx:{0:"[\\?&]utm_",110587:"#~[a-zA-Z0-9]{14}",110461:"\\?|;grp=|;kvstate=|;kvfirstname=|;kvlastname=",110635:"#~[a-zA-Z0-9]{14}",110760:"[\\?&]wpvqas=",110775:"#|\\?li_|\\?cbolaGameSet",110735:"\\?gclid=|#|/ml/1/e/",110729:"\\?gclid=|#|/ml/1/e/",110663:"#|\\?_|\\?fb_",110733:"\\?fb_|\\?gclid=|#|/ml/1/e/",111799:"#axzz",111814:"\\?",110744:"\\?gclid=|#|/ml/1/e/",110695:"\\?gclid=|#|/ml/1/e/",110730:"\\?gclid=|#|/ml/1/e/",110746:"\\?gclid=|#|/ml/1/e/",110728:"\\?gclid=|#|/ml/1/e/",110726:"\\?gclid=|#|/ml/1/e/",110737:"\\?gclid=|#|/ml/1/e/",110694:"\\?gclid=|#|/ml/1/e/",110738:"\\?gclid=|#|/ml/1/e/",111843:"\\?gclid=|#|/ml/1/e/",110740:"\\?gclid=|#|/ml/1/e/",110732:"\\?gclid=|#|/ml/1/e/",112323:"userid=",112230:"\\?pctx=",112268:"gclid=",112303:"\\?query=|#",112433:"[\\?&]utm_|#",110396:"\\?storyurl=",110577:"\\?|#|/wiki/",110681:"&qp=|&ticketid=",112227:"\\?pmcode|\\?_cmp=|\\?p=|\\?trkid=",112394:"slg=",110289:"/if\\?e=wqt_|/ab\\?e=wqt_",110535:"\\?icid=",112441:"\\?feed",112460:"&c.",112454:"&c.",112455:"&c.",112457:"&c.",112458:"&c.",112459:"&c.",112469:"&c.",112470:"&c.",112471:"&c.",112472:"&c.",112519:"&c.",112520:"&c.",112540:"&c."},srcUrlEnabledDids:[110006,112389,112485]};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(window.Cbola=window.Cbola||{},Cbola.Utils={isFacebookBrowser:navigator.userAgent.match(/\[FB.*;(FBAV)\/(\d+)(?:\.(\d+)(?:\.(\d)+)?)?/g)||navigator.userAgent.match(/(facebookexternalhit)\/(\d+)\.(\d+)/g)?!0:!1,isIOS:navigator.userAgent.match(/iPad|iPhone|iPod/g)?!0:!1,getRunTimeInSecs:function(){var e=Math.abs(((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())/1e3);return e=Math.floor(100*e)/100},getRunTimeInMilis:function(){var e=Math.abs((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime());return e+"ms"},getViewId:function(e,t){var i=navigator.userAgent.toLowerCase();i.indexOf("google web preview")>-1&&(Math.cbolaSeedrandom(Cbola.Env.PageProperties.hostname),Cbola.Logger.getInstance().alwaysSend("googleWebPreview, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid));var o=Cbola._,n=o.partial(o.padStart,o,2,"0"),s=new Date;return n(s.getDate())+n(s.getMonth()+1)+n(s.getFullYear()%100)+n(s.getHours())+n(s.getMinutes())+n(s.getSeconds())+n(s.getMilliseconds()%100)+o.random(e,t)},replaceAll:function(e,t,i){return Cbola._.isEmpty(i)?i:i.replace(new RegExp(e,"g"),t)},b64_to_utf8:function(e){try{return decodeURIComponent(encodeURIComponent(window.atob(e)))}catch(t){return Cbola.Logger.getInstance().warn("b64_to_utf8 error"),Cbola.Logger.getInstance().info(t),""}},isMobile:Cbola._.memoize(function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&-1===navigator.userAgent.search("PC")}),isTablet:Cbola._.memoize(function(){var e=/ipad|Nexus 7|android 3.0|xoom|sch-i800|playbook|tablet|kindle|a1_07|a100|a1-810|a1-811|a1-830|a200|a210|a3-a10|a500|a501|a510|a700|alcatel one touch p310x|alcatel one touch p320x|alcatel onetouch p310a|archos 101 neon|archos 101g10|archos 80g9|aries_785|arnova 101 g4|asus transformer pad tf300t|asus transformer pad tf700t|at100|at10-a|at200|at300|at300se|b1-710|b1-711|b1-730hd|b1-a71|bn nookhd+|bntv400|bntv600|breeze 10.1 quad|cm_tenderloin|dell streak 7|dl1010q|e2281|e-tab ivory|gigaset qv830|gt-n5100|gt-n5110|gt-n8000|gt-n8010|gt-n8013|gt-n8020|gt-p1000|gt-p1000m|gt-p1000r|gt-p1010|gt-p3100|gt-p3110|gt-p3113|gt-p5100|gt-p5110|gt-p5113|gt-p5200|gt-p5210|gt-p5220|gt-p7300|gt-p7310|gt-p7500|gt-p7510|hpwos|huawei mediapad|hudl 2|hu-hgt-p3110|ideapada10|ideatab a2107a-h|ideatab a3000-h|ideatab s6000-f|ideatab s6000-h|ideataba2109a|k010|k012|k017|k01a|kfapwi|kfarwi|kfaswi|kfjwa|kfjwi|kfot|kfsawi|kfsowi|kfthwa|kfthwi|kftt|le pan tc802a|lenovo a3000-h|lenovo a3500-fl|lenovo a3500-h|lenovo a5500-f|lenovo a5500-h|lenovo a7600-f|lenovo a7600-h|lenovo b6000-f|lenovo b6000-h|lenovo b8000-f|lenovo b8000-h|lenovo b8080-f|lenovo b8080-h|lenovo s5000-f|lenovo s5000-h|lenovo s6000l-f|lenovo s920_row|lenovo yoga b6000-f|lenovo yoga b8000-f|lenovoa3300-h|lguk410|lg-v410|lg-v490|lg-v496|lg-v500|lifetab_s1034x|lifetab_s785x|lifetab_s9714|m532|me172v|me173x|me301t|me302c|me302kl|me371mg|mediapad 10 link|mediapad 7 lite|mediapad m1 8.0|mediapad t1 8.0|micromax_a101|mz601|mz604|nexus 10|nexus 7|nook bnrv200|nook bntv250|nook bntv250a|nx008hd8g|nx700qc|nx785qc8g|padfone|pmp5580c|pmp7280c3g|pmp7280c3g_quad|pmt3377_wi|pmt7077_3g|qmv7a|qmv7b|qtaqz3|rct6103w46|rct6203w46|rct6773w22|rct6773w22b|samsung gt-n8020|samsung gt-p5100|samsung gt-p5220|samsung sm-p600|samsung sm-p605|samsung sm-p605v|samsung sm-p900|samsung sm-p905|samsung sm-p905v|samsung sm-t230|samsung sm-t230nu|samsung sm-t315|samsung sm-t320|samsung sm-t330nu|samsung sm-t331|samsung sm-t350|samsung sm-t520|samsung sm-t530|samsung sm-t530nn|samsung sm-t530nu|samsung sm-t531|samsung sm-t535|samsung sm-t537r4 uscc|samsung sm-t550|samsung sm-t555|samsung sm-t705|samsung sm-t705y|samsung sm-t800|samsung sm-t805|samsung sm-t805y|samsung sm-t807p|samsung sm-t807t|samsung sm-t900|samsung-gt-p7500|samsung-sgh-i497|samsung-sgh-i777|samsung-sm-t217a|samsung-sm-t337a|samsung-sm-t537a|samsung-sm-t807a|sch-i705|sch-i705 4g|sch-i915|sgp312|sgp321|sgp511|sgp512|sgp521|sgpt12|sgpt13|shv-e210k|slider sl101|sm-p600|sm-p605|sm-p605v|sm-p900|sm-p905|sm-p905v|sm-t110|sm-t111|sm-t210|sm-t2105|sm-t210r|sm-t211|sm-t217s|sm-t217t|sm-t230|sm-t230nu|sm-t235|sm-t237p|sm-t310|sm-t311|sm-t315|sm-t315t|sm-t320|sm-t325|sm-t330nu|sm-t331|sm-t350|sm-t520|sm-t525|sm-t530|sm-t530nu|sm-t531|sm-t535|sm-t537v|sm-t550|sm-t700|sm-t705|sm-t705y|sm-t800|sm-t805|sm-t805y|sm-t807v|sm-t900|touchpad|transformer prime tf201|transformer tf101|venue 7 3730|venue 7 hspa+|venue 8 3830|venue 8 hspa+|vk810 4g|vodafone smart ii|vodafone smart tab 3g|xolo a700|xoom|xoom 2|zaffire 1010/i.test(navigator.userAgent.toLowerCase());return e&&(Cbola.Env.PageProperties.isMobile=!1),e&&-1===navigator.userAgent.search("PC")}),chromeVersion:function(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):0},setGlobalRedirectTime:function(){var e=Cbola.Env.PageProperties,t=Cbola.Config,i=this.localStorageService.getItem(t.dateTimeWhenScriptExecute)||"";this.localStorageService.removeItem(t.dateTimeWhenScriptExecute);var o=i.split("&"),n=o.pop();e.publisherScriptExecutionTime=n?parseInt(n):null;var s=e.publisherScriptExecutionTime?e.startDateFileUploaded.getTime()-e.publisherScriptExecutionTime:0;return Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_BLUE,"Redirection server duration: "+s+"ms"),s},getZIndexForElement:function(){var e=Cbola.Config.ZIndexLayer-Cbola.Config.ZIndexLayers;return Cbola.Config.ZIndexLayers++,1>e&&(e=0===Cbola.Config.ZIndexLayer?0:1),e},checkIfQueryStingExist:function(e,t){var i=Cbola.Config,o=Cbola.Env.PageProperties,n=e.ParentId,s=this.getUrlParams()["cbolagameset"],r=o.originalPathNameHost;if(t="undefined"!=typeof t?t:!1,parseInt(s)===n)return r;if(Cbola._.isNumber(n)&&(r=o.originalPathNameHost+(o.originalPathNameHost.indexOf("?")>-1?"&":"?")+"cbolaGameSet="+n),i.urlsForAuto.indexOf(r)>-1)return r;if(t){i.urlsForAuto.push(r);var a={PublisherId:Cbola.Env.activePid,UrlData:{Url:r,Hash_128_Bit:CryptoJSCbola.MD5(r).toString(),Hash_160_Bit:CryptoJSCbola.SHA1(r).toString()},AbTestId:i.abTestId,IsMobile:o.isMobile,IsTablet:o.isTablet,CategoryId:Cbola.Env.categoryId,Tags:Cbola.Env.tags,Title:Cbola.Env.title,Body:Cbola.Env.body},l=JSON.stringify(a);Cbola.Logger.getInstance().info("Cbola_getPageElements_forAutomation start. json: "+l),fetch(i.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:l})}return r},checkImageLoaded:function(e){var t=new Image;t.src=e,t.onload=function(){},t.onerror=function(){Cbola.Logger.getInstance().errorM("Utils.checkImageLoaded","Image not loaded. src: "+e)}},checkUrlParamExist:function(e){var t=window.location.href.toLowerCase(),i=t.search(e);return i>-1},getLocationHref:function(){try{var e=!this.isKnownSafeFrame()&&!this.isAboutBlankIframe()||Cbola._.isEmpty(document.referrer)?window.location.href:document.referrer;return"112393"===Cbola.Env.PageProperties.domainId&&-1!==e.search(new RegExp(".ampproject.|about:srcdoc","i"))&&(Cbola.Logger.getInstance().alwaysSendM("Utils.getLocalHref","Utils.getLocalHref found document.referrer ->  about:srcdoc. "+e),e="http://hollywoodlife.com/2013/12/26/justin-bieber-believe-avalanna-routh-mrs-bieber-tribute-crying-emotional/"),e}catch(t){return Cbola.Logger.getInstance().errorM("Utils.getLocationsHref","Utils.getLocationsHref failed trying to get window.location.href"),""}},getLowerLocationHref:function(){return this.getLocationHref().toLowerCase()},isInCanonicalWhiteList:function(){var e=Cbola.Logger.getInstance(),t=Cbola.Env.PageProperties.activeDomain.replace("www.","");e.info("check CanonicalWhiteList for domain: "+t);var i=-1!==Cbola.Config.whiteListDomains.indexOf(t);return e.info("CanonicalWhiteList is "+i+" for domain: "+t),i},gueryStringCut:function(){var e=this.getLowerLocationHref(),t=e.search("ignr"),i=e.search("Ignr"),o=document.querySelectorAll('link[rel="canonical"]');if(this.isInCanonicalWhiteList()&&o.length>0)return Cbola._.toLower(o[0].getAttribute("href"));if(t>-1||i>-1){var n=e.split("?");return Cbola.Config.queryString=n[1],Cbola.Config.ignoreQueryString=!0,n[0]}return Cbola.Config.queryString="",Cbola.Config.ignoreQueryString=!1,e=this.checkUrlPageSaver(e)},checkUrlPageSaver:function(e){var t=e.search("dirty"),i=e.search("Dirty"),o=document.querySelector('meta[property="carambola"]');return t>-1||i>-1?e:o?Cbola._.toLower(o.getAttribute("content")):e},gueryStringCutRegex:function(e){var t=e;try{var i=Cbola.Env,o=Cbola.Config.domainCut,n=[];if(null!==i.activePid&&i.activePid in o){var s=null!==i.domainId&&i.domainId>0?i.domainId:0;o[i.activePid].indexOf(s)>-1&&(n=e.match(new RegExp("^(?:https?://)?(?:[^@/\n]+@)?(?:www.)?([^:/\n?]+)","ig"))),n.length>0&&(t=n[0])}if(0===n.length&&null!==i.domainId&&i.domainId>0){var r=Cbola.Config.jsonRegEx;for(var a in r)if(r.hasOwnProperty(a)&&(i.domainId.toString().match(new RegExp(a))||"0"===a)){var l=e.search(new RegExp(r[a],"ig"));-1!==l&&(t=e.substring(0,l))}}}catch(d){Cbola.Logger.getInstance().info(d)}return t},isInIframe:Cbola._.memoize(function(){try{return window.top!==window}catch(e){return!0}}),isFriendlyIframe:Cbola._.memoize(function(){if(this.isInIframe())try{if(window.frameElement)return!0;if("undefined"!=typeof inDapIF&&inDapIF)return!0}catch(e){return!1}return!1}),isWindowTopSupported:Cbola._.memoize(function(){if(this.isFriendlyIframe())try{if(window.top.document)return!0}catch(e){return!1}return!1}),isKnownSafeFrame:function(){var e=["tpc.googlesyndication.com","securepubads.g.doubleclick.net","pubads.g.doubleclick.net","partner.googleadservices.com"];if(!this.isInIframe())return!1;for(var t=0;t<e.length;t++)if(-1!==window.location.href.search(new RegExp(e[t],"i")))return Cbola.Logger.getInstance().alwaysSendM("Utils.isKnownSafeFrame","Known safe frame detected: "+window.location.href),!0;return!1},isAboutBlankIframe:function(){try{return this.isInIframe()&&"about:blank"===window.location.href.toLowerCase()}catch(e){return!1}},getCurrentAbTestId:function(){return Cbola.Config.abTestSkipContent?1:Cbola.Config.abTestId},checkNoShowLayer:function(){var e=document.querySelector('meta[property="cbolans"]');return e?Cbola._.toLower(e.getAttribute("content"))===Cbola.Env.activePid+"_16241":!1},cumulativeOffset:function(e){var t=0,i=0;do t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:i}},CbolaSendLogsTimes:function(e){var t=Cbola._.result(Cbola.Env,"PageProperties.cbola_pageViewId",0);"undefined"!=typeof Cbola.Env.domainId&&null!==Cbola.Env.domainId&&Cbola.Logger.getInstance().notifyM(e,"Code reached method:"+e+". domainId: "+Cbola.Env.domainId+". PageViewId: "+t)},getPrevSibling:function(e){for(var t=e.previousSibling;t;){if(t.nodeType===Node.ELEMENT_NODE)return t;t=t.previousSibling}return null},fixPixelHeight:function(e){var t=this.getPrevSibling(e);try{"img"===t.tagName.toLowerCase()&&t.src.indexOf("pixel.watch")>-1&&(t.style["display"]="block")}catch(i){}},detectDeviceOrientation:function(){var e=void 0,t=void 0,i=document.getElementsByClassName("cbola-orientation-src");if(i.length>0)i=i[0],e=Math.max(i.clientWidth,0),t=Math.max(i.clientHeight,0);else{var o=window;window!==window.parent&&(o=window.parent);try{e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}catch(n){o=window,e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}}return e>t?(Cbola.Env.PageProperties.isPortrait=!1,"landscape"):(Cbola.Env.PageProperties.isPortrait=!0,"portrait")},injectMainStyle:function(e,t){var i=Cbola._.template(t),o=Math.min(Math.floor(window.devicePixelRatio||1),3);return o=o>1?"@"+o+"x":"",t=i({clientPath:Cbola.Env.clientPath,retina:o}),this.injectStyle(e,t)},injectStyle:function(e,t){var i=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=t);else try{i.innerHTML=t}catch(o){i.textContent=t}return i},initPayload:function(){var e=Cbola.Env,t=this.getCurrentAbTestId();return{PublisherId:e.activePid,UrlData:{Url:e.PageProperties.hostname,Hash_128_Bit:e.PageProperties.urlHashMD5,Hash_160_Bit:e.PageProperties.urlHashSHA1},AbTestId:t,ScriptDomainId:Cbola.Env.domainId,IsMobile:e.PageProperties.isMobile,IsTablet:e.PageProperties.isTablet}},isGoogleWebLightAgent:function(){return/^.*?\bAndroid\b.*?\bgoogleweblight\b.*?$/.test(window.navigator.userAgent)},updateEnv:function(e){var t=Cbola._;Cbola.Env=t.extend(Cbola.Env,e);var i={PageId:0,Category:0,Domain:0};t.defaults(Cbola.Env,i),t.extendWith(Cbola.Config,e.DefaultSettings,function(e,t){return"undefined"==typeof t?e:t})},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},isIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)||!!navigator.userAgent.match(/Edge\//)},toBool:function(e){return"undefined"==typeof e?void 0:!("false"===e||"0"===e||0===e||e===!1)},parseBool:function(e){return e===!0||"true"===e||"number"==typeof e&&0!==e},dataset:function(){var e=Array.prototype.slice.call(arguments);if(e.length<2)return null;var t=e[0],i=e[1];return e.length>2&&(t.dataset?t.dataset[Cbola._.camelCase(i)]=e[2]:t.setAttribute("data-"+Cbola._.kebabCase(i),e[2])),t.dataset?t.dataset[Cbola._.camelCase(i)]||null:t.getAttribute("data-"+Cbola._.kebabCase(i))},datasetRemove:function(e,t){e.dataset?delete e.dataset[Cbola._.camelCase(t)]:e.removeAttribute("data-"+Cbola._.kebabCase(t))},getUrlParams:function(){var e={};try{e=this.getParamsFromUrl(window.top.location.href)}catch(t){e=this.getParamsFromUrl(window.location.href)}return e},localStorageService:{setItem:function(e,t){try{localStorage.setItem(e,t)}catch(i){return("QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name)&&Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,i.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(i),!1}},getItem:function(e){try{return localStorage.getItem(e)}catch(t){return("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not available in this device"),Cbola.Logger.getInstance().info(t)}}},integrationTypeCheck:function(){var e=Cbola.Enums.IntegrationTypes;try{return this.isInIframe()?this.isFriendlyIframe()?e.DFP:this.isKnownSafeFrame()?e.SAFE_FRAME:e.IFRAME:e.NORMAL}catch(t){return e.ERROR}},rgbToRgba:function(e,t){
if("string"!=typeof e)return null;t=t||"1";var i=e.indexOf("("),o=e.indexOf(")");if(-1===i||-1===o)return null;var n=e.substring(i+1,o).split(",");return n.splice(3,n.length,t),"rgba("+n.join(",")+")"}},Cbola.Utils.before=function(e,t){e.parentNode.insertBefore(t,e)},Cbola.Utils.after=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},Cbola.Utils.remove=function(e){e&&e.parentNode.removeChild(e)},Cbola.Utils.preappend=function(e,t){e.insertBefore(t,e.firstChild)},Cbola.Utils.encodePayload=function(e){function t(e,i,n){var s=void 0,r=o.isArray(i),a=o.isPlainObject(i);o.forEach(i,function(i,o){s="undefined"==typeof i?"undefined":_typeof(i),n&&(o=n+"["+(a||"object"===s||"array"===s?o:"")+"]"),!n&&r?e.add(i.name,i.value):"array"===s||"object"===s?t(e,i,o):e.add(o,i)})}var i=[],o=Cbola._;return i.add=function(e,t){o.isFunction(t)&&(t=t()),o.isNil(t)&&(t=""),this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},t(i,e),i.join("&").replace(/%20/g,"+")},Cbola.Utils.getBitlyUrlAsync=function(e,t){if(""===Cbola.Config.bitlyUrl){var i="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e));fetch(i).then(function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).then(function(i){Cbola._.isNil(i.url)?Cbola.Config.bitlyUrl=Cbola.Utils.checkIfQueryStingExist(e,!0):Cbola.Config.bitlyUrl=resp.data.url,t(Cbola.Config.bitlyUrl)}).catch(function(e){})}else t(Cbola.Config.bitlyUrl)},Cbola.Utils.getParamsFromUrl=Cbola._.memoize(function(e){var t="",i={};return Cbola._.isNil(e)?{}:(t=e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,o){i[t.toLowerCase()]=o}),i)}),Cbola.Utils.isPassiveEventSupported=Cbola._.memoize(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(i){}return e}),Cbola.Utils.extractLinksFromText=Cbola._.memoize(function(e){for(var t="",i=[],o=/(https?:\/\/[^\s]+)/g;null!=(t=o.exec(e));){var n=t[0];n=Cbola._.trimEnd(n,"”"),i.push({idx:t.index,url:n})}return i}),Cbola.Utils.dotdotdot=function(e){return new Promise(function(t,i){function o(){e.parentElement.contains(l)?s():Cbola.TaskManager.executeTask(o)}function n(){return l.offsetHeight>e.offsetHeight}function s(){if(r.length>0&&n())return r=r.substr(0,r.length-1),l.innerText=r+"...",void Cbola.TaskManager.executeTask(s);if(r.length>0){var i=l.innerHTML;if(i.length>0){e.innerText=i,i=e.innerText;for(var o=Cbola.Utils.extractLinksFromText(i),d=0;d<o.length;d++){var c=o[d];c.text=c.url,c.url=a[d].url,i=i.replace(c.text,'<a href="'+c.url+'" target="_blank">'+c.text+"</a>")}e.innerHTML=i}}Cbola.Utils.remove(l),t(e)}e.style["white-space"]="normal",e.style["overflow"]="hidden";var r=e.textContent,a=Cbola.Utils.extractLinksFromText(r),l=e.cloneNode(!0);Cbola._.extend(l.style,{visibility:"hidden",overflow:"visible",width:e.offsetWidth+"px",height:"auto"}),Cbola.Utils.after(e,l),o()})},function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var o=(new Date).getTime(),n=Math.max(0,16-(o-e)),s=window.setTimeout(function(){t(o+n)},n);return e=o+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"undefined"==typeof document.hidden)for(var vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&"undefined"==typeof document.hidden;++x)document.hidden=window[vendors[x]+"Hidden"];String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),window.Cbola=window.Cbola||{},Cbola.TaskManager=function(){var e=250,t=function(){this.loopIteration=null,this.isRunning=!1,this.loopIterationsCounter=0,this.deferredTasksQueue=[]};return t.prototype.executeTask=function(e,t,i){"undefined"==typeof i&&(i=window),e.apply(i,t)},t.prototype.taskExecutionLoop=function(){this.isRunning=!0,this.loopIteration=null,this.loopIterationsCounter++;var t=this.deferredTasksQueue.length;if("undefined"==typeof this.deferredTasksQueue)return Cbola.Logger.getInstance().warnOnceM("TaskManager.taskExecutionLoop","TaskManager::taskLoop -> deferredTasksQueue is undefined"),void(this.isRunning=!1);for(var i=0;t>i;i++){var o=this.deferredTasksQueue.shift();this.executeTask.apply(this,o)}this.deferredTasksQueue.length>0?this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e):(this.loopIteration=null,this.isRunning=!1)},t.prototype.addTask=function(t,i,o,n){var s=[t,i,o,n];this.deferredTasksQueue.push(s),this.isRunning||this.loopIteration||(this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e))},t.prototype.removeTask=function(e){Cbola._.remove(this.deferredTasksQueue,function(t){return"undefined"!=typeof t[3]&&this.getTaskName(t)===e}.bind(this))},t.prototype.getTaskName=function(e){var t=e[3],i=e[0];return t?t:i?i.name?i.name:"function":""},new t}(),window.Cbola=window.Cbola||{},Cbola.Logger=window.Cbola.Logger||function(){function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return t}function t(){function t(e){if(!(g.length<1||w))if(w=!0,"undefined"==typeof e&&(e=g.splice(0,Math.min(5,g.length)),e.retries=0),e.retries<Cbola.Logger.MAX_RETRIES_PER_LOG)if(0===e.retries)r(e);else{var i=Math.min(Math.pow(2,e.retries-1),16);setTimeout(r.bind(Cbola.Logger.getInstance()),1e3*i,e)}else a("Logger -> Sending log to server failed "+Cbola.Logger.MAX_RETRIES_PER_LOG+" times, discarding log entry: {"+e+"}",Cbola.Logger.Levels.WARNING),w=!1,t()}function n(){for(var e=0;e<m.length;e++){var i=m[e];s(i[0],i[1],i[2])}m=[],w||t()}function s(t,o,n){o+=Cbola.Logger.serverSuffix()+", uuid: "+e()+"]";var s={payload:{LogType:t===Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER?Cbola.Logger.Levels.ALERT:t,Message:o,MethodName:n||i.callingMethod,ClassName:"abtest_"+Cbola.Config.abTestId},level:t,retries:0};g.push(s)}function r(e){function i(){if(!n){n=!0,w=!1,e.retries++;var i=Math.min(Math.pow(2,e.retries-1),16);a("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+m.name+": "+m.message+"), retrying in "+i+" seconds...",Cbola.Logger.Levels.DEBUG),t(e)}}for(var n=!1,s=e.map(function(e){return e.payload}),r="",l=s.length-1;l>=0;l--){var d=s[l];1===e.retries?d.Message=d.Message.substring(0,d.Message.length-1)+", retries: "+e.retries+"]":e.retries>1&&(d.Message=d.Message.substring(0,d.Message.length-2)+e.retries+"]");for(var c in d)r+="Logs["+l+"]["+c+"]="+encodeURIComponent(d[c])+"&"}r=r.substr(0,r.length-1);var p=new XMLHttpRequest;p.onreadystatechange=function(){if(4===p.readyState)if(200===p.status||204===p.status)a("Logger -> Log succesfully sent to server: { "+r+" }",Cbola.Logger.Levels.TRACE),w=!1,t();else if(!n){n=!0,e.retries++;var i=Math.min(Math.pow(2,e.retries-1),16);a("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+p.status+": "+p.statusText+"), retrying in "+i+" seconds...",Cbola.Logger.Levels.DEBUG),w=!1,t(e)}};try{var h=y||Cbola.Config.Defaults.loggingServer+"AddLogs";if(o.isEmpty(Cbola.Config.Defaults.loggingServer)&&o.isEmpty(y))return void i();p.open("POST",h,!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.onerror=i,p.send(r)}catch(m){i()}}function a(){var e="CBOLA::",t=Array.prototype.slice.call(arguments),i=t.length>1?t.pop():Cbola.Logger.DEFAULT_LEVEL;if(u>=i){if("[*]"===t[0]&&(e+=t[0],t.shift()),t[0]&&t[0].hasOwnProperty("LoggerColor")){e="%c"+e;var n=t.shift().style;t[0]=e+" "+t[0],t.splice(1,0,n)}else t.unshift(e);i<=Cbola.Logger.Levels.WARNING&&!o.isEmpty(Cbola.Logger.getInstance().callingMethod)&&(t.shift(),t.unshift(Cbola.Logger.getInstance().callingMethod+"(): "),t.unshift(e)),i===Cbola.Logger.Levels.WARNING?console.warn.apply(console,t):i===Cbola.Logger.Levels.ERROR?console.error.apply(console,t):console.log.apply(console,t)}}function l(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();try{i.callingMethod=arguments.callee.caller.name}catch(o){i.callingMethod=""}return i.log.apply(i,t),i}}}function d(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var o=Cbola.Logger.getInstance();return o.callingMethod=i,t.push(e),o.log.apply(o,t),o}}}}function c(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();try{i.callingMethod=arguments.callee.caller.name}catch(o){i.callingMethod=""}var n=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return b.indexOf(n)>-1?i:(b.push(n),i.log.apply(i,t),i)}}}function p(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var o=Cbola.Logger.getInstance();t.push(e),o.callingMethod=i;var n=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return b.indexOf(n)>-1?o:(b.push(n),o.log.apply(o,t),o)}}}}var h=!1,m=[],b=[],u=Cbola.Env&&Cbola.Env.DEBUG?Cbola.Logger.Levels.DEBUG:Cbola.Logger.Levels.OFF,f=Cbola.Logger.Levels.ERROR,g=[],y=null,w=!1;return{log:function(){var e=Array.prototype.slice.call(arguments);if(null!==e&&0!==e.length){1===e.length&&e.push(Cbola.Logger.DEFAULT_LEVEL);var o=e[e.length-1],n=f>=o;if(n&&e.unshift("[*]"),a.apply(i,e),n){e.shift(),e.pop(),e[0].hasOwnProperty("LoggerColor")&&e.shift();var r=e.reduce(function(e,t){return e+" "+JSON.stringify(t)});h?(s(o,r),w||t()):m.push([o,r,i.callingMethod])}return i}},alwaysSend:l(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),critical:l(Cbola.Logger.Levels.CRITICAL),error:l(Cbola.Logger.Levels.ERROR),warn:l(Cbola.Logger.Levels.WARNING),notify:l(Cbola.Logger.Levels.NOTICE),info:l(Cbola.Logger.Levels.INFO),debug:l(Cbola.Logger.Levels.DEBUG),trace:l(Cbola.Logger.Levels.TRACE),alwaysSendOnce:c(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnce:c(Cbola.Logger.Levels.ERROR),warnOnce:c(Cbola.Logger.Levels.WARNING),notifyOnce:c(Cbola.Logger.Levels.NOTICE),infoOnce:c(Cbola.Logger.Levels.INFO),debugOnce:c(Cbola.Logger.Levels.DEBUG),traceOnce:c(Cbola.Logger.Levels.TRACE),alwaysSendM:d(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),criticalM:d(Cbola.Logger.Levels.CRITICAL),errorM:d(Cbola.Logger.Levels.ERROR),warnM:d(Cbola.Logger.Levels.WARNING),notifyM:d(Cbola.Logger.Levels.NOTICE),alwaysSendOnceM:p(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnceM:p(Cbola.Logger.Levels.ERROR),warnOnceM:p(Cbola.Logger.Levels.WARNING),notifyOnceM:p(Cbola.Logger.Levels.NOTICE),enableServer:function(){h=!0,n()},set level(e){u=e},get level(){return u},set serverLevel(e){f=e},get serverLevel(){return f},get queue(){return g},set serverUrl(e){y=e},get serverUrl(){return serverUrl}}}var i,o=Cbola._;return{getInstance:function(){return i||(i=t()),i}}}(),Cbola.Logger.MAX_RETRIES_PER_LOG=10,Cbola.Logger.Levels={ALWAYS_SEND_TO_SERVER:-999,ALERT:1,CRITICAL:2,ERROR:3,WARNING:4,NOTICE:5,INFO:6,DEBUG:7,TRACE:8,NONE:999},Cbola.Logger.DEFAULT_LEVEL=Cbola.Logger.Levels.INFO,Cbola.Logger.Colors={YELLOW:{LoggerColor:"yellow",style:"background: rgba(245, 210, 6, 1); color: black;font-size:13px"},RED:{LoggerColor:"red",style:"background: #8C0000; color: white;font-size:13px"},PALE_RED:{LoggerColor:"pale_red",style:"background: #FE4444; color: black;font-size:13px"},PALE_YELLOW:{LoggerColor:"pale_yellow",style:"background: rgb(250, 255, 202); color: black;font-size:13px"},PALE_GREEN:{LoggerColor:"pale_green",style:"background: rgb(229, 255, 215); color: black;font-size:13px"},PALE_BLUE:{LoggerColor:"pale_blue",style:"background: #98BDF1; color: black;font-size:13px"},PALE_PURPLE:{LoggerColor:"pale_purple",style:"color: #ce93d8;"},BLUE:{LoggerColor:"blue",style:"color: #2196f3;"},ORANGE:{LoggerColor:"orange",style:"color: rgb(255,140,0);"}},Cbola.Env=Cbola.Env||{},Cbola.Env.domainId=Cbola.Env.domainId||0,Cbola.Env.activePid=Cbola.Env.activePid||0,Cbola.Env.wid=Cbola.Env.wid||0,Cbola.Logger.serverSuffix=function(){return" [did: "+Cbola.Env.domainId+", pid: "+Cbola.Env.activePid+", wid: "+Cbola.Env.wid+", pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+", abtestid: "+Cbola.Config.abTestId},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.TimelineService=function(){var e=.05,t=Cbola._,i=Cbola.Logger.getInstance(),o=!t.isEmpty(Cbola.Utils.localStorageService.getItem("cbola_timeline")),n=!t.isUndefined(window.performance&&window.performance.now),s=function(){this.setEnabled(t.random(1,!0)<=e||o||"pnsk95"===Cbola.Env.activePid),this.isEnabled&&i.info(Cbola.Logger.Colors.BLUE,"TimelineService is active")};return s.prototype.mark=function(e,o){if(this.isEnabled){var n=performance.now();n=t.round(n,2);var s='timeline - "'+e+'" marked on: '+n+" ms";i.alwaysSend(Cbola.Logger.Colors.BLUE,s),t.isUndefined(performance.mark)||performance.mark(e),o&&this.lastMark&&performance.measure&&performance.measure("cbola - "+e,this.lastMark,e),this.lastMark=e}},s.prototype.markStart=function(e){this.isEnabled&&this.mark(e+" started")},s.prototype.markEnd=function(e){if(this.isEnabled){this.mark(e+" completed");try{performance.measure&&performance.measure("cbola - "+e,e+" started",e+" completed")}catch(t){}}},s.prototype.record=function(e,t){return function(){Cbola.Common.TimelineService.markStart(t),e.apply(this,Array.prototype.slice.call(arguments)),Cbola.Common.TimelineService.markEnd(t)}},s.prototype.setEnabled=function(e){this.isEnabled=n&&e},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.CDN=function(){},Cbola.Common.CDN.prototype._getPageElements=function(e,t,i,o,n){function s(){var e=r.domainId;0===r.domainId&&(e="all");var t=d.getCurrentAbTestId(),s=l.Defaults.CDN+t+"/"+r.activePid+"/"+e+"/"+h.UrlData.Hash_128_Bit+"_"+h.UrlData.Hash_160_Bit;return i===c.IN_CONTENT?(s+="_incontent_unified",a.isTablet?s+="_tablet":a.isMobile&&(s+="_mobile"),s+=0===parseInt(o)?"":"_"+o,s+=n?"_fallback_"+n:"",s+=".json"):s+="_elements.json",s}var r=Cbola.Env,a=r.PageProperties,l=Cbola.Config,d=Cbola.Utils,c=Cbola.Enums.ProductTypes,p=Cbola.Logger.getInstance(),h=d.initPayload();h=Cbola._.extend(h,{WidgetId:o,CategoryId:r.categoryId,FallbackMinimalWidth:n||0,Tags:r.tags,Title:r.title,Body:r.body});var m=JSON.stringify(h);p.info(Cbola.Logger.Colors.PALE_GREEN,"Start GPE for PT "+i+": "+Cbola.Utils.getRunTimeInMilis());var b=s(),u=new XMLHttpRequest;u.onload=function(){if(200==u.status){var n=JSON.parse(u.response),s=Cbola._.result(n,"Status");1===s?(n.widgetId=o,d.updateEnv(n),"undefined"!=typeof n.PageId&&p.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+n.PageId),Cbola.Env.PageProperties.IsServerCall=n.IsServerCall=Cbola.Enums.isServerCallTypes.FROM_CDN,t(n,i)):s?Cbola.Common.AnalyticsService.SetPageRequest(n.Status,Cbola.Enums.isServerCallTypes.FROM_CDN):(p.warnM("CDN._getPageElements","CDN._getPageElements returned bad response. Calling getPageElements form server."),e(m,0,i,o))}else try{e&&e(m,0,i,o)}catch(l){p.criticalM("CDN._getPageElements","Cbola_getPageElements Failed in onload. path: "+a.hostname+", pid: "+r.activePid+", Pvid: "+a.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText)}},u.open("GET",b,!0),u.onerror=function(){p.errorM("CDN._getPageElements","Request to CDN failed. path: "+a.hostname+", pid: "+r.activePid+", Pvid: "+a.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText+(navigator&&navigator.userAgent?", User Agent: "+navigator.userAgent:""));try{e&&e(m,0,i,o)}catch(t){p.criticalM("CDN._getPageElements","Cbola_getPageElements Failed in onerror. path: "+a.hostname+", pid: "+r.activePid+", Pvid: "+a.cbola_pageViewId)}},u.send()},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.RequestHandler=function(){function parseJSON(e){return e.json()}function checkStatus(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}var Logger=Cbola.Logger.getInstance(),Utils=Cbola.Utils,LoadStatusTypes=Cbola.Enums.LoadStatusTypes,_=Cbola._,RequestHandler=function(){this.cdn=new Cbola.Common.CDN};return RequestHandler.MAX_RETRIES=10,RequestHandler.prototype.dispatch=function(){function e(e,t){return function(){Cbola.Common.TimelineService.markEnd(t),_.isFunction(e)&&e.apply(this,Array.prototype.slice.call(arguments))}}function t(t,i,n){return function(){Logger.info("cdn call failed, retrying with direct request");var s="RequestHandler."+o;Cbola.Common.TimelineService.markStart(s),i.unshift(t),i[1]=e(i[1],s),n.callWithRetry.apply(n,["Cbola.Common.RequestHandler."+o,n[o],i])}}var i=Array.prototype.slice.call(arguments),o=i.shift();if(Cbola.Common.CDN.prototype[o]){var n="CDN."+o;Cbola.Common.TimelineService.markStart(n);var s=i.shift(),r=i.shift(),a=e(r,n);i.unshift(a);var l=_.cloneDeep(i),d=t(s,i,this);l.unshift(d),this.cdn[o].apply(this.cdn,l)}else{if(i.length>1){var c="RequestHandler."+o;Cbola.Common.TimelineService.markStart(c),i[1]=e(i[1],c)}Logger.info("no cdn call available, dispatching direct request to server"),this.callWithRetry.apply(this,["Cbola.Common.RequestHandler."+o,this[o],i])}},RequestHandler.prototype.callWithRetry=function(e,t,i){var o=i.shift(),n=0;i.push(n);var s=function(s){var r=this;if(n>=RequestHandler.MAX_RETRIES)Logger.errorM("RequestHandler.callWithRetry"+e,"RequestHandler.callWithRetry failed firing "+e+"() after "+RequestHandler.MAX_RETRIES+" errors, calling onerror callback."),_.isFunction(s)&&s(),Logger.warnM("RequestHandler.callWithRetry"+e,e+"() failed after "+RequestHandler.MAX_RETRIES+" errors, calling onerror callback..."),o&&o(e+"() request failed (retries: "+n+")");else{var a=Math.min(Math.pow(2,n),16);n++,i.length>0&&(i[i.length-1]=n),a=1===a?250:1e3*a,Logger.warnM("RequestHandler.callWithRetry"+e,e+"() failed, retrying in "+a/1e3+" seconds... ("+n+"/"+RequestHandler.MAX_RETRIES+")"),setTimeout(function(){t.apply(r,i)},a)}};i.unshift(s),t.apply(this,i)},RequestHandler.prototype.getPageElements=function(e,t,i,o,n){this.dispatch("_getPageElements",e,t,i,o,n)},RequestHandler.prototype.getMoreContent=function(e,t,i){this.dispatch("_getMoreContent",e,t,i)},RequestHandler.prototype.getAds=function(e,t,i,o,n){this.dispatch("_getAds",e,t,i,o,n)},RequestHandler.prototype.getSponsoredLinks=function(e,t,i){this.dispatch("_getSponsoredLinks",e,t,i)},RequestHandler.prototype.getMoreSponsoredLinks=function(e,t,i){this.dispatch("_getMoreSponsoredLinks",e,t,i)},RequestHandler.prototype.getLayerScript=function(e,t,i){this.dispatch("_getLayerScript",e,t,i)},RequestHandler.prototype.getJsBundle=function(e,t,i){this.dispatch("_getJsBundle",e,t,i)},RequestHandler.prototype._getPageElements=function(e,t,i,o,n,s){function r(e){_.isNil(e)||Cbola.Common.AnalyticsService.SetPageRequest(e,Cbola.Enums.isServerCallTypes.FROM_SERVER)}var a=Cbola.Env,l=Cbola.Utils,d=Cbola.Config,c=Cbola.Env.PageProperties,p=l.initPayload();p=_.extend(p,{WidgetId:parseInt(o),CategoryId:a.categoryId,FallbackMinimalWidth:n||0,Tags:a.tags,Title:a.title,Body:a.body}),_.isEmpty(a.PageProperties.SrcUrl)||(p.SrcUrl=a.PageProperties.SrcUrl),Logger.info("getPageElements start. json: ",p);var h=d.Defaults.queryServer+"GetInContentInfo";fetch(h,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(p)}).then(checkStatus).then(parseJSON).then(function(n){n.widgetId=o,l.updateEnv(n),c.IsServerCall=1,1===n.Status?("undefined"!=typeof n.PageId&&Logger.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+n.PageId),s>0&&Logger.alwaysSendM("RequestHandler._getPageElements","RequestHandler._getPageElements succeeded on "+s+" attempts. url: "+c.originalPathNameHost+", pageviewid: "+c.cbola_pageViewId),Cbola.Env.PageProperties.IsServerCall=n.IsServerCall=Cbola.Enums.isServerCallTypes.FROM_SERVER,t&&t(n,i)):2===n.Status||3===n.Status?(d.errorMessage="In automation",e&&e(function(){r(n.status)})):(Logger.errorM("RequestHandler._getPageElements","RequestHandler._getPageElements failed due to content server bad status: "+n.Status+". URL: "+c.originalPathNameHost+", pid: "+a.activePid),r(n.Status))}).catch(function(){e(function(){r(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED)})})},RequestHandler.prototype._getMoreContent=function(e,t,i){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=(arguments[4],Cbola.Common.UserService),r=Cbola.Config.Defaults.queryServer+"GetMoreContent";Logger.info("GetMoreContent for elementId: "+i.ElementId),Logger.info(Cbola.Logger.Colors.PALE_GREEN,"Start to GetMoreContent for elementId"+i.ElementId+": "+Utils.getRunTimeInMilis());var a={UserId:s.getUserId(),UserHistory:s.getItemsHistory()};i=_.extend(i,a);var l=Cbola.Utils.initPayload();i&&("undefined"!=typeof i.CurrentSession&&0===i.CurrentSession.length&&(i.CurrentSession=[0]),l=_.extend(l,i)),fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(l)}).then(checkStatus).then(parseJSON).then(function(r){if(_.isEmpty(r))0===n?(n++,s.clearItemsHistory(),o._getMoreContent(e,t,i,n)):t([]);else{Logger.info(Cbola.Logger.Colors.PALE_GREEN,"End to GetMoreContent for elementId"+i.ElementId+": "+Utils.getRunTimeInMilis());var a=_.map(r,function(e){return new Cbola.InContent.Layers.Item(e)});t(a)}}).catch(function(){e()})},RequestHandler.prototype._getAds=function(e,t,i,o,n,s){function r(e){_.isNil(e)||Cbola.Common.AnalyticsService.SetPageElementRequest({elementId:o,loadStatus:e})}var a=Cbola.Env,l=Cbola.Config,d=Cbola.Env.PageProperties,c=Cbola.EventBus,p={PageId:a.PageId,PublisherPublicKey:a.activePid,UrlData_Url:d.hostname,UrlData_Hash_128_Bit:a.PageProperties.urlHashMD5,UrlData_Hash_160_Bit:a.PageProperties.urlHashSHA1,AbTestId:l.abTestId,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,WidgetId:i,LayoutTypes:[n],IsMobile:a.PageProperties.isMobile,IsTablet:a.PageProperties.isTablet,DomainId:a.Domain,CategoryId:a.Category,IsSsl:"https:"===document.location.protocol},h=new Promise(function(e,t){setTimeout(function(){var e=new Error("request timeout");e.isTimeout=!0,t(e)},1e3*Cbola.Config.getAdsCheckElementRetries)}),m=fetch(l.Defaults.adServer+l.Defaults.adServer_method,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(p)});Promise.race([h,m]).then(checkStatus).then(parseJSON).then(function(e){1===e.Status?(s>0&&Logger.alwaysSendM("RequestHandler._getAds","RequestHandler._getAds succeeded on "+s+" attempts. url: "+d.originalPathNameHost+", pageviewid: "+d.cbola_pageViewId),t&&t(e),c.fire(c.Events.GET_ADS_READY+o,e)):Logger.errorM("RequestHandler._getAds","RequestHandler._getAds failed due to ad server bad status: "+e.Status+". url: "+d.originalPathNameHost+", pageviewid: "+d.cbola_pageViewId)}).catch(function(t){var i=null;500===_.result(t,"request.status")?i=LoadStatusTypes.AD_SERVER_DOWN:t.isTimeout?i=LoadStatusTypes.GET_ADS_MAX_RETRY:_.isNil(t.request)&&(i=LoadStatusTypes.GET_ADS_FAILED),2===s&&r(i),e(function(){r(i)})})},RequestHandler.prototype._getSponsoredLinks=function(e,t,i,o){var n=Cbola.Config,s=Cbola.Utils.initPayload();_.extend(s,i),Logger.info("getSponsoredLinks. json: ",s),fetch(n.Defaults.queryServer+"GetSponsoredLinks",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(s)}).then(checkStatus).then(parseJSON).then(function(e){e&&t&&t(e)}).catch(function(){e&&e()})},RequestHandler.prototype._getMoreSponsoredLinks=function(e,t,i,o,n){var s=this;o||(o=0);var r=Cbola.Common.UserService,a=Cbola.Config,l=Cbola.Utils.initPayload(),d={UserId:r.getUserId(),UserHistory:r.getItemsHistory()};Logger.info("GetMoreSponsoredLinks for elementId: "+i.ElementId),Logger.info(Cbola.Logger.Colors.PALE_GREEN,"Start to GetMoreSponsoredLinks for elementId"+i.ElementId+": "+Utils.getRunTimeInMilis()),i=_.extend(i,d),i&&("undefined"!=typeof i.CurrentSession&&0===i.CurrentSession.length&&(i.CurrentSession=[0]),l=_.extend(l,i)),fetch(a.Defaults.queryServer+"GetMoreSponsoredLinks",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(l)}).then(checkStatus).then(parseJSON).then(function(n){var a=_.isEmpty(n);a?3>o?(o++,Logger.debug("RequestHandler::GetMoreSponsoredLinks() -> empty data received from server, reseting history and session and trying again... ["+o+"/5]"),r.clearItemsHistory(),i.CurrentSession=[0],s._getMoreSponsoredLinks(e,t,i,o++)):a&&e():(Logger.info(Cbola.Logger.Colors.PALE_GREEN,"End to GetMoreSponsoredLinks for elementId"+i.ElementId+": "+Utils.getRunTimeInMilis()),t(n))}).catch(function(){e&&e()})},RequestHandler.prototype._getLayerScript=function(onerror,onsuccess,layerType,_retryAttempt){function onFailure(e){(0===_retryAttempt||2===_retryAttempt)&&Logger.alwaysSendM("RequestHandler._getLayerScript","Failed getting script for layer "+layerType+" on attempt: "+(_retryAttempt+1)+" due to: "+_.result(e,"message","")+". URL: "+Cbola.Env.PageProperties.originalPathNameHost),_.isFunction(onerror)&&onerror()}var url=Cbola.Env.clientPath+"container/layer_"+layerType+"/cbola_layer_"+layerType+"."+Cbola.Env.clientPathType+"js",xhttp=new XMLHttpRequest;xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),onsuccess()):onFailure(new Error("response status "+xhttp.status))},xhttp.open("GET",url,!0),xhttp.onerror=onFailure,xhttp.send()},RequestHandler.prototype._getJsBundle=function(onerror,onsuccess,filename){var url=""+Cbola.Env.clientPath+filename;if(Cbola.Env.DEBUG){var script=document.createElement("script");script.onload=function(){onsuccess&&onsuccess()};var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(script,node),script.src=url}else!function(){var xhttp=new XMLHttpRequest;xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),onsuccess()):onerror?onerror():Logger.criticalM("RequestHandler._getJsBundle","RequestHandler._getJsBundle failed due to unknown status")},xhttp.open("GET",url,!0),xhttp.onerror=function(){onerror&&onerror()},xhttp.send()}()},new RequestHandler}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.UserService=function(){function e(){a[Cbola.Config.Language.english]={ad:"Ad",add:"add",addThisWidgetToYourSite:"add this widget to your site",addWidgetToYourSite:"add widget to your site",advertisement:"Advertisement",anotherQuiz:"another quiz",backToGame:"back to game",canYouBeatThat:"Can you beat that?",challenge:"Challenge",correct:"Correct",falseButton:"False",iScored:"I scored",nextQuiz:"Next quiz",playingIn:"playing in",promotedBy:"promoted by",poweredBy:"powered by",question:"Question",score:"Score",seconds:"seconds",skip:"Skip",start:"Start",startsIn:"starts in:",thankYouForPlaying:"Thank you for playing !",toYourSite:"to your site",trueButton:"True",trueOrFalse:"True or False?",upNext:"up next: ",whatsNext:"whats next ?",wrong:"Wrong",youMayLike:"You May Like...",yourFriends:"your friends",yourScore:"Your score",YouScoredaFair:"You Scored a Fair",YouScoredaLame:"You Scored a Lame",YouScoredanAwesome:"You Scored an Awesome",YouScoredaMighty:"You Scored a Mighty",youScoredaPerfect:"You Scored a Perfect",YouScoredaRidiculous:"You Scored a Ridiculous"},a[Cbola.Config.Language.spanish]={ad:"Anuncio",add:"Añade",addThisWidgetToYourSite:"Añade este widget a tu sitio",addWidgetToYourSite:"añade este widget a tu sitio",advertisement:"Publicidad",anotherQuiz:"otro juego",backToGame:"volver al juego",canYouBeatThat:"Puedes vencerme?",challenge:"Desafía",correct:"Correcto",falseButton:"Falso",iScored:"Obtuve un puntaje de",nextQuiz:"Próximo Juego",playingIn:"jugando",question:"Pregunta",score:"Puntaje",seconds:"segundos",skip:"Omitir",start:"comienza",startsIn:"comienza en:",thankYouForPlaying:"gracias por jugar !",toYourSite:"a tu sitio",trueButton:"Verdadero",trueOrFalse:"Verdadero o Falso?",upNext:"Siguiente: ",wrong:"Incorrecto",youMayLike:"te puede interesar",yourFriends:"a tus amigos",yourScore:"Tu Puntaje",YouScoredaFair:"Tu Puntaje Final es",YouScoredaLame:"Tu Puntaje Final es",YouScoredanAwesome:"Tu Puntaje Final es",YouScoredaMighty:"Tu Puntaje Final es",youScoredaPerfect:"Tu Puntaje Final es",YouScoredaRidiculous:"Tu Puntaje Final es"},a[Cbola.Config.Language.portuguese]={ad:"anúncio",advertisement:"publicidade",addThisWidgetToYourSite:"adicione este widget ao seu site",addWidgetToYourSite:"adicione este widget ao seu site",anotherQuiz:"outro jogo",backToGame:"voltar ao jogo",canYouBeatThat:"Você pode me vencer?",challenge:"Desafie",correct:"Correto",falseButton:"Falso",iScored:"Obtive uma pontuação",nextQuiz:"Próximo Jogo",playingIn:"jogando",question:"Pergunta",score:"Pontuação",seconds:"segundos",skip:"pular",start:"começa",startsIn:"começa em:",thankYouForPlaying:"obrigado por jogar !",toYourSite:"ao seu site",trueButton:"Verdadeiro",trueOrFalse:"Verdadeiro ou Falso?",upNext:"Seguinte: ",wrong:"Incorreto",youMayLike:"você pode se interessar",yourFriends:"os seus amigos",yourScore:"Sua Pontuação",YouScoredaFair:"Sua Pontuação Final é",YouScoredaLame:"Sua Pontuação Final é",YouScoredanAwesome:"Sua Pontuação Final é",YouScoredaMighty:"Sua Pontuação Final é",youScoredaPerfect:"Sua Pontuação Final é",YouScoredaRidiculous:"Sua Pontuação Final é"},a[Cbola.Config.Language.russian]={ad:"объявление",add:"Добавить",addThisWidgetToYourSite:"Добавьте этот виджет на свой сайт",advertisement:"Реклама",addWidgetToYourSite:"Добавьте виджет на свой сайт",anotherQuiz:"Другая викторина",backToGame:"вернуться к игре",canYouBeatThat:"Можете ли вы лучше?",challenge:"Озадачьте ",correct:"Правильно",falseButton:"Неверно",iScored:"Я набрал",nextQuiz:"Следующий конкурс",playingIn:"очков, играя в",question:"Вопрос",score:"Результат",sconds:"секунд",skip:"пропустить",start:"Старт",startsIn:"Начало через",thankYouForPlaying:"Спасибо за игру",toYourSite:"в ваш сайт",trueButton:"Верно",trueOrFalse:"Верно Или Неверно?",upNext:"Следующая",whatsNext:"что следует",wrong:"Ошибка",youMayLike:"Вам может понравиться",yourFriends:"своих друзей",yourScore:"Ваш Результат",YouScoredaFair:"Ваш Результат",YouScoredaLame:"Ваш Результат",YouScoredanAwesome:"Ваш Результат",YouScoredaMighty:"Ваш Результат",youScoredaPerfect:"Ваш Результат",YouScoredaRidiculous:"Ваш Результат"},a[Cbola.Config.Language.french]={advertisement:"Publicité",canYouBeatThat:"Tu peux me battre?",challenge:"Défiez ",correct:"Correct",falseButton:"Faux",iScored:"J`ai totalisé",nextQuiz:"Prochain quiz",playingIn:"en jouant au Quiz",question:"Question",score:"Score",start:"Début",trueButton:"Vrai",trueOrFalse:"Vrai ou Faux",wrong:"Incorrect",yourFriends:"Vos amis",yourScore:"Votre score",YouScoredaFair:"Votre score est de",YouScoredaLame:"Votre score est de",YouScoredanAwesome:"Votre score est de",YouScoredaMighty:"Votre score est de",youScoredaPerfect:"Votre score est de",YouScoredaRidiculous:"Votre score est de"}}var t="en",i="cbola_userId",o="cbola_itemsArrayHistoryUser",n=0,s=null,r="en",a={},l=Cbola.Utils.localStorageService,d=Cbola.Logger.getInstance(),c=Cbola._;e();var p=function(){this._vocabulary=a[t]};return p.prototype.getItemsHistory=function(){if(s)return s;var e=l.getItem(o);return e?(e=c.trimEnd(e,","),s=c.split(e,",")):[0]},p.prototype.addItemsToHistory=function(e){var t=this.getItemsHistory();t&&(e=c.union(t,e));var i=c.trimEnd(c.join(c.uniq(e),","),",");s=e,l.setItem(o,i)},p.prototype.clearItemsHistory=function(){s=null,l.removeItem(o)},p.prototype.getUserId=function(){return n?n:n=l.getItem(i)||0},p.prototype.setUserId=function(e){n=e,l.setItem(i,e)},p.prototype.getLanguage=function(){
return r},p.prototype.setLanguage=function(e){r=e,a.hasOwnProperty(e)?this._vocabulary=a[e]:d.warnM("UserService.setLanguage","UserService Failed to set language: "+e)},p.prototype.vocabulary=function(){var e="",t=arguments;return 0===t.length?"":(c.forEach(t,function(i,o){e+=this.getWard(i),o!==t.length-1&&(e+=" ")}.bind(this)),e)},p.prototype.getWard=function(e){return this._vocabulary[e]||a[t][e]||""},p.prototype.wasItemAlreadyViewed=function(e){if(e.IgnoreUserHistory)return!1;var t=e.ParentId?e.ParentId:e.Id;return this.getItemsHistory().indexOf(t.toString())>-1},p.prototype.dictionaryReport=function(){var e={},i=c.keys(a[t]);return c.forEach(a,function(o,n){n!==t&&(e[n]=c.difference(i,c.keys(o)))}),e},new p}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AnalyticsService=function(){function e(e){return e.json()}function t(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function i(e){var t={ClientVersion:Cbola.Env.clientVersion,PageViewId:c.PageProperties.cbola_pageViewId,PageId:c.PageId,UserId:r.getUserId(),PublisherId:c.activePid,Second:d.getRunTimeInSecs(),categoryId:c.Category,domainId:c.Domain,IsMobile:c.PageProperties.isMobile,IsTablet:c.PageProperties.isTablet,isPortrait:c.PageProperties.isPortrait,AbTestId:Cbola.Config.abTestId};return e&&(t=p.extend(t,e)),p.defaults(t,h),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.analyticsName,s=e.additionalParams,r=e.onError,h=void 0===r?!1:r,m=e.onSuccess,b=void 0===m?!1:m,u=e.includeCredentials,f=void 0===u?!1:u,g=i(s),y={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:d.encodePayload(g)};f&&(y.credentials="include"),fetch(""+Cbola.Config.Defaults.analyticsServer+o,y).then(t).then(function(e){a.info(l.PALE_PURPLE,"fired "+o+" analytics to server.",g),Cbola.Env.DEBUG&&console.table&&g.Items&&console.table(g.Items),b&&b(e)}).catch(function(e){if(h)h(e.response);else{var t=p.result(e,"response.status",-1);a.errorM(n+".fire"+o,o+" failed. path: "+c.PageProperties.hostname+", pid: "+c.activePid+", Pvid: "+c.PageProperties.cbola_pageViewId+", Request Status "+t)}})}var n="AnalyticsService",s=Cbola.Enums.SetClickTypes,r=Cbola.Common.UserService,a=Cbola.Logger.getInstance(),l=Cbola.Logger.Colors,d=Cbola.Utils,c=Cbola.Env,p=Cbola._,h={WidgetId:0,PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},m={previousItemTimerStart:0,lastViewDuration:0,viewOrder:0,isWidgetOpen:!0,alreadySentSetPageElements:!1},b=function(){};return b.prototype.SetPageRequest=function(t,i,s){if(a.info(n+"::SetPageRequest"),"undefined"==typeof s||!s.outsideIframe){Cbola.Env.PageStatus=t;var h=0;try{h=Math.floor(100*Math.abs(Cbola.Env.PageProperties.secondGlobal/1e3))/100}catch(m){}var b=0;try{0!==Cbola.Env.PageProperties.publisherScriptExecutionTime&&null!==Cbola.Env.PageProperties.publisherScriptExecutionTime&&(b=Math.floor(100*Math.abs((Cbola.Env.PageProperties.publisherScriptExecutionTime-window.performance.timing.connectStart)/1e3))/100)}catch(m){}var u={PageStatus:t,IsServerCall:i,SecondFromPageLoad:b,SecondGlobal:h,WidgetId:Cbola.Env.widgetId,ScriptDomainId:Cbola.Env.domainId,IntegrationType:Cbola.Env.IntegrationType||0,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};t===Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL&&s?(u.ScreenHeight=s.height,u.ScreenWidth=s.width):(u.ScreenWidth=c.topWindow.innerWidth,u.ScreenHeight=c.topWindow.innerHeight),d.isInIframe()&&!d.isWindowTopSupported()||p.isEmpty(window.top.document.referrer)||(u.ReferrerURL=window.top.document.referrer),Cbola.Config.ignoreQueryString&&(u.QueryString=encodeURIComponent(Cbola.Config.queryString));var f=function(t){e(t).then(function(e){var t=p.result(e,"UserId",0);c.userId=parseInt(t),r.setUserId(t),a.info(l.PALE_PURPLE,"SetPageRequestGeo analytics success. UserId: "+c.userId)})},g=function(){a.errorM(n+".SetPageRequest","SetPageRequestGeo failed to set user Id")};o({analyticsName:"SetPageRequestGeo",additionalParams:u,onError:g,onSuccess:f,includeCredentials:!0})}},b.prototype.SetAdsRequest=function(e,t,i,s){a.info(l.PALE_PURPLE,n+"::SetAdsRequest");var r=Cbola.Env.icManager.getLayerByElementId(e),d={ElementId:e,Ads:[{TagId:t,ProviderId:"",TriggerType:i}],WidgetId:r.widgetId,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,LayoutType:r.type,ItemType:r.itemType};"undefined"!=typeof s&&(d.HbCpm=s),o({analyticsName:"SetAdsRequest",additionalParams:d})},b.prototype.SetPageElementRequest=function(e){a.info(l.PALE_PURPLE,"SetPageElementsRequest");var o=void 0,s=e.elementId;if(e.layer?(o=e.layer,s=o.elementId):s&&(o=Cbola.Env.icManager.getLayerByElementId(e.elementId)),!p.isNil(o)&&e.hasOwnProperty("loadStatus")){o.analyticsData=p.defaults(o.analyticsData,m),o.analyticsData.alreadySentSetPageElements=!0;var r={ElementId:s,LoadStatus:e.loadStatus,PageStatus:Cbola.Env.PageProperties.PageStatus,IsServerCall:p.result(o,"data.IsServerCall",p.result(e,"isServerCall",Cbola.Env.PageProperties.IsServerCall)),Width:o.container?o.container.offsetWidth:0,Height:o.container?o.container.offsetHeight:0,WidgetId:o.widgetId,ItemType:o.itemType||0,LayoutType:o.type||0,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};p.isFunction(o.isViewabilityTestable)&&o.isViewabilityTestable()&&(r.PageHeight=o.getDocumentHeight(),r.PixelsFromTop=o.getPixelsFromTop()||-1),r=i(r);var c={Elements:[r]};fetch(Cbola.Config.Defaults.analyticsServer+"SetPageElementsRequestNew",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:d.encodePayload(c)}).then(t).then(function(){a.info("SetPageElementsRequestNew analytics success.")}).catch(function(){a.errorM(n+".sendSetPageElementsRequest","SetPageElementsRequestNew failed path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+" Request Status "+xhr.status)})}},b.prototype.SetPageElementView=function(e,t,i,n){a.info(l.PALE_PURPLE,"SetPageElementView");var s=c.icManager.getLayerByElementId(e);if(!p.isNil(s)){s.analyticsData=p.defaults(s.analyticsData,m);var r={ElementId:s.elementId,ElementViewId:s.viewId,TeaserType:0,OpenType:t,CloseType:i,WidgetId:s.widgetId,LayoutType:s.type,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,Duration:p.isUndefined(n)?s.isViewable()?0:s.getViewDuration():n};o({analyticsName:"SetPageElementView",additionalParams:r})}},b.prototype.SetClick=function(e,t,i){if(a.info(l.PALE_PURPLE,"SetClick"),!d.isGoogleWebLightAgent()){var r=c.icManager.getLayerByElementId(e),p=0;i&&(p=i.Id,r.isMobile()||t===s.SHARE_BEFORE_FACEBOOK||t===s.SHARE_BEFORE_TWITTER?p=i.Id:(t===s.SHARE_AFTER_TWITTER||t===s.SHARE_AFTER_FACEBOOK)&&(p=i.ParentId));var h={ElementId:e,ElementViewId:r.viewId,ClickType:t,ItemId:p,WidgetId:r.widgetId,LayoutType:r.type,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};o({analyticsName:"SetClick",additionalParams:h,onError:function(){a.errorOnceM(n+".SetClick","SetClick failed. Path: "+Cbola.Env.PageProperties.hostname+" Layout: "+h.LayoutType+", Widget ID: "+h.WidgetId+", Click type: "+h.ClickType+", Item Id: "+h.ItemId+", Time: "+h.Second+", User agent: "+window.navigator.userAgent)}})}},b.prototype.setSponsoredClick=function(e,t){var i={ElementId:e,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};if(a.info(l.PALE_PURPLE,"setSponsoredClick"),!d.isGoogleWebLightAgent()){var s=c.icManager.getLayerByElementId(e);p.isNil(s)||p.extend(i,{ElementViewId:s.viewId,WidgetId:s.widgetId,LayoutType:s.type}),p.extend(i,t),o({analyticsName:"SetSponsoredClick",additionalParams:i,onError:function(){a.errorOnceM(n+".setSponsoredClick",n+"::setSponsoredClick failed. Path: "+Cbola.Env.PageProperties.hostname+", Layout: "+i.LayoutType+", Widget ID: "+i.WidgetId+", Click type: "+i.ClickType+", Item Id: "+i.ItemId+", Time: "+i.Second+", User agent: "+window.navigator.userAgent)}})}},b.prototype.SetClientError=function(e){a.info(l.PALE_PURPLE,n+"::SetClientError");var t={PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},i={Url:window.location.href.toLowerCase(),FileName:e.filename,Line:e.lineno,Col:e.colno,ErrorMessage:e.message,Type:e.type};p.defaults(i,t),o({analyticsName:"SetClientError",additionalParams:i})},b.prototype.SetPageClose=function(){var e={PageId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},t={PageId:c.PageId,PublisherId:c.activePid,UserId:r.getUserId(),categoryId:c.Category,domainId:c.Domain};p.defaults(t,e),a.info(l.PALE_PURPLE,n+"::SetPageClose");var o=i(t),s=new XMLHttpRequest,h=Cbola.Config.Defaults.analyticsServer+"SetPageClose";s.open("POST",h,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE)if(200===s.status||204===s.status)a.info(l.PALE_PURPLE,"fired SetPageClose analytics to server.",o),Cbola.Env.DEBUG&&console.table&&o&&console.table(o);else{var e=p.result(s,"status",-1);a.errorM(n+".fireSetPageClose","SetPageClose failed. path: "+c.PageProperties.hostname+", pid: "+c.activePid+", Pvid: "+c.PageProperties.cbola_pageViewId+" Request Status "+e)}},s.onerror=function(){var e=p.result(s,"status",-1);a.errorM(n+".fireSetPageClose","SetPageClose failed. path: "+c.PageProperties.hostname+", pid: "+c.activePid+", Pvid: "+c.PageProperties.cbola_pageViewId+" Request Status "+e)},s.send(d.encodePayload(o))},b.prototype.SetItemsView=function(e,t){a.info(l.PALE_PURPLE,n+"::SetItemsView");var i=Cbola.Env.icManager.getLayerByElementId(e);if(!p.isNil(i)){i.analyticsData=p.defaults(i.analyticsData,m);var s={ElementId:e,ElementViewId:i.viewId,Items:[],WidgetId:i.widgetId,LayoutType:i.type};s.Items=p.map(t,function(e){return e.openType!==Cbola.Enums.ItemViewTypes.NONE&&i.analyticsData.viewOrder++,{Id:e.Id||0,OpenType:e.openType,CloseType:e.closeType,DisplayOrder:e.displayOrder,ViewOrder:e.viewOrder,Duration:e.isViewable?0:e.getViewableDuration(),AnswerId:e.userAnswerId}}),o({analyticsName:"SetItemsView",additionalParams:s})}},b.prototype.SetClickTracker=function(e){a.info(l.PALE_PURPLE,n+"::SetClickTracker"),e?fetch(e).then(function(){a.info(n+"::SetClickTracker succeeded for url: "+e)}):a.warnM(n+".SetClickTracker",n+"::SetClickTracker -> couldn't set URL for click tracker")},b.prototype.setHbBidRequest=function(e){var t={BidRequests:e};o({analyticsName:"setHbBidRequest",additionalParams:t})},b.prototype.SetImageTeaserMovement=function(e){var t={EffectType:e,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};o({analyticsName:"SetImageTeaserMovement",additionalParams:t})},b.prototype.SetImageTeaserLinkClick=function(){var e={ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};o({analyticsName:"SetImageTeaserLinkClick",additionalParams:e})},new b}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.IframeBuster=function(){var e=Cbola.Logger.getInstance(),t=Cbola._,i=Cbola.Config,o=function(e,i,o){var n=e.DefaultSettings;this.iframeBusterOptions={LocationSelector:n.LocationSelector,iFrameAdjust:"undefined"!=typeof n.iFrameAdjustForTablet&&Cbola.Env.PageProperties.isTablet||t.result(n,"iFrameAdjust",!1),mobileiFrameAdjust:t.result(n,"mobileiFrameAdjust",!1),iFrameBusterWidth:n.iFrameBusterWidth,outsideIframe:e.outsideIframe,fixedHeight:t.result(n,"iFrameFixedHeight",null),fixedWidth:t.result(n,"iFrameFixedWidth",null),advertisementTitleHeight:t.result(n,"IncludeAdvertisementTitle",!1)?20:0},this.layerType=o,this.widgetId=i,this.iFrameElement=null,this.iframePropertiesSet=!1};return o.prototype.init=function(){if(this.findIframeElement().checkIframeDimension(),this.iframeBusterOptions.outsideIframe)this.pushScriptAboveIframe();else if(this.iframeBusterOptions.fixedHeight||this.iframeBusterOptions.fixedWidth){var e=this.getIframe();e&&(this.iframeBusterOptions.fixedHeight&&(e.style["height"]=this.iframeBusterOptions.fixedHeight+this.iframeBusterOptions.advertisementTitleHeight+"px"),this.iframeBusterOptions.fixedWidth&&(e.style["width"]=this.iframeBusterOptions.fixedWidth+"px")),this.setIframeProperties()}return 112566===Cbola.Env.domainId&&this.prizeGrabHack(),this},o.prototype.checkIframeDimension=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o="IframeBuster.checkIframeDimension",n=this.iframeBusterOptions;if(!this.shouldBust())return this;var s=n.iFrameBusterWidth||0,r=this.getIframe(),a=r.getBoundingClientRect();try{var l=i.getLayersDefaultSizeForIframe(this.layerType);l.height+t+n.advertisementTitleHeight>a.height&&(e.info("Iframe's height was change from: "+a.height+" to "+(l.height+t+n.advertisementTitleHeight)),r.style["height"]=l.height+t+n.advertisementTitleHeight+"px"),r.style["width"]="100%",0!==s?(r.style["min-width"]=s+"px",e.info("Iframe's min-width was change to: "+s)):-1!==l.width&&(r.style["min-width"]=l.width+"px",e.info("Iframe's min-width was change to: "+l.width)),this.setIframeProperties()}catch(d){e.errorM(o,o+" failed, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid)}return this},o.prototype.pushScriptAboveIframe=function(){this.iFrameElement.insertAdjacentHTML("beforebegin",'<script class="'+i.inContentClass+'" data-manual-build="true"></script>'),this.iFrameElement.style["height"]="0";var e=document.createElement("script");e.src=Cbola.Globals.proxyElem.src,e.id=i.proxyId,e.setAttribute("mediatype","InContent");var t=parent.document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},o.prototype.setIframeSize=function(e,t){if(!this.shouldBust())return this;var i=this.getIframe();if(!i)return this;var o="undefined"!=typeof e?e:window.parent.innerWidth,n="undefined"!=typeof t?t:0;return i.style["width"]=o+"px",0!==n&&(i.style["height"]=n+this.iframeBusterOptions.advertisementTitleHeight+"px"),this},o.prototype.setIframeProperties=function(){var t="IframeBuster.setIframeProperties",i=this.getIframe();if(!this.iframePropertiesSet&&i)try{i.setAttribute("scrolling","no"),i.setAttribute("marginwidth","0"),i.setAttribute("marginheight","0"),i.setAttribute("frameborder","0"),i.contentDocument.body.style["margin"]=0,i.contentDocument.body.style["overflow"]="hidden",this.iframePropertiesSet=!0}catch(o){e.errorM(t,t+" failed setting iframe attributes and style")}return this},o.prototype.prizeGrabHack=function(){var e=this.getIframe();if(e){var t=e.contentDocument.head.querySelector("style");e.contentDocument.head.removeChild(t)}},o.prototype.findIframeElement=function(){var t="IframeBuster.findIframeElement";try{"undefined"!=typeof window.frameElement&&null!==window.frameElement?this.iFrameElement=window.frameElement:Cbola.Utils.isInIframe()&&e.errorOnceM(t,t+" couldnt get iframe element (undefined or null). wid: "+this.widgetId)}catch(i){e.errorOnceM(t,t+" failed getting iframe element, wid: "+this.widgetId+", e:",i)}return this},o.prototype.shouldBust=function(){var e=this.iframeBusterOptions,i=Cbola.Env.PageProperties.isMobile;return!e.LocationSelector&&(e.iFrameAdjust&&!i||e.mobileiFrameAdjust&&i)&&!t.isNil(this.iFrameElement)},o.prototype.getIframe=function(){return this.iFrameElement},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Item=function(){var e=Cbola.Utils,t=Cbola._,i=function e(i){t.extend(this,i),this.Type===e.Types.TWEET&&(t.extend(this,this.Tweet),delete this.Tweet),this.becameViewableAt=0,this.lastViewableDuration=0,this.viewOrder=1,this.displayOrder=1,this.isViewable=!1,this.userAnswerId=0};return i.prototype.setOpenType=function(e){this.openType=e},i.prototype.setCloseType=function(e){this.closeType=e},i.prototype.setDisplayOrder=function(e){this.displayOrder=e},i.prototype.setViewOrder=function(e){this.viewOrder=e},i.prototype.setUserAnswerId=function(e){this.userAnswerId=e||0},i.prototype.setViewable=function(t){if(this.isViewable=t,t)this.becameViewableAt=e.getRunTimeInSecs();else{var i=e.getRunTimeInSecs()-this.becameViewableAt;this.lastViewableDuration=Math.round(100*i)/100}},i.prototype.getViewableDuration=function(){return this.isViewable?e.getRunTimeInSecs()-this.becameViewableAt:this.lastViewableDuration},i.prototype.isAd=function(){return this.type===i.Types.AD},i.prototype.getType=function(){return this.type},i.Types={FACT:1,TIP:2,QUOTE:3,ON_THIS_DAY:4,TRIVIA:5,DIED_THIS_DAY:6,TRIVIA_MULTI:7,TRIVIA_MULTI_PAIRS:8,GAME_SET:254,CHART:255,TWEET:9,AD:-1e3,_SPONSORED_BASE:2e3,SPONSORED_LINKS:2001,SPONSORED_LINKS_FULL_W_HEADER:2002,SPONSORED_LINKS_FULL_SLIDER:2003,SPONSORED_LINKS_TWITTER_FULL_SLIDER:2004},i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.BasicService=function(){var e={},t=Cbola.Common.RequestHandler,i=Cbola.Common.UserService,o=Cbola.Logger.getInstance(),n=Cbola._,s=function(){this.pendingItems=[]};return s.prototype.getMoreItems=function(i,s,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=[],c=this.getOrCreateSession(i),p=this.getOrCreatePendingItems(s);if(p.length>=a){d=n.take(p,5),n.pullAll(p,d);var h=n.differenceBy(d,c,"Id");e[i]=n.unionBy(c,h,"Id"),r(h)}else{if(o.debug(this.name+"::getMoreItems -> quering server for more items..."),l++,l>1){if(!(p.length>0))return void r([]);this.getMoreItems(i,s,r,p.length)}var m={WidgetId:s,ElementId:i,CurrentSession:n.map(c,function(e){return e.Id})};m=this.extendParams(m),t.getMoreContent(function(){r([])}.bind(this),function(e){if(o.debug(this.name+"::getMoreItems -> got more items from server"),n.isEmpty(e))return void r([]);e=this.transformServerResponse(e);var t=n.unionBy(p,e,"Id");t.unshift(0,p.length),p.splice.apply(p,t),this.getMoreItems(i,s,r,a,l)}.bind(this),m)}},s.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},s.prototype.transformServerResponse=function(e){return e},s.prototype.clearSession=function(t){return e[t]=[],this},s.prototype.getOrCreateSession=function(t){var i=null;return"undefined"==typeof e[t]?(i=[],e[t]=i):i=e[t],i},s.prototype.addItem=function(e,t){var o=this.getOrCreatePendingItems(t);e&&!i.wasItemAlreadyViewed(e)&&o.push(e)},s.prototype.getOrCreatePendingItems=function(e){var t=parseInt(e);return n.isArray(this.pendingItems[t])||(this.pendingItems[t]=[]),this.pendingItems[t]},s.prototype.getAll=function(){return this.pendingItems},s.prototype.getAllByWidgetId=function(e){var t=parseInt(e);return this.pendingItems[t]},s}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisDayService=function(){function e(e){return e&&e.OnThisDayDate?t(i,new Date(e.OnThisDayDate)):!1}function t(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var i=new Date,o=Cbola._,n=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),s=Cbola.InContent.Layers.Services.BasicService,r=function(){s.call(this),this.name="DiedThisDayService"};return o.extend(r.prototype,s.prototype),r.prototype.extendParams=function(e){return s.prototype.extendParams.call(this,e),e.ClientDate=n,e},r.prototype.transformServerResponse=function(t){var i=o.filter(t,e);return i.sort(),i},r.prototype.addItem=function(t,i){e(t)&&s.prototype.addItem.call(this,t,i)},r.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},r.prototype.setTotalItemsForToday=function(e){var o=0;for(var n in e){var s=e[n],r=new Date(s.Day);t(i,r)&&(o=s.ItemCount)}this.totalItemsAvailableOnServer=o},r.prototype.getDateDay=function(){return i.getDate()},new r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisWeekService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="DiedThisWeekService",this.totalItemsAvailableOnServer=0};return t.extend(i.prototype,e.prototype),i.prototype.getTotalItemsAvailableForThisWeek=function(){return this.totalItemsAvailableOnServer},i.prototype.setTotalItemsForThisWeek=function(e){for(var i=0,o=0;o<e.length;o++){var n=e[o];i+=t.result(n,"ItemCount",0)}this.totalItemsAvailableOnServer=i},new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.FactsService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="FactsService"};return t.extend(i.prototype,e.prototype),new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.OnThisDayService=function(){function e(e){var t=Date.parse(e.OnThisDayDate);isNaN(t)||(n=new Date(t),s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate())}function t(e){return r?!0:e&&e.OnThisDayDate?i(n,new Date(e.OnThisDayDate)):!1}function i(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var o=Cbola._,n=new Date,s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),r=!1,a=Cbola.InContent.Layers.Services.BasicService,l={es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],ja:["1","2","3","4","5","6","7","8","9","10","11","12"]},d=function(){a.call(this),this.name="OnThisDayService"};return o.extend(d.prototype,a.prototype),d.prototype.extendParams=function(e){return a.prototype.extendParams.call(this,e),e.ClientDate=s,e},d.prototype.transformServerResponse=function(e){var i=o.filter(e,t);return i.sort(),i},d.prototype.addItem=function(e,i){t(e)&&a.prototype.addItem.call(this,e,i)},d.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},d.prototype.setTotalItemsForToday=function(e){var t=0;for(var o in e){var s=e[o],r=new Date(s.Day);i(n,r)&&(t=s.ItemCount)}this.totalItemsAvailableOnServer=t},d.prototype.getDateDay=function(){return n.getDate()},d.prototype.getMonthName=function(e){return e=l.hasOwnProperty(e)?e:"en",l[e][n.getMonth()]},d.prototype.setIgnoreClientDate=function(t,i){r=Cbola.Utils.toBool(t),"undefined"!=typeof i&&e(i)},new d}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TriviaService=function(){var e=1,t=Cbola.Common.UserService,i=Cbola.Logger.getInstance(),o={},n=Cbola.InContent.Layers.Item.Types,s={TRUE_FALSE:[n.TRIVIA],MULTI_ANSWER:[n.TRIVIA_MULTI,n.TRIVIA_MULTI_PAIRS]},r={},a={},l=0,d=Cbola._,c=Cbola.EventBus,p=Cbola.Common.RequestHandler,h=function(){this.triviaTypes={};for(var e in s)s.hasOwnProperty(e)&&(this.triviaTypes[e]=e)};h.prototype.setFirstItemId=function(e){l=e},h.prototype.getNewGame=function(t,o,n,s,d){if("undefined"==typeof d&&(d=0),d>e)return void s(null);d++;var c=this.getPendingGamesByTriviaType(n),p=this.getOrCreateSession(t);if(c.length>0&&!l){var h=c.shift();delete r[h.id],h.widgetId=o,h.elementId=t,p.push(h),a[t]=p,s(h)}else i.debug("TriviaService::getNewGame -> quering server for more items..."),this.getMoreFromServer(t,o,n,function(){this.getNewGame(t,o,n,s,d)}.bind(this))},h.prototype.prepareNewGame=function(e,t,i){var o=this.translateItemToTriviaType(i);this.getPendingGamesByTriviaType(o).length>0||this.getMoreFromServer(e,t,o)},h.prototype.getMoreFromServer=function(e,o,n,s){var a=this.getOrCreateSession(e);i.debug("TriviaService::getNewGame -> quering server for more items...");var c={WidgetId:o,ElementId:e,CurrentSession:d.map(a,function(e){return e.id}),UserHistory:t.getItemsHistory(),FirstItemId:l};c=this.extendParams(c),p.getMoreContent(function(e){s&&s([])},function(e){var t,o,a,c=this.getPendingGamesByTriviaType(n);i.debug("TriviaService::getMoreFromServer -> got more items from server"),a=d.groupBy(e,"ParentId");for(var p in a)a.hasOwnProperty(p)&&(o=a[p],t=r[p],t&&!t.hasAllItems()?t.items=d.unionBy(t.items,o,"Id"):t||(t=new b(o)),l?(l=0,c.unshift(t)):c.push(t),r[p]=t);s&&s(e)}.bind(this),c)},h.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},h.prototype.clearSession=function(e){a[e]=[]},h.prototype.getOrCreateSession=function(e){var t=null;return"undefined"==typeof a[e]?(t=[],a[e]=t):t=a[e],t},h.prototype.addItem=function(e){var i=e.ParentId,o=e.Type,n=r[i];if(!t.wasItemAlreadyViewed(e))if(n)n.hasAllItems()||(n.items=d.unionBy(n.items,[e],"Id"));else{var s=new b([e]),a=this.getPendingGamesByTriviaType(this.translateItemToTriviaType(o));a.push(s),r[i]=s}},h.prototype.getAll=function(){return o},h.prototype.getPendingGamesByTriviaType=function(e){return o.hasOwnProperty(e)||(o[e]=[]),o[e]},h.prototype.translateItemToTriviaType=function(e){for(var t in s)if(s.hasOwnProperty(t)&&s[t].indexOf(e)>-1)break;return t};var m=Cbola.InContent.Layers.Item,b=function(e){m.call(this),this.id=e[0].ParentId,this.gameType=e[0].Type,this.title=this._extractGameTitleFromItems(e),this.shortTitle=this._extractShortGameTitleFromItems(e),this.items=e,this.currItemIdx=0,this.score=0,this.firstItem=e[0].Id,this.isCompleted=!1,this.historized=!1};return d.extend(b.prototype,m.prototype),b.prototype.getQuestionItem=function(e){return this.items[e]},b.prototype.getCurrentQuestionItem=function(){return this.items[this.currItemIdx]},b.prototype.getNextQuestionItem=function(){return this.items[this.currItemIdx+1]},b.prototype.getCurrentQuestionNumber=function(){return this.currItemIdx+1},b.prototype.hasEnded=function(){return this.isCompleted},b.prototype.answerCurrentQuestion=function(e){if(this.isCompleted)return null;var i=this.items[this.currItemIdx],o=!1;0===e||this.historized||(this.historized=!0,t.addItemsToHistory([this.id]));for(var n=0;n<i.Answers.length;n++){var s=i.Answers[n];if(e==s.Id){1===s.Type&&(this.score++,o=!0);break}}return this.currItemIdx++,this.isAboutToEnd()&&Cbola.InContent.Layers.Services.TriviaService.prepareNewGame(this.elementId,this.widgetId,this.gameType),this.currItemIdx===this.items.length&&(this.isCompleted=!0,this.currItemIdx=this.items.length-1),o},b.prototype.currentQuestionCorrectAnswerIdx=function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++)if(1===e.Answers[t].Type)return t},b.prototype.restart=function(){this.score=0,this.currItemIdx=0,this.isCompleted=!1},b.prototype.hasAllItems=function(){return this.gameType===Cbola.InContent.Layers.Item.Types.TRIVIA?10===this.items.length:!1},b.prototype._extractGameTitleFromItems=function(e){for(var t="",i=0;i<e.length;i++)if(!d.isEmpty(e[i].ChartTitle)){t=e[i].ChartTitle;break}return t},b.prototype._extractShortGameTitleFromItems=function(e){for(var t="",i=0;i<e.length;i++)if(!d.isEmpty(e[i].Title)){t=e[i].Title;break}return t},b.prototype.isAboutToEnd=function(){var e=this.currItemIdx+2===this.items.length;return e&&c.fire(c.Events.TRIVIA_BEFORE_END+this.id),e},new h}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TweetsService=function(){function e(e){if(o.isEmpty(e))return"";var t=Date.parse(e),i=n-t;return 0>i?"":6e4>i?o.round(i/1e3,0)+"s":36e5>i?o.round(i/6e4,0)+"m":864e5>i?o.round(i/36e5,0)+"h":2592e6>i?o.round(i/864e5,0)+"d":31104e6>i?o.round(i/2592e6,0)+"mo":o.round(i/10368e5)+"y"}function t(e){return 1e3>e?e:e>=1e3&&1e6>e?o.round(e/1e3,e>=1e5?0:1)+"k":o.round(e/1e6,e>=1e7?0:1)+"M"}var i=Cbola.InContent.Layers.Services.BasicService,o=Cbola._,n=Date.now(),s=function(){i.call(this),this.name="TweetsService"};return o.extend(s.prototype,i.prototype),s.prototype.transformServerResponse=function(i){var n=o.map(i,function(i){return i.Favs=t(i.Favs),i.Retweets=t(i.Retweets),i.elapsedTime=e(i.PostDate||""),i.HasImage=!!i.HasImage,i});return n},s.prototype.addItem=function(e,t){i.prototype.addItem.apply(this,[o.head(this.transformServerResponse([e])),t])},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.FontsManager=function(){var e=[],t=Cbola._,i=Cbola.Env,o=function(){this.windowHead=document.getElementsByTagName("head")[0];try{this.topWindowHead=window.top.document.getElementsByTagName("head")[0]}catch(e){this.topWindowHead=this.windowHead}};return o.prototype.alreadyLoaded=function(i){return t.indexOf(i,e)>-1},o.prototype.getOpenSans=function(){var e="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,300,700,800";this.loadFont(e)},o.prototype.getOswald=function(){var e="//fonts.googleapis.com/css?family=Oswald:400,700,300";this.loadFont(e)},o.prototype.getNunito=function(){var e="//fonts.googleapis.com/css?family=Nunito:500,600,300,700,400";this.loadFont(e)},o.prototype.getRoboto=function(){var e="//fonts.googleapis.com/css?family=Roboto:500,300,700,400";this.loadFont(e)},o.prototype.getKnowledge=function(){var t="http://www.reuters.com/resources_v2/fonts/Knowledge";if(!this.alreadyLoaded(t)){e.push(t);var i=document.createElement("style");i.appendChild(document.createTextNode("\n				@font-face {font-family: 'knowledge-regular';	src: url('"+t+"-Regular.woff') format('woff');	font-weight: normal; font-style: normal;}\n				@font-face {font-family: 'knowledge-medium'; src: url('"+t+"-Medium.woff') format('woff'); font-weight: normal; font-style: normal;}")),document.head.appendChild(i)}},o.prototype.getIonicons=function(){var t=i.protocol+"//code.ionicframework.com/ionicons/2.0.1/fonts/";if(!this.alreadyLoaded(t)){e.push(t);var o=document.createElement("style");o.appendChild(document.createTextNode('\n			@font-face {\n			  font-family: "Ionicons";\n			  src: url("'+t+'ionicons.eot?v=2.0.0");\n			  src: url("'+t+'ionicons.eot?v=2.0.0#iefix") format("embedded-opentype"), url("'+t+'ionicons.ttf?v=2.0.0") format("truetype"), url("'+t+'ionicons.woff?v=2.0.0") format("woff"), url("'+t+'ionicons.svg?v=2.0.0#Ionicons") format("svg");\n			  font-weight: normal;\n			  font-style: normal;\n		  }')),document.head.appendChild(o)}},o.prototype.getFontsAwesome=function(){var t=i.protocol+"//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont";if(!this.alreadyLoaded(t)){e.push(t);var o=document.createElement("style");o.appendChild(document.createTextNode("\n			@font-face {\n				font-family: 'FontAwesome';\n				src: url('"+t+".eot?v=4.3.0');\n				src: url('"+t+".eot?#iefix&v=4.3.0') format('embedded-opentype'), url('"+t+".woff2?v=4.3.0') format('woff2'), url('"+t+".woff?v=4.3.0') format('woff'), url('"+t+".ttf?v=4.3.0') format('truetype'), url('"+t+".svg?v=4.3.0#fontawesomeregular') format('svg');\n				font-weight: normal;\n				font-style: normal;\n			}")),document.head.appendChild(o)}},o.prototype.loadFont=function(t){if(this.alreadyLoaded(t))Cbola.Logger.getInstance().debug("FontsManager -> ",t," was previously loaded, no need to load again.");else{e.push(t);var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",""+i.protocol+t),this.windowHead.appendChild(o);
try{if(this.windowHead!==this.topWindowHead){var n=o.cloneNode();this.topWindowHead.appendChild(n)}}catch(s){}}},new o}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.ElementIdFactory=Cbola.Globals.ElementIdFactory||function(){var e=void 0,t=0,i=window;try{window.top.document&&(i=window.top)}catch(o){}var n=function(){};n.prototype={getGlobalElementId:function(){return t++,-1*t},getElementId:function(){return t}};try{i!==window?(i.Cbola=i.Cbola||{},i.Cbola.Globals=i.Cbola.Globals||{},i.Cbola.Globals.ElementIdFactory=i.Cbola.Globals.ElementIdFactory||new n,e=i.Cbola.Globals.ElementIdFactory):e=new n}catch(o){e=new n}return e}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Manager=function(){function e(){try{var e=window.frameElement;if(e){for(var t=e;t&&!t.classList.contains("gpt");)t=t.parentElement;t&&(t.classList.remove("hidden"),t.style.setProperty("max-height","initial","important"),t.style.setProperty("height","initial","important"),t.children[0].style.setProperty("width","initial","important"))}}catch(i){}}function t(e){for(var t=[e.Image,e.Title],o=0;o<t.length;o++)if(i.isNil(t[o]))return!1;return!0}var i=Cbola._,o=Cbola.Common.AnalyticsService,n=Cbola.Utils,s=Cbola.Logger.getInstance(),r=Cbola.Logger.Colors,a=Cbola.Config,l=Cbola.Common.TimelineService,d=Cbola.Env,c=Cbola.EventBus,p=Cbola.Enums,h=function(){this.layerByElementId={},this.layerByWidgetId={},this.inProgressByWidgetIds={},this.bind()};return h.prototype.bind=function(){var e=this;c.addEventListener(c.Events.LAYER_READY,function(t){var i=t.detail;e.onLayerReady(i)})},h.prototype.getLayerByElementId=function(e){return this.layerByElementId[e]},h.prototype.getLayerByWidgetId=function(e){return this.layerByWidgetId[e]},h.prototype.getActiveLayersCount=function(){var e=0;return i.isEmpty(this.layerByWidgetId)?0:(i.forEach(this.layerByWidgetId,function(t){(t.isAttached||t.view&&t.view.isAttached)&&e++}),e)},h.prototype.getScriptElementByWidgetId=function(e){var t=document.querySelectorAll("."+a.inContentClass);0===t.length&&(t=document.querySelectorAll("."+a.placeholderClass));for(var i=0;i<t.length;i++){var o=t[i],n=o.getAttribute("cbola_wid");if(n==e||null===n)return Cbola.Utils.dataset(o,"activeId",i),o}return null},h.prototype.init=function(a){n.CbolaSendLogsTimes("cbola_initializeInContent->Start");var l={};l.data=a,l.DefaultSettings=this.DefaultSettings=a.DefaultSettings,i.result(a,"DefaultSettings.RemoveHiddenClass",!1)&&e();var c=this.getScriptElementByWidgetId(l.data.widgetId);if(null===c)return void s.info(r.PALE_RED,"script Wasn't Found for widget id:"+l.data.widgetId);d.widgetId=l.data.widgetId;var h="true"===n.dataset(c,"manualBuild");if(h&&n.datasetRemove(c,"status"),i.isNil(n.dataset(c,"status"))){n.dataset(c,"status","started"),s.info("InContent found");var m=isNaN(l.data.widgetId)?"0":l.data.widgetId,b=Cbola.Globals.ElementIdFactory.getGlobalElementId();if(n.dataset(c,"elementId",b),l.type=i.result(l,"DefaultSettings.Layouts[0].LayoutType"),l.itemType=i.result(l,"DefaultSettings.Layouts[0].ItemType"),i.isNil(l.type)||i.isNil(l.itemType))return void s.errorM("InContentManager.init","initialize InContent layer type error");var u=h?!1:i.result(l.DefaultSettings,"outsideIframe",!1),f=new Cbola.Common.IframeBuster({outsideIframe:u,DefaultSettings:l.DefaultSettings},m,l.type);if(f.init(),"undefined"!=typeof l.DefaultSettings.LocationSelector){if(!t(l.data))return s.info("Cbola_JsonData of InContent failed"),o.SetPageRequest(p.PageRequestTypes.CORRUPTED_JSON,l.data.IsServerCall),!0;s.info("Cbola_JsonData of InContent success"),o.SetPageRequest(p.PageRequestTypes.PAGE_VIEW,l.data.IsServerCall,{outsideIframe:u})}u||(i.extend(l,{activeId:Cbola.Utils.dataset(c,"activeId"),iframeBuster:f,element:null,elementId:b,widgetId:m}),(this.layerByElementId[l.elementId]||this.layerByWidgetId[l.widgetId])&&s.errorM("InContentManager.init",r.PALE_RED,"A layer with the same element id  or same widget id already exists, this should not happen!"),this.layerByElementId[l.elementId]=l,this.inProgressByWidgetIds[m]=l,l.scriptElement=c,this.findElement(l))}n.CbolaSendLogsTimes("cbola_initializeInContent->End")},h.prototype.init=l.record(h.prototype.init,"InContentManager.init"),h.prototype.findElement=function(e){try{"undefined"!=typeof e.DefaultSettings.LocationSelector?this.attachElementToSelector(e):(s.info("There is no a selector element"),Cbola.Utils.fixPixelHeight(e.scriptElement),this.isCompatibleWidth(e))}catch(t){o.SetPageRequest(p.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),s.criticalM("InContentManager,findElement",r.PALE_RED,"failed: initialize of IC was failed at InContentManager.findElement. url: "+d.PageProperties.hostname,t)}},h.prototype.detachAllLayers=function(){var e=this;Cbola.taskManager.removeTask("checkForPendingScripts"),i.forEach(this.layerByWidgetId,function(t,o){i.isNil(t.scriptElement)||(n.datasetRemove(t.scriptElement,"status"),t.scriptElement.dataset?delete t.scriptElement.dataset.queued:t.scriptElement.removeAttribute("data-queued")),t.options.ResetOnReAttach=!0,e.detachLayerByWidgetId(o)}),Cbola.taskManager.addTask(Cbola.bootstrapper.checkForPendingScripts,[],Cbola.bootstrapper,"checkForPendingScripts")},h.prototype.detachLayerByWidgetId=function(e){Cbola.taskManager.removeTask("checkForPendingScripts");var t=this.layerByWidgetId[e];t?(Cbola.Common.AdsService.unRegisterLayerManager(t.elementId),t.detach&&t.detach(),t.view&&t.view.detach&&t.view.detach(),i.result(t,"options.ResetOnReAttach",!1)&&delete this.layerByWidgetId[e]):this.inProgressByWidgetIds.hasOwnProperty(e)&&delete this.inProgressByWidgetIds[e]},h.prototype.attachLayerByWidgetId=function(e){var t=this.layerByWidgetId[e];if(t)if(t.isAttached||t.view&&t.view.isAttached)Cbola.Common.AnalyticsService.SetPageElementRequest({layer:t,loadStatus:p.LoadStatusTypes.SAME_ID_WIDGETS}),s.info(r.PALE_RED,"There are scripts with the same wid: "+e+" already attached.");else{var i=this.getScriptElementByWidgetId(e);document.body.contains(t.topContainer)||n.after(t.topContainer,i),t.scriptElement=i,this.isCompatibleWidth(t)}else Cbola.bootstrapper.isExistingWidgetId(e)&&!this.inProgressByWidgetIds.hasOwnProperty(e)?this.resetLayer(e):Cbola.bootstrapper.checkForPendingScripts()},h.prototype.reattachLayer=function(e){this.adsProcessInit(e),e.attach&&e.attach(),e.view&&e.view.attach&&e.view.attach(e.container),c.fire(c.Events.LAYER_READY,e),e.onAfterLoad()},h.prototype.resetLayer=function(e){var t=this;Cbola.Common.RequestHandler.getPageElements(function(){},function(e){Cbola.bootstrapper.initializeServices({detail:e}),t.init(e)},p.ProductTypes.IN_CONTENT,e)},h.prototype.attachElementToSelector=function(e,t){var i=e.scriptElement,o=t||0;if(o++,o>=a.findICSelectorElementMaxRetries)return s.info("findICSelectorElement was failed. elementId:"+e.elementId),void c.fire(c.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:p.LoadStatusTypes.SELECTOR_NOT_FOUND});s.info("retry of SelectorElement for elementId:"+e.elementId+", cbola_findICSelectorElement function, retries: "+o);for(var n=0;n<e.DefaultSettings.LocationSelector.length;n++){var r=e.DefaultSettings.LocationSelector[n],l=r.SelectorValue,d=document.querySelectorAll(l);if(d.length>0){s.info("found a selector element");var h=Math.min(r.AppearancePosition,d.length-1),m=d[h];return s.info(m),1===r.LocationType?Cbola.Utils.preappend(m,i):m.appendChild(i),void this.isCompatibleWidth(e)}}s.warnM("InContentManager.attachElementToSelector","Selector element was not found"),Cbola.taskManager.addTask(this.attachElementToSelector,[e,o],this)},h.prototype.isCompatibleWidth=function(e){var t=e.scriptElement,i=this,l=Cbola.Templates.createElement("width_check.html"),c=[],h=[500,1e3,2500,5e3];t.parentNode.insertBefore(l,t.nextSibling),function t(m){try{m=m||1;for(var b=l.clientWidth,u=l,f=0;0===b&&f<=a.maxParentElementsCheckWidth&&u;)f++,c.length>=f?u=c[f-1]:(u=u.parentElement,c.push(u)),u&&(b=u.clientWidth);if(b>0)n.remove(l),m>1&&s.alwaysSendM("InContentManager.isCompatibleWidth","IC width 0 check - succeeded after attempt "+m+". url: "+d.PageProperties.hostname+", pageviewid: "+d.PageProperties.cbola_pageViewId),i.checkMinWidth(e,b);else if(h.length)setTimeout(t,h.shift(),++m);else{var g=l.offsetParent,y="Root Parent Exists: "+!!g+(g?", Parent Offset Width: "+g.clientWidth:"")+", Is Inside Iframe: "+!(window===window.top);s.errorM("InContentManager.isCompatibleWidth","IC too small - div width is 0. Parent Iterations: "+f+", "+y+", url: "+d.PageProperties.hostname+", pageviewid: "+d.PageProperties.cbola_pageViewId),o.SetPageRequest(p.PageRequestTypes.DIV_TOO_SMALL,e.data.IsServerCall,{width:0,height:l.parentElement?l.parentElement.clientHeight:0}),n.remove(l)}}catch(w){o.SetPageRequest(p.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),s.criticalM("InContentManager.isCompatibleWidth",r.PALE_RED,"failed: initialize of IC was failed at InContentManager.isCompatibleWidth. url: "+d.PageProperties.hostname,w)}}(1)},h.prototype.checkMinWidth=function(e,t){var l=this;try{var h=a.getLayerMinWidth(e.type);if(h>t){var m=i.result(e,"DefaultSettings.MaxWidthCompensation",0);if(t+=m,h>t){try{t=Math.max(e.scriptElement.parentElement.clientWidth,t)}catch(b){}if(h>t){for(var u=i.clone(a.inContentFallbackWidths);u.length>0;){if(t>=u[0])return e.fallbackMinimalWidth=u[0],Cbola.Common.RequestHandler.getPageElements(function(){},function(t){l.fallbackLayerReset(e,t)},p.ProductTypes.IN_CONTENT,e.widgetId,u[0]),this;u.shift()}return s.info(r.PALE_RED,"parent of InContent-container is too small: "+t),d.PageProperties.checkInContentLocation&&Cbola.Env.DEBUG&&n.after(e.scriptElement,Cbola.Templates.createElement("ic_container_too_small.html")),"undefined"!=typeof e.DefaultSettings.LocationSelector?(s.info("findICSelectorElement was failed. elementId:"+e.elementId),c.fire(c.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:p.LoadStatusTypes.SELECTOR_TOO_SMALL})):(s.errorM("InContentManager.checkMinWidth","ICsmall, width too small for IC. Width: "+t+", url: "+d.PageProperties.hostname+", pageviewid: "+d.PageProperties.cbola_pageViewId),o.SetPageRequest(p.PageRequestTypes.DIV_TOO_SMALL,e.data.IsServerCall,{width:t,height:e.scriptElement.parentElement?e.scriptElement.parentElement.clientHeight:0})),this}}}"undefined"==typeof e.topContainer?this.buildStructure(e):this.reattachLayer(e)}catch(b){o.SetPageRequest(p.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),s.criticalM("InContentManager.checkMinWidth",r.PALE_RED,"failed: initialize of IC was failed at InContentManager.checkMinWidth. url: "+d.PageProperties.hostname,b)}},h.prototype.fallbackLayerReset=function(e,t){if(e){Cbola.bootstrapper.initializeServices({detail:t}),e.data=t,e.DefaultSettings=t.DefaultSettings;try{e.type=e.iframeBuster.layerType=e.DefaultSettings.Layouts[0].LayoutType,e.itemType=e.DefaultSettings.Layouts[0].ItemType}catch(i){s.info("initialize InContent layer type error")}this.buildStructure(e)}else s.errorM("InContentManager.fallbackLayerReset","InContentManager.fallbackLayerReset failed to reset layer")},h.prototype.buildStructure=function(e){if("undefined"==typeof e.DefaultSettings.LocationSelector){if(!t(e.data))return s.info("Cbola_JsonData of InContent failed"),void o.SetPageRequest(p.PageRequestTypes.CORRUPTED_JSON,e.data.IsServerCall);s.info("Cbola_JsonData of InContent success"),o.SetPageRequest(p.PageRequestTypes.PAGE_VIEW,e.data.IsServerCall)}try{Cbola.InContent.Layers.Factory.createLayerContainers(e),n.after(e.scriptElement,e.topContainer),e.topContainer.style["z-index"]=Cbola.Utils.getZIndexForElement(),n.CbolaSendLogsTimes("end of InContentManager.buildStructure"),this.checkMaxElements(e)}catch(i){throw s.criticalM("InContentManager.buildStructure",r.PALE_RED,"failed: initialize of IC was failed at InContentManager.buildStructure. url: "+d.PageProperties.hostname,i),i}},h.prototype.checkMaxElements=function(e){n.CbolaSendLogsTimes("cbola_checkMaxElements");var t=e.activeId;0===a.MaxWidgets?(s.info("elementId: "+e.elementId+", fail because maxOfElements in page"),c.fire(c.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:p.LoadStatusTypes.MAX_ELEMS_REACHED})):(t<=a.MaxWidgets||0===t||a.currentElementsSum<a.MaxWidgets)&&(a.currentElementsSum++,this.fetchLayerScript(e))},h.prototype.fetchLayerScript=function(e){function t(t){e=i.extend(t,e),this.onLayerScriptFetched(e)}d.adsDisabled||this.adsProcessInit(e),Cbola.InContent.Layers.Factory.createAsync(e.type,t.bind(this))},h.prototype.onLayerScriptFetched=function(e){e?(s.info(r.PALE_GREEN,"Finished uploading layer "+e.type+": "+n.getRunTimeInMilis()),this.layerByElementId[e.elementId]=e,delete this.inProgressByWidgetIds[e.widgetId],this.layerByWidgetId[e.widgetId]=e,e.setOptions(Cbola.InContent.Layers.Options.Factory.create(e)),l.markStart("layer "+e.type+" -> init"),e.init(),l.markEnd("layer "+e.type+" -> init"),l.markStart("layer "+e.type+" -> onBeforeLoad"),e.onBeforeLoad(),l.markEnd("layer "+e.type+" -> onBeforeLoad"),l.markStart("layer "+e.type+" -> onLoad"),e.onLoad(),l.markEnd("layer "+e.type+" -> onLoad")):s.errorM("InContentManager.onLayerScriptFetched","onLayerScriptFetched "+e.type+" has not known prototype")},h.prototype.onLayerReady=function(e){n.CbolaSendLogsTimes("setVisibleLayout"),s.info(r.YELLOW,"WidgetLoad: "+Cbola.Utils.getRunTimeInSecs()+"; for elementId: "+e.elementId+"; widgetId: "+e.widgetId,e.container),e.container.classList.add("cbolaDisableTransitionOnLoad"),setTimeout(function(){e.container.classList.remove("cbolaDisableTransitionOnLoad"),e.container.style["opacity"]="1"},30),d.PageProperties.PageStatus=1,o.SetPageElementRequest({layer:e,loadStatus:p.LoadStatusTypes.SUCCESS}),this.setAdvertismentTitle(e),l.markStart("layer "+e.type+" -> onAfterLoad"),e.onAfterLoad(),l.markEnd("layer "+e.type+" -> onAfterLoad")},h.prototype.setAdvertismentTitle=function(e){var t=Cbola.Utils;if(i.result(e,"data.DefaultSettings.IncludeAdvertisementTitle",!1)&&(t.isFriendlyIframe()||!t.isInIframe())){var o=Cbola.Templates.createElement("advertisement_title.html");e.topContainer.insertBefore(o,e.container),e.iframeBuster.checkIframeDimension()}return this},h.prototype.adsProcessInit=function(e){Cbola.Common.AdsService.addSovrnBeacon?Cbola.Common.AdsService.addSovrnBeacon(e.data.DefaultSettings):s.errorM("InContentManager.adsProcessInit","Failed injecting sovrn beacon at InContentManager.adsProcessInit.");var t=new Cbola.Common.SponsoredLinks.Manager(e.elementId,e.widgetId,e.type),o=new Cbola.Common.AdTriggersManager({elementId:e.elementId,widgetId:e.widgetId,layerType:e.type,footerBackground:i.result(e.data,"DefaultSettings.FooterFixedAdBackground")}),n=new Cbola.Common.AdsPoolManager(e.elementId,e.widgetId,e.type);Cbola.Common.AdsService.registerLayerManager(o,n,t,e.elementId)},new h}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.HasViewability=function(){var e=Cbola.Utils,t=Cbola.EventBus,i=!0,o=Cbola.Logger.getInstance(),n=Cbola._,s="HasViewability",r=function(e){this.init(e)};return r.MIN_COUNT=8,r.prototype.init=function(e){this.viewabilityCheckCounter=0,this.unviewabilityCheckCounter=0,this.becameViewableAt=0,this.viewable=!1,this.element=e,this.viewId=null,this.viewableEvent=t.Events.LAYER_IS_VIEWABLE+this.elementId,this.setWindowElementForViewability(),this.isViewabilityTestable()&&this.addFocusEvents()},r.prototype.setWindowElementForViewability=function(){return this.viewportWindow=null,e.isWindowTopSupported()?this.viewportWindow=window.top:e.isInIframe()||(this.viewportWindow=window),this},r.prototype.isViewabilityTestable=function(){return!n.isNil(this.viewportWindow)},r.prototype.addFocusEvents=function(){var e=this,t={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},o=void 0,n=void 0;for(o in t)if(t.hasOwnProperty(o)&&o in document){n=t[o];break}document.hasFocus&&o in document&&!function(){var t=window.addEventListener?"addEventListener":"attachEvent",s="onfocusin"in window?"focusin":"focus",r="onfocusout"in window?"focusout":"blur",a=e.viewportWindow,l=function(e){e.type===s?setTimeout(function(){i=!document[o]&&a.document.hasFocus()},300):i=!document[o]&&a.document.hasFocus()};try{a[t](s,l),a[t](r,l),document[t](n,l)}catch(d){}}()},r.prototype.updateViewability=function(){return i?this.isViewabilityTestable()?(this.elementIsInViewport()?(this.viewabilityCheckCounter++,this.unviewabilityCheckCounter=0):(this.unviewabilityCheckCounter++,this.viewabilityCheckCounter=0),!this.viewable&&this.viewabilityCheckCounter>=Cbola.Common.HasViewability.MIN_COUNT?(this.viewId=e.getViewId(1e4,9e4),this.viewable=!0,this.onBecameViewable(Cbola.Enums.ItemViewTypes.VIEWABILITY)):this.viewable&&this.unviewabilityCheckCounter>=Cbola.Common.HasViewability.MIN_COUNT&&(this.viewId=e.getViewId(1e4,9e4),this.viewable=!1,this.onBecameUnviewable()),void Cbola.taskManager.addTask(this.updateViewability,[],this)):(this.viewable=!0,void this.onBecameViewable(Cbola.Enums.ItemViewTypes.IN_IFRAME)):(this.viewable&&(this.viewable=!1,this.onBecameUnviewable()),void Cbola.taskManager.addTask(this.updateViewability,[],this))},r.prototype.isViewable=function(){return this.viewable},r.prototype.getViewId=function(){return this.viewId},r.prototype.getViewDuration=function(){return this.viewable?e.getRunTimeInSecs()-this.becameViewableAt:this.viewableDuration},r.prototype.onBecameViewable=function(){o.info("element became viewable.",this),t.fire(this.viewableEvent),this.becameViewableAt=e.getRunTimeInSecs()},r.prototype.onBecameUnviewable=function(){o.info("element became unviewable.",this),this.viewableDuration=e.getRunTimeInSecs()-this.becameViewableAt},r.prototype.elementIsInViewport=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.originalElementHeight,r=void 0===i?this.element.getBoundingClientRect().height:i,a=t.currentElement,l=void 0===a?Cbola.Env.PageProperties.isMobile&&!n.isNil(this.container)?this.container:this.element:a,d=t.currentWindowElem,c=void 0===d?l.ownerDocument.defaultView||window:d,p=t.prevTopOffset,h=void 0===p?0:p,m="elementIsInViewport";if(!l||!c)return!1;if(n.isNil(l.offsetParent))return this instanceof Cbola.Common._AdTriggerBase==!1&&o.alwaysSendOnceM(s+"."+m,s+"::"+m+" encountered element nested in display-none container. Element Id: "+this.elementId+", Widget Id: "+this.widgetId),!1;if("hidden"===c.getComputedStyle(l).visibility)return!1;try{var b=c.scrollY?c.scrollY:c.pageYOffset,u=c.innerHeight,f=e.cumulativeOffset(l).top+h,g=r/2,y=Cbola.Env.PageProperties.isMobile||this instanceof Cbola.Common._AdTriggerBase?r/2:r/4,w=f+y>=b&&b+u>f+g;return w&&c!==this.viewportWindow?this.elementIsInViewport({originalElementHeight:r,currentElement:c.frameElement,currentWindowElem:c.parent,prevTopOffset:f-b}):w}catch(v){return!1}},r.prototype.getDocumentHeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWindow,t=e.document.body,i=e.document.documentElement;return Math.max(t.scrollHeight,i.scrollHeight,t.offsetHeight,i.offsetHeight,t.clientHeight,i.clientHeight)},r.prototype.getPixelsFromTop=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.element,n=e.cumulativeOffset(i).top;return n>this.getDocumentHeight(t)||0>n?void o.errorM("HasViewability.getPixelsFromTop","Layout out of document"):t===this.viewportWindow?n:n+this.getPixelsFromTop(t.parent,t.frameElement)},r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Base=Cbola.InContent.Layers.Base||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=function(){t.debug("Layers.Base::ctor"),this.formFactor=Cbola.InContent.Layers.FormFactors.DESKTOP};return e.extend(i.prototype,Cbola.Common.HasViewability.prototype),i.prototype.init=function(){var e=Cbola.Common.HasViewability.prototype;t.debug("Layers.Base::init"),e.init.call(this,this.container)},i.prototype.setOptions=function(e){t.debug("Layers.Base::setOptions"),this.elemProps=e,this.options=e||{}},i.prototype.applyOptions=function(){t.debug("Layers.Base::applyOptions"),e.assign(this.container.style,{"margin-top":this.options.MarginTopCover+"px","margin-bottom":this.options.MarginBottomCover+"px","padding-bottom":this.options.PaddingBottomCover+"px"})},i.prototype.onBeforeLoad=function(){t.debug("Layers.Base::onBeforeLoad")},i.prototype.onLoad=function(){t.debug("Layers.Base::onLoad")},i.prototype.onAfterLoad=function(){t.debug("Layers.Base::onAfterLoad",this),Cbola.taskManager.addTask(this.updateViewability,[],this)},i.prototype.bindEvents=function(){t.debug("Layers.Base::bindEvents")},i.prototype.unbindEvents=function(){t.debug("Layers.Base::bindEvents")},i.prototype.destoy=function(){t.debug("Layers.Base::destroy"),this.unbindEvents()},i.prototype.isMobile=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.MOBILE},i.prototype.isTablet=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.TABLET},i.prototype.isDesktop=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.DESKTOP},i.prototype.isSidebar=function(){return e.indexOf(Cbola.InContent.Layers.Types.SIDEBAR,this.type)>-1},i.prototype.isFacts=function(){return e.indexOf(Cbola.InContent.Layers.Types.FACTS,this.type)>-1},i.prototype.isTrivia=function(){return e.indexOf(Cbola.InContent.Layers.Types.TRIVIA,this.type)>-1},i.prototype.isOnThisDay=function(){return e.indexOf(Cbola.InContent.Layers.Types.ON_THIS_DAY,this.type)>-1},i.prototype.isTwitter=function(){return e.indexOf(Cbola.InContent.Layers.Types.TWITTER,this.type)>-1},i}(),Cbola.InContent.Layers.Types={FACTS:[100,101,102,110,130,131,132,133,136,152,1e3],TRIVIA:[121,120,140,1400],ON_THIS_DAY:[110,135,153,1100],DIED_ON_THIS_DAY:[134,150],DIED_ON_THIS_WEEK:[151],SIDEBAR:[130,131,132,133,134,140],TWITTER:[160]},Cbola.InContent.Layers.FormFactors={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Factory={},Cbola.InContent.Layers.Factory=function(){var e=Cbola.InContent.Layers,t=Cbola.Common.RequestHandler,i=Cbola.Common.TimelineService,o=Cbola.Logger.getInstance(),n=function(){};return n.prototype.create=function(t){o.info("Layers.Factory.create -> creating layer ",t);var i=e.TYPES_TO_NAMES_MAP[t];return Cbola._.isEmpty(i)?(o.info("LayersFactory.create","No layer prototype found for layer "+t),null):new e[i]},n.prototype.shouldFetch=function(t){var i=e.TYPES_TO_NAMES_MAP[t];return Cbola._.isNil(e[i])},n.prototype.createAsync=function(e,o){var n=Cbola.Env;if(i.markStart("Layers.Factory -> creating layer "+e),this.shouldFetch(e))if(n.DEBUG){var s=document.createElement("script");s.onload=function(){o&&o(this.create(e))}.bind(this);var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(s,r),s.src=n.clientPath+"container/layer_"+e+"/cbola_layer_"+e+"."+n.clientPathType+"js"}else t.getLayerScript(function(){},function(){i.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))}.bind(this),e);else i.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))},n.prototype.createLayerContainers=function(e){var t="";switch(e.type){case 100:case 101:case 102:case 110:case 112:t="desktop_container.html",Cbola.Utils.checkImageLoaded(e.data.Image);break;case 160:t="desktop_container.html";break;case 120:case 121:t="desktop_trivia_container.html";break;case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 140:case 150:case 151:case 152:case 153:t="sidebar_container.html";break;case 1e3:case 1100:case 1400:t="mobile_container.html";break;default:throw o.errorM("Layers.Factory.createLayerContainers","Layers.Factory->createLayerContainers failed to build container due to unknown layer type: "+e.type),new Error("Unknown layer type")}e.topContainer=Cbola.Templates.createElement(t),e.container=e.topContainer.querySelector(".in-content-container-coverage"),160===e.type&&(e.container.style["max-width"]=null),e.topContainer.setAttribute("layerType",e.type.toString()),e.topContainer.classList.add("cbola-wid-"+e.widgetId),e.topContainer.classList.add("cbola-elem-id-"+e.elementId),Cbola.Utils.isFirefox()?e.topContainer.classList.add("cbola-ua-ff"):Cbola.Utils.isIE()&&e.topContainer.classList.add("cbola-ua-ie")},new n}(),Cbola.InContent.Layers.TYPES_TO_NAMES_MAP={100:"DesktopInContentSliderFactsLayer",101:"DesktopInContentSliderReadMoreLayer",102:"DesktopFactsCoverLayer",110:"DesktopInContentSliderOnThisDayLayer",112:"DesktopOnThisDayCoverLayer",120:"DesktopTriviaLayer",121:"DesktopTriviaMultiLayer",130:"SidebarFactsLayer",131:"SidebarFactsReadMoreLayer",132:"SidebarFactsWithSliderLayer",133:"SponsoredSidebarFactsLayer",134:"SidebarDiedOnThisDayLayer",135:"SidebarOnThisDayLayer",136:"SidebarSlideshowFactsLayer",140:"SidebarTriviaLayer",150:"SlideshowDiedOnThisDayLayer",151:"SlideshowDiedOnThisWeekLayer",152:"SlideshowFactsLayer",153:"SlideshowOnThisDayLayer",160:"DesktopTwitterLayer",1e3:"MobileFactsLayer",1100:"MobileOnThisDayLayer",1400:"MobileTriviaLayer"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopFactsOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,WidgetTitleFontColor:null,InContentTitleFontColor:null,RemoveInContentHeader:null,InContentTimerBackgroundColor1:"rgb(178,42,80)",InContentTimerBackgroundColor2:"rgb(167,38,76)"},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaMultiOptions=function(){var e=Cbola._,t=(Cbola.Utils,{DesktopMultiTriviaBorderColor:null,DesktopMultiTriviaDisplayAnswerLetters:!0,DesktopMultiTriviaAdvertisementTitle:!1,MaxInContentTriviaWidth:640,DesktopMultiTriviaInGameTimerDuration:15,DesktopMultiTriviaEndGameTimerDuration:15,DesktopMultiTriviaEndGameImg:null,DesktopMultiTriviaEndGameLink:null,DesktopMultiTriviaBackgroundColor:null,DesktopMultiTriviaFontColor:null,MultiTriviaProgressFontColor:null}),i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t),e.isNil(this.MultiTriviaProgressFontColor)&&(this.MultiTriviaProgressFontColor=this.InContentThemeColor),("undefined"==typeof this.DesktopInContentMinWidth||null===this.DesktopInContentMinWidth)&&(this.DesktopInContentMinWidth=480),Cbola.Env.DEBUG};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaOptions=function(){var e=Cbola._,t={showTriviaButtonIcons:!0,TriviaColorSkin:null,inContentTriviaFloatType:null,MaxInContentTriviaWidth:650},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t),"false"==this.showTriviaButtonIcons&&(this.showTriviaButtonIcons=!1),("undefined"==typeof this.DesktopInContentMinWidth||null===this.DesktopInContentMinWidth)&&(this.DesktopInContentMinWidth=500)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileFactsOptions=function(){var e=Cbola._,t={mobileTitleImage:null,mobileTitleFontSize:null,mobileThemeColor:"#f36463",mobileAutoplayDuration:7},i=function(i,o){Cbola.InContent.Layers.Options.MobileOptions.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileOptions=function(){var e=Cbola._,t={MobileFontSize:null,MobileClippedHeight:0,MobilePaddingBottomCover:null,mobileThemeColor:"rgb(243,100,99)",mobileTitleFontSize:null,mobileFullScreen:{mode:"portrait",outsideIframe:!1},MobileInContentColorSkin:null,mobileTranslateZ:null,mobileCompressedHeight:!0,mobileShareEnabled:!0,BrandImg:null,BrandRedirect:null,mobileItemCount:null,mobileResizeCount:4},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t),this.mobileShareEnabled=Cbola.Utils.parseBool(this.mobileShareEnabled),this.mobileItemCount&&(this.mobileItemCount=parseInt(this.mobileItemCount))};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileTriviaOptions=function(){var e=Cbola._,t={MobileTriviaColorSkin:null,mobileThemeColor:"#19C2CC"},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t),Cbola.InContent.Layers.Options.MobileOptions.call(this,i,o)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.OptionsBase=function(){var e=Cbola._,t={MarginTopCover:0,MarginBottomCover:0,PaddingBottomCover:0,ShowAdAnimation:!0,DesktopInContentMinWidth:null,ResetOnReAttach:!1,SidebarTopContainerTextAlign:null,RemovePoweredByCarambola:!1},i=function(i,o){e.extend(this,i.DefaultSettings),e.defaults(this,t),(0===this.ShowAdAnimation||"false"===this.ShowAdAnimation)&&(this.ShowAdAnimation=!1),this.themeColor=e.result(i,"DefaultSettings.InContentThemeColor",null)||e.result(i,"DefaultSettings.ThemeColor","rgb(62,209,217)");var n=Cbola.Config.getLayersDefaultSize(o);this.layerHeight=n.height,this.layerWidth=n.width};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.Factory=function(){function e(e){if(i.isNil(e))return e;var o=t.getUrlParams();for(var n in e)e.hasOwnProperty(n)&&!i.isNil(o["cbola"+i.toLower(n)])&&(e[n]=o["cbola"+i.toLower(n)]);return e}var t=Cbola.Utils,i=Cbola._,o=function(){};return o.prototype.create=function(t){var i=Cbola.InContent.Layers.Options,o=null;switch(t.type){case 100:case 101:case 102:case 110:case 112:o=new i.DesktopFactsOptions(t.data,t.type);break;case 120:o=new i.DesktopTriviaOptions(t.data,t.type);break;case 121:o=new i.DesktopTriviaMultiOptions(t.data,t.type);break;case 130:case 131:case 132:case 133:case 134:o=new i.OptionsBase(t.data,t.type);break;case 135:o=new i.SidebarDiedOnOptions(t.data,t.type);break;case 136:o=new i.SlideshowOptions(t.data,t.type);break;case 140:o=new i.SidebarTriviaOptions(t.data,t.type);break;case 150:case 151:case 152:case 153:o=new i.SlideshowOptions(t.data,t.type);break;case 160:o=new i.TwitterOptions(t.data,t.type);break;case 1e3:case 1100:o=new i.MobileFactsOptions(t.data,t.type);break;case 1400:o=new i.MobileTriviaOptions(t.data,t.type);break;case 2002:case 2003:case 2004:o=new i.SponsoredLinksCoverOptions(t.data,t.type);break;default:Cbola.Logger.getInstance().warnM("OptionsFactory.create","No options prototype found for layer "+t.type),o=null}return o=e(o)},new o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarDiedOnOptions=function(){var e=Cbola._,t={
InContentTitleBGColor:null,InContentTitleFontColor:null},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarTriviaOptions=function(){var e=Cbola._,t={SbTriviaEndGameImgBottom:null,SbTriviaEndGameImgTop:null,SbTriviaScoreTextColor:null,SbTriviaEndGameImgLink:null,BrandClickTracker:null,SbTriviaEndGameClickTracker:null,SBTriviaPaddingBottomCover:25},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SlideshowOptions=function(){var e=Cbola._,t=Cbola.Utils,i={ArrowTeaser:1,SlideshowAutoplayDuration:7,SlideShowHeaderThemeColor:null,PlayboxBrandImg:null,PlayboxBrandRedirect:null,PlayboxTextualHeader:null,PlayboxReutersStyleGuide:null},o=function(o,n){Cbola.InContent.Layers.Options.OptionsBase.call(this,o,n),e.defaults(this,i),Cbola.Utils.isMobile&&(this.themeColor=e.result(o,"DefaultSettings.InContentThemeColor",e.result(o,"DefaultSettings.ThemeColor",e.result(o,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),this.ArrowTeaser=Cbola.Utils.toBool(this.ArrowTeaser),this.slideshowHeaderThemeColor=t.rgbToRgba(this.SlideShowHeaderThemeColor,.75)};return o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SponsoredLinksCoverOptions=function(){var e=Cbola._,t={EndingScreenSponsoredLinksDuration:30,InItemSponsoredLinksDuration:7,SponsoredLinksThemeColor:null,SponsoredLinksCoverBackgroundColor:"rgb(255,255,255)",SponsoredLinksCoverFontColor:"rgb(0,0,0)"},i=function(i){e.extend(this,i.DefaultSettings),e.defaults(this,t),e.isNil(this.SponsoredLinksThemeColor)&&(this.SponsoredLinksThemeColor=e.result(i,"DefaultSettings.InContentThemeColor",null)||e.result(i,"DefaultSettings.ThemeColor","rgb(183 ,17 ,94)")),Cbola.InContent.Layers.Item.Types.TWEET===e.result(i,"Items[0].Type")&&(this.SponsoredLinksThemeColor="#fff",this.SponsoredLinksCoverFontColor="#000",this.SponsoredLinksCoverBackgroundColor="#fff")};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TriviaOptions=function(){var e=Cbola._,t={HideSocialButtons:!1,BrandImg:null,BrandRedirect:null,InContentThemeColor:null,InContentThemeHoverColor:"rgb(56, 185, 193)"},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t),this.InContentThemeColor=this.InContentThemeColor||e.result(i,"DefaultSettings.ThemeColor",null)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TwitterOptions=function(){var e=Cbola._,t={TwitterColorSkin:null,TwitterBgColor:null},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t)};return i}();var cbolaStartDateFileUploaded=new Date;window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},window.Cbola.Bootstrapper=window.Cbola.Bootstrapper||function(){var e=Cbola.Utils,t=Cbola.Logger.getInstance(),i=Cbola.Config,o=Cbola.Globals,n=Cbola._,s=Cbola.Env||{},r=Cbola.EventBus,a=Cbola.Enums,l=function e(t){"beforeunload"===t.type&&window.removeEventListener("unload",e),Cbola.Common.AnalyticsService.SetPageClose()},d=function(){Cbola.Env=s||{},n.defaults(Cbola.Env,{PageProperties:{optOutCookie:!1,IsServerCall:a.isServerCallTypes.FROM_CDN,PageStatus:0,unloadAlreadyDetected:!1,startTime:new Date}}),this.firstLoad=!0,this.deferredLayerScriptTags=[],this.widgetIdArray=[]};return d.prototype.enableDebugIfNeeded=function(){var t=e.getUrlParams()["cboladebug"];if(!t){var i=Cbola.Globals.proxyElem.getAttribute("src");t=e.getParamsFromUrl(i)["cbola_d"],t||(t=!1)}if(t&&"0"!==t)t="1";else{try{t=localStorage.getItem("cbolaDebug")}catch(o){t="0"}t||(t="0")}Cbola.Env.DEBUG=1==t,Cbola.Env.DEBUG&&(Cbola.Logger.getInstance().level=Cbola.Logger.Levels.DEBUG)},d.prototype.initEnv=function(){var i=o.proxyElem.getAttribute("src");s.queryServer=e.getUrlParams()["queryserver"],s.queryServer=s.queryServer||e.getParamsFromUrl(i)["queryserver"]||"0",s.activePid=e.getUrlParams()["cbolapid"],s.activePid=s.activePid||e.getParamsFromUrl(i)["pid"],s.wid=e.getUrlParams()["wid"],s.wid=s.wid||e.getParamsFromUrl(i)["wid"],s.clientPath=e.getUrlParams()["clientpath"],s.clientPath=s.clientPath||e.getParamsFromUrl(i)["clientpath"]||"0";try{s.domainId=parseInt(e.getParamsFromUrl(i)["did"])||0}catch(n){s.domainId=0}switch(s.angularProxy=!!e.getParamsFromUrl(i)["cbolang"]||!1,s.adsDisabled=e.getUrlParams()["cbolanoads"]||!1,s.widgetLoadAlert=e.getUrlParams()["cbolaalert"]||!1,s.categoryId=e.getParamsFromUrl(i)["categoryid"]||"",s.tags=e.getParamsFromUrl(i)["tags"]||"",s.title=e.getParamsFromUrl(i)["title"]||"",s.body=e.getParamsFromUrl(i)["body"]||"",s.url=e.getParamsFromUrl(i)["pageurl"]||"",s.clientPathType="min.",s.clientPath){case"1":case"31":s.clientPath="//qa1.carambo.la/inimage/versions/";break;case"2":s.clientPath="//cdata.carambo.la/Layer/InImage/QA/cbola_platform/version_"+Cbola.Env.clientVersion+"/";break;case"3":s.clientPathType="",s.clientPath="//10.0.0.17/platform/";break;case"5":s.clientPathType="",s.clientPath="//localhost:9000/platform/";break;case"6":case"36":s.clientPathType="",s.clientPath="//localhost:9000/platform/";break;case"7":s.clientPathType="",s.clientPath="//qa1.carambo.la/inimage/versions/";break;case"12":case"11":s.clientPathType="",s.clientPath="//qa1.carambo.la/inimage/mobile/";break;case"100":s.clientPath="//qa1.carambo.la/inimage/margeversions/";break;case"110":s.clientPath="//localhost:9000/";break;case"120":s.clientPath="//10.0.0.170:9000/";break;default:s.clientPath="//cdata.carambo.la/Layer/InImage/Prod/cbola_platform/version_"+s.clientVersion+"/"}s.protocol=/^https?.*/g.test(window.location.protocol)===!1?"https:":"",s.clientPath=""+s.protocol+s.clientPath,s.IntegrationType=e.integrationTypeCheck(),s.topWindow=e.isWindowTopSupported()?window.top:window,t.info("Working Path:",s.clientPath,", QueryServer:"+s.queryServer+", ClientVer: ",s.clientVersion,", Pid: ",s.activePid)},d.prototype.init=function(){if(o.proxyElem=document.getElementById(i.proxyId),n.isNil(o.proxyElem))t.info("CbolaScriptIsMissing");else if(!o.proxyElem.getAttribute("status")||document.querySelectorAll(".cbolaExtension").length>0){if(o.proxyElem.setAttribute("status","started"),navigator.userAgent.search("MSIE 9.0")>-1)return;s.clientVersion="2.13.10.2",s.proxyId=i.proxyId,s.userId=0,this.enableDebugIfNeeded(),this.initEnv(),i.init(),"undefined"==typeof s.PageProperties.cbola_pageViewId&&(s.PageProperties.cbola_pageViewId=e.getViewId(1e4,9e4));try{if(n.isNil(s.topWindow.cbola_pageViewId))try{s.topWindow.cbola_pageViewId=s.PageProperties.cbola_pageViewId}catch(r){t.errorM("Bootstrapper.init","failed: set global variable of cbola_pageViewId outside document. url: "+s.PageProperties.hostname)}else try{s.PageProperties.cbola_pageViewId=s.topWindow.cbola_pageViewId}catch(r){65===Math.floor(100*Math.random())&&t.errorM("Bootstrapper.init","failed: set environment variable of Env.PageProperties.cbola_pageViewId from outside document. url: "+s.PageProperties.hostname,r)}}catch(r){t.errorM("Bootstrapper.init","failed: set global cbola_pageViewId outside document. url: "+s.PageProperties.hostname)}var a="first log. pid: "+Cbola.Env.activePid+", did: "+Cbola.Env.domainId;a+=n.isEmpty(Cbola.Env.wid)?", wid: 0":", wid: "+Cbola.Env.wid,a+=", abTestId: "+Cbola.Config.abTestId,a+=", pageViewId: "+s.PageProperties.cbola_pageViewId,a+=", randomLogId: "+Math.floor(899*Math.random()+100),a+=", ClientVersion: "+s.clientVersion,t.alwaysSendM("Bootstrapper.init",a),t.enableServer(),s.PageProperties.startDateFileUploaded=cbolaStartDateFileUploaded,s.PageProperties.checkInContentLocation=e.checkUrlParamExist("icshow"),s.PageProperties.mobileAccessByUrlParam=e.checkUrlParamExist("cbolamobile"),s.PageProperties.activeDomain=document.domain,t.info("Domain: "+document.domain),s.PageProperties.originalPathNameHost=e.getLowerLocationHref(),n.isArray(Cbola.Config.srcUrlEnabledDids)&&-1!==Cbola.Config.srcUrlEnabledDids.indexOf(s.domainId)&&(s.PageProperties.SrcUrl=e.getLocationHref()),s.PageProperties.hostname=e.gueryStringCutRegex(e.gueryStringCut()),s.PageProperties.noShowLayer=e.checkNoShowLayer(),s.PageProperties.secondGlobal=e.setGlobalRedirectTime(),n.isEmpty(s.url)||/^([[{])/g.test(s.url)!==!1||!function(){var e="";n.forEach({CategoryId:s.categoryId,Tags:s.tags,Title:s.title,Body:s.body},function(t,i){n.isEmpty(e)||(e+="&"),n.isEmpty(t)||(e+=i+"="+t)}),s.PageProperties.hostname=(decodeURIComponent(s.url)+(n.isEmpty(e)?"":"?"+e)).toLowerCase()}(),s.PageProperties.windowWidth=window.innerWidth,s.PageProperties.isMobile=e.isMobile(),s.PageProperties.isTablet=e.isTablet(),e.detectDeviceOrientation(),s.PageProperties.urlHashMD5=CryptoJSCbola.MD5(s.PageProperties.hostname).toString(),s.PageProperties.urlHashSHA1=CryptoJSCbola.SHA1(s.PageProperties.hostname).toString(),t.info("hostname: "+s.PageProperties.hostname),t.info("MD5 hash: "+s.PageProperties.urlHashMD5+" SHA1 hash: "+s.PageProperties.urlHashSHA1+" pid: "+Cbola.Env.activePid),this.bindEvents(),e.CbolaSendLogsTimes("initialize->end"),this.checkForPendingScripts()}else t.info("CbolaScriptAgain")},d.prototype.init=Cbola.Common.TimelineService.record(d.prototype.init,"Bootstrapper.init"),d.prototype.checkForPendingScripts=function(){var o=this,s=n.filter(document.querySelectorAll("."+i.inContentClass),function(e){return"script"===e.tagName.toLowerCase()});return 0===s.length&&(s=document.querySelectorAll("."+i.placeholderClass),0===s.length)?(Cbola.Common.AnalyticsService.SetPageRequest(a.PageRequestTypes.NO_PLACEHOLDER_FOUND,a.isServerCallTypes.FROM_CDN),void t.info(Cbola.Logger.Colors.PALE_RED,"No placeholder found in page - terminating load process")):(s=n.filter(s,function(t){return null===e.dataset(t,"queued")}),n.map(s,function(t){e.dataset(t,"queued",!0),o.deferredLayerScriptTags.push(t)}),this.deferredLayerScriptTags.length>0&&this.loadLayerFromScript(a.ProductTypes.IN_CONTENT),void((e.getRunTimeInSecs()<Cbola.Config.checkPendingICscriptsTimeLength||n.result(Cbola.Env,"PageProperties.CheckForPathChange",!1))&&Cbola.taskManager.addTask(this.checkForPendingScripts,[],this,"checkForPendingScripts")))},d.prototype.loadLayerFromScript=function(e){function i(){var e=o.proxyElem.getAttribute("mt"),t=o.proxyElem.getAttribute("mediatype"),i=o.proxyElem.getAttribute("cbola");return"ic"===e||"InContent"===t||"ic"===i?d.IN_CONTENT:null}function r(e){var t=e.getAttribute("srcurl");return n.isEmpty(t)?null:decodeURIComponent(t)}Cbola.Common.TimelineService.markStart("Bootstrapper.loadLayerFromScript");var l=void 0,d=a.ProductTypes,c=function(e,t){this.initializeServices({detail:e}),this.onPageElementsRecieved(e,t)}.bind(this);if(e===d.IN_IMAGE_PENDING)e=d.IN_IMAGE;else{var p=i();p&&(e=p)}if(0!==this.deferredLayerScriptTags.length){if(e===d.IN_CONTENT)for(;this.deferredLayerScriptTags.length>0;){var h=this.deferredLayerScriptTags.shift();l=parseInt(h.getAttribute("cbola_wid")),("undefined"==typeof l||null===l||isNaN(l))&&(l=0,h.setAttribute("cbola_wid","0")),this.isExistingWidgetId(l)?s.icManager?s.icManager.attachLayerByWidgetId(l):(Cbola.Common.AnalyticsService.SetPageElementRequest({layer:{widgetId:l},loadStatus:a.LoadStatusTypes.SAME_ID_WIDGETS}),t.info(Cbola.Logger.Colors.PALE_RED,"There are scripts with the same wid: "+l)):(this.widgetIdArray.push(l),n.isEmpty(s.PageProperties.SrcUrl)&&(s.PageProperties.SrcUrl=r(h)),Cbola.Common.RequestHandler.getPageElements(function(){},c,e,l))}else l=0,Cbola.Common.RequestHandler.getPageElements(function(){},c,e,l);Cbola.Common.TimelineService.markEnd("Bootstrapper.loadLayerFromScript")}},d.prototype.isExistingWidgetId=function(e){return this.widgetIdArray.some(function(t){return t===e})},d.prototype.bindEvents=function(){r.addEventListener(r.Events.PAGE_ELEMENTS_DATA_RECEIVED,this.initializeServices.bind(this)),r.addEventListener(r.Events.ELEMENT_SUCCESS,this.onElementSuccess.bind(this)),r.addEventListener(r.Events.ELEMENT_FAILED,this.onElementFailed.bind(this)),window.addEventListener("error",this.clientErrorReporting.bind(this)),window.addEventListener("beforeunload",l),window.addEventListener("unload",l)},d.prototype.initializeServices=function(t){var i=Cbola.InContent.Layers.Services.FactsService,o=Cbola.InContent.Layers.Services.OnThisDayService,r=Cbola.InContent.Layers.Services.DiedThisDayService,a=Cbola.InContent.Layers.Services.DiedThisWeekService,l=Cbola.InContent.Layers.Services.TriviaService,d=Cbola.InContent.Layers.Services.TweetsService,c=Cbola.Common.UserService,p=Cbola.InContent.Layers.Item.Types,h=t.detail;if(h){if(h.Language&&c.setLanguage(h.Language),h.Items&&n.get(h,"DefaultSettings.OTDIgnoreClientDate")&&o.setIgnoreClientDate(!0,h.Items[0]),h.DailyItemsCount&&(o.setTotalItemsForToday(h.DailyItemsCount),r.setTotalItemsForToday(h.DailyItemsCount),a.setTotalItemsForThisWeek(h.DailyItemsCount)),h.Items){var m=h.widgetId;h.Items=n.map(h.Items,function(e){return new Cbola.InContent.Layers.Item(e)});for(var b=0;b<h.Items.length;b++){var u=h.Items[b];u.Type===p.FACT||u.Type===p.TIP?i.addItem(u,m):u.Type===p.ON_THIS_DAY?o.addItem(u,m):u.Type===p.DIED_THIS_DAY?(r.addItem(u,m),a.addItem(u)):u.Type===p.TRIVIA||u.Type===p.TRIVIA_MULTI||u.Type===p.TRIVIA_MULTI_PAIRS?l.addItem(u):u.Type===p.TWEET&&d.addItem(u,m)}}var f=e.getParamsFromUrl(s.PageProperties.originalPathNameHost)["cbolagameset"];l.setFirstItemId(f)}},d.prototype.initializeServices=Cbola.Common.TimelineService.record(d.prototype.initializeServices,"Bootstrapper.initializeServices"),d.prototype.clientErrorReporting=function(e){try{var t={};"undefined"!=typeof e&&(t.filename=e.filename||"",t.lineno=e.lineno||"",t.colno=e.colno||"",t.message=e.message||"",t.type=e.type||"",t.filename.toLowerCase().indexOf("carambo.la")>-1&&(Cbola.Logger.getInstance().info("ER of cbola was found"),Cbola.Common.AnalyticsService.SetClientError(t)))}catch(i){}},d.prototype.onPageElementsRecieved=function(t,i){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_GREEN,"End GPE for PT "+i+": "+e.getRunTimeInMilis());var o=function(){s.icManager=s.icManager||Cbola.InContent.Manager,this.firstLoad&&(this.firstLoad=!1,this._initPlatform(t)),s.icManager.init(t)}.bind(this),r=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},a=e.getUrlParams()["cbolaloadtype"];switch(Cbola.Config.LoadType=n.result(t,"DefaultSettings.LoadType")||(a?parseInt(a):Cbola.Config.LoadType),Cbola.Config.LoadType){case 2:r(o);break;default:o()}},d.prototype.onReady=Cbola.Common.TimelineService.record(d.prototype.onReady,"Bootstrapper.onPageElementsRecieved"),d.prototype._initPlatform=function(e){var t=Cbola.Env,i=Cbola._,o=i.result(Cbola,'Templates["cbolaPlatform.css"]',null);if(t.PageProperties.Domain=i.result(e,"Domain",0),t.PageProperties.Category=i.result(e,"Category",0),t.PageProperties.PageId=i.result(e,"PageId",0),t.PageProperties.CheckForPathChange=Cbola._.result(e,"DefaultSettings.CheckForPathChange",!1)&&!t.angularProxy,null!==o)Cbola.Utils.injectMainStyle(document,o),t.topWindow!==window&&Cbola.Utils.injectMainStyle(t.topWindow.document,o);else{var n=void 0,s=document.createElement("link");s.rel="stylesheet",s.href=t.clientPath+"css/cbolaPlatform.min.css",n=document.getElementsByTagName("head")[0],n&&n.appendChild(s)}this.initOnFirstGetElements(e),!t.url&&t.PageProperties.CheckForPathChange&&Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},d.prototype._initPlatform=Cbola.Common.TimelineService.record(d.prototype._initPlatform,"Bootstrapper._initPlatform"),d.prototype.initOnFirstGetElements=function(e){if(Cbola.Env.PageProperties.noShowLayer)Cbola.Common.AnalyticsService.SetPageRequest(a.PageRequestTypes.NO_SHOW_META,e.IsServerCall),Cbola.Logger.getInstance().info("noShowLayer");else{var t=Cbola.Config;e.DefaultSettings=e.DefaultSettings||{},t.MaxWidgets=e.DefaultSettings.MaxWidgets?e.DefaultSettings.MaxWidgets:9999,t.ZIndexLayer=e.DefaultSettings.ZIndexLayer?e.DefaultSettings.ZIndexLayer:999999999;var i=n.result(e,"DefaultSettings.unitLoadTracking",null);if(i){var o=Cbola.Globals,s=document.createElement("div");s.innerHTML=i,o.proxyElem&&o.proxyElem.parentNode&&o.proxyElem.parentNode.insertBefore(s,o.proxyElem)}}},d.prototype.initOnFirstGetElements=Cbola.Common.TimelineService.record(d.prototype.initOnFirstGetElements,"Bootstrapper.initOnFirstGetElements"),d.prototype.onElementFailed=function(e){var t=e.detail;Cbola.Logger.getInstance().info("Element fail: "+t.elementId),Cbola.Logger.getInstance().info(t);try{Cbola.Common.AnalyticsService.SetPageElementRequest({elementId:t.elementId,loadStatus:t.loadStatus});var i=Cbola.InContent.Manager.getLayerByElementId(t.elementId);i&&i.parentNode&&i.parentNode.removeChild(i)}catch(o){}},d.prototype.onElementSuccess=function(e){var t=e.detail;Cbola.Logger.getInstance().info("Element success: "+t),Cbola.Config.platformSuccessId.push(t)},d.prototype.checkForPathChanges=function(){var e=Cbola.Env;e.PageProperties.originalPathNameHost!==window.location.href.toLowerCase()&&(this.resetUrlProperties(),this.resetPageProperties(),e.icManager.detachAllLayers(),this.firstLoad=!0),Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},d.prototype.resetUrlProperties=function(){s.PageProperties.originalPathNameHost=window.location.href.toLowerCase(),s.PageProperties.hostname=e.gueryStringCutRegex(e.gueryStringCut()),s.PageProperties.urlHashMD5=CryptoJSCbola.MD5(s.PageProperties.hostname).toString(),s.PageProperties.urlHashSHA1=CryptoJSCbola.SHA1(s.PageProperties.hostname).toString(),t.info("hostname: "+s.PageProperties.hostname),t.info("MD5 hash: "+s.PageProperties.urlHashMD5+" SHA1 hash: "+s.PageProperties.urlHashSHA1+" pid: "+Cbola.Env.activePid)},d.prototype.resetPageProperties=function(){s.PageProperties.startTime=new Date,s.PageProperties.cbola_pageViewId=e.getViewId(1e4,9e4),Cbola.Config.ZIndexLayers=0},d}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.PrebidAdaptor=function(){var e="cbola_prebid_code_",t=1e3,i=Cbola._,o=Cbola.Common.AnalyticsService,n=Cbola.Common.RequestHandler,s=Cbola.Logger.getInstance(),r=function(){this.pendingBidRequests=[],this.processedCodes=[]};return r.prototype={executePostBid:function(n,r){var a=this,l=window.Cbola_pbjs||{};l.que=l.que||[];var d=[];i.forEach(n,function(e){try{var t=JSON.parse(e.HBTag);t.cbolaTagObj=e,t.params.cbolaTagObj=e,d.push(t)}catch(i){s.errorM("PrebidAdaptor.getBids","failed to convert ad tag to json format")}});var c=e+i.random(10,100),p=[{code:c,sizes:[[n[0].AdWidth,n[0].AdHeight]],bids:d}];l.addAdUnits(p),l.requestBids({timeout:t,adUnitCodes:[c],bidsBackHandler:function(e){var t=Object.keys(e);i.forEach(t,function(e){if(!(a.processedCodes.indexOf(e)>=0)){a.processedCodes.push(e),s.info("Cbola_pbjs._bidsRequested:",l._bidsRequested),s.info("Cbola_pbjs._bidsReceived:",l._bidsReceived);var t=[];i.forEach(l._bidsRequested,function(o){var n=!1;if(i.forEach(l._bidsReceived,function(s){var r=i.filter(o.bids,function(t){return t.placementCode==e&&t.bidId==s.adId});if(r&&r[0]){n=!0,s.tagObj=r[0].cbolaTagObj,s.cpm&&s.cpm>0&&(s.tagObj.hb_selected_cpm=s.cpm||0,s.tagObj.Tag=s.ad||null,null==s.tagObj.Tag&&(s.tagObj.Tag='<IFRAME SRC="'+s.adUrl+'" width="'+s.width+'" height="'+s.height+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true"></IFRAME>'));var a={TagId:s.tagObj.Id,Cpm:s.cpm||0,Status:Cbola.Enums.HeaderBiddingRequestStatus.SUCCESS};t.push(a)}}),!n){if(o.bids&&o.bids[0]&&o.bids[0].cbolaTagObj)var s={TagId:o.bids[0].cbolaTagObj.Id,Cpm:0,Status:Cbola.Enums.HeaderBiddingRequestStatus.TIMEOUT};t.push(s)}}),l.removeAdUnit(e),t.length>0&&o.setHbBidRequest(t),r()}})}})},getBids:function(e,t){this.resetAdObjects(e),window.Cbola_pbjs?this.executePostBid(e,t):(this.flagStarted||(this.flagStarted=!0,n.getJsBundle(function(){this.pendingBidRequests.forEach(function(e){e[1](!1)})}.bind(this),function(){var e=this;this.pendingBidRequests.forEach(function(t){e.executePostBid.apply(e,t)})}.bind(this),"external/prebid.min.js")),this.pendingBidRequests.push([e,t]))},resetAdObjects:function(e){e.forEach(function(e){i.isNil(e.HBTag)&&(e.HBTag=e.Tag),e.Tag=e.hb_selected_cpm=null})}},new r}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.HeaderBiddingManager=function(){var e=2e3,t={prebid:Cbola.Common.PrebidAdaptor},i=function(){};return i.prototype={processTagsBatch:function(t){var i=this;return new Promise(function(o,n){i.prebid(t,function(){o(t)}),setTimeout(n,e)})},prebid:function(e,i){t.prebid.getBids(e,i)}},new i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.Factory=function(){var e=Cbola.Common.RequestHandler,t=Cbola.Logger.getInstance(),i=Cbola.Common.Ads.Writers,o=Cbola.Common.TimelineService,n={},s=Cbola._,r=function(){};return r.prototype.get=function(e){t.info("Ad.Writers.Factory.create -> creating writer type:",e);var o=i.TYPES_TO_NAMES_MAP[e];return Cbola._.isEmpty(o)?(t.info("Writers.Factory.create","No Writer prototype found for writer "+e),null):i[o]},r.prototype.shouldFetch=function(e){var t=i.TYPES_TO_NAMES_MAP[e];return s.isNil(i[t])},r.prototype.getAsync=function(i){var r=this;return s.isNil(n[i])?(n[i]=new Promise(function(n,s){r.shouldFetch(i)?(t.alwaysSend("WriterFactory.createAsync -> fetching bundle... writerType:"+i),e.getJsBundle(function(){s(new Error("couldnt fetch ad writers bundle."))},function(){o.markEnd("WriterFactory -> getting ad writers bundle for type: "+i),n(this.get(i))}.bind(r),"external/ad_writers_bundle.js")):(o.markEnd("WriterFactory -> creating writer "+i),n(r.get(i)))}),n[i]):n[i]},new r}(),Cbola.Common.Ads.Writers.TYPES_TO_NAMES_MAP={0:"IframeWriter",1:"AppendWriter",2:"PostscribeWriter",3:"IframeWriter",4:"PostscribeWriter",5:"IframeSrcdocWriter",6:"BilimbiWriter",7:"IframeWriter"},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.AppendWriter=function(){var e=function(){this.name="append"};return e.prototype.write=function(e,t,i){e.innerHTML=t},new e}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.IframeWriter=function(){function e(e){var i=document.createElement("iframe"),o="allow-scripts allow-forms allow-same-origin allow-popups";return t.chromeVersion()>=58&&(o+=" allow-top-navigation-by-user-activation"),i.setAttribute("sandbox",o),i.setAttribute("scrolling","no"),i.setAttribute("marginwidth","0"),i.setAttribute("marginheight","0"),i.setAttribute("frameborder","0"),i.style.setProperty("border","0","important"),i.style.setProperty("margin","0","important"),i.style["vertical-align"]="bottom",i.style["width"]=e.AdWidth+"px",i.style["height"]=e.AdHeight+"px",i}var t=Cbola.Utils,i=function(){this.name="iframe_write"};return i.prototype.write=function(t,i,o){var n=e(o);t.appendChild(n),n.contentDocument.open(),n.contentDocument.write("<span></span>"+i),n.contentDocument.close()},new i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdPlaceHolder=function(){var e=8e3,t=Cbola.Logger.getInstance(),i=Cbola.Common.AnalyticsService,o=Cbola.Utils,n=Cbola._,s=Cbola.Common.Ads.Writers,r=function(e,t,i){this.banner=i,this.bannerTags=[],this.id=n.random(0,1e4),this.elemId=t,this.originalAdHeight=this.adHeight=n.result(e,"TagSizeHeight",0),this.originalAdWidth=this.adWidth=n.result(e,"TagSizeWidth",0),this.currentAd={},this.nextAd={},this.stopAllRefreshes=!1,this.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.APPERANCE,this.adTagParams={},this.banner.style["height"]=this.adHeight+"px",this.banner.style["width"]=this.adWidth+"px"};r.prototype.injectAd=function(){var i=void 0,o=void 0;return n.isEmpty(this.nextAd)?this:(n.isNil(this.banner)&&(t.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, failed banner initialization"),this.stopAllRefreshes=!0),this.stopAllRefreshes?this:(i=this.currentAd=this.nextAd,o=new a(this.elemId,i,this.adTagParams),n.isEmpty(this.bannerTags)?o.setAsForward():setTimeout(this.bringToFront.bind(this),e),this.bannerTags.push(o),this.banner&&this.banner.appendChild(o.getElement()),o.injectTag(this.adInjectionTriggerType),this.bannerTagStyle(o),this))},r.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":n.result(e,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",height:this.adHeight+"px",width:this.adWidth+"px"}),this},r.prototype.extendAdTagParams=function(e){return n.extend(this.adTagParams,e),this},r.prototype.bringToFront=function(){if(this.bannerTags.length>=2){var e=this.bannerTags.shift();this.banner&&this.banner.removeChild(e.getElement()),this.bannerTags[0].setAsForward()}return this},r.prototype.getInjectionType=function(){return this.adInjectionTriggerType},r.prototype.setAdInjectionType=function(e){this.adInjectionTriggerType=e},r.prototype.isRefreshable=function(){return!this.stopAllRefreshes},r.prototype.stopRefresh=function(){this.stopAllRefreshes=!0};var a=function(e,t,i){this.elemId=e,this.adObj=t,this.editAdTag(i).buildBannerTag()};return a.prototype.editAdTag=function(e){var t=this.adObj,i=n.result(t,"Tag");return n.isNil(i)||((10===t.AdType||11===t.AdType)&&(i=o.b64_to_utf8(t.Tag)),i=o.replaceAll("[\\[{]CLIENTCB[\\]}]",n.random(1e7,9e7),i),i=o.replaceAll("[\\[{]CACHEBUSTER[\\]}]",o.getViewId(1e4,9e4),i),i=o.replaceAll("\\[ID\\]","cbola-ad-"+t.Id,i),i=o.replaceAll("{google_page_url}",Cbola.Env.PageProperties.originalPathNameHost,i),n.forEach(e,function(e,t){i=o.replaceAll(t,e,i)}),this.adTag=i),this},a.prototype.buildBannerTag=function(){if(!n.isNil(this.adTag)){var e=document.createElement("div");e.className="cbola-banner__tag cbola-banner__tag--back",e.style["height"]=n.result(this.adObj,"AdHeight",0)+"px",e.style["width"]=n.result(this.adObj,"AdWidth",0)+"px",this.bannerTag=e}return this},a.prototype.injectTag=function(e){var r=this,a=this.adObj;n.isNil(a.TagExtractionType)&&(a.TagExtractionType=Cbola.Config.extractTypeAds),s.Factory.getAsync(a.TagExtractionType).then(function(n){var s=n.name;try{var l=void 0;n.write(r.bannerTag,r.adTag,a),"undefined"!=typeof a.hb_selected_cpm&&a.hb_selected_cpm>0&&(l=a.hb_selected_cpm),i.SetAdsRequest(r.elemId,a.Id,e,l),o.dataset(r.bannerTag,"adId",a.Id),o.dataset(r.bannerTag,"cbolaTagId",a.Id),o.dataset(r.bannerTag,"cbolaMethod",s),t.info(Cbola.Logger.Colors.PALE_YELLOW,"elementId: "+r.elemId+". adId: "+a.Id+",Mode: "+a.Mode+". Ad extraction type: "+a.TagExtractionType+", selected Extraction type: "+s)}catch(d){t.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, extraction method: "+s),t.info(d)}})},a.prototype.setAsForward=function(){this.bannerTag.classList.remove("cbola-banner__tag--back"),this.bannerTag.classList.add("cbola-banner__tag--front")},a.prototype.getElement=function(){return this.bannerTag},a.prototype.setStyle=function(e){n.extend(this.bannerTag.style,e)},r}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdTriggerBase=function(){var e=Cbola.Logger.getInstance(),t=Cbola.Utils,i=Cbola._,o=Cbola.Env,n=Cbola.EventBus,s=Cbola.Common.HasViewability.prototype,r=function(e,t){this.elemId=t.elementId,this.triggerIndex=e.triggerIndex,this.Apperance=e.Apperance,this.closeBehaviors=i.result(e,"CloseBehaviors",[]),this.openBehaviors=i.result(e,"OpenBehaviors",[]),this.refreshInterval=i.result(e,"RefreshInterval"),this.tagType=i.result(e,"TagType"),this.layerType=t.layerType,this.adStructureNode=Cbola.Templates.createFragmentFromTemplate("ad_banner_structure.html",{elemId:this.elemId,apperance:this.Apperance,triggerIndex:this.triggerIndex}).querySelector(".cbola-banner-structure"),this.preload=this.adStructureNode.querySelector(".cbola-banner-preload"),this.closeTriggerButton=this.adStructureNode.querySelector(".hide-ad-button"),this.banner=this.adStructureNode.querySelector(".cbola-banner"),this.containerWrapper=t.containerWrapperNode,this.appendTo=this.containerWrapper,this.triggerStructureAppended=!1,this.initialWrapperHeight=this.wrapperHeight=t.initialWrapperHeight,Cbola.Common._AdPlaceHolder.call(this,e,this.elemId,this.banner),this.styleProperties={},this.styleClassName="cbolaApperanceStyle_"+this.elemId+"_"+e.Apperance,this.styleElements=[],this.open=!1,this.refreshedOnPSA=0,this.animationEnabled=t.animationEnabled,this.viewable=!1,this.init()};return r.prototype=Object.create(Cbola.Common._AdPlaceHolder.prototype),i.extend(r.prototype,s),r.constructor=r,r.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},r.prototype.appendTriggerStyle=function(e){var n="",s=this.styleProperties,r="cbolaApperanceStyle_"+this.Apperance+"_"+this.elemId,a=document,l=this.adStructureNode,d=void 0,c=void 0,p=void 0,h=void 0;if(i.isNil(e))d=s,c=r,p=a,h=l;else{if(!i.isObject(e.styleRules))return this;d=e.styleRules,c=i.isString(e.ruleClassName)?e.ruleClassName.replace(/(?!^)(\..*)|(?!^)(#.*)|\.|\#|\s(.*)/g,""):r+"_"+i.random(1,1e3),p=e.referencedDocument instanceof HTMLDocument?e.referencedDocument:a,h=i.isNil(e.applyOn)?l:e.applyOn}i.forEach(d,function(e,t){n+=t+": "+e+";"}),n="."+c+"{"+n+"}";var m=t.injectMainStyle(p,n);if(m.className=this.styleClassName,this.styleElements.push(m),o.topWindow!==window){var b=t.injectMainStyle(o.topWindow.document,n);b.className=this.styleClassName,this.styleElements.push(b)}return h&&h.classList.add(c),this},r.prototype.closeAnimation=function(){return this.adStructureNode.style["margin"]="0",this.open=!1,this},r.prototype.removeStyle=function(){var t=this;return setTimeout(function(){try{t.styleElements.forEach(function(e,t,i){e.parentNode.removeChild(e),delete i[t]}),t.styleElements=[]}catch(i){e.info("Failed to remove style for apperance: "+t.Apperance)}},1e3),this},r.prototype.removeStructure=function(){var t=this;return setTimeout(function(){try{t.adStructureNode.parentNode.removeChild(t.adStructureNode),delete t.adStructureNode,delete t.banner,delete t.closeTriggerButton,delete t.preload,delete t.containerWrapper,t.triggerStructureAppended=!1}catch(i){e.info("Failed to delete DOM nodes pointers for apperance: "+t.Apperance)}},1e3),this},r.prototype.toggleXButton=function(e){return i.isNil(this.closeTriggerButton)?this:(e===!0&&this.closeTriggerButton.classList.contains("cbola-fade-out")?this.closeTriggerButton.classList.remove("cbola-fade-out"):e!==!1||this.closeTriggerButton.classList.contains("cbola-fade-out")||this.closeTriggerButton.classList.add("cbola-fade-out"),this)},r.prototype.triggerElementsStyle=function(){return this},r.prototype.adScale=function(t){var o=t/this.adWidth,n=this.adHeight;return i.isNil(t)||0===t?this:o>1?(i.extend(this.banner.style,{"-webkit-transform":"scale(1)","-ms-transform":"scale(1)",transform:"scale(1)"}),this):(i.extend(this.banner.style,{
"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-o-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+o+")","-ms-transform":"scale("+o+")",transform:"scale("+o+")"}),this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth*o+"px"),this.adHeight=this.originalAdHeight*o,n-=this.adHeight,e.info("Trigger with apperance: "+this.Apperance+" for element ID: "+this.elemId+" in scale: "+o),this.containerWrapper&&(this.wrapperHeight=this.wrapperHeight-n,this.containerWrapper.style["height"]=this.wrapperHeight+"px"),this)},r.prototype.isOpen=function(){return this.open},r.prototype.isClose=function(){return!this.open},r.prototype.setOpen=function(){return this.open=!0,this},r.prototype.setClose=function(){return this.open=!1,this},r.prototype.isAppended=function(){return this.triggerStructureAppended},r.prototype.init=function(){return this.viewableEvent=""+n.Events.TRIGGER_IS_VIEWABLE+this.elemId+"_"+this.Apperance,this.viewable=!1,this.element=this.adStructureNode,this.becameViewableAt=this.viewableDuration=0,this.setWindowElementForViewability(),this},r.prototype.updateViewability=function(){if(!this.isViewabilityTestable())return this.viewable=!0,this.onBecameViewable(),this;var e=this.elementIsInViewport({originalElementHeight:this.adHeight});return e&&!this.viewable?(this.viewable=!0,this.onBecameViewable()):!e&&this.viewable&&(this.viewable=!1,this.onBecameUnviewable()),Cbola.taskManager.addTask(this.updateViewability,[],this),this},r}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAboveMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.topAdPlaceHolder:Cbola.Logger.getInstance().errorM("AboveMobile.constructor","AdTriggerAboveMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"2px",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAbovePushContent=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.appendTo=this.containerWrapper.children[0],this.styleProperties={display:"block!important",width:"100%",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto",top:"1px","z-index":"1","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(Cbola.Utils.before(this.appendTo,this.adStructureNode),this.triggerStructureAppended=!0),this},t.prototype.triggerElementsStyle=function(){var t=this,i=Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?Cbola.Config.adBelowInContentExtraMargin:0;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+i,e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-bottom":i,height:t.adHeight,opacity:"1"})},0),this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowCoverContent=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*(this.initialWrapperHeight-1)+"px",display:"block!important",opacity:"0","-webkit-transition":"margin 0.6s ease,height 0.6s ease",transition:"margin 0.6s ease,height 0.6s ease","z-index":"-1","background-color":"transparent",width:this.adWidth+"px","max-height":this.initialWrapperHeight+"px",position:"relative","margin-left":"auto","margin-right":"auto",height:this.adHeight+"px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{"margin-top":t.initialWrapperHeight+"px",opacity:"1"})},0),this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.bottomAdPlaceHolder:Cbola.Logger.getInstance().errorM("AdTriggerBelowMobile.constructor","AdTriggerBelowMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"auto",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowPushContent=function(){var e=Cbola._,t=Cbola.Config,i=function(t,i){var o=this;Cbola.Common._AdTriggerBase.call(this,t,i),this.topStartingPoint=20,this.styleProperties={display:"block!important",width:"100%",height:this.adHeight+"px",opacity:"0","background-color":"transparent",position:"absolute",top:this.topStartingPoint+"px",left:"0","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease":"none"},window.addEventListener("resize",e.debounce(function(){!e.isNil(o.containerWrapper)&&o.isOpen()&&o.adScale(o.containerWrapper.offsetWidth)},150,{leading:!1,maxWait:500,trailing:!0}))};return i.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),i.constructor=i,i.prototype.triggerElementsStyle=function(){var i=this,o=t.layouts.inContent.all.indexOf(this.layerType)>-1?t.adBelowInContentExtraMargin:t.layouts.sideBars.sidebarSlideshow.indexOf(this.layerType)>-1?t.adBelowSidebarSlideshowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+o,this.banner.style["float"]="none",this.banner.style["background-color"]="transparent",this.toggleXButton(t.layouts.inContent.all.indexOf(this.layerType)>-1&&e.result(this.currentAd,"ShowX",!1)===!0),setTimeout(function(){i.adStructureNode.style["margin-top"]=o+i.initialWrapperHeight-i.topStartingPoint+"px",i.adStructureNode.style["opacity"]="1"},0),setTimeout(function(){i.adStructureNode.style["z-index"]=10},1e3),this},i.prototype.closeAnimation=function(){return this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin"]=this.topStartingPoint+"px",this},i.prototype.injectAd=function(){return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this),this.toggleXButton(Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1&&e.result(this.currentAd,"ShowX",!1)===!0),this},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerCenterInsideUnit=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*this.adHeight+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none","z-index":"6","background-color":"rgba(255, 255, 255, 0.9)",width:"100%"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return this.triggerHeight=this.adHeight,e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!0),e.extend(t.adStructureNode.style,{margin:"auto",height:t.initialWrapperHeight,"margin-top":t.initialWrapperHeight+"px"})},0),this},t.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":"black",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerFixedFooter=function(){var e=Cbola._,t=Cbola.Env,i=function(i,o){Cbola.Common._AdTriggerBase.call(this,i,o),this.appendTo=t.topWindow.document.body,this.adStructureNode.id="cbola-footer-banner",this.styleProperties={position:"fixed",display:"block",top:"auto",left:"0",bottom:-1*this.adHeight+"px","z-index":"2147483647",height:this.adHeight+"px","-webkit-transition":this.animationEnabled?"bottom 0.9s ease":"none",transition:this.animationEnabled?"bottom 0.9s ease":"none"},e.isEmpty(o.footerBackground)?(this.styleProperties["width"]=this.adWidth+"px",this.styleProperties["margin"]="0 auto",this.styleProperties["left"]="0",this.styleProperties["right"]="0"):(this.styleProperties["width"]="100%",this.styleProperties["background-color"]=o.footerBackground)};return i.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),i.constructor=i,i.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},i.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight,bottom:"0"})},0),this},i.prototype.adScale=function(){return this},i.prototype.closeAnimation=function(){return this.adStructureNode.style["bottom"]=-1*this.adHeight+"px",this.setClose(),this},i.prototype.isViewable=function(){return!0},i.prototype.init=function(){return this},i.prototype.updateViewability=function(){return this},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItem=function(){var e=Cbola.Utils,t=Cbola._,i=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.element=this.adStructureNode=this.adStructureNode=this.banner=this.closeTriggerButton=this.title=this.containerWrapper=null,this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.spot=e.currentSpot};return i.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),i.constructor=i,i.prototype.appendTriggerStructure=function(){return this.banner=this.layer.injectAdAfterItem(this.spot),this.element=this.banner.parentElement,this.triggerStructureAppended=!0,this},i.prototype.injectAd=function(){return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this),e.dataset(this.banner,"adWidth",this.adWidth),e.dataset(this.banner,"adHeight",this.adHeight),this},i.prototype.triggerElementsStyle=function(){return this},i.prototype.bannerTagStyle=function(){return this},i.prototype.adScale=function(){return t.isUndefined(this.layer.scaleInItemAd)?-1===Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layerType)&&Cbola.Common._AdTriggerBase.prototype.adScale.call(this,this.banner.clientWidth):this.layer.scaleInItemAd(this.spot),this},i.prototype.closeAnimation=function(){return this},i.prototype.removeStyle=function(){return this},i.prototype.removeStructure=function(){return this},i.prototype.init=function(){},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItemMobile=function(){var e=function(e,t){Cbola.Common.AdTriggerInItem.call(this,e,t)};return e.prototype=Object.create(Cbola.Common.AdTriggerInItem.prototype),e.constructor=e,e.prototype.injectAd=function(){return Cbola.Common.AdTriggerInItem.prototype.injectAd.apply(this),this.layer.selfExpBackoff&&this.layer.selfExpBackoff(this.layer.fixAllAdItemsStyle,4),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInnerBanner=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layerType=t.layerType;var i=Cbola.Env.icManager.getLayerByElementId(this.elemId);this.appendTo=i.boxElem.querySelector(".cbola-slider-ad-placeholder"),Cbola.Config.layouts.sideBars.teaserBanner.indexOf(this.layerType)>-1?this.styleProperties={"box-sizing":"border-box","border-right":"1px solid rgba(171, 171, 171, 0.25)","border-left":"1px solid rgba(171, 171, 171, 0.25)",height:"250px",top:"0px",opacity:"0","margin-left":"-1px",width:"300px"}:this.styleProperties={width:"300px",opacity:"0","box-sizing":"content-box","padding-top":"0px","padding-left":"0px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!1),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight})},0),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftInsideUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=(Cbola._,function(t,i){e.call(this,t,i),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layer.type)>-1&&(this.appendTo=this.layer.boxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}});return i.prototype=Object.create(e.prototype),i.constructor=i,i.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.adStructureNode.style["margin"]="auto",e.adStructureNode.style["margin-left"]=e.adWidth+"px",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},i.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},i.prototype.adScale=function(){return this},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftOfUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola._,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",left:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",right:"auto",display:"block!important","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return e.prototype.appendTriggerStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var e=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginLeft=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){e.toggleXButton(i.result(e.currentAd,"ShowX",!1)),e.banner.style.backgroundColor="transparent",i.extend(e.adStructureNode.style,{margin:"auto",height:e.adHeight})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftPopOnUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=function(t,i){e.call(this,t,i),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layer.type)>-1&&(this.appendTo=this.layer.view.itemsBoxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:"0",display:"none","z-index":"6","background-color":this.inSlideShow?"#fff":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return i.prototype=Object.create(e.prototype),i.constructor=i,i.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.toggleXButton(!0)},2500),this.adStructureNode.style["display"]="block",this.preload.classList.add("cbola-banner-preload--active"),t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},i.prototype.closeAnimation=function(){return this.adStructureNode.style["display"]="none",this.setClose(),this},i.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},i.prototype.adScale=function(){return this},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightInsideUnit=function(){var e=function(e,t){Cbola.Common.AdTriggerLeftInsideUnit.call(this,e,t),this.styleProperties={top:"0",right:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return e.prototype=Object.create(Cbola.Common.AdTriggerLeftInsideUnit.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.banner.style["background-color"]="transparent",e.adStructureNode.style["transform"]="translateX(-"+e.adWidth+"px)",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),this},e.prototype.closeAnimation=function(){return this.adStructureNode.style["transform"]="translateX(0)",this.setClose(),this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightOfUnit=function(){var e=Cbola._,t=Cbola.Common._AdTriggerBase,i=Cbola.EventBus,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",right:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",display:"block",left:"inherit","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(t.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return t.prototype.appendTriggerStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var t=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginRight=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){t.toggleXButton(e.result(t.currentAd,"ShowX",!1)),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{margin:"auto",height:t.adHeight+"px"})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return t.prototype.removeStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdsPoolManager=function(){var e="AdsPoolManager",t="Shadow",i="_HB",o="_WF",n={DISPLAY:"DisplayAdTag",VIDEO:"VideoAdTag"},s={W300H250:"300_250",W300H251:"300_251",W728H90:"728_90",W320H50:"320_50",W728H91:"728_91",W310H260:"310_260",W400H300:"400_300",W500H300:"500_300",W630H90:"630_90",W10hH0:"10_10"},r=.2,a=Cbola._,l=Cbola.EventBus,d=Cbola.Logger.getInstance(),c=Cbola.Enums.RefreshTypes,p=Cbola.Common.HeaderBiddingManager,h={clickInvokedAds:{name:"clickInvokedAds",associatedAdModes:[Cbola.Enums.AdModes.PERFORMANCE]},timeoutInvokedAds:{name:"timeoutInvokedAds",associatedAdModes:[Cbola.Enums.AdModes.HEADER_BIDDING,Cbola.Enums.AdModes.PREMIUM,Cbola.Enums.AdModes.REGULAR]}},m=function(e,t){var i={weights:[],indices:[],currentMaxWeight:0,arraysLength:0};return a.forEach(e,function(e,o){a.isEmpty(e)||-1===t.indexOf(e.Mode)||(i.currentMaxWeight+=a.result(e,"Weight",1),i.weights.push(i.currentMaxWeight),i.indices.push(o),i.arraysLength++)}),i.arraysLength>0?i:null},b=function(e,t){for(var i=t.weights,o=t.indices,n=t.arraysLength,s=t.currentMaxWeight,r=void 0,l=void 0,d=void 0,c=[];n>1;){r=Math.floor(Math.random()*s+1),d=-1;for(var p=0,h=0;n>h;h++)i[h]>=r&&(-1===d?(d=h,l=o[h],p=a.result(e[l],"Weight",1)):i[h]-=p);i.splice(d,1),o.splice(d,1),s-=p,c.push(e[l]),n--}return"undefined"!=typeof o[0]&&o[0]>-1&&(l=o[0],c.push(e[l])),c},u=function(e,t,i){this.wid="undefined"==typeof t?0:t,this.adsPool={},this.adsMaxCapCounter={},this.elemId=e,this.pendingHeaderBiddingBatchesCounter=0,this.isReady=!1,this.adTagsExtraParams={},Cbola.Common.RequestHandler.getAds(function(){},this.init.bind(this),this.wid,e,i)},f=function(t){var i=t.AdWidth+"_"+t.AdHeight;return a.includes(s,i)||d.warnM(e+".getAdsSizeName",e+".getAdsSizeName encountered unfamiliar ad size: "+i),i};return u.prototype.init=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=void 0,n=void 0;return this.adsData=i,this.displayBeforeVideo=i.NumDisplayBeforeVideo||0,this.maxVideoAds=i.MaxVideos||0,this.maxDisplayAds=i.MaxDisplayAds,n=i.AdsForSize||[],a.forEach(n,function(e){o=f(e),t.adsPool[o]=t.adsPool[o]||{},a.forEach(e,function(e,i){a.isEmpty(e)||t.appendAdsTypeToPool(e,o,i)})}),a.isEmpty(this.adsPool)?(d.errorM(e+".init",e+".init failed to build ads pool. Widget id: "+this.wid),this):(0===this.pendingHeaderBiddingBatchesCounter&&this.dispatchAdsPoolReady(),this)},u.prototype.appendAdsTypeToPool=function(e,n,s){var r=this.adsPool[n][""+s+t+o]||[],l=this.adsPool[n][""+s+t+i]||[];a.forEach(e,function(e){e.Mode!==Cbola.Enums.AdModes.PREMIUM&&(e.IsHb?l.push(e):r.push(e))}),r.length&&(this.adsPool[n][""+s+t+o]=r),l.length&&(this.adsPool[n][""+s+t+i]=l),this.adsPool[n][s]=this.adsPool[n][s]||{},this.performHeaderBidding(e.filter(function(e){return e.IsHb}),n,s),this.shuffleAds(e.filter(function(e){return!e.IsHb}),n,s)},u.prototype.shuffleAds=function(e,t,i){this.adsPool[t][i]=this.adsPool[t][i]||{};var n=this.adsPool[t][i][o]||{};a.forEach(h,function(t){var i=t.name,o=m(e,t.associatedAdModes);if(!a.isNil(o)){n[i]=n[i]||[];var s=a.cloneDeep(b(e,o));Array.prototype.push.apply(n[i],s)}}),this.adsPool[t][i][o]=n},u.prototype.performHeaderBidding=function(e,t,o){var n=this;return a.isEmpty(e)?this:(this.adsPool[t][o][i]=this.adsPool[t][o][i]||{},a.forEach(h,function(i){var s=e.filter(function(e){return i.associatedAdModes.indexOf(e.Mode)>-1});a.isEmpty(s)||(n.pendingHeaderBiddingBatchesCounter++,p.processTagsBatch(a.cloneDeep(s)).then(function(e){n.sortHeaderBiddingResults(e,t,o,i.name).testHeaderBiddingEnded()}).catch(n.testHeaderBiddingEnded.bind(n)))}),this)},u.prototype.sortHeaderBiddingResults=function(e,t,o,n){var s=this.adsPool[t][o][i][n]||[];return Array.prototype.push.apply(s,e),this.adsPool[t][o][i][n]=s.filter(function(e){return a.result(e,"hb_selected_cpm",0)>0}).sort(function(e,t){return a.result(e,"hb_selected_cpm",0)-a.result(t,"hb_selected_cpm",0)}).reverse().map(function(e,t,i){return e.differenceFromMaxBid=(a.result(i,"[0].hb_selected_cpm",0)-a.result(e,"hb_selected_cpm",0))/a.result(i,"[0].hb_selected_cpm",1),e}),this},u.prototype.testHeaderBiddingEnded=function(){this.pendingHeaderBiddingBatchesCounter--,0===this.pendingHeaderBiddingBatchesCounter&&this.dispatchAdsPoolReady()},u.prototype.dispatchAdsPoolReady=function(){this.isReady||(this.isReady=!0,d.info(e+".init succeeded. Widget id: "+this.wid),l.fire(l.Events.ADS_POOL_MANAGER_READY+this.wid,this))},u.prototype.getAd=function(t){var i=this,o=!0,n=!0,s=f({AdWidth:t.originalAdWidth,AdHeight:t.originalAdHeight}),r=this.adsPool[s];if(a.isEmpty(r))return d.warnM(e+".getAd",e+".getAd Failed - ad pool is empty for size: "+s+". WidgetId: "+this.wid),Promise.reject(null);var l=this.selectAdBySize(r,t,o);return null!==l.nextAd?(this.onSuccessfulAdSelection(s,l,t,!n),Promise.resolve(l.nextAd)):new Promise(function(e,d){var c=l.hbBatches.map(function(e){return p.processTagsBatch(e)});Promise.all(c).then(function(l){a.forEach(l,function(e){i.sortHeaderBiddingResults(e,s,e.adType,e.adGroup)});var c=!a.isEmpty(l)&&i.selectAdBySize(r,t,o);if(null!==a.result(c,"nextAd",null))i.onSuccessfulAdSelection(s,c,t,!n),e(c.nextAd);else{var p=i.selectAdBySize(r,t,!o);null!==p.nextAd?(i.onSuccessfulAdSelection(s,p,t,n),e(p.nextAd)):d(null)}}).catch(function(){var a=i.selectAdBySize(r,t,!o);null!==a.nextAd?(i.onSuccessfulAdSelection(s,a,t,n),e(a.nextAd)):d(null)})})},u.prototype.selectAdBySize=function(t,s,r){function l(e){c.nextAd=e.nextAd,c.selectedAdType=e.selectedAdType,Array.prototype.push.apply(c.hbBatches,e.hbBatches)}var c={nextAd:null,hbBatches:[],selectedAdType:null};if(this.displayBeforeVideo<=0&&this.maxVideoAds>0){var p=n.VIDEO,h=a.result(t,"["+p+"]["+(r?i:o)+"]",{});a.isEmpty(h)||(l(this.selectAdByType(t,p,s.wasClicked,r)),c.selectedAdType=p)}else d.info(e+".getAd - skipped attempting to set video ad. WidgetId: "+this.wid+" displayBeforeVideo: "+this.displayBeforeVideo+" maxVideoAds: "+this.maxVideoAds);if(null===c.nextAd&&this.maxDisplayAds>0){var m=n.DISPLAY,b=a.result(t,"["+m+"]["+(r?i:o)+"]",{});a.isEmpty(b)||l(this.selectAdByType(t,m,s.wasClicked,r))}else 0===this.maxDisplayAds&&d.info(e+".getAd for element ID: "+this.elemId+" reached max refreshes");return null===c.nextAd&&d.warnM(e+".getAd",e+".getAd failed to get ad for element ID: "+this.elemId),c},u.prototype.selectAdByType=function(e,n,s,l){function d(){var o=a.cloneDeep(e[""+n+t+i]);o.adType=n,o.adGroup=u,o.filter(function(e){return b.associatedAdModes.indexOf(e.Mode)>-1}),a.isEmpty(o)||p.hbBatches.push(o)}var c=void 0,p={selectedAdType:n,nextAd:null,hbBatches:[]},m=e[n][l?i:o],b=h.timeoutInvokedAds,u=h.timeoutInvokedAds.name;return"undefined"!=typeof m[u]&&(c=m[u]||[],l&&a.result(c,"[0].differenceFromMaxBid",1)>r&&d()),u=h.clickInvokedAds.name,"undefined"!=typeof m[u]&&(s&&this.isClickRefreshEnabled()||a.isEmpty(c))&&(c=m[u]||[],l&&a.result(c,"[0].differenceFromMaxBid",1)>r&&d()),p.nextAd=!a.isEmpty(c)&&a.result(c,"[0].differenceFromMaxBid",r)<=r&&c.shift()||null,p},u.prototype.onSuccessfulAdSelection=function(e,t,i,o){var n=this.adsPool[e];return this.checkMaxCap(n,t.selectedAdType,t.nextAd),o&&this.checkPoolLevel(e,t.selectedAdType),this.updateCounters(i,t.selectedAdType).updateAdPlaceholder(i,t.nextAd),this},u.prototype.checkMaxCap=function(e,i,n){var s=e[""+i+t+o]||[];return n.MaxCap&&(this.adsMaxCapCounter[n.Id]?this.adsMaxCapCounter[n.Id]++:this.adsMaxCapCounter[n.Id]=1,this.adsMaxCapCounter[n.Id]===n.MaxCap&&a.remove(s,function(e){return e.Id===n.Id})),this},u.prototype.checkPoolLevel=function(i,n){var s=!0,r=this.adsPool[i],l=r[""+n+t+o]||[];return a.forEach(r[n][o],function(e){a.isEmpty(e)||(s=!1)}),s&&(this.shuffleAds(l,i,n),d.info(Cbola.Logger.Colors.PALE_YELLOW,e+".getAd reshuffled ads for size: "+i+" & type: "+n)),this},u.prototype.updateCounters=function(e,t){return e.getInjectionType()!==Cbola.Enums.AdTriggerTypes.PSA&&(t===n.VIDEO?this.maxVideoAds--:t===n.DISPLAY&&(this.displayBeforeVideo--,this.maxDisplayAds--)),this},u.prototype.updateAdPlaceholder=function(e,t){return h.clickInvokedAds.associatedAdModes.indexOf(t.Mode)>-1&&e.stopRefresh(),this},u.prototype.isClickRefreshEnabled=function(){var e=a.isNil(this.adsData.RefreshType)?c.BOTH:this.adsData.RefreshType;return e===c.BOTH||e===c.CLICK},u.prototype.isViewabilityRefreshEnabled=function(){return a.result(this.adsData,"RefreshType")===c.VIEWABILITY},u.prototype.isTimeoutRefreshEnabled=function(){var e=a.isNil(this.adsData.RefreshType)?c.BOTH:this.adsData.RefreshType;return e===c.BOTH||e===c.TIMEOUT},u.prototype.getRefreshInterval=function(){return a.result(this.adsData,"RefreshInterval")},u.prototype.getTriggersSettings=function(){return a.result(this.adsData,"TriggerSettings",[])},u.prototype.getRefreshFixedTimeClone=function(){var e=a.result(this.adsData,"RefreshFixedTime",null);return a.isArray(e)?e.slice(0):[]},u.prototype.getDelayLastScroll=function(){return 1e3*(a.result(this.adsData,"DelayLastScroll",null)||0)},u.prototype.setScriptParams=function(){var t=this,i="%%";try{a.forEach(Cbola.InContent.Manager.getLayerByElementId(this.elemId).scriptElement.attributes,function(e){e.name.startsWith("cbola_")&&(t.adTagsExtraParams[""+i+e.name.substr(6).toLowerCase()+i]=e.value)})}catch(o){this.adTagsExtraParams={},Cbola.Logger.errorM(e+".setScriptParams",e+".setScriptParams Failed")}return this},u.prototype.getScriptParams=function(){return a.isEmpty(this.adTagsExtraParams)&&this.setScriptParams(),this.adTagsExtraParams},u.prototype.setHeaderBiddingMaxDifference=function(e){r=e/100},u}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggersManager=function(){var e=Cbola.Logger.Colors.PALE_YELLOW,t=Cbola.Enums.AdOpenBehaviors,i=Cbola.Enums.AdCloseBehaviors,o=Cbola.Enums.AdTriggerTypes,n=3,s=50,r="AdTriggersManager",a=Cbola.Logger.getInstance(),l=Cbola.Common.AnalyticsService,d=Cbola.EventBus,c=Cbola.Env,p=Cbola._,h=Cbola.Config,m=Cbola.Utils,b={1:{TriggerConstructor:Cbola.Common.AdTriggerLeftInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[2,5,12]},2:{TriggerConstructor:Cbola.Common.AdTriggerCenterInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,3,5,12]},3:{TriggerConstructor:Cbola.Common.AdTriggerBelowCoverContent,requiredContainerOverflow:"visible",collidesWith:[2]},4:{TriggerConstructor:Cbola.Common.AdTriggerBelowPushContent,collidesWith:[9]},5:{TriggerConstructor:Cbola.Common.AdTriggerRightInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,12]},6:{TriggerConstructor:Cbola.Common.AdTriggerRightOfUnit,requiredContainerOverflow:"visible",
collidesWith:[7]},7:{TriggerConstructor:Cbola.Common.AdTriggerLeftOfUnit,requiredContainerOverflow:"visible",collidesWith:[6]},8:{TriggerConstructor:Cbola.Common.AdTriggerInnerBanner},9:{TriggerConstructor:Cbola.Common.AdTriggerAbovePushContent,requiredContainerOverflow:"hidden",collidesWith:[4]},12:{TriggerConstructor:Cbola.Common.AdTriggerLeftPopOnUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,5]},20:{TriggerConstructor:Cbola.Common.AdTriggerInItem},64:{TriggerConstructor:Cbola.Common.AdTriggerInItem},200:{TriggerConstructor:Cbola.Common.AdTriggerInItemMobile},204:{TriggerConstructor:Cbola.Common.AdTriggerBelowMobile},209:{TriggerConstructor:Cbola.Common.AdTriggerAboveMobile},300:{TriggerConstructor:Cbola.Common.AdTriggerFixedFooter}},u=function(e){this.layerType=e.layerType,this.wid=e.widgetId,this.elemId=e.elementId,this.wasClicked=!1,this.FREEZE=!1,this.delayFromLastScroll=0,this.pendingTriggers=[],this.activeTriggers=[],this.finishedTriggers=[],this.footerBackground=e.footerBackground,this.handlers=[],this.adsPoolReadyEventName=d.Events.ADS_POOL_MANAGER_READY+this.wid,this.adsPoolReadyEventFired=!1,this.layerReadyEventFired=!1;var t=function(e){e.type===this.layerType&&e.elementId===this.elemId&&(this.layer=e,this.adsPoolReadyEventFired?this.startAdTriggersManager():this.layerReadyEventFired=!0)}.bind(this),i=function(e){this.adsPool=e,this.layerReadyEventFired?this.startAdTriggersManager():this.adsPoolReadyEventFired=!0}.bind(this);this.handleEvent=function(e){switch(e.type){case this.adsPoolReadyEventName:i(e.detail);break;case d.Events.LAYER_READY:t(e.detail)}},d.addEventListener(this.adsPoolReadyEventName,this,!1),d.addEventListener(d.Events.LAYER_READY,this,!1)};return u.prototype.startAdTriggersManager=function(){d.removeEventListener(this.adsPoolReadyEventName,this,!1),d.removeEventListener("LayerReadyEvent",this,!1),this.containerBox=this.layer.boxElem,this.containerWrapper=this.layer.container;var e=this.layer.boxElem.getBoundingClientRect(),t=h.getLayersDefaultSize(this.layer.type);this.initialWrapperHeight=e.height||t.height,this.initialWrapperMarginLeft=this.containerWrapper.style["margin-left"]||"auto",this.initialWrapperMarginRight=this.containerWrapper.style["margin-right"]||"auto",this.initTriggers().initConditionedRefreshData().startFiringTriggers()},u.prototype.initTriggers=function(){var e=this,t=this.adsPool.getTriggersSettings();return p.forEach(t,function(t,i){var o=p.extend({},t);!p.isEmpty(o.OpenBehaviors)&&e.translateApperance(o)&&(300!==o.Apperance||c.topWindow===window.top&&!c.topWindow.document.querySelector("#cbola-footer-banner"))&&(o.triggerIndex=i,200===o.Apperance||20===o.Apperance?p.isEmpty(o.Spots)||(o.Spots.sort(function(e,t){return e-t}).filter(function(e,t,i){return t===i.indexOf(e)}),o.OpenBehaviors.splice(1,o.OpenBehaviors.length-1),o.OpenBehaviors[0].Type=1,p.forEach(o.Spots,function(t){var i={currentSpot:t};p.extend(i,o),i.OpenBehaviors=o.OpenBehaviors.slice(0),e.pushToPendingTriggers(i)})):e.pushToPendingTriggers(o))}),this},u.prototype.translateApperance=function(t){var i=void 0;return"undefined"!=typeof h.triggersDictionary[t.Apperance]&&(i=h.triggersDictionary[t.Apperance],i.supportedLayers.indexOf(this.layerType)>-1)?(t.Apperance=i.translatedTo,!0):(a.info(e,r+".translateApperance could not translate appropriate trigger apperance #"+t.Apperance+" for element Id: "+this.elemId),!1)},u.prototype.pushToPendingTriggers=function(e){if("undefined"!=typeof b[e.Apperance]){var t=void 0,i=void 0;if(i=b[e.Apperance].TriggerConstructor,!i)return this;t=new i(e,{elementId:this.elemId,containerWrapperNode:this.containerWrapper,initialWrapperHeight:this.initialWrapperHeight,layerType:this.layerType,footerBackground:this.footerBackground,animationEnabled:this.layer.options.ShowAdAnimation||this.layer.options.showAdAnimation}),t.refreshFixedTime=this.adsPool.getRefreshFixedTimeClone(),t.triggerOverflow=b[e.Apperance].requiredContainerOverflow,this.pendingTriggers.push(t)}return this},u.prototype.initConditionedRefreshData=function(){var e=this.adsPool.getDelayLastScroll();return(m.isWindowTopSupported()||!m.isInIframe()&&e>0)&&(this.prevWindowScroll=c.topWindow.scrollY||c.topWindow.pageYOffset,this.testConditionedRefreshData(Date.now()-e)),this},u.prototype.testConditionedRefreshData=function(e){var t=this,i=this.adsPool.getDelayLastScroll(),o=c.topWindow.scrollY||c.topWindow.pageYOffset,n=Math.abs(o-this.prevWindowScroll);return n>s?(this.delayFromLastScroll=i,this.prevWindowScroll=o,requestAnimationFrame(function(){t.testConditionedRefreshData(Date.now())})):(this.delayFromLastScroll=i-(Date.now()-e),requestAnimationFrame(function(){t.testConditionedRefreshData(e)})),this},u.prototype.startFiringTriggers=function(){var e=this,t=this.pendingTriggers.slice(0);return t.sort(function(e,t){return e.Apperance!==t.Apperance?e.Apperance-t.Apperance:p.isNil(e.spot)||p.isNil(t.spot)?0:e.spot-t.spot}),p.forEach(t,function(t){e.beforeActivationValidation(t)&&(e.pullTriggerFromArray(e.pendingTriggers,t,"Apperance").pushTriggerOnce(e.activeTriggers,t,"Apperance"),e.adsPool.getAd(t).then(function(i){t.nextAd=i,e.initTriggerOpening(t)}).catch(function(){a.warnM(r+".startFiringTriggers",r+".startFiringTriggers failed to load first ad for apperance: "+t.Apperance+" for element ID: "+e.elemId+" - removing appeaance"),e.removeTrigger(t)}))}),this},u.prototype.beforeActivationValidation=function(e){return!this.isActive(e,"Apperance")&&!this.isOverflowCollision(e.Apperance)&&!this.isApperanceCollision(e.Apperance)},u.prototype.initTriggerOpening=function(i){var o=i.openBehaviors.shift(),n=void 0,s=void 0;if(p.isNil(o))return a.info(e,r+".initTriggerOpening haven't found openBehavior - closing apperance: "+i.Apperance),this.removeTrigger(i);if(i.isOpen())return this;if(i.setOpen(),i.currentOpenBehavior=o,o.Type===t.TIMER||o.Type===t.VIEWABLE&&this.layer.isViewable())return a.info(r+".initTriggerOpening sent apperance: "+i.Apperance+" to open by timer"),this.openTriggerByTimer(i);switch(o.Type){case t.VIEWABLE:n=[d],s=this.layer.viewableEvent;break;case t.HOVER_ON_UNIT:n=this.containerBox,s="hover";break;case t.ENGAGEMENT:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),s="click";break;default:return this.removeTrigger(i)}return n?(a.info(e,r+".initTriggerOpening attached event: "+s+" for Apperance: "+i.Apperance),this.setOpenTriggerEventHandler(n,s,i)):(a.errorM(r+".initTriggerOpening",r+".initTriggerOpening failed to find element to attach event "+s+" for apperance: "+i.Apperance),this)},u.prototype.setOpenTriggerEventHandler=function(e,t,i){var o=this;return p.forEach(e,function(e){var n={attachedOn:e,eventType:t,relatedTrigger:i.Apperance};n.listener=function(){this.onEventOpenTrigger(n,i)}.bind(o),o.handlers.push(n),e.addEventListener(t,n.listener)}),this},u.prototype.onEventOpenTrigger=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.openTriggerByTimer(t),this},u.prototype.openTriggerByTimer=function(t){var i=this,o=t.currentOpenBehavior.Delay;return a.info(e,r+".openTriggerByTimer open apperance "+t.Apperance+" in "+o+" seconds"),setTimeout(function(){i.openTrigger(t,o>0)},1e3*o),this},u.prototype.openTrigger=function(t,i){var o=this;if(!t.isAppended()&&!this.isFinished(t)){if(this.delayFromLastScroll>200&&i)return a.info(e,"Postponing trigger appearance "+t.Apperance+" opening by "+this.delayFromLastScroll+"mil-seconds due to scrolling"),setTimeout(function(){o.openTrigger(t,i)},this.delayFromLastScroll),this;t.extendAdTagParams(this.adsPool.getScriptParams()),this.appendTrigger(t).attachClickEventHandlers(t),this.adsPool.isViewabilityRefreshEnabled()&&t.updateViewability()}return t.isAppended()&&(t.triggerElementsStyle(),p.isNil(this.layer.boxElem)||t.adScale(this.layer.boxElem.getBoundingClientRect().width),this.setWrapperHeight().setContainerOverflow().setWrapperMargin().closeTrigger(t)),this},u.prototype.appendTrigger=function(e){var t=this;return e.appendTriggerStructure().appendTriggerStyle().injectAd(),this.setNextRefreshTime(e),(e instanceof Cbola.Common.AdTriggerBelowPushContent||e instanceof Cbola.Common.AdTriggerAbovePushContent)&&this.layer.iframeBuster.checkIframeDimension(e.adHeight+h.adTitleStructureTriviaHeight),e.closeTriggerButton&&e.closeTriggerButton.addEventListener("click",function(){var i=Cbola.Enums.SetClickTypes;l.SetClick(t.elemId,e instanceof Cbola.Common.AdTriggerFixedFooter?i.FOOTER_AD_BUTTON_CLOSE:i.AD_BUTTON_CLOSE),t.removeTrigger(e)}),this},u.prototype.attachClickEventHandlers=function(t){var i=this,o=this.layer.container.querySelectorAll(".cbola-refresh-click-trigger");return p.isEmpty(o)||t instanceof Cbola.Common.AdTriggerInItem?this:(this.adsPool.isClickRefreshEnabled()||t instanceof Cbola.Common.AdTriggerLeftInsideUnit?p.forEach(o,function(e){var o={attachedOn:e,eventType:"click",relatedTrigger:t.Apperance};o.listener=function(){t.ignoreUserClick||(t.ignoreUserClick=!0,setTimeout(function(){t.ignoreUserClick=!1},1e3),t instanceof Cbola.Common.AdTriggerLeftInsideUnit?this.closeApperanceOnClick(o,t):this.refreshTriggerOnClick(o,t))}.bind(i),i.handlers.push(o),e.addEventListener("click",o.listener)}):a.info(e,"No refreshes allowed on click for element Id:"+this.elemId),this)},u.prototype.refreshTriggerAd=function(t){var i=this,o="refreshTriggerAd";return t.isRefreshable()?this.adsPool.getAd(t).then(function(e){t.nextAd=e;try{t.injectAd(),a.info(Cbola.Logger.Colors.PALE_GREEN,r+"."+o+" injected ad for apperance: "+t.Apperance)}catch(n){a.warnM(r+"."+o,r+"."+o+" failed injecting ad. stopping refreshing for trigger apperance: "+t.Apperance+" for element ID: "+i.elemId),t.stopRefresh()}}).catch(function(){t.nextAd=null,t.stopRefresh(),a.info(e,r+"."+o+" couldn't get ad. stopping refreshing for trigger apperance: "+t.Apperance+" for element ID: "+i.elemId)}):a.info(e,r+"."+o+" stopped refreshing Apperance: "+t.Apperance+" for element Id: "+this.elemId),this},u.prototype.setNextRefreshTime=function(t){var i=this,o="setNextRefreshTime",n=void 0;if(!t.isRefreshable())return a.info(e,r+"."+o+" stopped due to all refreshes stop for trigger Apperance: "+t.Apperance),this;if(this.adsPool.isViewabilityRefreshEnabled()&&!t.isViewable())return a.info(e,r+"."+o+" adding event listener pending viewability to trigger refreshing for Apperance: "+t.Apperance),this.setRefreshOnViewability(t),this;if(!this.adsPool.isTimeoutRefreshEnabled()&&!this.adsPool.isViewabilityRefreshEnabled())return a.info(e,"Refresh by timeout is not allowed for elementId: "+this.elemId),this;if(t.refreshFixedTime.length>0){var s=function(){var o=t.refreshFixedTime.shift();return t.refreshFixedTime.forEach(function(e,t,i){i[t]=e-o}),n=1e3*o,n&&n>0?(a.info(e,"Trigger apperance "+t.Apperance+" for element ID: "+i.elemId+" would try to refresh by timeout in : "+n+"mili-sec."),t.refreshTimeoutId=setTimeout(i.refreshOnTimeout.bind(i),n,t),{v:i}):void 0}();if("object"===("undefined"==typeof s?"undefined":_typeof(s)))return s.v}else if(n=t.refreshInterval||this.adsPool.getRefreshInterval(),n&&n>0)return a.info("Trigger apperance "+t.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in: "+n+"mili-sec."),t.refreshTimeoutId=t.intervalRefreshTimeoutId=setTimeout(this.refreshOnTimeout.bind(this),n,t),this;return a.warnM(r+"."+o,r+"."+o+" stopped refreshing due to inability to set nextRefreshInterval for apperance "+t.Apperance+" in element Id: "+this.elemId),t.stopRefresh(),this},u.prototype.setRefreshOnViewability=function(t){var i={attachedOn:d,eventType:t.viewableEvent,relatedTrigger:t.Apperance};return i.listener=function(){a.info(e,r+".setRefreshOnViewability removed event listener pending viewability to trigger refreshing for Apperance: "+t.Apperance),i.attachedOn.removeEventListener(i.eventType,i.listener),this.setNextRefreshTime(t)}.bind(this),this.handlers.push(i),d.addEventListener(i.eventType,i.listener),this},u.prototype.refreshOnTimeout=function(t){var i=this;return t.setAdInjectionType(o.TIMEOUT),this.delayFromLastScroll>200?(a.info(e,"Delaying trigger apperance "+t.Apperance+" refresh by "+this.delayFromLastScroll+" mil-seconds due to scrolling"),setTimeout(function(){i.refreshOnTimeout(t)},this.delayFromLastScroll)):this.refreshTriggerAd(t).setNextRefreshTime(t),this},u.prototype.refreshTriggerOnClick=function(t,i){return this.wasClicked=i.wasClicked=!0,i.isRefreshable()&&!this.isFinished(i)?(a.info(e,"Trigger apperance "+i.Apperance+" for element ID: "+this.elemId+" would try to refresh by click"),i.setAdInjectionType(o.CLICK),this.refreshTriggerAd(i),i.intervalRefreshTimeoutId&&(a.info(e,r+".refreshOnClick cleared timeout for apperance "+i.Apperance),clearTimeout(i.intervalRefreshTimeoutId),this.setNextRefreshTime(i))):(a.info(e,"Trigger apperance "+i.Apperance+" for element ID: "+this.elemId+" stops refresh by click"),t.attachedOn.removeEventListener(t.eventType,t.listener)),this},u.prototype.closeTrigger=function(t){var o=t.closeBehaviors.shift(),n=void 0,s=void 0;if(p.isNil(o))return a.info(e,"No closing behavior found for apperance: "+t.Apperance),this;if(t.isClose())return a.info(e,r+".closeTrigger trying to close already closed apperance: "+t.Apperance+" in element ID: "+this.elemId),this;if(t.currentCloseBehavior=o,o.Type===i.TIMER||o.Type===i.VIEWABLE&&this.layer.isViewable())return a.info(r+".closeTrigger sent apperance: "+t.Apperance+" to close by timer"),this.closeTriggerByTimer(t);switch(o.Type){case i.VIEWABLE:n=[d],s=this.layer.viewableEvent;break;case i.HOVER_ON_UNIT:n=this.containerBox,s="hover";break;case i.ENGAGEMENT:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),s="click";break;default:return this.removeTrigger(t)}return a.info(r+".closeTrigger attached event: "+s+" for Apperance: "+t.Apperance),this.setCloseTriggerEventHandler(n,s,t)},u.prototype.setCloseTriggerEventHandler=function(e,t,i){var o=this;return p.forEach(e,function(e){var n={attachedOn:e,eventType:t,relatedTrigger:i.Apperance};o.handlers.push(n),n.listener=function(){this.onEventCloseTrigger(n,i)}.bind(o),e.addEventListener(t,n.listener)}),this},u.prototype.onEventCloseTrigger=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.closeTriggerByTimer(t),this},u.prototype.closeTriggerByTimer=function(e){var t=this,i=e.currentCloseBehavior.Duration;return this.FREEZE?this:(setTimeout(function(){t.FREEZE||t.isFinished(e)||(e.closeAnimation(),t.initTriggerOpening(e))},1e3*i),this)},u.prototype.closeApperanceOnClick=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.wasClicked=t.wasClicked=!0,this.removeTrigger(t),this},u.prototype.removeTrigger=function(t){var i=this,o=void 0;return this.isFinished(t)?this:(this.pullTriggerFromArray(this.pendingTriggers,t).pullTriggerFromArray(this.activeTriggers,t).pushTriggerOnce(this.finishedTriggers,t).unbindTriggersEventHandlers(t.Apperance),t.closeAnimation(),t.setClose(),o=t instanceof Cbola.Common.AdTriggerLeftInsideUnit?5e3:0,a.info(e,r+".removeTrigger, removing trigger with apperance: "+t.Apperance+", in "+o+" mil-seconds"),setTimeout(function(){t.removeStyle().removeStructure(),clearTimeout(t.refreshTimeoutId),i.setWrapperHeight().setContainerOverflow().setWrapperMargin().startFiringTriggers()},o),this)},u.prototype.setWrapperHeight=function(){var e=this.initialWrapperHeight,t=this.containerWrapper.runtimeStyle||this.containerWrapper.style;return p.forEach(this.activeTriggers,function(t){e=e<t.wrapperHeight?t.wrapperHeight:e}),this.containerWrapper.offsetHeight!==e&&e>0&&!this.layer.isMobile()&&(t["height"]=e+"px"),this},u.prototype.setContainerOverflow=function(){for(var e="hidden",t=0;t<this.activeTriggers.length;t++){var i=this.activeTriggers[t];if(i.triggerOverflow){e=i.triggerOverflow;break}}return this.containerWrapper.style["overflow"]=e,this},u.prototype.setWrapperMargin=function(){for(var e=void 0,t=void 0,i=void 0,o=0;o<this.activeTriggers.length;o++){var n=this.activeTriggers[o];"undefined"!=typeof n.wrapperMarginLeft&&"auto"!==n.wrapperMarginLeft&&(e=n.wrapperMarginLeft,t="left",i="right"),"undefined"!=typeof n.wrapperMarginRight&&"auto"!==n.wrapperMarginRight&&(e=n.wrapperMarginRight,t="right",i="left")}return p.isNil(t)?(this.containerWrapper.style["margin-left"]=this.initialWrapperMarginLeft,this.containerWrapper.style["margin-right"]=this.initialWrapperMarginRight):(this.containerWrapper.style["margin-"+t]=e,"frbs61"===c.activePid&&(this.containerWrapper.style["margin-"+i]=0)),this},u.prototype.isActive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Apperance",i=function(i){return i[t]===e[t]};return"Apperance"===t&&e instanceof Cbola.Common.AdTriggerInItem&&(i=function(t){return t["Apperance"]===e["Apperance"]&&t["spot"]===e["spot"]}),!p.isNil(p.find(this.activeTriggers,i))},u.prototype.isOverflowCollision=function(e){var t=b[e].overflow;if("undefined"==typeof t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(b[o].overflow!==t)return!0}return!1},u.prototype.isApperanceCollision=function(e){var t=b[e].collidesWith;if("undefined"==typeof t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(t.indexOf(o)>-1)return!0}return!1},u.prototype.isFinished=function(e){return!p.isNil(p.find(this.finishedTriggers,function(t){return t.id===e.id}))},u.prototype.pullTriggerFromArray=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return p.remove(e,function(e){return e[i]===t[i]}),this},u.prototype.pushTriggerOnce=function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",o=0;o<e.length;o++){var n=e[o];if(n[i]===t[i]){if("Apperance"===i&&t instanceof Cbola.Common.AdTriggerInItem&&t.spot!==n.spot)continue;return this}}return e.push(t),this},u.prototype.refreshOnPSA=function(t,i){var s=this,l=parseInt(t),d=parseInt(i);return isNaN(l)||isNaN(d)?this:(p.forEach(this.activeTriggers,function(t){t.originalAdWidth===l&&t.originalAdHeight===d&&(t.refreshedOnPSA<=n?(t.refreshedOnPSA++,t.setAdInjectionType(o.PSA),s.refreshTriggerAd(t)):a.info(e,r+".refreshOnPSA has reached max refreshes for apperance "+t.Apperance))}),this)},u.prototype.freezeAdsState=function(){return this.FREEZE=!0,p.forEach(this.activeTriggers,function(e){return e.stopRefresh()}),a.warn("AdTriggersManager FREEZED ADS STATE"),this},u.prototype.endAdsProcess=function(){var t=void 0;for(this.FREEZE||this.freezeAdsState();this.pendingTriggers.length>0;)t=this.pendingTriggers[0],this.pullTriggerFromArray(this.pendingTriggers,t);for(this.unbindTriggersEventHandlers();this.activeTriggers.length>0;)t=this.activeTriggers[0],this.removeTrigger(t);return a.info(e,r+" ended"),this},u.prototype.unbindTriggersEventHandlers=function(){var e=Array.prototype.slice.call(arguments);return p.forEach(this.handlers,function(t){p.isNil(t.attachedOn)||(0===e.length||e.indexOf(t.relatedTrigger)>-1)&&t.attachedOn.removeEventListener(t.eventType,t.listener)}),this},u}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.SponsoredLinksService=function(){var e={Links:[]},t=Cbola.InContent.Layers.Services.BasicService,i=Cbola._,o=Cbola.Logger.getInstance(),n=Cbola.Common.RequestHandler,s={},r=function(){Cbola.InContent.Layers.Services.BasicService.call(this),this.name="SponsoredLinksService"};return i.extend(r.prototype,t.prototype),r.prototype.getMoreItems=function(t,r,a,l){var d=this.getOrCreateSession(t);o.debug(this.name+"::getMoreItems -> quering server for more items...");var c={WidgetId:r,ElementId:t,CurrentSession:i.map(d,function(e){return e.Id}),IsEndingScreen:-1===l};c=this.extendParams(c),n.getMoreSponsoredLinks(function(){a(e)},function(e){o.debug(this.name+"::getMoreItems -> got more items from server");var n=this.transformServerResponse(e);s[t]=i.unionBy(d,n,"Id"),a(e)}.bind(this),c)},r.prototype.clearSession=function(e){return s[e]=[],this},r.prototype.getOrCreateSession=function(e){var t=null;return"undefined"==typeof s[e]?(t=[],s[e]=t):t=s[e],t},r.prototype.transformServerResponse=function(e){return i.result(e,"Links",[])},new r}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.SponsoredLinks=Cbola.Common.SponsoredLinks||{},Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG=-1,Cbola.Common.SponsoredLinks.Manager=function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.EventBus,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];this.wid=t,this.elemId=e,this.layerType=o,this.sponsoredLinksSpots=[],this.managerReady=!1,i.addEventListener(i.Events.GET_ADS_READY+e,this.init.bind(this))};return o.prototype={init:function(o){return this.sponsoredLinksSpots=e.result(o,"detail.SponsoredLinksSpots"),!e.isNil(this.sponsoredLinksSpots)&&this.sponsoredLinksSpots.length>0?(this.managerReady=!0,i.fire(i.Events.SPONSORED_LINKS_MANAGER_READY+this.elemId,this)):t.info("SponsoredLinks.Manager.init hasn't found sponsored links spots"),this},getLinks:function(t,i){if(!this.isReady())return this;var o={ElementId:this.elemId,IsEndingScreen:-1===this.sponsoredLinksSpots[0],WidgetId:this.wid};return Cbola.Common.RequestHandler.getSponsoredLinks(function(){},function(o){var n=this.sponsoredLinksFactory(o,i,this.sponsoredLinksSpots);e.isNil(n)||t(n)}.bind(this),o),this},sponsoredLinksFactory:function(i,o){var n=e.result(i,"Links",[]);if(0!==n.length){var s=void 0;switch(i.UIType){case 1:s="LinksList";break;case 2:s=this.includeEndingScreen()?"SponsoredLinksCoverEndingScreen":"SponsoredLinksSlideshowCoverHeader";break;case 3:s="SponsoredLinksCoverSlideshow";break;case 4:s="SponsoredLinksTwitterCoverSlideshow";break;default:return null}try{return new Cbola.InContent.Components[s](i,o,this.sponsoredLinksSpots)}catch(r){t.errorM("SponsoredLinks.Manager.createLinksElementObject","SponsoredLinksPool.Manager.createLinksElementObject failed to create sponsored links element. Error: "+r)}return null}},isReady:function(){return this.managerReady},getInItemSpots:function(){return this.sponsoredLinksSpots.filter(function(e){return e!==Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG}).sort(function(e,t){return e-t})},includeEndingScreen:function(){return-1!==this.sponsoredLinksSpots.indexOf(Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG)}},o}(),Cbola.Common.AdsService=function(){var e={},t={},i={},o=Cbola.Logger.getInstance(),n=Cbola.Utils,s=n.isWindowTopSupported()?window.top:window,r={},a=!1,l=(Cbola.EventBus,function(){this.postMessageHandlerAppendded=!1});l.prototype={registerLayerManager:function(n,s,r,a){return e.hasOwnProperty(a)&&e[a]?void o.errorM("AdsService.registerLayerManager","Cbola.Common.AdsService failed, trying to assign ad triggers manager to the same element ID."):(e[a]=n,t[a]=s,void(i[a]=r))},unRegisterLayerManager:function(o){e.hasOwnProperty(o)&&e[o]&&(e[o].endAdsProcess(),delete e[o],delete t[o],delete i[o])},getTriggersManagerByElementId:function(t){return e[t]},getAllTriggersManagers:function(){return e},getAdsPoolByElementId:function(e){return t[e]},getSponsoredLinksManagerByElementId:function(e){return i[e]},refreshOnPSA:function(t,i){for(var o in e)e.hasOwnProperty(o)&&e[o].refreshOnPSA(t,i)},freezeAds:function(){for(var t in e)e.hasOwnProperty(t)&&e[t].freezeAdsState()},freezeAdsByElementId:function(t){e.hasOwnProperty(t)&&e[t]&&e[t].freezeAdsState()},addToTopMostWindow:function(){if(!this.postMessageHandlerAppendded){this.postMessageHandlerAppendded=!0;var e=this.generateGetMessageScript();s.document.head.appendChild(e)}},addSovrnBeacon:function(e){try{if(!a&&e&&e.SovrnBeaconSrc&&e.SovrnBeaconId){a=!0;var t=s.document.createElement("script");t.id=e.SovrnBeaconId;var i=s.document.getElementsByTagName("head")[0];i&&(i.appendChild(t),t.src=e.SovrnBeaconSrc)}}catch(n){o.alwaysSendM("AdsService.addSovrnBeacon","Sovrn beacon injection failed.")}},generateGetMessageScript:function(){var e=document.createElement("script");return e.textContent='window[window.addEventListener ? "addEventListener" : "attachEvent"](((window.addEventListener ? "addEventListener" : "attachEvent" )== "attachEvent" ? "onmessage" : "message"),function(e) {try{if(typeof e.data==="string" && e.data.indexOf("cbolaPostM")!=-1){var cbolaDataString=e.data;var cbolaAdWidth=cbolaDataString.substring(cbolaDataString.indexOf("width=")+6,cbolaDataString.indexOf(",height="));var cbolaAdHeight=cbolaDataString.substring(cbolaDataString.indexOf(",height=")+8);if(typeof window.Cbola.Common.AdsService !== "undefined") {window.Cbola.Common.AdsService.refreshOnPSA(cbolaAdWidth,cbolaAdHeight);}}}catch(er){console.log(er);console.log(e);}},false);',e}};try{s!==window?(s.Cbola=s.Cbola||{},s.Cbola.Common=s.Cbola.Common||{},s.Cbola.Common.AdsService=s.Cbola.Common.AdsService||new l,r=s.Cbola.Common.AdsService):r=new l}catch(d){r=new l,o.errorM("Cbola.Common.AdService","Failed to add AdService initialization process")}try{r.addToTopMostWindow()}catch(c){o.errorM("Cbola.Common.AdService","Failed to add postMessage on top window")}return r}(),Cbola&&Cbola.bootstrapper?(Cbola.Common.TimelineService.mark("reinitialization of carambola.min.js"),Cbola.Logger.getInstance().info("Bootstrapper is already loaded")):(Cbola.Common.TimelineService.markStart("First time initialization carambola.min.js"),Cbola.bootstrapper=new Cbola.Bootstrapper,Cbola.taskManager=Cbola.TaskManager,Cbola.bootstrapper.init(),Cbola.Common.TimelineService.markEnd("First time initialization carambola.min.js"));
"use strict";Cbola.Styles["cbola_layer_121.css"]="ul.cbola-d-trivia-multi__answers-list{list-style-type:none;padding:2px 0 0!important;margin:0!important;width:100%;height:100%;-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in;position:absolute}ul.cbola-d-trivia-multi__answers-list li.cbola-d-trivia-multi__answer{width:98%;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;padding:0}ul.cbola-d-trivia-multi__three-answers li.cbola-d-trivia-multi__answer{margin:0 0 8px 2px}ul.cbola-d-trivia-multi__four-answers li.cbola-d-trivia-multi__answer{margin:0 0 4px 2px}ul.cbola-d-trivia-multi__four-answers-pairs{font-size:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer{display:inline-block;width:48%;height:56px}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer:nth-child(2n+1){margin-right:2.5%}.cbola-d-trivia-multi__answer:last-child{margin-bottom:0}.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:rgba(183 ,17 ,94 ,.5)}p.cbola-d-trivia-multi__answer-desc{margin:0!important;font-family:Roboto,Oswald,sans-serif;font-size:13px;color:#282828;background-color:#F4F4F4;vertical-align:middle;border-bottom-left-radius:2px;border-top-left-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 1px 0 rgba(0,0,0,.1);cursor:pointer;overflow:hidden;padding:0;text-align:center}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc{text-align:left}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc{height:24px;line-height:24px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc,.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{padding-left:6px;text-align:left}.cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc{height:46px;line-height:46px;border-radius:6px}.cbola-d-trivia-multi-md p.cbola-d-trivia-multi__answer-desc{font-size:12px}.cbola-d-trivia-multi-sm p.cbola-d-trivia-multi__answer-desc{font-size:11px}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc:before{text-transform:uppercase;display:inline-block;color:rgba(183 ,17 ,94 ,1);font-family:'Open Sans',sans-serif;font-size:14px;font-weight:700;vertical-align:top;text-align:center;width:10%;max-width:20px;margin-right:4px;box-sizing:border-box;border-bottom-left-radius:2px;border-top-left-radius:2px;margin-left:2px}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc:before{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc:before{height:24px;line-height:24px}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(1) .cbola-d-trivia-multi__answer-desc:before{content:'a'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(2) .cbola-d-trivia-multi__answer-desc:before{content:'b'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(3) .cbola-d-trivia-multi__answer-desc:before{content:'c'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(4) .cbola-d-trivia-multi__answer-desc:before{content:'d'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{height:20px;width:20px;margin-top:13px;border:1px solid rgba(183 ,17 ,94 ,1);border-radius:50%;line-height:1.3em}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{width:0;box-sizing:border-box;height:30px;margin-top:0;margin-left:0;padding-left:0;border-top-left-radius:0;border-bottom-left-radius:0;border-bottom:30px solid transparent;content:' '!important}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:before{position:absolute;color:#fff;text-transform:uppercase;font-family:'Open Sans',sans;font-size:14px;font-weight:600;line-height:1.1em;padding-left:4px}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(1):before{content:'a'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(2):before{content:'b'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(3):before{content:'c'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(4):before{content:'d'}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc{background-color:#33cf4d;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc{background-color:#727272;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade{opacity:.3}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade:hover p.cbola-d-trivia-multi__answer-desc{background-color:#F4F4F4!important}.cbola-d-trivia-multi_image-loader{height:100%;width:100%;position:absolute;-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in;z-index:1}.cbola-d-trivia-multi__image{height:100%;width:100%;position:relative;background-position-x:50%;background-position-y:-1%;background-size:auto;background-repeat:no-repeat;background-color:transparent}.cbola-d-trivia-multi__image--prev{-webkit-transform:translateX(-101%);transform:translateX(-101%)}.cbola-d-trivia-multi__image--active{-webkit-transform:translateX(0);transform:translateX(0)}.cbola-d-trivia-multi__image--next{-webkit-transform:translateX(101%);transform:translateX(101%)}div.cbola-d-trivia-multi__question{position:absolute;overflow:hidden;height:100%;width:100%}.cbola-d-trivia-multi__question p{font-size:14px;color:#fff;font-family:'Open Sans',sans-serif!important;margin:-2px 0 0!important;padding:0!important;font-weight:400!important;line-height:normal;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__question p,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__question p{font-size:13px;margin:0!important;line-height:16px}.cbola-d-trivia-multi__answer-list-container .cbola-sponsored-links-list{position:absolute;padding:2px 0 0!important;margin:0!important}.cbola-d-trivia-multi__answer-list-container .cbola-sponsored-links-list__item{padding:0!important;margin:0 0 4px 2px!important;display:inline-block;width:98%}.cbola-d-trivia-multi__answer-list-container a.cbola-sponsored-link .cbola-sponsored-link__description{margin:0!important;font-family:Roboto,Oswald,sans-serif;font-size:13px!important;font-weight:400;color:#282828!important;background-color:#F4F4F4;vertical-align:middle;border-bottom-left-radius:2px;border-top-left-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 1px 0 rgba(0,0,0,.1);cursor:pointer;overflow:hidden;padding-left:6px;text-align:left;height:24px;line-height:24px;display:block}.cbola-d-trivia-multi__answer-list-container a.cbola-sponsored-link:hover .cbola-sponsored-link__description{background-color:rgba(183 ,17 ,94 ,.5)}.cbola-d-trivia-multi__answer-list-container .cbola-d-trivia-multi-md a.cbola-sponsored-link .cbola-sponsored-link__description{font-size:12px}.cbola-d-trivia-multi__answer-list-container .cbola-d-trivia-multi-sm a.cbola-sponsored-link .cbola-sponsored-link__description{font-size:11px}.cbola-d-trivia-multi *{box-sizing:border-box}.cbola-d-trivia-multi{width:100%;height:250px;position:relative;box-sizing:border-box;margin:0 auto;z-index:5;border:1px solid #ededed;overflow:hidden}.cbola-d-trivia-multi__body{width:100%;height:100%;position:relative;background-color:#fff}.cbola-d-trivia-multi__game{width:53.2%;max-width:calc(638px * .532);min-width:calc(478px * .532);height:100%;float:left;position:relative;z-index:10;-webkit-transition:opacity .6s ease;transition:opacity .6s ease}h2.cbola-d-trivia-multi__game-header{color:rgba(183,17,94,1);background-color:#fff;font-size:18px!important;font-weight:400!important;line-height:25px;font-family:Oswald,'Open Sans',sans-serif!important;letter-spacing:0;text-transform:uppercase!important;height:62px!important;margin:0!important;padding:8px 10px 5px 8px;text-align:left!important;overflow:hidden;-webkit-transition:opacity .6s ease-in;transition:opacity .6s ease-in;border:0}.cbola-d-trivia-multi-md h2.cbola-d-trivia-multi__game-header{font-size:16px!important}.cbola-d-trivia-multi-sm h2.cbola-d-trivia-multi__game-header{font-size:15px!important}h2.cbola-d-trivia-multi__game-header-game-end{color:#7b7b7b;opacity:.3}.cbola-d-trivia-multi__item-container{margin-left:8px;text-align:left}.cbola-d-trivia-multi__question-wrapper{width:105%;height:60px;padding-left:10px;border-radius:2px;overflow:visible!important;text-align:left!important;background:-webkit-linear-gradient(left,rgba(183,17,94,1) 0,rgba(184,17,94,1) 73%,rgba(184,17,94,.5) 100%);background:-webkit-linear-gradient(left, rgba(183,17,94,1) 0, rgba(184,17,94,1) 73%, rgba(184,17,94,.5) 100%);background:linear-gradient(to right,rgba(183,17,94,1) 0,rgba(184,17,94,1) 73%,rgba(184,17,94,.5) 100%)}.cbola-d-trivia-multi__question-wrapper:after{content:' ';position:absolute;width:0;height:0;left:21px;top:60px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid rgba(183,17,94,1)}.cbola-d-trivia-multi__question-container{width:calc(100% - 75px);height:100%;margin:0 5px 0 0!important;position:relative;overflow:hidden}.cbola-d-trivia-multi__answer-list-wrapper{width:95%;height:120px;padding-top:8px;position:relative;margin:0 5% 0 0;overflow:hidden}.cbola-d-trivia-multi__answer-list-container{width:100%;height:100%;overflow:hidden;margin:0;position:relative;text-align:left}.cbola-d-trivia-multi__next-game{position:absolute;top:8px;left:0;height:100%;width:100%;background-color:rgba(255,255,255,.8);opacity:1;-webkit-transition:opacity .6s ease;transition:opacity .6s ease}.cbola-d-trivia-multi__start-next-button{position:absolute;top:calc(36% - 9px);left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:19px;font-weight:700;font-family:Oswald,'Open Sans',sans-serif;color:#fff;background-color:rgba(183,17,94,1);width:66%;padding:4px 0;text-transform:uppercase;cursor:pointer;text-align:center}.cbola-d-trivia-multi__start-next-button:hover{box-shadow:0 0 1px 3px #fff,0 0 1px 5px rgba(183,17,94,.5)}.cbola-page-item{-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in}.cbola-page-item--prev{-webkit-transform:translateX(-500px);transform:translateX(-500px)}.cbola-page-item--active{-webkit-transform:translateX(0);transform:translateX(0)}.cbola-page-item--next{-webkit-transform:translateX(500px);transform:translateX(500px)}.cbola-d-trivia-multi__content-wrapper{width:46.8%;max-width:calc(638px * .468);min-width:calc(478px * .468);height:100%;z-index:1;float:right;position:relative}.cbola-d-trivia-multi__image-wrapper{width:100%;height:100%;overflow:hidden;position:relative;z-index:1}.cbola-d-trivia-multi__share{position:absolute;right:0;top:0;height:30px;width:80px;padding-top:6px;font-size:18px;z-index:100;background:-webkit-linear-gradient(left,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);background:-webkit-linear-gradient(left, rgba(0,0,0,0) 0, rgba(0,0,0,0) 1%, rgba(0,0,0,.35) 100%);background:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.cbola-d-trivia-multi__share .cbola-fa{color:#fff;float:right;margin-right:5px;cursor:pointer}.cbola-d-trivia-multi__share .cbola-fa-facebook:hover{color:#3b5998}.cbola-d-trivia-multi__share .cbola-fa-twitter:hover{color:#3cf}.cbola-d-trivia-multi_image-container{width:100%;height:100%;position:relative;overflow:hidden}.cbola-d-trivia-multi-game-end{width:100%;height:100%;position:absolute;background-color:transparent;top:-100%;-webkit-transition:-webkit-transform .55s ease;transition:transform .55s ease;z-index:100;color:#fff;box-shadow:inset 10px 10px 100px 24px rgba(0,0,0,.75)}.cbola-d-trivia-multi-game-end--active{-webkit-transform:translateY(100%);transform:translateY(100%)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi_image-container .cbola-d-trivia-multi__image--active .cbola-d-trivia-multi__image{-webkit-filter:blur(5px);filter:blur(5px)}.cbola-ua-ie .cbola-d-trivia-multi-game-end{background-color:rgba(62,62,66,.7)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi__share{opacity:0;pointer-events:none}div.cbola-d-trivia-multi-game-end__container{padding-left:8%;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__container,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__container{padding-left:7%}.cbola-d-trivia-multi-game-end__score-container{width:100%;height:63px;padding-top:8px}.cbola-d-trivia-multi-game-end__score-container>div{display:inline-block}.cbola-d-trivia-multi-game-end__text{font-family:'Open Sans',Oswald,sans-serif;font-size:17px;text-transform:capitalize;max-width:calc(96% - 62px);min-width:152px;line-height:1em}.cbola-d-trivia-multi-game-end__score{font-family:'Open Sans',sans-serif;font-size:22px;font-weight:700;height:62px;width:62px;line-height:63px;border-radius:50%;background-color:rgba(183 ,17 ,94 ,1);text-align:center;letter-spacing:-1px;margin-right:2%;margin-left:2%}.cbola-d-trivia-multi-game-end__challenge,.cbola-d-trivia-multi-game-end__your-friends{text-transform:uppercase;font-size:28px;line-height:28px;font-family:'Open Sans',sans-serif;font-weight:100}.cbola-d-trivia-multi-game-end__your-friends{display:inline-block}.cbola-d-trivia-multi-game-end__share{color:rgb(183 ,17 ,94);overflow:hidden;width:40%;display:inline;font-size:25px}.cbola-d-trivia-multi-game-end__share>i{margin-left:2%;cursor:pointer}.cbola-d-trivia-multi-game-end__share .cbola-fa-facebook:hover{color:#3b5998}.cbola-d-trivia-multi-game-end__share .cbola-fa-twitter:hover{color:#3cf}.cbola-d-trivia-multi-game-end__teaser{width:100%;height:80px}p.cbola-d-trivia-multi-game-end__next-quiz{text-transform:uppercase;width:80px;font-family:'Open Sans',sans-serif!important;font-size:14px!important;font-weight:400!important;margin:0;text-align:left;color:#fff}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__text{font-size:15px;max-width:calc(96% - 55px)}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__score{font-size:18px;height:55px;width:55px;line-height:54px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__share{font-size:24px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__text{font-size:14px;max-width:calc(96% - 46px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__score{font-size:18px;height:46px;width:46px;line-height:45px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:23px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__share{font-size:23px}.cbola-d-trivia-multi__content-footer{height:30px;width:100%;background-color:rgba(40,40,40,.8);font-size:0;text-align:left!important;z-index:10;position:absolute;bottom:0}.cbola-d-trivia-multi__logo-container,.cbola-d-trivia-multi__progress-wrapper{display:inline-block;vertical-align:middle;height:100%}.cbola-d-trivia-multi__progress-wrapper{width:192px;overflow:hidden}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__progress-wrapper{width:167px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{width:154px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.9px}.cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-footer__your-score{font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;color:#fff;text-transform:capitalize;padding-right:3px;padding-left:4px}.cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-footer__score{font-family:Roboto,Arial,sans-serif;font-size:14px;color:#de3885;font-weight:600}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__your-score{font-size:12px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__your-score{font-size:11px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{padding-left:2px}.cbola-d-trivia-multi--pt.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.7px;padding-left:1px}.cbola-d-trivia-multi__logo-container{width:calc(100% - 192px);float:right;position:relative;text-align:right}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__logo-container{width:calc(100% - 167px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__logo-container{width:calc(100% - 154px)}.cbola-d-trivia-multi__logo{height:100%;cursor:pointer;margin:0 auto;opacity:1;max-width:95%}.cbola-d-trivia-multi__carambola_logo{background:url('<%= clientPath %>css/assets/cbolaSprite.png') -61px -47px no-repeat;width:63px;height:15px;margin-right:6px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__carambola_logo{margin-left:1px;margin-right:3px}.cbola-d-trivia-multi__logo-container:hover .cbola-d-trivia-multi__carambola_logo{opacity:.7}.cbola-d-trivia-multi__add-this{position:absolute;height:20px;padding:3px 5px;background-color:rgba(40,40,40,.8);color:#e6e6e6;text-transform:capitalize;font-size:12px;font-weight:300;top:-20px;right:0;width:166px;font-family:'Open Sans',sans;cursor:pointer;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in}",Cbola.Styles["cbola_layer_121_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer p.cbola-d-trivia-multi__answer-desc:before{color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:<%= Cbola.Utils.rgbToRgba(InContentThemeColor,.5) %>;color:<%= DesktopMultiTriviaFontColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#33cf4d}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#727272}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{border:1px solid InContentThemeColor}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{border-left:30px solid <%if (InContentThemeColor) {%> <%= InContentThemeColor %> <%} else {%> #b7115e <%}%>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__answer-list-container a.cbola-sponsored-link:hover .cbola-sponsored-link__description{background-color:<%= Cbola.Utils.rgbToRgba(InContentThemeColor,.5) %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .in-content-container-coverage{padding-bottom:<%= PaddingBottomCover %>px!important;margin-top:<%= MarginTopCover %>px!important;margin-bottom:<%= MarginBottomCover %>px!important;max-width:<%= MaxInContentTriviaWidth %>px!important;min-width:<%= DesktopInContentMinWidth %>px!important}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__body{border-color:<%= DesktopMultiTriviaBorderColor %>;background-color:<%= DesktopMultiTriviaBackgroundColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer h2.cbola-d-trivia-multi__game-header{color:<%= InContentThemeColor %>;background-color:<%= DesktopMultiTriviaBackgroundColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__question-wrapper{background:-moz-linear-gradient(left,<%= InContentThemeColor %> 0,<%= InContentThemeColor %> 73%,<%= Cbola.Utils.rgbToRgba(InContentThemeColor,.5) %> 100%);background:-webkit-linear-gradient(left,<%= InContentThemeColor %> 0,<%= InContentThemeColor %> 73%,<%= Cbola.Utils.rgbToRgba(InContentThemeColor,.5) %> 100%);background:linear-gradient(to right,<%= InContentThemeColor %> 0,<%= InContentThemeColor %> 73%,<%= Cbola.Utils.rgbToRgba(InContentThemeColor,.5) %> 100%)}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi-game-end__score,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__start-next-button{background-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__question-wrapper:after{border-top-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__start-next-button:hover{background-color:<%= InContentThemeColor %>;box-shadow:0 0 1px 3px <% if (DesktopMultiTriviaBackgroundColor) {%> <%=DesktopMultiTriviaBackgroundColor%> <%}else{%>#fff <%}%>,0 0 1px 5px <% if (Cbola.Utils.rgbToRgba(InContentThemeColor,.5)) {%> <%= Cbola.Utils.rgbToRgba(InContentThemeColor,.5) %> <%}else{%>rgba(183,17,94,.5) <%}%>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi-game-end{background-image:<% if (DesktopMultiTriviaEndGameImg) { %> url('<%= DesktopMultiTriviaEndGameImg %>') <%}else{%>null<%}%>;background-size:auto;background-position:0 50%;background-repeat:no-repeat;cursor:<% if (DesktopMultiTriviaEndGameLink) { %>pointer<% }else{ %>default<% } %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi-game-end__share{color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__next-game{background-color:<%= Cbola.Utils.rgbToRgba(DesktopMultiTriviaBackgroundColor,.8) %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi-footer__progress,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi-footer__score{color:<%= MultiTriviaProgressFontColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-multi__logo-container{display:<% if (RemovePoweredByCarambola) {%> none <%} else {%> block<%}%>}",Cbola.Templates["desktop_trivia_multi_answers.html"]='<% Cbola._.forEach(Items, function (item, key) {%>\n  <ul class="cbola-d-trivia-multi__answers-list cbola-page-item cbola-page-item-<%if (key ===0) {%>-active<%} else {%>-next<%}%> cbola-d-trivia-multi__<%if (item.Answers.length === 4) {%>four<%} else {%>three<%}%>-answers<%if (item.Type === Cbola.InContent.Layers.Item.Types.TRIVIA_MULTI_PAIRS) {%>-pairs<%}%>">\n    <%Cbola._.forEach(item.Answers, function (answer) {%>\n      <li class="cbola-d-trivia-multi__answer" data-answer-id="<%=answer.Id%>">\n        <p class="cbola-d-trivia-multi__answer-desc"><%=answer.Title%></p>\n      </li>\n    <%})%>\n  </ul>\n<%})%>',Cbola.Templates["desktop_trivia_multi_image.html"]='<% Cbola._.forEach(Items, function (item, key){ %>\n<div class="cbola-d-trivia-multi_image-loader cbola-d-trivia-multi__image--<%if (key === 0) {%>active<%} else {%>next<%}%>" <%if (item.Link){%> style="cursor:pointer"<%}%>>\n  <div class="cbola-loader"></div>\n  <div class="cbola-d-trivia-multi__image"></div>\n</div>\n<%});%>',Cbola.Templates["desktop_trivia_multi_questions.html"]='<% Cbola._.forEach(Items, function(item, key) {%>\n  <div class="cbola-d-trivia-multi__question cbola-ghost-center-container cbola-page-item cbola-page-item--<%if (key === 0) {%>active<%}else{%>next<%}%>" <%if (item.Link){%>style="cursor:pointer"<%}%>>\n    <p class="cbola-ghost-center-inner">\n      <%= item.Description %>\n    </p>\n  </div>\n<%});%>',Cbola.Templates["desktop_trivia_multi_view.html"]='<div class="cbola-d-trivia-multi unselectDrag">\n  <div class="cbola-d-trivia-multi__body">\n    <div class="cbola-d-trivia-multi__game">\n      <h2 class="cbola-d-trivia-multi__game-header"></h2>\n      <div class="cbola-d-trivia-multi__item-container">\n        <div class="cbola-d-trivia-multi__question-wrapper cbola-ghost-center-container">\n          <div class="cbola-d-trivia-multi__question-container cbola-ghost-center-inner">\n          </div>\n          <div class="cbola-d-trivia-multi__timer-placeholder cbola-ghost-center-inner">\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__answer-list-wrapper">\n          <div class="cbola-d-trivia-multi__answer-list-container cbola-refresh-click-trigger"></div>\n          <div class="cbola-d-trivia-multi__next-game cbola-fade-out">\n            <div class="cbola-d-trivia-multi__start-next-button"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="cbola-d-trivia-multi__content-wrapper">\n      <div class="cbola-d-trivia-multi__image-wrapper">\n        <div class="cbola-d-trivia-multi-game-end">\n          <div class="cbola-d-trivia-multi-game-end__container">\n            <div class="cbola-d-trivia-multi-game-end__score-container cbola-ghost-center-container">\n              <div class="cbola-d-trivia-multi-game-end__text cbola-ghost-center-inner">you scored a fair</div>\n              <div class="cbola-d-trivia-multi-game-end__score cbola-ghost-center-inner">5/10</div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__challenge">challenge</div>\n            <div class="cbola-d-trivia-multi-game-end__social-container">\n              <div class="cbola-d-trivia-multi-game-end__your-friends">your friends</div>\n              <div class="cbola-d-trivia-multi-game-end__share">\n                <i class="cbola-fa cbola-fa-facebook"></i>\n                <i class="cbola-fa cbola-fa-twitter"></i>\n              </div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__teaser cbola-ghost-center-container">\n              <p class="cbola-d-trivia-multi-game-end__next-quiz cbola-ghost-center-inner">next quiz starts in:</p>\n              <div class="cbola-d-trivia-multi-game-end__timer-placeholder cbola-ghost-center-inner">\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__share">\n          <i class="cbola-fa cbola-fa-facebook"></i>\n          <i class="cbola-fa cbola-fa-twitter"></i>\n        </div>\n        <div class="cbola-d-trivia-multi_image-container">\n        </div>\n        <div class="cbola-d-trivia-multi__content-footer">\n          <div class="cbola-d-trivia-multi__progress-wrapper cbola-ghost-center-container">\n            <span class="cbola-d-trivia-multi-footer__your-score cbola-ghost-center-inner">your score</span>\n            <span class="cbola-d-trivia-multi-footer__score cbola-ghost-center-inner">0</span>\n            <span class="cbola-d-trivia-multi-footer__question cbola-ghost-center-inner">question</span>\n            <span class="cbola-d-trivia-multi-footer__progress cbola-ghost-center-inner">1/10</span>\n          </div>\n          <div class="cbola-d-trivia-multi__logo-container cbola-ghost-center-container">\n            <div class="cbola-d-trivia-multi__add-this cbola-fade-out">add this widget to your site</div>\n            <div class="cbola-d-trivia-multi__logo cbola-d-trivia-multi__carambola_logo cbola-ghost-center-inner"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.TimerBase=function(){var e=Cbola.EventBus,t=(Cbola._,function(){this.startTime=0,this.lastUnfilledStrike=0,this.frameRequestId=null,this.timerEndedEvent=e.Events.TIMER_ENDED+Math.floor(1e3*Math.random())});return t.prototype={init:function(e){return this.duration=e||10,this.reset(),this},reset:function(){return this.stopTimer(),this.frameRequestId=null,this.startTime=0,this},startTimer:function(){return this.reset(),this.startTime=(new Date).getTime(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)),this},runTimer:function(){var e=(new Date).getTime()-this.startTime;return e>1e3*this.duration?void this.timerEnded():void(this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)))},stopTimer:function(){return cancelAnimationFrame(this.frameRequestId),this},timerEnded:function(){e.fire(this.timerEndedEvent,{detail:this})},getTimerEndedEvent:function(){return this.timerEndedEvent}},t}(),Cbola.Templates["countdown_timer.html"]='<div class="cbola-countdown-timer-wrapper">\n  <div class="cbola-countdown-timer__time"></div>\n  <div class="cbola-countdown-timer__seconds"><%= seconds %></div>\n</div>\n',Cbola.InContent.Components.CountdownTimer=function(){var e=Cbola.Common.UserService,t=Cbola.InContent.Components.TimerBase,i=Cbola._,o=function(e){t.call(this),this.appended=!1,this.getElements(e)};return i.extend(o.prototype,t.prototype),o.prototype.getElements=function(t){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(t,{seconds:e.vocabulary("seconds")}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-countdown-timer-wrapper"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-countdown-timer__time")},o.prototype.getTimerWrapperElement=function(){return this.timerWrapper},o.prototype.reset=function(){return t.prototype.reset.call(this),this.updateTimeDisplayElem(this.duration),this},o.prototype.replacePlaceholder=function(e){var t=e.parentElement;return i.isNil(t)?"":(this.appended||(this.timerPlaceholder=t.replaceChild(this.timerElemFragment,e),i.forEach(e.classList,function(e){this.timerWrapper.classList.add(e)}.bind(this)),this.appended=!0),this)},o.prototype.removeTimer=function(){this.appended&&(this.timerWrapper.parentElement.replaceChild(this.timerPlaceholder,this.timerWrapper),this.appended=!1)},o.prototype.startTimer=function(){
return this.appended?(t.prototype.startTimer.call(this),this):this},o.prototype.runTimer=function(){var e=(new Date).getTime()-this.startTime;return e>1e3*this.duration?void this.timerEnded():(this.updateTimeDisplayElem(),void(this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))))},o.prototype.updateTimeDisplayElem=function(e){var t=Math.floor(((new Date).getTime()-this.startTime)/1e3);return e=e||this.duration-t,e!==this.prevDisplayedTime?(this.timerTimeElem.textContent=e,this.prevDisplayedTime=e,!0):!1},o.prototype.stopTimer=function(){return this.appended&&cancelAnimationFrame(this.frameRequestId),this},o.prototype.timerEnded=function(){t.prototype.timerEnded.call(this),this.updateTimeDisplayElem("0")},o}(),Cbola.Styles["spinner_timer.css"]=".cbola-spinner-timer__wrapper{height:44px;width:44px;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0)}.cbola-spinner-timer__time{color:#fff;font-family:Oswald,sans-serif!important;font-size:20px!important;font-weight:400!important;position:absolute;top:48%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.cbola-spinner-timer__strikes{position:absolute;top:1px;left:31px}.cbola-spinner-timer__section{position:absolute;top:0;left:0;opacity:0;width:11px;max-width:11px;height:6px}.cbola-spinner-timer__section path{stroke:#fff;stroke-width:3}.cbola-spinner-timer__section:nth-of-type(1){-webkit-transform:translate(-12px,-2px) rotate(7deg);transform:translate(-12px,-2px) rotate(7deg)}.cbola-spinner-timer__section:nth-of-type(2){-webkit-transform:translate(-3px,2px) rotate(37deg);transform:translate(-3px,2px) rotate(37deg)}.cbola-spinner-timer__section:nth-of-type(3){-webkit-transform:translate(3px,10px) rotate(68deg);transform:translate(3px,10px) rotate(68deg)}.cbola-spinner-timer__section:nth-of-type(4){-webkit-transform:translate(4px,20px) rotate(96deg);transform:translate(4px,20px) rotate(96deg)}.cbola-spinner-timer__section:nth-of-type(5){-webkit-transform:translate(0,29px) rotate(126deg);transform:translate(0,29px) rotate(126deg)}.cbola-spinner-timer__section:nth-of-type(6){-webkit-transform:translate(-8px,35px) rotate(158deg);transform:translate(-8px,35px) rotate(158deg)}.cbola-spinner-timer__section:nth-of-type(7){-webkit-transform:translate(-18px,36px) rotate(188deg);transform:translate(-18px,36px) rotate(188deg)}.cbola-spinner-timer__section:nth-of-type(8){-webkit-transform:translate(-27px,32px) rotate(218deg);transform:translate(-27px,32px) rotate(218deg)}.cbola-spinner-timer__section:nth-of-type(9){-webkit-transform:translate(-33px,24px) rotate(245deg);transform:translate(-33px,24px) rotate(245deg)}.cbola-spinner-timer__section:nth-of-type(10){-webkit-transform:translate(-34px,14px) rotate(279deg);transform:translate(-34px,14px) rotate(279deg)}.cbola-spinner-timer__section:nth-of-type(11){-webkit-transform:translate(-30px,5px) rotate(307deg);transform:translate(-30px,5px) rotate(307deg)}.cbola-spinner-timer__section:nth-of-type(12){-webkit-transform:translate(-22px,-1px) rotate(340deg);transform:translate(-22px,-1px) rotate(340deg)}",Cbola.Templates["spinner_timer.html"]='<div class="cbola-spinner-timer__wrapper">\n  <div class="cbola-spinner-timer__time"></div>\n  <div class="cbola-spinner-timer__strikes">\n    <% for (var i = 0; i < curvesNum ; i++) {%>\n    <svg class="cbola-spinner-timer__section">\n      <path d="M 1,4 C4.5,3.2 6.5,3.2 10,4"/>\n    </svg>\n    <% } %>\n  </div>\n</div>\n',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SpinnerTimer=function(){var e=Cbola.Common.FontsManager,t=12,i=Cbola.InContent.Components.CountdownTimer,o=Cbola.Utils,s=Cbola._,n={RUN:1,UNFILL:2},r=function(o){this.stylesheet=Cbola.Styles["spinner_timer.css"],i.call(this,"spinner_timer.html"),o=o||{},this.type=o.type||n.RUN,this.tailLength=o.tailLength&&o.tailLength<t?o.tailLength:Math.round(.66*t),this.lastUnfilledStrike=0,e.getOswald()};return s.extend(r.prototype,i.prototype),r.prototype.getElements=function(e){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(e,{curvesNum:t}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-spinner-timer__wrapper"),this.strikes=this.timerElemFragment.querySelectorAll(".cbola-spinner-timer__section"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-spinner-timer__time")},r.prototype.init=function(e){return this.duration=e||10,this.timerTimeElem.textContent=e,this.prevDisplayedTime=e,this.strikeUnFillPerSec=this.strikes.length/e,this.strikeOpacityIncrement=parseFloat((Math.floor(1/this.tailLength*100)/100).toFixed(2)),this.reset(),this},r.prototype.reset=function(){this.stopTimer(),this.frameRequestId=null,this.lastUnfilledStrike=0,this.startTime=0;for(var e=this.type===n.UNFILL?1:0,t=0;t<this.strikes.length;t++)this.strikes[t].style["opacity"]=e;return this.updateTimeDisplayElem(this.duration),this},r.prototype.replacePlaceholder=function(e){return s.isUndefined(this.styleElem)&&(this.styleElem=o.injectMainStyle(window.document,this.stylesheet)),i.prototype.replacePlaceholder.call(this,e)},r.prototype.startTimer=function(){if(!this.appended)return this;this.reset(),this.startTime=(new Date).getTime();var e=this.type===n.UNFILL?this.unFillTimer:this.runTimer;return this.frameRequestId=requestAnimationFrame(e.bind(this)),this},r.prototype.unFillTimer=function(){var e,t,i,o=(new Date).getTime()-this.startTime;if(o>=1e3*this.duration){for(e=this.lastUnfilledStrike;e<this.strikes.length;e++)this.strikes[e].style["opacity"]=0;return void this.timerEnded()}if(i=Math.floor(o*this.strikeUnFillPerSec/1e3),t=this.updateTimeDisplayElem()){for(e=this.lastUnfilledStrike;i>=0&&i>e;e++)this.strikes[e].style["opacity"]=0;this.lastUnfilledStrike=i}this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.unFillTimer.bind(this))},r.prototype.runTimer=function(){var e,t,i,o=(new Date).getTime()-this.startTime,s=0;if(o>1e3*this.duration)return void this.timerEnded();for(e=Math.floor(o%1e3/1e3*this.strikes.length),t=1e3>o?e>=this.tailLength?e-this.tailLength:0:e>=this.tailLength?e-this.tailLength:this.strikes.length-(this.tailLength-e),i=t;i!==e;)this.strikes[i].style["opacity"]=s,s+=this.strikeOpacityIncrement,i++,i===this.strikes.length&&(i=0);this.strikes[e].style["opacity"]=1,this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))},r.Types=n,r}(),Cbola.Templates["sponsored_links_list_view.html"]='<ul class="cbola-sponsored-links-list">\n  <%Cbola._.forEach(Items, function (item) {%>\n  <li data-link-id="<%=item.Id%>" class="cbola-sponsored-links-list__item">\n    <a class="cbola-sponsored-link" href="<%=item.Link%>" target="_blank">\n      <%if (includeImage) {%>\n      <div style="background-image:url(\'<%=item.Image%>\')" class="cbola-sponsored-link__image"></div>\n      <%}%>\n      <span class="cbola-sponsored-link__description"><%=item.Title%></span>\n    </a>\n  </li>\n  <%});%>\n</ul>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.LinksList=function(){var e=Cbola.InContent.Layers.Item,t=Cbola._,i=Cbola.Logger.getInstance(),o=Cbola.Enums.ItemViewTypes,s=Cbola.Enums.SetClickTypes,n=Cbola.Common.AnalyticsService,r=Cbola.InContent.Layers.Services.SponsoredLinksService,a=Cbola.Common.UserService,l=Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG,d=function(e,t){var i=e===l?[o.SPONSORED_ENDING_SCREEN_AUTOPLAY,o.SPONSORED_ENDING_SCREEN]:[o.SPONSORED_IN_ITEM_SCREEN_AUTOPLAY,o.SPONSORED_IN_ITEM_SCREEN];return t?i[0]:i[1]},c=function(e,t){var i=e===l?[s.SPONSORED_LINK_CLICK_ENDING_SCREEN_AUTOPLAY,s.SPONSORED_LINK_CLICK_ENDING_SCREEN]:[s.SPONSORED_LINK_CLICK_IN_ITEM_AUTOPLAY,s.SPONSORED_LINK_CLICK_IN_ITEM];return t?i[0]:i[1]},p=function(t,i,o){e.call(this),this.type=e.Types._SPONSORED_BASE+t.UIType,this.hostingPresenter=i.hostingPresenter,this.elementId=this.hostingPresenter.elementId,this.widgetId=this.hostingPresenter.widgetId,this.spots=o,this.sponsoredLinksViews={},this.spotsData={},this.setOptions(),this.addSponsoredLinksView(t,o[0])};return t.extend(p.prototype,e.prototype),p.prototype.setOptions=function(){var e=Cbola.InContent.Manager.getLayerByElementId(this.elementId);this.options=Cbola.InContent.Layers.Options.Factory.create({type:this.type,data:e.data}),this.options.wid=this.widgetId,this.options.elementId=this.elementId},p.prototype.addSponsoredLinksView=function(e,o){return t.result(e,"Links",[]).length>0?(this.sponsoredLinksViews[o]=new Cbola.InContent.Components.SponsoredListView(this,e),this.spotsData[o]=e):i.errorM("LinksList.addSponsoredLinksView","LinksList.addSponsoredLinksView -> Empty links array received"),this},p.prototype.prepareLinksForSpot=function(e){var t=this;return this.isSupportedSpot(e)&&!this.hasViewForSpot(e)&&r.getMoreItems(this.elementId,this.widgetId,function(i){t.addSponsoredLinksView(i,e)},e),this},p.prototype.isSupportedSpot=function(e){return-1!==this.spots.indexOf(e)},p.prototype.hasViewForSpot=function(e){return!t.isNil(this.sponsoredLinksViews[e])},p.prototype.getViewItem=function(e){return this.sponsoredLinksViews[e]},p.prototype.getType=function(){return this.type},p.prototype.onLinkClicked=function(e,i){var o=t.result(this.spotsData,"["+i+"].Links",[]).map(function(e){return(e.Id||0).toString()}).indexOf(e)+1,s={ClickType:c(i,this.isCurrentSpotByTimer),ItemId:e,ViewOrder:i,DisplayOrder:o};return n.setSponsoredClick(this.elementId,s),this},p.prototype.toggleSponsoredLinks=function(e,t,i){return this.setSponsoredLinksViewability(e,d(i,t)),e&&(this.addItemsToHistory(i),this.isCurrentSpotByTimer=t),this},p.prototype.setSponsoredLinksViewability=function(e,t){var i=e?t:o.NONE,s=e?o.NONE:t;return this.setViewable(e),this.isViewable&&this.hostingPresenter.incrementViewOrder&&this.hostingPresenter.incrementDisplayOrder&&(this.setViewOrder(this.hostingPresenter.incrementViewOrder()),this.setDisplayOrder(this.hostingPresenter.incrementDisplayOrder())),this.setOpenType(i),this.setCloseType(s),n.SetItemsView(this.elementId,[this]),this},p.prototype.addItemsToHistory=function(e){var i=t.result(this.spotsData,"["+e+"].Links",[]);return i.length>0&&a.addItemsToHistory(i.map(function(e){return e.Id})),this},p}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredListView=function(){var e=Cbola.Common.UserService,t=Cbola.Utils,i=function(e,t){this.presenter=e,this.data=t,this.bind(t),this.addEventHandlers()};return i.prototype={bind:function(){this.titleText=this.data.Title||e.vocabulary("youMayLike"),this.createLinksList()},createLinksList:function(){this.linksList=Cbola.Templates.createFragmentFromTemplate("sponsored_links_list_view.html",{Items:this.data.Links,includeImage:this.presenter.type!==Cbola.InContent.Layers.Item.Types.SPONSORED_LINKS}).querySelector(".cbola-sponsored-links-list")},addEventHandlers:function(){var e=this;this.linksList.addEventListener("click",function(i){for(var o,s=i.target;s!==i.currentTarget&&"li"!==s.tagName.toLowerCase();)s=s.parentElement;o=t.dataset(s,"linkId"),e.presenter.onLinkClicked(o,e.spot)})},getTitle:function(){return this.titleText},getLinksListElem:function(){return this.linksList}},i}(),Cbola.Styles["sponsored_links_cover_slideshow.css"]=".cbola-sponsored-full{height:100%;width:100%;position:absolute;top:0;z-index:10;overflow:hidden;-webkit-transform:translateY(-100%);transform:translateY(-100%);-webkit-transition:-webkit-transform .6s linear,opacity .6s ease-out;transition:transform .6s linear,opacity .6s ease-out;padding:5px;border:1px solid #ededed}.cbola-sponsored-full--active{-webkit-transform:translateY(0);transform:translateY(0)}.cbola-sponsored-full__links-paging-container{width:100%;margin-top:6px;height:150px;position:relative;text-align:center;overflow:hidden;font-size:0}.cbola-sponsored-full__links-paging-container:only-child{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.cbola-sponsored-full__arrow-wrapper{width:40px;height:100%;display:inline-block;cursor:pointer;opacity:.8;-webkit-transition:opacity 150ms linear;transition:opacity 150ms linear;vertical-align:middle;position:relative}.cbola-sponsored-full__arrow-wrapper:hover{opacity:1}.cbola-sponsored-full__arrow-btn{font-size:60px;color:#b7115e;text-shadow:1px 3px 5px rgba(0,0,0,.75);position:absolute;top:15%}.cbola-sponsored-full__arrow-btn--fade{opacity:.5!important;cursor:default!important}.cbola-sponsored-full__arrow-btn--fade:hover{opacity:.3}.cbola-sponsored-full__arrow-btn--fade .cbola-sponsored-full__arrow-btn{color:#7b7b7b!important}.cbola-sponsored-full__arrow-left .cbola-sponsored-full__arrow-btn{left:4px}.cbola-sponsored-full__arrow-right .cbola-sponsored-full__arrow-btn{right:4px}.cbola-sponsored-full__links-container{display:inline-block;height:100%;width:calc(100% - 80px);vertical-align:middle;text-align:left;overflow:hidden}.cbola-sponsored-full__links-container .cbola-sponsored-links-list{width:9999px;height:100%;font-size:0;list-style-type:none!important;padding:0!important;margin:0;-webkit-transition:-webkit-transform .4s ease-in;transition:transform .4s ease-in;position:relative}.cbola-sponsored-full__links-container .cbola-sponsored-links-list__item{width:190px;height:100%;padding-right:10px;display:inline-block}.cbola-sponsored-full__links-container .cbola-sponsored-links-list__item:last-child{width:180px;padding-right:0}.cbola-sponsored-link{line-height:normal;border-bottom:none}.cbola-sponsored-full__links-container .cbola-sponsored-link__image{width:100%;height:100px;background-size:cover;background-repeat:no-repeat;background-position:0 40%;border-radius:8px}.cbola-sponsored-full__links-container .cbola-sponsored-link__description{text-decoration:none!important;font-size:14px!important;font-weight:500;font-family:'Open Sans',sans;border-bottom:none}",Cbola.Styles["sponsored_links_cover_slideshow_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full__arrow-btn{color:<%= SponsoredLinksThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full{background-color:<%= SponsoredLinksCoverBackgroundColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full__links-container .cbola-sponsored-link__description{color:<%= SponsoredLinksCoverFontColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full__links-container .cbola-sponsored-links-list__item:hover .cbola-sponsored-link__description{border-bottom:1px solid <%= SponsoredLinksThemeColor %>}",Cbola.Templates["sponsored_links_cover_slideshow.html"]='<div class="cbola-sponsored-full cbola-fade-out unselectDrag">\n  <div class="cbola-sponsored-full__links-paging-container">\n    <div class="cbola-sponsored-full__arrow-wrapper cbola-sponsored-full__arrow-left">\n      <i class="cbola-sponsored-full__arrow-btn cbola-fa cbola-fa-angle-left"></i>\n    </div>\n    <div class="cbola-sponsored-full__links-container"></div>\n    <div class="cbola-sponsored-full__arrow-wrapper cbola-sponsored-full__arrow-right">\n      <i class="cbola-sponsored-full__arrow-btn cbola-fa cbola-fa-angle-right"></i>\n    </div>\n  </div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredLinksCoverSlideshow=function(){var e=Cbola.InContent.Components.LinksList,t=Cbola.Logger.getInstance(),i=Cbola._,o=function(t,i,o){this.layerData=i,e.call(this,t,i,o)};return i.extend(o.prototype,e.prototype),o.prototype.addSponsoredLinksView=function(e,o){return i.result(e,"Links",[]).length>0?(this.sponsoredLinksViews[o]=new Cbola.InContent.Components.SponsoredLinksCoverSlideshowView(this,e,o,this.layerData),this.spotsData[o]=e):t.errorM("SponsoredLinksCoverSlideshow.addSponsoredLinksView","SponsoredLinksCoverSlideshow.addSponsoredLinksView -> Empty links array received"),this},o.prototype.toggleSponsoredLinks=function(t,i,o){return e.prototype.toggleSponsoredLinks.call(this,t,i,o),-1!==o&&(this.sponsoredLinksViews[o].toggleSponsoredLinksScreen(t),this.activeSpot=t?o:null),this},o.prototype.isActive=function(){return!!this.activeSpot},o.prototype.onBecameViewable=function(){this.isActive()&&this.sponsoredLinksViews[this.activeSpot].resumeTimer()},o.prototype.onBecameUnviewable=function(){this.isActive()&&this.sponsoredLinksViews[this.activeSpot].pauseTimer()},o.prototype.isInTrivia=function(){return this.hostingPresenter.isTrivia()},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredLinksCoverSlideshowView=function(){var e=Cbola.InContent.Components.SponsoredListView,t=Cbola.Common.FontsManager,i=Cbola.Utils,o=Cbola.EventBus,s=Cbola.InContent.Components.TimerBase,n=Cbola._,r={NEXT:-1,PREV:1},a=function(t,i,o,s){this.spot=o,this.element=Cbola.Templates.createFragmentFromTemplate("sponsored_links_cover_slideshow.html").querySelector(".cbola-sponsored-full"),this.addSToStylesheets("sponsored_links_cover_slideshow"),this.layerData=s,this.hostingContainer=s.hostingContainer,this.hostingView=s.hostingView,this.currentScroll=0,this.ignoreUserInput=!1,this.appended=!1,this.toggled=!1,this.backToLayerCallback=s.nextItemCallback,e.call(this,t,i),this.applyViewOptions(this.presenter.options),this.attach()};return n.extend(a.prototype,e.prototype),a.prototype.addSToStylesheets=function(e){this.styleSheetNames=this.styleSheetNames||[],this.styleSheetTemplatesNames=this.styleSheetTemplatesNames||[],this.styleSheetNames.push(Cbola.Styles[e+".css"]||""),this.styleSheetTemplatesNames.push(Cbola.Styles[e+"_theme.css"]||"")},a.prototype.bind=function(){return e.prototype.bind.call(this),this.prevBtn=this.element.querySelector(".cbola-sponsored-full__arrow-left"),this.nextBtn=this.element.querySelector(".cbola-sponsored-full__arrow-right"),this.sponsoredLinksTimer=new s,this.sponsoredLinksTimerEventName=this.sponsoredLinksTimer.getTimerEndedEvent(),this.linksContainer=this.element.querySelector(".cbola-sponsored-full__links-container"),this.linksContainer.appendChild(this.linksList),this},a.prototype.applyViewOptions=function(e){t.getFontsAwesome(),t.getOpenSans(),this.options=e;var o=n.template(this.styleSheetTemplatesNames.join(" ")),s=o(e);return i.injectStyle(document,s),this.sponsoredLinksTimer.init(e.InItemSponsoredLinksDuration),this},a.prototype.addEventHandlers=function(){var t=this;return e.prototype.addEventHandlers.call(this),o.addEventListener(this.sponsoredLinksTimerEventName,this.timerEndedHandler.bind(this)),window.addEventListener("resize",n.debounce(this.onResize.bind(this),150,{leading:!1,trailing:!0})),this.prevBtn.addEventListener("click",function(){t.ignoreUserInput||t.onArrowClick(r.PREV)}),this.nextBtn.addEventListener("click",function(){t.ignoreUserInput||t.onArrowClick(r.NEXT)}),this},a.prototype.timerEndedHandler=function(){this.presenter.toggleSponsoredLinks(!1,!0,this.spot),"function"==typeof this.backToLayerCallback&&this.backToLayerCallback(!0)},a.prototype.attach=function(){return this.appended||(this.appended=!0,n.isUndefined(this.styleElem)&&(this.styleElem=i.injectMainStyle(window.document,this.styleSheetNames.join(" "))),this.hostingContainer.appendChild(this.element),this.setLinksListWidth().onResize()),this},a.prototype.toggleSponsoredLinksScreen=function(e){e?(this.toggled=!0,this.element.classList.remove("cbola-fade-out"),this.element.classList.contains("cbola-sponsored-full--active")||this.element.classList.add("cbola-sponsored-full--active"),setTimeout(function(){this.sponsoredLinksTimer.startTimer()}.bind(this),600)):(this.toggled=!1,this.element.classList.remove("cbola-sponsored-full--active"),this.element.classList.add("cbola-fade-out"),setTimeout(this.reset.bind(this),600))},a.prototype.reset=function(){this.currentScroll=0,this.linksList.style["transform"]="translateX(0)",this.checkScrollAvailability()},a.prototype.getTimer=function(){return this.sponsoredLinksTimer},a.prototype.resumeTimer=function(){this.sponsoredLinksTimer.startTimer()},a.prototype.pauseTimer=function(){this.sponsoredLinksTimer.stopTimer().reset()},a.prototype.isActive=function(){return this.toggled},a.prototype.onArrowClick=function(e){if(this.setIgnoreUserInput(600),e==r.NEXT){var t=this.getNextItem();t&&this.updateScroll(t.end-this.linksContainerWidth)}else{var i=this.getPrevItem();i&&this.updateScroll(i.start)}this.checkScrollAvailability()},a.prototype.getNextItem=function(){for(var e=this.linksListSizes.length-1,t=null,i=0;e>0&&this.linksListSizes[e].end-i>this.linksContainerWidth+this.currentScroll;)i=30,t=this.linksListSizes[e],e--;return t},a.prototype.getPrevItem=function(){for(var e=0,t=null,i=0;e<this.linksListSizes.length&&this.linksListSizes[e].start+i<this.currentScroll;)i=30,t=this.linksListSizes[e],e++;return t},a.prototype.updateScroll=function(e){e=Math.max(e,0),this.currentScroll=e,this.linksList.style["transform"]="translateX("+-1*e+"px)"},a.prototype.checkScrollAvailability=function(){var e=this.linksListSizes[0],t=this.linksListSizes[this.linksListSizes.length-1],i=!this.prevBtn.classList.contains("cbola-sponsored-full__arrow-btn--fade");return e.start<this.currentScroll&&!i?this.prevBtn.classList.remove("cbola-sponsored-full__arrow-btn--fade"):e.start>=this.currentScroll&&i&&this.prevBtn.classList.add("cbola-sponsored-full__arrow-btn--fade"),i=!this.nextBtn.classList.contains("cbola-sponsored-full__arrow-btn--fade"),t.end>this.linksContainerWidth+this.currentScroll&&!i?this.nextBtn.classList.remove("cbola-sponsored-full__arrow-btn--fade"):t.end<=this.linksContainerWidth+this.currentScroll&&i&&this.nextBtn.classList.add("cbola-sponsored-full__arrow-btn--fade"),this},a.prototype.onResize=function(){this.linksContainerWidth=this.linksContainer.clientWidth;var e=this.linksListSizes[this.linksListSizes.length-1].end;return this.linksContainerWidth>=e-15?(this.updateScroll(0),this.nextBtn.classList.add("cbola-fade-out"),this.prevBtn.classList.add("cbola-fade-out"),this):(this.linksContainerWidth+this.currentScroll>=e-15&&this.updateScroll(e-this.linksContainerWidth),this.hostingContainer.clientWidth<500?this.element.classList.contains("cbola-sponsored-full--small")||this.element.classList.add("cbola-sponsored-full--small"):this.element.classList.contains("cbola-sponsored-full--small")&&this.element.classList.remove("cbola-sponsored-full--small"),this.nextBtn.classList.contains("cbola-fade-out")&&this.nextBtn.classList.remove("cbola-fade-out"),this.prevBtn.classList.contains("cbola-fade-out")&&this.prevBtn.classList.remove("cbola-fade-out"),this.checkScrollAvailability(),this)},a.prototype.setLinksListWidth=function(){var e=this,t=0;this.linksListSizes=[];var i=this.linksList.querySelectorAll(".cbola-sponsored-links-list__item");return n.forEach(i,function(i){e.linksListSizes.push({start:i.offsetLeft,end:i.offsetLeft+i.clientWidth}),t+=i.clientWidth}),this.linksList.style["width"]=t+"px",this},a.prototype.setIgnoreUserInput=function(e){var t=this;this.ignoreUserInput=!0,setTimeout(function(){t.ignoreUserInput=!1},e)},a}(),Cbola.Styles["sponsored_links_cover_w_header.css"]=".cbola-sponsored-full-head{text-align:center!important;margin-top:10px;height:60px}p.cbola-sponsored-full-head__title{width:426px;text-align:center;font-size:22px;line-height:1em;letter-spacing:normal;font-family:'Open Sans',Oswald,sans-serif;margin:0 6px 0 0;padding:0;text-transform:uppercase;font-weight:500;color:#b7115e}.cbola-sponsored-full--small p.cbola-sponsored-full-head__title{width:312px}.cbola-sponsored-full .cbola-spinner-timer__time{color:#b7115e}.cbola-sponsored-full .cbola-spinner-timer__section path{stroke:#b7115e}.cbola-sponsored-full-head__skip-button{background-color:rgba(183,17,94,1);color:#fff;cursor:pointer;font-size:19px;font-weight:700;font-family:Oswald,Arial,sans-serif;padding:4px 0;text-transform:uppercase;text-align:center;width:200px;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:calc(50% - 100px)}.cbola-sponsored-full-head__skip-button:hover{box-shadow:0 0 1px 3px #fff,0 0 1px 5px rgba(183,17,94,.5)}",Cbola.Styles["sponsored_links_cover_w_header_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full .cbola-spinner-timer__time,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full-head__title{color:<%= SponsoredLinksThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full-head__skip-button{background-color:<%= SponsoredLinksThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full-head__skip-button:hover{box-shadow:<% if (SponsoredLinksThemeColor) { %> 0 0 1px 3px <%= SponsoredLinksCoverBackgroundColor %>,0 0 1px 5px <%= Cbola.Utils.rgbToRgba(SponsoredLinksThemeColor,.5) %> <%} else {%> null <%}%>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sponsored-full .cbola-spinner-timer__section path{stroke:<%= SponsoredLinksThemeColor %>}",Cbola.Templates["sponsored_links_cover_header.html"]='<div class="cbola-sponsored-full-head cbola-ghost-center-container">\n  <p class="cbola-sponsored-full-head__title cbola-ghost-center-inner"></p>\n  <div class="cbola-sponsored-full-head__timer-placeholder cbola-ghost-center-inner"></div>\n  <div class="cbola-sponsored-full-head__skip-button cbola-ghost-center-inner cbola-fade-out">skip</div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredLinksSlideshowCoverHeader=function(){var e=Cbola.InContent.Components.SponsoredLinksCoverSlideshow,t=Cbola.Logger.getInstance(),i=Cbola._,o=function(t,i,o){e.call(this,t,i,o)};return i.extend(o.prototype,e.prototype),o.prototype.addSponsoredLinksView=function(e,o){return i.result(e,"Links",[]).length>0?(this.sponsoredLinksViews[o]=new Cbola.InContent.Components.SponsoredLinksSlideshowCoverHeaderView(this,e,o,this.layerData),this.spotsData[o]=e):t.errorM("SponsoredLinksSlideshowCoverHeader.addSponsoredLinksView","SponsoredLinksSlideshowCoverHeader.addSponsoredLinksView -> Empty links array received"),this},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredLinksSlideshowCoverHeaderView=function(){var e=Cbola.InContent.Components.SponsoredLinksCoverSlideshowView,t=Cbola.Common.FontsManager,i=Cbola.InContent.Components.SpinnerTimer,o=Cbola.Common.UserService,s=Cbola._,n=function(t,i,o,s){this.header=Cbola.Templates.createElement("sponsored_links_cover_header.html"),this.addSToStylesheets("sponsored_links_cover_w_header"),e.call(this,t,i,o,s)};return s.extend(n.prototype,e.prototype),n.prototype.bind=function(){e.prototype.bind.call(this),this.title=this.header.querySelector(".cbola-sponsored-full-head__title"),this.skipBtn=this.header.querySelector(".cbola-sponsored-full-head__skip-button"),this.setTitle(this.titleText),this.setSkipBtn();var t=this.header.querySelector(".cbola-sponsored-full-head__timer-placeholder");return this.sponsoredLinksTimer=new i({type:i.Types.RUN}),this.element.insertBefore(this.header,this.element.firstChild),this.sponsoredLinksTimerEventName=this.sponsoredLinksTimer.replacePlaceholder(t).getTimerEndedEvent(),this},n.prototype.applyViewOptions=function(i){return t.getOpenSans(),e.prototype.applyViewOptions.call(this,i),this},n.prototype.addEventHandlers=function(){var t=this;return e.prototype.addEventHandlers.call(this),this.skipBtn.addEventListener("click",function(){var e=!1;t.presenter.toggleSponsoredLinks(!1,e,t.spot),"function"==typeof t.backToLayerCallback&&t.backToLayerCallback(e)}),this},n.prototype.timerEndedHandler=function(){this.toggleSkipButtonAndHeader(!0)},n.prototype.toggleSkipButtonAndHeader=function(e){e?(this.title.classList.add("cbola-fade-out"),this.sponsoredLinksTimer.getTimerWrapperElement().classList.add("cbola-fade-out"),this.skipBtn.classList.remove("cbola-fade-out")):(this.title.classList.remove("cbola-fade-out"),this.sponsoredLinksTimer.getTimerWrapperElement().classList.remove("cbola-fade-out"),this.skipBtn.classList.add("cbola-fade-out"))},n.prototype.reset=function(){e.prototype.reset.call(this),this.toggleSkipButtonAndHeader(!1)},n.prototype.setTitle=function(e){this.title.textContent=e},n.prototype.setSkipBtn=function(){this.skipBtn.textContent=this.presenter.isInTrivia()?o.vocabulary("backToGame"):o.vocabulary("skip")},n}(),Cbola.Styles["trivia_full_ending_screen.css"]=".cbola-full-end-game{height:100%;width:100%;position:absolute;top:0;background-color:#fff;border:1px solid #ededed;z-index:10;overflow:hidden;-webkit-transform:translateY(-100%);transform:translateY(-100%);-webkit-transition:-webkit-transform .6s linear;transition:transform .6s linear}.cbola-full-end-game--active{-webkit-transform:translateY(0);transform:translateY(0)}.cbola-full-end-game__container{width:70%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.cbola-full-end-game__score,.cbola-full-end-game__text{text-align:center;font-size:24px;font-family:'Open Sans',Oswald,sans-serif;margin:0;padding:0}.cbola-full-end-game__text{text-transform:uppercase;font-weight:300;color:#b7115e}.cbola-full-end-game__score{font-weight:500;color:#000}",Cbola.Styles["trivia_full_ending_screen_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-full-end-game__text{color:<%= SponsoredLinksThemeColor %>}",Cbola.Templates["trivia_full_ending_screen.html"]='<div class="cbola-full-end-game unselectDrag">\n  <div class="cbola-full-end-game__container">\n    <div class="cbola-full-end-game__text"></div>\n    <div class="cbola-full-end-game__score"></div>\n  </div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.TriviaFullEndingScreen=function(){var e=Cbola.Common.FontsManager,t=Cbola._,i=Cbola.Utils,o=function(e){this.hostingContainer=e.hostingContainer,this.hostingView=e.hostingView,this.presenter=e.hostingPresenter,this.element=Cbola.Templates.createElement("trivia_full_ending_screen.html"),this.styleSheet=Cbola.Styles["trivia_full_ending_screen.css"],this.isAttached=!1,this.bind(),this.applyViewOptions(this.hostingView.options),this.attach()};return o.prototype={bind:function(){return this.text=this.element.querySelector(".cbola-full-end-game__text"),this.score=this.element.querySelector(".cbola-full-end-game__score"),this},applyViewOptions:function(o){e.getOpenSans(),e.getOswald();var s,n,r=Cbola.Styles["trivia_full_ending_screen_theme.css"];return r&&(s=t.template(),n=s(o),i.injectStyle(document,n)),this},attach:function(){return this.isAttached||(this.isAttached=!0,t.isUndefined(this.styleElem)&&this.styleSheet&&(this.styleElem=i.injectMainStyle(window.document,this.styleSheet)),this.hostingContainer.appendChild(this.element)),this},setGameEndedText:function(e){this.text.textContent=e,this.score.textContent=this.presenter.getGameScore()+"/"+this.hostingView.uiItems.length},toggleFullEndingScreen:function(e){e?(this.element.classList.remove("cbola-fade-out"),this.element.classList.add("cbola-full-end-game--active")):(this.element.classList.add("cbola-fade-out"),this.element.classList.remove("cbola-full-end-game--active"))}},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredLinksCoverEndingScreen=function(){var e=Cbola.InContent.Components.SponsoredLinksSlideshowCoverHeader,t=Cbola.Logger.getInstance(),i=Cbola._,o=function(t,i,o){
e.call(this,t,i,o)};return i.extend(o.prototype,e.prototype),o.prototype.addSponsoredLinksView=function(e,o){return i.result(e,"Links",[]).length>0?(this.sponsoredLinksViews[o]=new Cbola.InContent.Components.SponsoredLinksCoverEndingScreenView(this,e,o,this.layerData),this.spotsData[o]=e):t.errorM("SponsoredLinksSlideshowCoverHeader.addSponsoredLinksView","SponsoredLinksSlideshowCoverHeader.addSponsoredLinksView -> Empty links array received"),this},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SponsoredLinksCoverEndingScreenView=function(){var e=Cbola.InContent.Components.SponsoredLinksSlideshowCoverHeaderView,t=Cbola.Common.UserService,i=Cbola.InContent.Components.TriviaFullEndingScreen,o=Cbola._,s=Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG,n=function(t,i,o,n){this.header=Cbola.Templates.createElement("sponsored_links_cover_header.html"),this.addSToStylesheets("sponsored_links_cover_w_header"),e.call(this,t,i,o,n),o===s&&(this.prepareEndGameScreen(),this.backToLayerCallback=n.endingScreenCallback)};return o.extend(n.prototype,e.prototype),n.prototype.prepareEndGameScreen=function(){try{this.fullGameEndingScreen=new i(this.layerData),this.sponsoredLinksTimer.init(this.options.EndingScreenSponsoredLinksDuration)}catch(e){}},n.prototype.hasEndingScreen=function(){return!o.isNil(this.fullGameEndingScreen)},n.prototype.setNextGameUI=function(e){return e?this.setTitle(t.vocabulary("upNext")+e.title):(this.setTitle(t.vocabulary(this.titleText)),this.sponsoredLinksTimer.removeTimer()),this},n.prototype.setGameEndedText=function(e){return this.fullGameEndingScreen.setGameEndedText(e),this},n.prototype.toggleGameEndedAnimation=function(e){return e?(this.element.classList.add("cbola-sponsored-full--active"),this.hasEndingScreen()?(this.fullGameEndingScreen.toggleFullEndingScreen(!0),setTimeout(function(){this.toggleSponsoredLinksScreen(!0),setTimeout(function(){this.fullGameEndingScreen.toggleFullEndingScreen(!1)}.bind(this),600)}.bind(this),3e3)):this.toggleSponsoredLinksScreen(!0)):this.toggleSponsoredLinksScreen(!1),this},n.prototype.setSkipBtn=function(){var e=t.vocabulary("skip");this.presenter.isInTrivia()&&(e=this.spot===s?t.vocabulary("start","nextQuiz"):t.vocabulary("backToGame")),this.skipBtn.textContent=e},n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var e=Cbola.Common.UserService,t=function(){};return t.prototype.getGameEndedText=function(t){var i=e.vocabulary("YouScoredaRidiculous");return t>.9?i=e.vocabulary("youScoredaPerfect"):t>.8?i=e.vocabulary("YouScoredanAwesome"):t>.6?i=e.vocabulary("YouScoredaMighty"):t>.4?i=e.vocabulary("YouScoredaFair"):t>.2&&(i=e.vocabulary("YouScoredaLame")),i},t.prototype.shareOnFacebook=function(e){var t="https://www.facebook.com/dialog/feed?app_id=264749280348555&link="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e,!0))+"&picture="+encodeURIComponent(e.image)+"&name="+encodeURIComponent(e.title)+"&caption="+encodeURIComponent("Powered By Carambola")+"&description="+encodeURIComponent(e.text)+"&redirect_uri="+encodeURIComponent("https://www.facebook.com")+"&display=popup";window.open(t,"_blank","width=560,height=380")},t.prototype.shareOnTwitter=function(e){Cbola.Utils.getBitlyUrlAsync(e,function(t){window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.title+" "+e.text)+"&url="+encodeURIComponent(t),"_blank","width=560,height=380")})},new t}(),Cbola.InContent.Layers.CommonTriviaLayer=function(){var e=Cbola.Logger.getInstance(),t=Cbola.InContent.Layers.Services.TriviaService,i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.TriviaUtils,s=Cbola.Common.UserService,n=Cbola.Enums.ItemViewTypes,r=Cbola._,a=t.triviaTypes.TRUE_FALSE,l=Cbola.EventBus,d=Cbola.Common.AdsService,c=Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG,p=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1},h=Cbola.InContent.Layers.Base.prototype;return r.extend(p.prototype,h),p.prototype.init=function(){h.init.call(this)},p.prototype.setOptions=function(e){this.options=e},p.prototype.onBeforeLoad=function(){e.debug("CommonTriviaLayer::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.adjustLanguage(),this.view.reset()},p.prototype.addGameEventHandlers=function(){return this.boundedOnBeforeGameEnd=this.onBeforeGameEnd.bind(this),l.addEventListener(l.Events.TRIVIA_BEFORE_END+this.game.id,this.boundedOnBeforeGameEnd),this},p.prototype.onLoad=function(){var i=this;e.debug("CommonTriviaLayer::onLoad"),t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){i.game=e,i.game&&(i.view.setTitle(i.game.title),i.view.addItems(i.game.items),i.view.attach(i.container),l.fire(l.Events.LAYER_READY,i),i.addGameEventHandlers(),i.view.addOnMouseOverEventListener(),i.view.gotoQuestion(0,i.game.getCurrentQuestionItem().Answers),i.checkForSponsoredLinksManager())})},p.prototype.onAfterLoad=function(){e.debug("CommonTriviaLayer::onAfterLoad"),Cbola.taskManager.addTask(h.updateViewability,[],this)},p.prototype.onUserAnswered=function(e,t){this.setItemsViewability(!1,e,n.ON_NEXT_BTN);var i=this.game.answerCurrentQuestion(e);this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,t,i,this.afterAnswerFeedbackAnimation.bind(this))},p.prototype.afterAnswerFeedbackAnimation=function(){this.game.isCompleted?(this.setGameViewability(!0).reportAndClearItems(),this.onGameEnded()):this.selectInGameAction()},p.prototype.selectInGameAction=function(){this.setItemsViewability(!0,0,n.ON_NEXT_BTN),this.pageToNextQuestion()},p.prototype.pageToNextQuestion=function(){var e=this.game.getCurrentQuestionNumber();this.view.gotoQuestion(e-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress&&this.view.setProgress(e+"/10"),this.reportAndClearItems()},p.prototype.onGameEnded=function(){var i=this;t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){null===t&&e.warnM("CommonTriviaLayer.onGameEnded","Trivia::onGameEnded -> No new game available, doing nothing"),i.nextGame=t,i.view.applyGameEndedUI(),i.view.gameEndingScreen.setGameEndedText(o.getGameEndedText(i.game.score/i.game.items.length)).setNextGameUI(i.nextGame).toggleGameEndedAnimation(!0)})},p.prototype.startNextGame=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;!r.isNil(this.sponsoredLinks)&&this.sponsoredLinks.hasViewForSpot(c)?this.game.setViewable(!1):this.setGameViewability(!1,e),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game.setViewable(!0),this.setItemsViewability(!0,0,n.ON_NEXT_BTN),this.reportAndClearItems(),this.addGameEventHandlers()},p.prototype.getGameScore=function(){return this.game.score},p.prototype.onBecameViewable=function(e){h.onBecameViewable.call(this),r.isNil(this.game)||this.setLayerViewability(!0,e).reportAndClearItems()},p.prototype.onBecameUnviewable=function(){h.onBecameUnviewable.call(this),r.isNil(this.game)||this.setLayerViewability(!1).reportAndClearItems()},p.prototype.onMouseEnter=function(){i.SetPageElementView(this.elementId,n.ON_HOVER,n.NONE)},p.prototype.onShareInGame=function(e){var t=void 0,s=void 0;t=this.game.getCurrentQuestionItem(),s={text:t.Description,title:t.ChartTitle||this.game.shortTitle,image:0!==t.Image.indexOf("http")?"https:"+t.Image:t.Image,ParentId:t.ParentId},2===t.Answers.length&&(s.text+=". "+t.Answers[0].Title+" or "+t.Answers[1].Title),this.isFacebookShare(e)?(o.shareOnFacebook(s),i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,t)):this.isTwitterShare(e)&&(o.shareOnTwitter(s),i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,t))},p.prototype.onShareEndGame=function(e){var t=void 0,n=void 0;n=this.game.getQuestionItem(this.game.items.length-1),t={text:s.vocabulary("canYouBeatThat"),title:s.vocabulary("iScored")+" "+this.game.score+"/10 "+s.vocabulary("playingIn")+' "'+this.game.title+'"',image:0!==n.Image.indexOf("http")?"https:"+n.Image:n.Image,ParentId:n.ParentId},this.isFacebookShare(e)?(o.shareOnFacebook(t),i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,n)):this.isTwitterShare(e)&&(o.shareOnTwitter(t),i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,n))},p.prototype.isFacebookShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__fb")>-1)return!0;e=e.parentNode}return!1},p.prototype.isTwitterShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__tw")>-1)return!0;e=e.parentNode}return!1},p.prototype.onPoweredBy=function(e){var t=this.options.BrandRedirect||Cbola.Config.brandRedirect_default;i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),e&&i.SetClickTracker(e),window.open(t)},p.prototype.onBeforeGameEnd=function(){l.removeEventListener(l.Events.TRIVIA_BEFORE_END+this.game.id,this.boundedOnBeforeGameEnd)},p.prototype.setLayerViewability=function(t,i){var o=t?i:n.UNVIEWABILITY,s=null;return r.isNil(this.game)?e.errorM("CommonTriviaLayer.setLayerViewability","CommonTriviaLayer.setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):s=this.game.getCurrentQuestionItem(),s&&(s.setViewOrder(this.itemsViewOrder),s.setDisplayOrder(this.itemsDisplayOrder),s.setViewable(t),s.setOpenType(o),s.setCloseType(n.NONE),this.itemsForAnalytics.push(s)),this},p.prototype.setItemsViewability=function(t,i,o){var s=t?o:n.NONE,a=t?n.NONE:o,l=void 0;return r.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):l=this.game.getCurrentQuestionItem(),this.updateAndReportItemForAnalytics(l,t,s,a,i),this},p.prototype.setGameViewability=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,o=i?n.ENDING_SCREEN_AUTOPLAY:n.ENDING_SCREEN,s=t?o:n.NONE,a=t?n.NONE:o,l=void 0;return r.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):l=this.game,this.updateAndReportItemForAnalytics(l,t,s,a),this},p.prototype.updateAndReportItemForAnalytics=function(t,i,o,s,n){n=n||0,t?(t.setViewable(i),t.isViewable&&(t.setViewOrder(++this.itemsViewOrder),t.setDisplayOrder(++this.itemsDisplayOrder)),t.setUserAnswerId(n),t.setOpenType(o),t.setCloseType(s),this.itemsForAnalytics.push(t)):e.warnM("CommonTriviaLayer.updateAndReportItemForAnalytics","CommonTriviaLayer.updateAndReportItemForAnalytics failed to report empty item")},p.prototype.reportAndClearItems=function(){return i.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[],this},p.prototype.endGameClickTracking=function(){i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},p.prototype.getTriviaType=function(){return a},p.prototype.incrementViewOrder=function(){return this.itemsViewOrder++,this.itemsViewOrder},p.prototype.incrementDisplayOrder=function(){return this.itemsDisplayOrder++,this.itemsDisplayOrder},p.prototype.checkForSponsoredLinksManager=function(){var t=this,i=d.getSponsoredLinksManagerByElementId(this.elementId);!r.isNil(i)&&i.isReady()?this.sponsoredLinksManager=i:r.isNil(i)?(this.sponsoredLinksManager=null,e.errorM("CommonTriviaLayer.checkForSponsoredLinksManager","CommonTriviaLayer::checkForSponsoredLinksManager -> No sponsored links manager exists for element id: "+this.elementId)):l.addEventListener(l.Events.SPONSORED_LINKS_MANAGER_READY+this.elementId,function(e){var i=r.result(e,"detail");i&&(t.sponsoredLinksManager=i)})},p.prototype.checkSponsoredLinksSpots=function(e){return r.isNil(this.sponsoredLinksManager)?this:void(this.game.items.length>e&&-1!==this.sponsoredLinksManager.getInItemSpots().indexOf(e)?this.prepareLinksForSpot(e):this.game.items.length===e&&this.sponsoredLinksManager.includeEndingScreen()&&this.prepareLinksForSpot(c))},p.prototype.prepareLinksForSpot=function(e){r.isNil(this.sponsoredLinks)?this.sponsoredLinksManager.getLinks(this.prepareInItemLinks.bind(this),{hostingPresenter:this,hostingView:this.view,hostingContainer:this.container,endingScreenCallback:this.startNextGame.bind(this),nextItemCallback:this.pageToNextQuestion.bind(this)}):this.sponsoredLinks.prepareLinksForSpot(e)},p.prototype.prepareInItemLinks=function(e){return this.sponsoredLinks=e,this},p}(),Cbola.InContent.Layers.DesktopTriviaMultiLayer=function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.Services.TriviaService,s=o.triviaTypes.MULTI_ANSWER,n=Cbola.Config,r=Cbola.Enums.ItemViewTypes,a=Cbola.InContent.Layers.Item.Types,l=Cbola.EventBus,d=Cbola.Common.SponsoredLinks.ENDING_SCREEN_FLAG,c=function(){Cbola.InContent.Layers.CommonTriviaLayer.call(this),this.view=new Cbola.InContent.Layers.DesktopTriviaMultiView(this),this.firstTimeLoad=!0},p=Cbola.InContent.Layers.CommonTriviaLayer.prototype;return e.extend(c.prototype,p),c.prototype.getTriviaType=function(){return s},c.prototype.onLoad=function(){t.debug("DesktopTriviaMultiLayer::onLoad"),o.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){this.game=e,this.game&&(this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.attach(this.container),l.fire(l.Events.LAYER_READY,this),this.addGameEventHandlers(),this.view.addOnMouseOverEventListener(),this.view.loadImagesIfNeeded(0),this.checkForSponsoredLinksManager(),this.checkSponsoredLinksSpots(1))}.bind(this))},c.prototype.onUserAnswered=function(e,t){var i=this,o=t?!1:!0,s=o?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN;this.setItemsViewability(!1,e,s);var n=this.game.currentQuestionCorrectAnswerIdx();this.game.answerCurrentQuestion(e);var a=this.game.getCurrentQuestionNumber();this.checkSponsoredLinksSpots(a),this.view.playFeedbackAnimation(a-2,t,n,function(){i.afterAnswerFeedbackAnimation(o)})},c.prototype.closeLinksItem=function(e){var t=e?r.SPONSORED_ENDING_SCREEN_AUTOPLAY:r.SPONSORED_ENDING_SCREEN;this.sponsoredLinks.setSponsoredLinksViewability(!1,t),this.pageToNextQuestion(e)},c.prototype.afterAnswerFeedbackAnimation=function(e){this.game.isCompleted?this.onGameEnded(e):this.selectInGameAction(e)},c.prototype.selectInGameAction=function(t){var i=this.game.getCurrentQuestionNumber();!e.isNil(this.sponsoredLinks)&&this.sponsoredLinks.hasViewForSpot(i-1)?(this.sponsoredLinks.getType()===a.SPONSORED_LINKS&&this.view.goToSponsoredLinksItem(i-1,this.sponsoredLinks.getViewItem(i-1)),this.sponsoredLinks.toggleSponsoredLinks(!0,t,i-1)):this.pageToNextQuestion(t)},c.prototype.pageToNextQuestion=function(e){var t=e?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN;this.view.setScore(this.game.score),this.setItemsViewability(!0,0,t),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1),this.reportAndClearItems()},c.prototype.onGameEnded=function(t){if(!e.isNil(this.sponsoredLinks)&&this.sponsoredLinks.hasViewForSpot(d)){var i=this.sponsoredLinks.getType(),o=this.sponsoredLinks.getViewItem(d);i===a.SPONSORED_LINKS?this.view.gameEndingScreen.sponsoredLinksView=o:i===a.SPONSORED_LINKS_FULL_W_HEADER&&(this.view.gameEndingScreen=o,this.reportAndClearItems()),this.sponsoredLinks.toggleSponsoredLinks(!0,t,d),this.game.setViewable(!0)}else this.setGameViewability(!0,t).reportAndClearItems();p.onGameEnded.call(this)},c.prototype.startNextGame=function(i){if(!this.pendingNextGameToStart){if(this.pendingNextGameToStart=!0,e.isNil(this.nextGame))return t.errorM("DesktopTriviaMultiLayer.startNextGame","DesktopTriviaMultiLayer.startNextGame encountered null game stopping game restart. url: "+Cbola.Env.PageProperties.hostname),void t.info(this.game);!e.isNil(this.sponsoredLinks)&&this.sponsoredLinks.hasViewForSpot(d)?(this.sponsoredLinks.getType()===a.SPONSORED_LINKS&&this.sponsoredLinks.toggleSponsoredLinks(!1,i,d),this.game.setViewable(!1)):this.setGameViewability(!1,i),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game=this.nextGame,this.nextGame=null,this.view.reset().setTitle(this.game.title).addItems(this.game.items).loadImagesIfNeeded(0),this.game.setViewable(!0),this.setItemsViewability(!0,0,i?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN).reportAndClearItems().addGameEventHandlers(),setTimeout(function(){this.view.startGame(),this.pendingNextGameToStart=!1}.bind(this),400)}},c.prototype.openCurrentQuestionLink=function(){if(!e.isNil(this.game)){var t=this.game.getCurrentQuestionItem();t&&t.Link&&window.open(t.Link)}},c.prototype.onPoweredBy=function(e){var t=e?this.options.BrandRedirect||n.brandRedirect_default:n.brandRedirect_default;i.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),window.open(t)},c.prototype.onBecameViewable=function(t){p.onBecameViewable.call(this,t),this.sponsoredLinks&&this.sponsoredLinks.onBecameViewable(),this.firstTimeLoad?(this.firstTimeLoad=!1,this.view.startGame()):e.isNil(this.game)||this.view.resumeTimer(this.game.hasEnded())},c.prototype.onBecameUnviewable=function(){p.onBecameUnviewable.call(this),this.sponsoredLinks&&this.sponsoredLinks.onBecameUnviewable(),e.isNil(this.game)||this.view.pauseTimer(this.game.hasEnded())},c.prototype.isFacebookShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.classList.contains("cbola-fa-facebook"))return!0;e=e.parentNode}return!1},c.prototype.isTwitterShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.classList.contains("cbola-fa-twitter"))return!0;e=e.parentNode}return!1},c.prototype.onBeforeGameEnd=function(){p.onBeforeGameEnd.call(this),this.checkSponsoredLinksSpots(this.game.items.length)},c}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopTriviaMultiView=Cbola.InContent.Layers.DesktopTriviaMultiView||function(){var e=Cbola.Utils,t=Cbola.EventBus,i=Cbola.Common.FontsManager,o=Cbola.Common.UserService,s=Cbola._,n=Cbola.Logger.getInstance(),r=Cbola.InContent.Components.SpinnerTimer,a=function(e){var t=e.className,i=void 0===t?"cbola-page-item":t,o=e.toActive,s=void 0===o?null:o,n=e.toPrev,r=void 0===n?null:n,a=e.toNext,l=void 0===a?null:a;r&&(r.classList.remove(i+"--active"),r.classList.add(i+"--prev")),s&&(s.classList.remove(i+"--next"),s.classList.add(i+"--active")),l&&(l.classList.remove(i+"--active"),l.classList.remove(i+"--prev"),l.classList.add(i+"--next"))},l=function(e){var t=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:[{Description:e}]}).querySelector(".cbola-d-trivia-multi__question");return a({toNext:t}),t},d=function(e){this.ignoreUserInput=!0,this.isAttached=!1,this.presenter=e,this.container=this.presenter.container,this.element=Cbola.Templates.createElement("desktop_trivia_multi_view.html"),this.styleSheet=Cbola.Styles["cbola_layer_121.css"],this.lastImageIdx=0,this.uiItems=[],this.pausedTimer=null,this.bind()};d.prototype={bind:function(){this.answersContainer=this.element.querySelector(".cbola-d-trivia-multi__answer-list-container"),this.imageContainer=this.element.querySelector(".cbola-d-trivia-multi_image-container"),this.questionsContainer=this.element.querySelector(".cbola-d-trivia-multi__question-container"),this.gameEndingScreen=new c({view:this,presenter:this.presenter}),this.shareInGame=this.element.querySelector(".cbola-d-trivia-multi__share"),this.titleElem=this.element.querySelector(".cbola-d-trivia-multi__game-header"),this.footer=this.element.querySelector(".cbola-d-trivia-multi__content-footer"),this.logoContainer=this.element.querySelector(".cbola-d-trivia-multi__logo-container"),this.poweredBy=this.element.querySelector(".cbola-d-trivia-multi__logo"),this.addThisWidgetContact=this.logoContainer.querySelector(".cbola-d-trivia-multi__add-this"),this.addThisWidgetContact.textContent=o.vocabulary("addThisWidgetToYourSite"),this.scoreElem=this.element.querySelector(".cbola-d-trivia-multi-footer__score"),this.progressElem=this.element.querySelector(".cbola-d-trivia-multi-footer__progress");var e=this.element.querySelector(".cbola-d-trivia-multi__timer-placeholder");this.inGameTimer=new r({type:r.Types.UNFILL}).init(),this.inGameTimerWrapper=this.inGameTimer.getTimerWrapperElement(),this.inGameTimerEndedEvent=this.inGameTimer.replacePlaceholder(e).getTimerEndedEvent(),this.addEventListeners()},addEventListeners:function(){var e=this;window.addEventListener("resize",s.debounce(this.onResize.bind(this),150,{leading:!1,trailing:!0})),t.addEventListener(t.Events.RESIZE_ON_AD+this.presenter.elementId,function(){setTimeout(e.onResize.bind(e),10)}),this.answersContainer.addEventListener("click",function(t){!e.ignoreUserInput&&s.isNil(e.currentSponsoredLinksItemView)&&e.onUserAnswered(t)}),this.shareInGame.addEventListener("click",function(t){e.ignoreUserInput||e.presenter.onShareInGame(t.target)}),t.addEventListener(this.inGameTimerEndedEvent,function(){s.isNil(e.currentSponsoredLinksItemView)?e.presenter.onUserAnswered(0,null):e.presenter.closeLinksItem(!0)}),this.logoContainer.addEventListener("click",function(t){e.presenter.onPoweredBy(t.target===e.poweredBy)}),s.forEach([this.questionsContainer,this.imageContainer],function(t){t.addEventListener("click",function(){e.ignoreUserInput||e.presenter.openCurrentQuestionLink()})})},onResize:function(){var e=this.element.clientWidth;this.element.classList.remove("cbola-d-trivia-multi-sm"),this.element.classList.remove("cbola-d-trivia-multi-md"),500>e?this.element.classList.add("cbola-d-trivia-multi-sm"):575>e&&this.element.classList.add("cbola-d-trivia-multi-md")},onUserAnswered:function(t){for(var i=void 0,o=t.target;o!==t.currentTarget&&o;){if(o.classList.contains("cbola-d-trivia-multi__answer")&&(i=e.dataset(o,"answerId")))return this.presenter.onUserAnswered(i,o),this;o=o.parentElement}},reset:function(){return this.uiItems=[],this.uiItemsLength=0,this.lastImageIdx=0,this.answersContainer.innerHTML="",this.imageContainer.innerHTML="",this.questionsContainer.innerHTML="",this.setScore("0"),this},applyViewOptions:function(t){var i=this;this.options=t,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId;var o=s.template(Cbola.Styles["cbola_layer_121_theme.css"]),n=o(this.options);if(e.injectStyle(document,n),this.inGameTimer.init(t.DesktopMultiTriviaInGameTimerDuration),t.BrandImg?(this.poweredBy.style["background"]="url('"+t.BrandImg+"') no-repeat 0 50% / contain",this.poweredBy.style["width"]="95%",this.poweredBy.style["margin-right"]="5%",this.poweredBy.classList.remove("cbola-d-trivia-multi__carambola_logo")):Cbola.Env.PageProperties.isTablet||Cbola.Env.PageProperties.isMobile||(this.logoContainer.addEventListener("mouseenter",function(){clearTimeout(i.logoInVisibleTimeout),i.logoVisibleTimeout=setTimeout(function(){i.addThisWidgetContact.classList.remove("cbola-fade-out")},750)}),this.logoContainer.addEventListener("mouseleave",function(){clearTimeout(i.logoVisibleTimeout),i.logoInVisibleTimeout=setTimeout(function(){i.addThisWidgetContact.classList.add("cbola-fade-out")},500)})),t.DesktopMultiTriviaDisplayAnswerLetters&&43!==Cbola.Config.abTestId)switch(this.answersContainer.classList.add("cbola-d-trivia-multi__answers-letters"),Cbola.Config.abTestId){case 41:this.answersContainer.classList.add("cbola-d-trivia-multi__tabbed-answer");break;case 42:this.answersContainer.classList.add("cbola-d-trivia-multi__circle-answer")}if(t.DesktopMultiTriviaAdvertisementTitle){var r=Cbola.Templates.createElement("advertisement_title.html");this.presenter.topContainer.insertBefore(r,this.container)}this.gameEndingScreen.applyViewOptions(t)},adjustLanguage:function(){this.element.querySelector(".cbola-d-trivia-multi-footer__your-score").textContent=o.vocabulary("yourScore"),this.element.querySelector(".cbola-d-trivia-multi-footer__question").textContent=o.vocabulary("question"),this.element.classList.add("cbola-d-trivia-multi--"+o.getLanguage()),this.gameEndingScreen.adjustLanguage()},addItems:function(e){for(var t=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_image.html",{Items:e}),i=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:e}),o=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_answers.html",{Items:e}),s=t.querySelectorAll(".cbola-d-trivia-multi_image-loader"),n=t.querySelectorAll(".cbola-loader"),r=i.querySelectorAll(".cbola-d-trivia-multi__question"),a=o.querySelectorAll(".cbola-d-trivia-multi__answers-list"),l=0;l<e.length;l++)this.uiItems.push({answerElem:a.item(l),descElem:r.item(l),imgElem:s.item(l),imgCover:s.item(l).querySelector(".cbola-d-trivia-multi__image"),imgUrl:e[l].Image,loaderElem:n.item(l)});return this.uiItemsLength=this.uiItems.length,this.setProgress("1"),this.answersContainer.appendChild(o),this.questionsContainer.appendChild(i),this.imageContainer.appendChild(t),this},attach:function(t){i.getFontsAwesome(),i.getOpenSans(),i.getOswald(),i.getRoboto(),this.isAttached||(this.isAttached=!0,s.isUndefined(this.styleElem)&&(this.styleElem=e.injectMainStyle(window.document,this.styleSheet)),t.appendChild(this.element),this.container=t,this.onResize())},detach:function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},addOnMouseOverEventListener:function(){this.bindedOnMouseEnter=function(){this.container.removeEventListener("mouseenter",this.bindedOnMouseEnter),this.presenter.onMouseEnter()}.bind(this),this.container.addEventListener("mouseenter",this.bindedOnMouseEnter)},gotoQuestion:function(e){var t=this,i=void 0,o=void 0;!this.ignoreUserInput&&e&&(this.disableUserInput(600),this.currentSponsoredLinksItemView?(i=this.currentSponsoredLinksItemView,this.currentSponsoredLinksItemView=null):i=this.uiItems[e-1],o=this.uiItems[e],a({toPrev:i.descElem,toActive:o.descElem}),a({toPrev:i.imgElem,toActive:o.imgElem,className:"cbola-d-trivia-multi__image"}),a({toPrev:i.answerElem,toActive:o.answerElem}),this.inGameTimer.init(this.options.DesktopMultiTriviaInGameTimerDuration),setTimeout(function(){t.inGameTimer.startTimer()},600),this.loadImagesIfNeeded(e),this.setProgress(e+1))},goToSponsoredLinksItem:function(e,t){var i=this,o=void 0;!this.ignoreUserInput&&e&&(o=this.uiItems[e-1],this.currentSponsoredLinksItemView=t,this.disableUserInput(600),s.isNil(t.descElem)&&(t.descElem=l(t.getTitle())),this.questionsContainer.insertBefore(t.descElem,o.descElem.nextSibling),s.isNil(t.answerElem)&&(t.answerElem=this.currentSponsoredLinksItemView.getLinksListElem(),t.answerElem.classList.add("cbola-page-item")),a({toNext:t.answerElem}),this.answersContainer.insertBefore(t.answerElem,o.answerElem.nextSibling),requestAnimationFrame(function(){a({toPrev:o.descElem,toActive:t.descElem}),a({toPrev:o.answerElem,toActive:t.answerElem})}),this.inGameTimer.init(t.options.InItemSponsoredLinksDuration),setTimeout(function(){i.inGameTimer.startTimer()},600))},loadImagesIfNeeded:function(e){return this.lastImageIdx<e+2&&this.loadNextImages(2),this},loadNextImages:function(e){for(var t=this.lastImageIdx+e,i=this.lastImageIdx;i<Math.min(t,this.uiItemsLength);i++,this.lastImageIdx++){var o=new Image;o.itemImage=this.uiItems[i].imgElem,o.itemImageCover=this.uiItems[i].imgCover,o.loaderElem=this.uiItems[i].loaderElem,o.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImageCover.style["background-image"]='url("'+this.src+'")'},o.src=this.uiItems[i].imgUrl}},disableUserInput:function(e){var t=this;this.ignoreUserInput=!0,setTimeout(function(){t.presenter.isViewable&&(t.ignoreUserInput=!1)},e)},setTitle:function(e){return this.titleElem.textContent=e,this},setScore:function(e){this.scoreElem.textContent=e},setProgress:function(e){this.progressElem.textContent=e+"/"+this.uiItemsLength},startGame:function(){this.ignoreUserInput=!1,this.inGameTimer.startTimer()},playFeedbackAnimation:function(e,t,i,o){var n=this.uiItems[e],r=n.answerElem.querySelectorAll(".cbola-d-trivia-multi__answer"),a=void 0,l=void 0,d=void 0,c=void 0,p=void 0;this.inGameTimer.stopTimer(),s.isNil(i)||(p=r[i]),a=!s.isNil(t)&&t===p,l=a?"correct":"wrong",d=!a&&t?1100:600,c=!a&&t?400:0,this.disableUserInput(d),s.isNil(t)||t.classList.add("cbola-d-trivia-multi__answer-"+l),p&&!a&&setTimeout(function(){p.classList.add("cbola-d-trivia-multi__answer-correct")},400),p&&setTimeout(function(){s.forEach(r,function(e){e!==p&&e!==t&&e.classList.add("cbola-d-trivia-multi__answer-fade")})},Math.max(c-300,0)),setTimeout(function(){o&&o()},d)},applyGameEndedUI:function(){var e=this;this.uiItems[this.uiItemsLength-1].answerElem.style["pointer-events"]="none",this.footer.classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg&&(this.titleElem.style["opacity"]=.3,this.answersContainer.style["opacity"]=.3),setTimeout(function(){e.inGameTimerWrapper.classList.add("cbola-fade-out")},600)},removeGameEndedUI:function(){this.footer.classList.remove("cbola-fade-out"),this.inGameTimerWrapper.classList.remove("cbola-fade-out")},resumeTimer:function(e){var t=this;this.pausedTimer=this.pausedTimer||(e?this.gameEndingScreen.endGameTimer:this.inGameTimer),this.pausedTimer&&(this.pausedTimer.startTimer(),n.info("MultiTriviaView resumed timer: ",this.pausedTimer),this.pausedTimer=null,requestAnimationFrame(function(){t.ignoreUserInput=!1}))},pauseTimer:function(e){this.ignoreUserInput=!0,this.pausedTimer=e?this.gameEndingScreen.getTimer():this.inGameTimer,this.pausedTimer&&(n.info("MultiTriviaView paused timer: ",this.pausedTimer),this.pausedTimer.stopTimer().reset())}};var c=function(e){this.hostingView=e.view,this.presenter=e.presenter,this.containingElement=e.view.element,this.bind()};return c.prototype={bind:function(){this.element=this.containingElement.querySelector(".cbola-d-trivia-multi-game-end"),this.shareEndGame=this.element.querySelector(".cbola-d-trivia-multi-game-end__share");var e=this.element.querySelector(".cbola-d-trivia-multi-game-end__timer-placeholder");this.endGameTimer=new r({type:r.Types.RUN}).init(),this.endGameTimerEndedEvent=this.endGameTimer.replacePlaceholder(e).getTimerEndedEvent(),this.startNextOverlay=this.containingElement.querySelector(".cbola-d-trivia-multi__next-game"),this.startNextQuizButton=this.startNextOverlay.querySelector(".cbola-d-trivia-multi__start-next-button"),this.addEventHandlers()},addEventHandlers:function(){var e=this;this.shareEndGame.addEventListener("click",function(t){e.presenter.onShareEndGame(t.target),t.stopPropagation()}),t.addEventListener(this.endGameTimerEndedEvent,function(){n.info("MultiTriviaView started next game by timerEnd"),e.presenter.startNextGame(!0)}),this.startNextQuizButton.addEventListener("click",function(){e.endGameTimer.stopTimer(),n.info("MultiTriviaView started next game by click"),e.presenter.startNextGame(!1)})},applyViewOptions:function(e){var t=this;this.options=e,e.DesktopMultiTriviaEndGameLink&&this.element.addEventListener("click",function(){t.presenter.endGameClickTracking(),window.open(e.DesktopMultiTriviaEndGameLink)})},adjustLanguage:function(){this.element.querySelector(".cbola-d-trivia-multi-game-end__challenge").textContent=o.vocabulary("challenge"),this.element.querySelector(".cbola-d-trivia-multi-game-end__your-friends").textContent=o.vocabulary("yourFriends"),this.element.querySelector(".cbola-d-trivia-multi-game-end__next-quiz").textContent=o.vocabulary("nextQuiz","startsIn"),
this.startNextQuizButton.textContent=o.vocabulary("start","nextQuiz")},setGameEndedText:function(e){return this.element.querySelector(".cbola-d-trivia-multi-game-end__text").textContent=e,this.element.querySelector(".cbola-d-trivia-multi-game-end__score").textContent=this.presenter.getGameScore()+"/"+this.hostingView.uiItemsLength,this},setNextGameUI:function(e){return this.sponsoredLinksView?this.sponsoredLinksEndingScreen(e):e&&!this.options.DesktopMultiTriviaEndGameImg?this.nextGameTeaser(e):this.freezeEndingScreen(),this},sponsoredLinksEndingScreen:function(e){var t=this,i=l(this.sponsoredLinksView.getTitle());this.hostingView.questionsContainer.appendChild(i);var o=this.sponsoredLinksView.getLinksListElem();o.classList.add("cbola-page-item"),o.classList.add("cbola-page-item--next"),this.hostingView.answersContainer.appendChild(o),this.element.querySelector(".cbola-d-trivia-multi-game-end__social-container").classList.add("cbola-fade-out"),this.element.querySelector(".cbola-d-trivia-multi-game-end__challenge").classList.add("cbola-fade-out"),s.isNil(e)||this.options.DesktopMultiTriviaEndGameImg?(this.element.querySelector(".cbola-d-trivia-multi-game-end__teaser").classList.add("cbola-fade-out"),this.endGameTimer=null):this.endGameTimer.init(this.sponsoredLinksView.options.EndingScreenSponsoredLinksDuration),setTimeout(function(){a({toPrev:t.hostingView.uiItems[t.hostingView.uiItemsLength-1].descElem,toActive:i}),a({toPrev:t.hostingView.uiItems[t.hostingView.uiItemsLength-1].answerElem,toActive:o})},600)},nextGameTeaser:function(e){var t=this,i=l("Up Next: "+e.shortTitle);this.hostingView.questionsContainer.appendChild(i),setTimeout(function(){var e=t.hostingView.uiItems[t.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-wrong");e&&(e.classList.remove("cbola-d-trivia-multi__answer-wrong"),e.classList.add("cbola-d-trivia-multi__answer-fade"));var o=t.hostingView.uiItems[t.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-correct");o&&(o.classList.remove("cbola-d-trivia-multi__answer-correct"),o.classList.add("cbola-d-trivia-multi__answer-fade")),a({toPrev:t.hostingView.uiItems[t.hostingView.uiItemsLength-1].descElem,toActive:i}),t.endGameTimer.init(t.options.DesktopMultiTriviaEndGameTimerDuration),t.startNextOverlay.classList.remove("cbola-fade-out")},600)},freezeEndingScreen:function(){var e=this;this.element.querySelector(".cbola-d-trivia-multi-game-end__teaser").classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg?!function(){var t=l(o.vocabulary("thankYouForPlaying"));e.hostingView.questionsContainer.appendChild(t),setTimeout(function(){a({toPrev:e.hostingView.uiItems[e.hostingView.uiItems.length-1].descElem,toActive:t})},600),e.endGameTimer=null}():this.element.querySelector(".cbola-d-trivia-multi__game").style["opacity"]=.3},toggleGameEndedAnimation:function(e){return e?this.openEndingScreen():this.closeEndingScreen(),this},openEndingScreen:function(){var e=this;this.element.classList.add("cbola-d-trivia-multi-game-end--active"),setTimeout(function(){e.endGameTimer&&e.endGameTimer.startTimer()},600)},closeEndingScreen:function(){this.startNextOverlay.classList.add("cbola-fade-out"),this.element.classList.remove("cbola-d-trivia-multi-game-end--active")},getTimer:function(){return this.endGameTimer}},d}();