(function($){$(function(){headlines.mixpanel=headlines.mixpanel||{};headlines.mixpanel.trackClickRecommendedStory=function(){mixpanel.track_links(".extend-box a.recommended_story","7weekly recommended click",function(elmt){return{type:$(elmt).data("type")}})};var cb=function(elmt){var $item=$(elmt).parents(".item");if(0===$item.length){var type=null}else{var type=$item.attr("class").split(/\s+/)[1];if($item.hasClass("no-image")){type=type+" no-image"}}return{type:type,page:location.href}};if(0<$("a.article-link").length){var mixpanelClass="mixpanel_"+(new Date).getTime();$("a.article-link").addClass(mixpanelClass);mixpanel.track_links("a."+mixpanelClass,"click item box",cb);$("#item-stream").ajaxComplete(function(){mixpanelClass="mixpanel_"+(new Date).getTime();$("a.article-link").not("a[class*=mixpanel]").addClass(mixpanelClass);if(0<$("a.article-link").not("a[class*=mixpanel]").length){mixpanel.track_links("a."+mixpanelClass,"click item box",cb)}})}$("#recommend-box").find(".re-more a").click(function(){mixpanel.track("article recommended click",{type:"more"})});$("span.dg-prev").click(function(){mixpanel.track("click header navigate")});$("span.dg-next").click(function(){mixpanel.track("click header navigate")});$(".menu-channels a.popup-loader").click(function(){var $elmt=$(this);var cb=function($elmt){return{type:$elmt.data("type")}};mixpanel.track("toolbar channel click",cb($elmt))});$("#channel-bar a.popup-loader").click(function(){var $elmt=$(this);var cb=function($elmt){return{type:$elmt.data("type")}};mixpanel.track("channel-bar channel click",cb($elmt))});$(".channel-recommend a.popup-loader").click(function(){var $elmt=$(this);var cb=function($elmt){return{type:$elmt.data("type")}};mixpanel.track("channel-recommend channel click",cb($elmt))});$(".toolbar-user a.mixtrack").click(function(){var $elmt=$(this);var cb=function($elmt){return{type:$elmt.data("type")}};mixpanel.track("toolbar account",cb($elmt))});if(0<$("#recommend-box").length){mixpanel.track_links(".recommend-box a.recommended","article recommended click",function(elmt){return{type:$(elmt).data("type")}})}if(0<$("#7weekly-more").length){mixpanel.track_links("#7weekly-more","7weekly more")}if(0<$("#toolbar-7weekly").length){mixpanel.track_links("#toolbar-7weekly","toolbar 7weekly")}if(0<$("#toolbar-notification").length){mixpanel.track_links("#toolbar-notification","toolbar notification")}if(0<$("#toolbar-facebookpage").length){mixpanel.track_links("#toolbar-facebookpage","toolbar facebookpage")}if(0<$(".story-filter a").length){mixpanel.track_links(".story-filter a","7weekly channel click",function(elmt){return{channel:$(elmt).data("channelname")}})}if(0<$(".menu-channels a.channel").length){mixpanel.track_links(".menu-channels a.channel","toolbar channel click",function(elmt){return{type:$(elmt).data("type")}})}if(0<$(".toolbar-wrapper a.channel").length){mixpanel.track_links(".toolbar-wrapper a.channel","channel-bar channel click",function(elmt){return{type:$(elmt).data("type")}})}if(0<$(".channel-all a").length){mixpanel.track_links(".channel-all a","channel-recommend channel click",function(elmt){return{type:$(elmt).data("type")}})}if(0<$(".toolbar-menu li.collection a").length){mixpanel.track_links(".toolbar-menu li.collection a","toolbar collection click",function(elmt){return{type:$(elmt).data("type")}})}if(0<$(".toolbar-wrapper a.invite").length){mixpanel.track_links(".toolbar-wrapper a.invite","toolbar invite friends",function(elmt){return{type:$(elmt).data("type")}})}if(0<$(".toolbar-user a.mixtrack-link").length){mixpanel.track_links(".toolbar-user a.mixtrack-link","toolbar account",function(elmt){return{type:$(elmt).data("type")}})}if(0<$("#sticker_topic").length){mixpanel.track_links("#sticker_topic","sticker topic")}if(0<$("#sticker_cliprank_article").length){mixpanel.track_links("#sticker_cliprank_article","sticker cliprank article")}if(0<$("a.fb-intro").length){mixpanel.track_links("a.fb-intro","signup intro login")}$("#signup_send").click(function(){mixpanel.track("signup intro register submit")});if(0<$("a.notifications.mixtrack-link").length){mixpanel.track_links("a.notifications.mixtrack-link","notifications read")}if(0<$(".notification-box a.notification-more").length){mixpanel.track_links(".notification-box a.notification-more","notifications read more")}})})(jQuery);
