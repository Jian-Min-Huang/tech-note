<!DOCTYPE html>
<!-- saved from url=(0061)https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html -->
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b" xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr" class=" js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/3213516723-css_bundle_v2.css" rel="stylesheet" type="text/css">
<!--[if lt IE 9]> <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"> </script> <![endif]-->
<meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1" name="viewport">

<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

<meta content="blogger" name="generator">
<link href="https://simeneer.blogspot.tw/favicon.ico" rel="icon" type="image/x-icon">
<link href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="E.E.RHAPSODY - Atom" href="https://simeneer.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="E.E.RHAPSODY - RSS" href="https://simeneer.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="E.E.RHAPSODY - Atom" href="https://www.blogger.com/feeds/37997006600210175/posts/default">

<link rel="alternate" type="application/atom+xml" title="E.E.RHAPSODY - Atom" href="https://simeneer.blogspot.com/feeds/3949927765296842465/comments/default">
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/771816573-ieretrofit.js"></script>
<![endif]-->
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/nodearchpng.png" rel="image_src">
<meta content="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html" property="og:url">
<meta content="非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter" property="og:title">
<meta content="　  身為一個 Node.js 工程師，怎麼可以不夠了解「非同步程式碼」的行為？我希望能綜合自己的一點心得與經驗，寫一篇探討 Node.js Event Loop 與 Event Pattern 的文章，而且還不能只是泛泛之談，必須稍微有點深度，然後還期待大家能夠很容易地讀懂。 ..." property="og:description">
<meta content="https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/w1200-h630-p-k-no-nu/nodearchpng.png" property="og:image">
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>
非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY
</title>
<!-- Description and Keywords (start) -->
<meta content="YOUR KEYWORDS HERE" name="keywords">
<!-- Description and Keywords (end) -->
<meta content="非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter" property="og:title">
<meta content="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html" property="og:url">
<meta content="article" property="og:type">
<meta content="https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s400/nodearchpng.png" property="og:image">
<meta content="E.E.RHAPSODY" property="og:site_name">
<meta content="https://simeneer.blogspot.tw/" name="twitter:domain">
<meta content="非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter" name="twitter:title">
<meta content="summary_large_image" name="twitter:card">
<meta content="https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s400/nodearchpng.png" name="twitter:image">
<meta content="非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter" name="twitter:title">
<!-- Social Media meta tag need customer customization -->
<meta content="Facebook App ID here" property="fb:app_id">
<meta content="Facebook Admin ID here" property="fb:admins">
<meta content="@username" name="twitter:site">
<meta content="@username" name="twitter:creator">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/css" rel="stylesheet" type="text/css">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/codetheme.css" rel="stylesheet" type="text/css">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/font-awesome.min.css" rel="stylesheet">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/css(1)" rel="stylesheet" type="text/css">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/css(2)" rel="stylesheet" type="text/css">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/css(3)" rel="stylesheet" type="text/css">
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/css(4)" rel="stylesheet" type="text/css">
<style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:        Blogus
Author :     http://www.themexpose.com
License:     Full Version
----------------------------------------------- */
/* Variable definitions
====================
<Variable name="maincolor" description="Main Color" type="color" default="#F9BF3B"/>
*/
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}
/* HTML5 display-role reset for older browsers */
article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;display:block;}*{margin:0;padding:0;}html{display:block;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:&#39;&#39;;content:none;}table{border-collapse:collapse;border-spacing:0;}
.entry-content {
font-family: Lato,微軟正黑體,sans-serif;
font-size: 200%;
}
body#layout .widget-content {
border: 1px solid #CCC;
color: #666;
height: 3.3em;
line-height: 1em;
overflow: visible;
padding: 5px;
position: relative;
text-align: center;
}
body#layout #bottombar .left {
float: left;
width: 30%;
}
/* FRAMEWORK */
.navbar,.post-feeds,.feed-links{display:none;
}
.section,.widget{margin:0 0 0 0;padding:0 0 0 0;
}
strong,b{font-weight:bold;
}
cite,em,i{font-style:italic;
}
a:link{color:#383838;text-decoration:none;outline:none;transition:all 0.25s;-moz-transition:all 0.25s;-webkit-transition:all 0.25s;
}
a:visited{color:#333333;text-decoration:none;
}
a:hover{color:#F9BF3B;text-decoration:none;
}
a img{border:none;border-width:0;outline:none;
}
abbr,acronym{
}
sup,sub{vertical-align:baseline;position:relative;top:-.4em;font-size:86%;
}
sub{top:.4em;}small{font-size:86%;
}
kbd{font-size:80%;border:1px solid #999;padding:2px 5px;border-bottom-width:2px;border-radius:3px;
}
mark{background-color:#ffce00;color:black;
}
p,blockquote,pre,table,figure,hr,form,ol,ul,dl{margin:1.5em 0;
}
hr{height:1px;border:none;background-color:#666;
}
/* heading */
h1,h2,h3,h4,h5,h6{font-weight:bold;line-height:normal;margin:0 0 0.6em;
}
h1{font-size:200%
}
h2{font-size:180%
}
h3{font-size:160%
}
h4{font-size:140%
}
h5{font-size:120%
}
h6{font-size:100%
}
/* list */
ol,ul,dl{margin:.5em 0em .5em 3em
}
ol{list-style:decimal outside
}
ul{list-style:disc outside
}
li{margin:.5em 0
}
dt{font-weight:bold
}
dd{margin:0 0 .5em 2em
}
/* form */
input,button,select,textarea{font:inherit;font-size:100%;line-height:normal;vertical-align:baseline;
}
textarea{display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;
}
/* code blockquote */
pre,code{font-family:&quot;Courier New&quot;,Courier,Monospace;color:inherit;
}
pre{white-space:pre;word-wrap:normal;overflow:auto;
}
.post-body blockquote {
background: url(https://lh6.googleusercontent.com/-6UyQr7E0nTU/UVRWwhvPScI/AAAAAAAAFUU/15cIvW74xwg/s50/quote.png) no-repeat scroll left 18px transparent;
font-family: Lato, 微軟正黑體, Monaco,Georgia,&quot;
font-size: 100%;
font-style: italic;
line-height: 22px;
margin: 20px 0 30px 20px;
min-height: 60px;
padding: 0 0 0 60px;
}
.post-body h3 {
margin-top: 1em;
margin-bottom: 1em;
}
a.quickedit img {width:18px!important;height:18px!important;border:0!important;padding:0!important;}
a.quickedit {background:transparent!important;}
/* table */
.post-body table[border=&quot;1&quot;] th, .post-body table[border=&quot;1&quot;] td, .post-body table[border=&quot;1&quot;] caption{border:1px solid;padding:.2em .5em;text-align:left;vertical-align:top;
}
.post-body table.tr-caption-container {border:1px solid #e5e5e5;
}
.post-body th{font-weight:bold;
}
.post-body table[border=&quot;1&quot;] caption{border:none;font-style:italic;
}
.post-body table{
}
.post-body td, .post-body th{vertical-align:top;text-align:left;font-size:13px;padding:3px 5px;border:1px solid #e5e5e5;
}
.post-body th{background:#f0f0f0;
}
.post-body table.tr-caption-container td {border:none;padding:8px;
}
.post-body table.tr-caption-container, .post-body table.tr-caption-container img, .post-body img {max-width:100%;height:auto;
}
.post-body td.tr-caption {color:#666;font-size:80%;padding:0px 8px 8px !important;
}
img {
max-width:100%;
height:auto;
border:0;
}
table {
max-width:100%;
}
.clear {
clear:both;
}
.clear:after {
visibility:hidden;
display:block;
font-size:0;
content:" ";
clear:both;
height:0;
}
body#layout .containz {
width: 100%;
}
body#layout #mywrapper{
width: 60%;
float: left;
}
body#layout #post-wrapper {
width: 100%;
float: left;
}
body#layout div#main {
width: 100%;
}
body#layout #header-wrapper {
min-height: 0px;
margin-top: 70px;
}
body {
background: #fff none repeat scroll top left;
margin: 0 0 0 0;
padding: 0 0 0 0;
color: #333333;
font: normal normal 13px Arial, sans-serif;
text-align: left;
}
/* outer-wrapper */
#outer-wrapper {
background:#ffffff;
max-width:100%;
margin:0px auto;
overflow:hidden;
}
/* NAVIGATION MENU */
.top-menu {
font:normal normal 12px Arial, sans-serif;
margin:0 auto;
height:50px;
overflow:hidden;
padding: 0 28px;
background: #f9bf3b;
}
.top-menu1 {
font:normal normal 12px Arial, sans-serif;
margin:0 auto;
height:43px;
overflow:hidden;
padding: 11px 0px 0;
}
.menubar {
list-style-type:none;
margin:0 0 0 0;
padding:0 0 0 0;
}
.menubar li {
display:block;
float:left;
line-height:38px;
margin:0 0 0 0;
padding:0 0 0 0;
}
.menubar li a {
background: #fff;
color: #E0E0E0;
display: block;
padding: 0 12px;
}
.menubar li a:hover {
background:#FF6F69;
}
ul.socialbar {
height:38px;
margin:0 0 0 0;
padding:0 0;
float:right;
}
ul.socialbar li {
display:inline-block;
list-style-type:none;
float:right;
margin:0 0;
padding:0 0;
border-right:none;
}
/* HEADER WRAPPER */
#header-wrapper {
margin:0 auto;
overflow:hidden;
padding: 0 28px;
background: #2A3744;
height: 100px;
}
.header {
float: left;
width: 25%;
height: 100px;
padding: 15px 0;
}
.col-md-8 {
position: relative;
width: 66.66666667%;
float: left;
}
.search-content {
background: #2A3744;
height: 95px;
position: absolute;
width: 50%;
padding-top: 20px;
padding-left: 220px;
visibility: hidden;
opacity: 0;
transition: .4s;
z-index: 999;
}
.search-content input, .search-content input:focus {
border: none;
outline: 0;
background: transparent;
padding: 20px 0;
color: #fff;
width: 50%;
font-size: 16px;
margin: 4px 0 0;
box-shadow: none;
}
.search-content input.search-submit {
display: none;
}
.top-post {
padding: 24px 0 0;
text-align:right;
}
.top-post a {
color: #fff;
font-weight: 500;
line-height: 1.1;
}
.top-post span {
width: 100%;
font-size: 13px;
line-height: 20px;
letter-spacing: 0.05em;
text-transform: uppercase;
color: #6a7a89;
margin: 0 0 3px;
display: table;
}
.top-post h4 {
margin: 0;
font-size: 20px;
color: #fff;
font-family: 'Lato', 微軟正黑體, serif;
}
.col-md-1 {
width: 8.33333333%;
float: left;
}
.search-trigger {
float: right;
margin: 42px 15px 0 0;
}
.search-trigger img {
cursor: pointer;
}
div#header-inner {
margin-left: 10px;
}
.header h1.title,.header p.title {
font:normal bold 64px Lato, 微軟正黑體, Helvetica, sans-serif;
margin:0 0 0 0;
text-transform:uppercase;
color: #FFF;
}
.header .description {
color:#555555;
}
.header a {
color:#f9bf3b;
}
.header a:hover {
color:#999;
}
.header img {
display:block;
padding: 14px 0 39px;
}
.header-right {
float: right;
padding: 0;
overflow: hidden;
margin: 27px 0px 0 0;
width: 72.8%;
max-width: 728px;
max-height: 90px;
}
.Label li{    position: relative;
padding: 10px 20px 10px 5px !important;
list-style: disc;
display: block;
border-bottom: 1px solid #eee;}
.Label li a{color: rgba(0,0,0,.8);
font-weight: 700;
font-size: 14px;
transition: all .3s;}
.Label li:hover:before{color:#333;}
.Label li span{border:1px solid rgba(0,0,0,.1);padding:0 6px;display:block;line-height:20px;position:absolute;right:15px;top:10px;border-radius:200px;font-size:11px;margin-top:2px}
#mydate {
color: #2A3744;
float: left;
font: 14px open sans;
padding: 15px 10px;
}
#mydate a {
background: none repeat scroll 0 0 #333333;
color: #ffffff;
font-family: Lato,微軟正黑體,sans-serif;
font-weight: bolder;
padding: 13px 16px 16px;
}
div#top-social {
float: right;
}
#top-social a{
font-size:17px;
margin-left:15px;
line-height:52px;
color:#2A3744;
-webkit-transition: all 0.2s linear;
-moz-transition: all 0.2s linear;
-ms-transition: all 0.2s linear;
-o-transition: all 0.2s linear;
transition: all 0.2s linear;
}
span.smg-label {
display: none;
}
.header-right img {
display:block;
}
#nav {
background: #fff;
border-bottom: 2px solid #e9edf1;
border-radius: 0px;
height: 80px;
margin: 0;
z-index: 99;
line-height: 80px;
}
.menubar2 {
list-style: none;
margin:0 0 0 0;
*zoom: 1;
float:left;
}
.menubar2:before,
.menubar2:after {
content: " ";
display: table;
}
.menubar2:after {
clear: both;
}
.menubar2 ul {
list-style: none;
margin:0 0 0 0;
width:12em;
}
.menubar2 a {
display:block;
padding:0 20px;
}
.menubar2 li {
position: relative;
margin:0 0;
}
.menubar2 > li {
float: left;
}
.menubar2 > li > a {
display: block;
height: 80px;
line-height: 80px;
font-size: 16px;
text-transform: uppercase;
letter-spacing: 0.05em;
color: #777;
font-family: Lato,微軟正黑體, Open Sans,'Helvetica Neue',Arial,sans-serif;
}
.menubar2 li ul {
background: #fff;
display:block;
position:absolute;
left:0;
z-index:10;
visibility:hidden;
opacity:0;
-webkit-transition:all .25s ease-out;
-moz-transition:all .25s ease-out;
-ms-transition:all .25s ease-out;
-o-transition:all .25s ease-out;
transition:all .25s ease-out;
background-clip: padding-box;
background-color: #fff;
border: 1px solid rgba(0, 0, 0, 0.15);
border-radius: 4px;
box-shadow: 0 6px 12px rgba(0, 0, 0, 0.176);
font-size: 14px;
left: 0;
list-style: outside none none;
margin: 2px 0 0;
min-width: 220px;
padding: 5px 0;
position: absolute;
text-align: left;
top: 100%;
z-index: 1000;
}
.menubar2 li li ul {
left:100%;
top:-1px;
}
.menubar2 > li.hover > ul {
visibility:visible;
opacity:10;
}
.menubar2 li li.hover ul {
visibility:visible;
opacity:10;
}
.menubar2 li li a {
display: block;
color: #666;
font-family: Lato,微軟正黑體, sans-serif;
position: relative;
z-index: 100;
line-height: 32px;
}
.menubar2 li li a:hover {
color:#878787;
}
.menubar2 li li li a {
color: #e0dfdf;
font-family: Lato,微軟正黑體,'Droid Sans', sans-serif;
text-shadow: 0 1px 1px #4B4B4B;
z-index:20;
}
i.fa.fa-home {
font-size: 25px;
padding: 12px 5px;
}
/* CONTENT WRAPPER */
#content-wrapper {
background-color:transparent;
margin: 0 auto;
padding: 15px 28px 0;
word-wrap:break-word;
}
div#featured-posts-section {
max-height: 342px;
overflow: hidden;
}
.largebanner {
background:#fff;
border-right:1px solid #e5e5e5;
border-bottom:1px solid #e5e5e5;
border-left:1px solid #e5e5e5;
}
.largebanner .widget {
padding:15px 14px;
overflow:hidden;
}
.largebanner img, .largebanner iframe{
display:block;
max-width:100%;
border:none;
overflow:hidden;
}
/* POST WRAPPER */
#post-wrapper {
background:transparent;
float:left;
width:790px;
max-width:790px;
margin:0 0 10px;
margin-top: -25px;
}
.post-container {
padding:15px 0px 0 0;
}
.alert-message{position:relative;display:block;background-color:#f7f8fa;padding:20px;margin:20px 0;border-radius:2px;color:#39484d;}
.alert-message p{margin:0!important;padding:0;line-height:22px;font-size:13px;color:#39484d}
.alert-message span{font-size:14px!important}
.alert-message i{font-size:22px;text-align:left;display:inline-block;
position:absolute;right:0;top:0;padding:20px;opacity:0.8;}
.alert-message.success{background-color:#30C6E8;color:#fff}
.alert-message.success a,.alert-message.success span{color:#fff}
.alert-message.alert{background-color:#4B6397;color:#fff}
.alert-message.alert a,.alert-message.alert span{color:#fff}
.alert-message.warning{background-color:#F1BE6B;color:#fff}
.alert-message.warning a,.alert-message.warning span{color:#fff}
.alert-message.error{background-color:#D95447;color:#fff}
.alert-message.error a,.alert-message.error span{color:#fff}
.breadcrumbs {    font-size: 90%;
height: 16px;
margin-top: 1px;
overflow: hidden;
padding: 11px;
border-top: 1px solid #eee;
border-left: 1px solid #eee;
border-right: 1px solid #eee;}
.breadcrumbs > span {padding: 10px 5px 10px 10px;}
.breadcrumbs > span:last-child {background: none repeat scroll 0 0 transparent;color: #808080;}
.breadcrumbs a {color: #333333;}
.post {
background: #ffffff;
margin: 0 0 15px;
padding: 25px;
padding-bottom: 30px;
background: #ffffff;
border: 1px solid #eee;
box-shadow: 0 1px 5px #efefef;
}
.post-body {
display: block;
margin: 0 0 0 0;
font-size: 14px;
line-height: 28px;
color: #585858;
}
h2.post-title, h1.post-title {
color: #222;
margin: 0 0 15px 0;
font-size: 24px;
line-height: 1.3;
font-family: 'Lato', 微軟正黑體, serif;
font-weight: 400;
margin-bottom: 10px;
}
h2.post-title a, h1.post-title a, h2.post-title, h1.post-title {
color:#464970;
font-weight: bold;
}
h2.post-title a:hover, h1.post-title a:hover {
color:#F9BF3B;
}
.img-thumbnail {
background:#fbfbfb url(https://dl.dropboxusercontent.com/u/32423012/blogger/has-img.png) no-repeat center center;
position:relative;
float:left;
width:260px;
height:220px;
margin:0 30px 0 0;
}
.img-thumbnail img {
width:260px;
height:220px;
object-fit: cover;
}
span.rollover {
}
span.rollover:before {
content:"";
position: absolute;
width:24px;
height:24px;
margin:-12px;
top:50%;
left:50%;
}
span.rollover:hover {
opacity: .7;
-o-transition:all 1s;
-moz-transition:all 1s;
-webkit-transition:all 1s;
}
.post-info {
background: transparent;
padding: 5px 0 10px;
font-size: 12px;
font-weight: 400;
line-height: 21px;
text-transform: uppercase;
color: #6a7a89;
text-transform: capitalize;
font-family: Lato,微軟正黑體,Open Sans,'Helvetica Neue',Arial,sans-serif;
}
.post-info i {
border-left: 1px dotted rgba(0,0,0,0.2);
padding-left: 10px;
}
.post-info a {
display:inline-block;
color:#666666;
}
.author-info, .time-info, .comment-info, .label-info, .review-info {
margin-right:7px;
display:inline;
}
a.readmore {
display: inline-block;
color: #555;
font-size: 13px;
margin-top: 15px;
}
/* Page Navigation */
.pagenavi {
clear: both;
margin: 40px 0 20px;
text-align: center;
font-size: 14px;
font-weight: bold;
padding: 20px;
text-transform: uppercase;
border: 1px solid #eee;
box-shadow: 0 1px 5px #efefef;
}
.pagenavi span,.pagenavi a {
padding: 6px 15px 6px 15px;
margin-right:3px;
display:inline-block;
color:#666;
background: none repeat scroll 0 0 transparent;
border: 1px solid #eee;
box-shadow: 0 1px 0px #efefef;
}
.pagenavi .current, .pagenavi .pages, .pagenavi a:hover {
border: 1px solid $(readmore.hover.color);
}
.pagenavi .pages {
display:none;
}
/* SIDEBAR WRAPPER */
#sidebar-wrapper {
background:transparent;
float:right;
width:35%;
max-width:330px;
margin:15px auto 0;
}
.sidebar-container {
padding:0px 0;
}
.sidebar h2, .panel h2 {
display: block;
font-family: Lato,微軟正黑體,open sans;
line-height: 22px;
color: #464970;
padding-bottom: 15px;
margin-bottom: 20px;
font-weight: 400;
text-align: center;
text-transform: uppercase;
font-size: 18px;
}
#sidebar1 h2 span,#sidebar h2 span{
}
.sidebar h2 span {
padding-bottom: 11px;
border-bottom: 3px #444 solid;
}
#bottombar h2 span {
border-bottom: 2px solid #F9BF3B;
bottom: -2px;
padding: 6px;
color: #666;
}
div#comments {
padding: 25px;
padding-bottom: 30px;
background: #ffffff;
border: 1px solid #eee;
box-shadow: 0 1px 5px #efefef;
}
.sidebar h2:after, .panel h2:after {
content: " ";
width:90px;
height: 0px;
position: absolute;
left: 0;
bottom: -2px;
}
.sidebar .widget {
margin:30px 0 15px;
border: 1px solid #eee;
padding: 30px;
box-shadow: 0 1px 5px #efefef;
}
.sidebar ul, .sidebar ol {
list-style-type:none;
margin:0 0 0 0;
padding:0 0 0 0;
}
.sidebar li {
margin:5px 0;
padding:0 0 0 0;
}
/* Recent Post */
.recent-post-title {
margin:0 0 15px;
padding:0;
position:relative;
}
div.recent-post-title:after {
}
.containz {
width: 1140px;
margin: 0 auto;
}
.recent-post-title h2 {
display: block;
font-family: Lato,微軟正黑體,'Raleway',sans-serif;
font-weight: 500;
font-size: 24px;
line-height: 24px;
padding: 0 0 13px 0px;
margin: 6px 0 5px 0;
border-bottom: 3px #F9BF3B solid;
color: #222;
}
.recent-post-title h2 span{padding-bottom: 11px;
border-bottom: 3px #444 solid;}
.recent-post-title h2 a {
color:#474747;
}
.stylebox {
float:left;
width:50%;
margin:0 0;
}
.stylebox .widget {
padding:0 15px 15px 0;
}
.stylebox .widget-content {
background:#ffffff;
}
.stylebox ul {
list-style-type:none;
margin:0 0 0 0;
padding:0 0 0 0;
}
.stylebox1 {
float:left;
width:98%;
margin:0 0;
}
.stylebox1 .widget {
padding:0 0px 15px 0;
}
.stylebox1 .widget-content {
background:#ffffff;
}
.stylebox1  ul {
list-style-type:none;
margin:0 0 0 0;
padding:0 0 0 0;
}
/* Recent Post */
ul.xpose_thumbs {
margin:0 0 0 0;
}
ul.xpose_thumbs li {
font-size:12px;
min-height:68px;
margin:0 0 8px;
padding:0 0 8px;
border-bottom:1px dotted #e5e5e5;
}
ul.xpose_thumbs .xpose_thumb {
position:relative;
background:#fbfbfb;
margin:3px 0 10px 0;
width:100%;
height:50px;
padding-bottom:46%;
overflow:hidden;
}
ul.xpose_thumbs .xpose_thumb img {
height:auto;
width:100%;
}
ul.xpose_thumbs1 {
margin:0 0 0 0;
width:65%;
float:left;
}
ul.xpose_thumbs1 li {
font-size:12px;
min-height:68px;
margin:0 0 8px;
padding:0 0 8px;
border-bottom:1px dotted #e5e5e5;
}
ul.xpose_thumbs1 .xpose_thumb {
position:relative;
background:#fbfbfb;
margin:3px 0 10px 0;
width:100%;
height:62px;
padding-bottom:46%;
overflow:hidden;
}
ul.xpose_thumbs1 .xpose_thumb img {
height:auto;
width:100%;
}
ul.xpose_thumbs2 {
font-size:13px;
}
ul.xpose_thumbs2 li {
padding:0 0;
min-height:106px;
font-size:11px;
margin: 0 0 8px;
padding: 0 0 8px;
border-bottom:1px dotted #e5e5e5;
}
ul.xpose_thumbs2 .xpose_thumb2 {
background:#fbfbfb;
float:left;
margin:3px 8px 0 0;
height:100px;
width:100px;
}
ul.xpose_thumbs2 .xpose_thumb2 img {
height:100px;
width:100px;
}
span.xpose_title {
font-family: Lato,"Raleway",Helvetica,Arial,sans-serif;
font-size: 22px;
line-height: 24px;
font-weight: 500;
color: #222;
margin: 0 0 15px 0;
}
span.xpose_title2 {
font-size:16px;
}
span.xpose_title_big {
font-family: Lato,"Raleway",Helvetica,Arial,sans-serif;
font-size: 36px;
line-height: 40px;
font-weight: 400;
color: #222;
margin: 0 0 30px 0;
}
span.xpose_title22 {
font-size: 18px;
line-height: 24px;
font-weight: 500;
color: #222;
margin: 0 0 0 0;
}
span.rp_summary {
display: block;
margin: 0 0 0 0;
font-size: 16px;
line-height: 28px;
color: #585858;
}
span.xpose_meta {
background: transparent;
display: block;
font-size: 11px;
color: #aaa;
color: #aaa !important;
margin: 0px 0 0px 0;
font-size: 13px;
font-weight: 400;
line-height: 21px;
text-transform: uppercase;
}
span.xpose_meta a {
color: #aaa !important;
display: inline-block;
margin: 10px 0 10px 0;
font-size: 13px;
font-weight: 400;
line-height: 21px;
color: #c4c4c4;
text-transform: uppercase;
}
span.xpose_meta_date, span.xpose_meta_comment, span.xpose_meta_more  {
display:inline-block;
margin-right:8px;
}
span.xpose_meta_date:before {
content: "\f073";
font-family: FontAwesome;
font-style: normal;
font-weight: normal;
text-decoration: inherit;
padding-right:4px;
}
span.xpose_meta_comment:before  {
content: "\f086";
font-family: FontAwesome;
font-style: normal;
font-weight: normal;
text-decoration: inherit;
padding-right:4px;
}
span.xpose_meta_more:before {
content: "\f0a9";
font-family: FontAwesome;
font-style: normal;
font-weight: normal;
text-decoration: inherit;
padding-right:4px;
}
ul.xpose_thumbs2 li a:hover, ul.xpose_thumbs li a:hover {
color:#F9BF3B;
}
ul.xpose_thumbs22 {
font-size:13px;
width:32%;
float:right;
}
ul.xpose_thumbs22 li {
padding:0 0;
min-height:66px;
font-size:11px;
margin: 0 0 8px;
padding: 0 0 3px;
border-bottom:1px dotted #e5e5e5;
}
ul.xpose_thumbs22 .xpose_thumb2 {
background: #fbfbfb;
float: left;
margin: 3px 8px 6px 0;
height: 140px;
width: 245px;
}
ul.xpose_thumbs22 .xpose_thumb2 img {
height:140px;
width:245px;
}
span.xpose_title {
font-family: "Raleway",Helvetica,Arial,sans-serif;
font-size: 22px;
line-height: 24px;
font-weight: 500;
color: #222;
margin: 0 0 15px 0;
}
span.xpose_title2 {
font-size:16px;
}
span.rp_summary {
display: block;
margin: 0 0 0 0;
font-size: 16px;
line-height: 28px;
color: #585858;
}
span.xpose_meta {
background: transparent;
display: block;
font-size: 11px;
color: #aaa;
color: #aaa !important;
margin: 0px 0 0px 0;
font-size: 13px;
font-weight: 400;
line-height: 21px;
text-transform: uppercase;
}
span.xpose_meta a {
color: #aaa !important;
display: inline-block;
margin: 10px 0 10px 0;
font-size: 13px;
font-weight: 400;
line-height: 21px;
color: #c4c4c4;
text-transform: uppercase;
}
span.xpose_meta_date, span.xpose_meta_comment, span.xpose_meta_more  {
display:inline-block;
margin-right:8px;
}
span.xpose_meta_date:before {
content: "\f073";
font-family: FontAwesome;
font-style: normal;
font-weight: normal;
text-decoration: inherit;
padding-right:4px;
}
span.xpose_meta_comment:before  {
content: "\f086";
font-family: FontAwesome;
font-style: normal;
font-weight: normal;
text-decoration: inherit;
padding-right:4px;
}
span.xpose_meta_more:before {
content: "\f0a9";
font-family: FontAwesome;
font-style: normal;
font-weight: normal;
text-decoration: inherit;
padding-right:4px;
}
ul.xpose_thumbs22 li a:hover, ul.xpose_thumbs li a:hover {
color:#F9BF3B;
}
/* BOTTOMBAR */
#bottombar {
background:#fff;
overflow:hidden;
padding:45px 28px;
color:#dddddd;
}
#bottombar .left {
float:left;
width:34%;
}
#bottombar .center {
float:left;
width:34%;
}
#bottombar .right {
float:right;
width:32%;
}
#bottombar .left .widget, #bottombar .center .widget {
margin:0 15px 15px 0;
}
#bottombar .right .widget {
margin:0 0 15px 0;
}
#bottombar h2 {
font-family: Lato,微軟正黑體,open sans;
line-height: 22px;
color: #222;
padding-bottom: 15px;
font-weight: 400;
text-align: center;
text-transform: uppercase;
font-size: 18px;
}
#bottombar .widget h2:after {
content: '';
display: inline-block;
left: 0px;
width: 100%;
height: 1px;
border: 1px solid rgba(0,0,0,0.08);
border-left: none;
border-right: none;
}
#bottombar ul, #bottombar ol {
list-style-type:none;
margin:0 0 0 0;
padding:0 0 0 0;
}
#bottombar li {
margin:5px 0;
padding:0 0 0 0;
}
#bottombar ul li:before {
color:#eeeeee !important;
}
#bottombar a {
color:#333;
}
#bottombar a:hover {
color:#666;
}
/* FOOTER */
#footer-wrapper {
background:#fff;
margin:0 auto;
padding:8px 20px;
overflow:hidden;
color:#eeeeee;
font-size:12px;
border-top: 1px solid #eee;
}
.footer-left {
float:left;
margin:10px;
margin-top: 32px;
color: #626262;
}
.footer-left a span:hover {
color:#FF6F69;
}
.footer-right {
float:right;
margin:10px;
color: #949494;
}
#footer-wrapper a {
color:#646464;
}
#footer-wrapper a:hover {
color:#333;
}
/* CUSTOM WIDGET */
.widget ul {
line-height:1.4em;
}
/* Tab Menu */
.set, .panel {
margin: 0 0;
}
.tabs .panel {
padding:0 0;
}
.tabs-menu {
border-bottom:3px solid #E73138;
padding: 0 0;
margin:0 0;
}
.tabs-menu li {
font:normal bold 12px Arial, sans-serif;
display: inline-block;
*display: inline;
zoom: 1;
margin: 0 3px 0 0;
padding:10px;
background:#fff;
border:1px solid #e5e5e5;
border-bottom:none !important;
color:#333333;
cursor:pointer;
position:relative;
}
.tabs-menu .active-tab {
background:#E73138;
border:1px solid #E73138;
border-bottom:none !important;
color:#fff;
}
.tabs-content {
padding:10px 0;
}
.tabs-content .widget li {
float:none !important;
margin:5px 0;
}
.tabs-content .widget ul {
overflow:visible;
}
/* Custom CSS for Blogger Popular Post Widget */
.PopularPosts ul,
.PopularPosts li,
.PopularPosts li img,
.PopularPosts li a,
.PopularPosts li a img {
margin:0 0;
padding:0 0;
list-style:none;
border:none;
background:none;
outline:none;
}
.PopularPosts ul {
margin:.5em 0;
list-style:none;
color:black;
counter-reset:num;
}
.PopularPosts ul li img {
display: block;
margin: 0 1em 0 0;
width: 75px;
height: 75px;
float: left;
border-radius: 50%;
}
.PopularPosts ul li {
margin:0 10% .4em 0 !important;
padding:.5em 0 .5em 0 !important;
counter-increment:num;
position:relative;
}
.PopularPosts ul li:before,
.PopularPosts ul li .item-title a, .PopularPosts ul li a {
font-weight:bold;
color:#7F7F7F !important;
text-decoration:none;
}
.PopularPosts .item-title {
padding-bottom: .2em;
padding-top: 0px;
padding-left: 0px;
}
/* Set color and level */
.PopularPosts ul li {margin-right:1% !important}
.PopularPosts .item-thumbnail {
margin:0 0 0 0;
}
.PopularPosts .item-snippet {
font-size:11.5px;
color: #5C5C5C;
}
.profile-img{
display:inline;
opaciry:10;
margin:0 6px 3px 0;
}
/* back to top */
#back-to-top {
background:#353738;
color:#ffffff;
padding:8px 10px;
font-size:24px;
border: 1px solid #4b4b4b;
}
.back-to-top {
position:fixed !important;
position:absolute;
bottom:20px;
right:20px;
z-index:999;
}
/* ==== Related Post Widget Start ==== */
#related-posts h2 > span{
}
#related-posts{
float:left;
width:100%;
margin-bottom:40px;
}
#related-posts h2{
padding: 4px 0;
font: normal normal 18px Oswald;
text-transform: uppercase;
font: normal bold 15px Arial, sans-serif;
text-align: left;
color: #474747;
margin-bottom: 5px;
}
#related-posts a {
width: 240px;
text-decoration: none;
float: left;
}
#related-posts #r-title {
width: 100%;
padding: 9px 0px 20px;
color: #FFF;
height: 25px;
text-align: left;
margin: -63px 0px 0px;
font: 12px;
background: #111 none repeat scroll 0% 0%;
opacity: 0.7;
line-height: 1.3em;
}
#related-posts h8 {
padding-left: 14px;
display: inline-block;
}
#related-posts .related_img {
padding:0px;
width:100%;
height:160px;
}
#related-posts .related_img:hover{
opacity:.7;
filter:alpha(opacity=70);
-moz-opacity:.7;
-khtml-opacity:.7;
}
/* share buttons */
.share-buttons-box {
height: 67px;
background: url(//3.bp.blogspot.com/-moj4-jk-UB0/U1qCkCPaGQI/AAAAAAAADTY/tixmak8NHV8/s1600/share.png) no-repeat 330px 10px;
margin:20px 0 15px;
overflow:hidden;
}
.share-buttons {
margin:0 0;
height:67px;
float:left;
}
.share-buttons .share {
float:left;
margin-right:10px;
display:inline-block;
}
/* error and search */
.status-msg-wrap {
font-size:120%;
font-weight:bold;
width:100%;
margin:20px auto;
}
.status-msg-body {
padding:20px 2%;
width:96%;
}
.status-msg-border {
border:1px solid #e5e5e5;
opacity:10;
width:auto;
}
.status-msg-bg {
background-color:#ffffff;
}
.status-msg-hidden {
padding:20px 2%;
}
#ArchiveList ul li:before {
content:"" !important;
padding-right:0px !important;
}
/* facebook comments */
.fb-comments{width: 100% !important;}
.fb-comments iframe[style]{width: 100% !important;}
.fb-like-box{width: 100% !important;}
.fb-like-box iframe[style]{width: 100% !important;}
.fb-comments span{width: 100% !important;}
.fb-comments iframe span[style]{width: 100% !important;}
.fb-like-box span{width: 100% !important;}
.fb-like-box iframe span[style]{width: 100% !important;
}
.rich-snippet {
padding:10px;
margin:15px 0 0;
border:3px solid #eee;
font-size:12px;
}
/*-------sidebar----------------*/
.sidebar-narrow{margin:0}
#sidebar-narrow .widget{margin-bottom:30px;}
#sidebar-narrow{float:right;width:160px;margin-right: 14px;
border-right: 1px solid #eaeaea;
border-left: 1px solid #eaeaea;
padding: 16px 10px 0 15px;}
div#main {
width: 98%;
margin-top: 25px;
}
div#mywrapper {
float: left;
width: 694px;
}
#sidebartab {
margin-bottom: 15px;
margin-top: -20px;
}
.tab-widget-menu {
height: 46px;
margin: 0;
padding: 8px 0 0 2px;
}
#sidebartab .widget {
margin-bottom: 0;
padding-bottom: 0;
}
#sidebartab .h2title {
display: none;
}
#sidebartab .h2titlesmall {
display: none;
}
#sidebartab .widget-content {
box-shadow: none;
-moz-box-shadow: none;
-webkit-box-shadow: none;
border: 0;
}
.tab-widget-menu ul, .tab-widget-menu li {
list-style: none;
padding: 0;
margin: 0;
}
.tab-widget-menu li {
background: #333;
bottom: -2px;
color: #FFF;
cursor: pointer;
float: left;
height: 38px;
line-height: 38px;
margin: -2px 0px 0 0px;
padding: 0;
position: relative;
text-align: center;
width: 33.3%;
z-index: 2;
}
.tab-widget-menu li.selected {
background: #F9BF3B;
border-width: 1px 1px 3px;
color: #FFF;
margin-top: -2px;
}
#sidebartab .h2title, #sidebartab h2 {
display: none;
}
#sidebartab .h2titlesmall, #sidebartab h2 {
display: none;
}
#sidebartab .widget-content img {
padding: 2px;
border: 1px solid lightGrey;
width: 100px;
height: 100px;
}
#sidebartab .popular-posts li {
background: none repeat scroll 0 0 transparent;
border-bottom: 1px solid #E9E9E9;
overflow: hidden;
padding: 10px 0;
}
.PopularPosts img:hover, #sidebartab .widget-content img:hover {
-khtml-opacity: 0.4;
-moz-opacity: 0.4;
opacity: 0.4;
}
#sidebarlab .sidebar li a:hover {
color: #fff;
background: #222;
}
.PopularPosts a {font-weight:bold;}
.tagcloud a {
background: #e4e4e4;
color: #888;
display: block;
float: left;
font-size: 14px!important;
line-height: 12px;
margin: 0 2px 2px 0;
padding: 12px 17px;
}
.cloud-label-widget-content {display:inline-block;text-align:left;}
.cloud-label-widget-content .label-size{display:inline-block;float:left;font-size:11px;line-height:normal;margin:0 5px 5px 0;opacity:1}
.cloud-label-widget-content .label-size a{     background: #30373B;
color: #fff!important;
float: left;
border: 1px solid #30373B;
font-weight: 700;
line-height: 100%;
margin: 0;
padding: 9px 10px;
text-transform: uppercase;
transition: all .6s;}
.cloud-label-widget-content .label-size a:hover,.cloud-label-widget-content .label-size a:active {background:#fff;color:#F86E7D;}
.cloud-label-widget-content .label-size .label-count{background:#F9BF3B;color:#fff;white-space:nowrap;display:inline-block;padding:6px 8px;margin-left:-3px;line-height:normal;border-radius:0 2px 2px 0}
.showpageArea a {
clear:both;
margin:-5px 0 10px;
text-align:center;
font-size:11px;
font-weight:bold;
text-transform:uppercase;
}
.showpageNum a {
padding:6px 10px;
margin-right:3px;
display:inline-block;
color:#333333;
background-color:#ffffff;
border: 1px solid #dddddd;
}
.showpageNum a:hover {
border: 1px solid #aaaaaa;
}
.showpagePoint {
padding:6px 10px;
margin-right:3px;
display:inline-block;
color:#333333;
background-color:#ffffff;
border: 1px solid #aaaaaa;
}
.showpageOf {
display:none;
}
.showpage a {
padding:6px 10px;
margin-right:3px;
display:inline-block;
color:#333333;
background-color:#ffffff;
border: 1px solid #dddddd;
}
.showpage a:hover {
border: 1px solid #aaaaaa;
}
.showpageNum a:link,.showpage a:link {
text-decoration:none;
color:#666;
}
.button {
text-align: center;
width: 100%;
margin: 10px 0;
padding: 0;
font-size: 14px;
font-family: Lato,微軟正黑體,'Tahoma', Geneva, Sans-serif;
color: #fff;
margin-left: 0em !important;
}
.button ul {
margin: 0;
padding: 0;
}
.button li {
display: inline-block;
margin: 10px 0;
padding: 0;
}
#Attribution1 {
height:0px;
visibility:hidden;
display:none
}
.author-avatar img{border:1px solid #ccc;padding:4px;background:#fff;float:left;margin:0 10px 5px 0;border:50%;}
#author-box h3 {
padding-bottom: 5px;
font-size: 16px;
color:#222;
font-family: Lato,微軟正黑體,Arial,Georgia,serif;
}
.block-head h3:after {
content: '';
display: inline-block;
left: 0px;
width: 100%;
height: 1px;
border: 1px solid rgba(0,0,0,0.08);
border-left: none;
border-right: none;
}
div#related-posts h2:after {
content: '';
display: inline-block;
left: 0px;
width: 100%;
height: 1px;
border: 1px solid rgba(0,0,0,0.08);
border-left: none;
border-right: none;
}
/* Search Box
----------------------------------------------- */
#searchformfix
{
float:right;
overflow:hidden;
position:relative;
margin-right: 20px;
margin-top: 6px;
}
#searchform
{
margin:7px 0 0;
padding:0;
}
#searchform fieldset
{
padding:0;
border:none;
margin:0;
}
#searchform input[type="text"]{
background:#fff; border:none;
float:left; padding:0px 10px 0px 15px;
margin:0px; width:150px; height:34px;
line-height:34px;
transition:all 600ms cubic-bezier(0.215,0.61,0.355,1) 0s;
-moz-transition:all 300ms cubic-bezier(0.215,0.61,0.355,1) 0s;
-webkit-transition:all 600ms cubic-bezier(0.215,0.61,0.355,1) 0s;
-o-transition:all 600ms cubic-bezier(0.215,0.61,0.355,1) 0s; color:#585858}
#searchform input[type=text]:hover,#searchform input[type=text]:focus
{
width:200px;
}
#searchform input[type=submit]
{
background:url(//4.bp.blogspot.com/-R8OKVUsis3s/UgZEksy0V1I/AAAAAAAAAT4/QtN9sBHMZis/s1600/icon-search.png) center 9px no-repeat;
cursor:pointer;
margin:0;
padding:0;
width:37px;
height:34px;
line-height:34px;
background-color: #FF6F69;
border: none;
}
input[type=submit]
{
padding:4px 17px;
color:#ffffcolor:#585858;
text-transform:uppercase;
border:none;
font-size:20px;
background:url(gradient.png) bottom repeat-x;
cursor:pointer;
margin-top:10px;
float:left;
overflow:visible;
transition:all .3s linear;
-moz-transition:all .3s linear;
-o-transition:all .3s linear;
-webkit-transition:all .3s linear;
}
#searchform input[type=submit]:hover
{
background-color:#333;
}
.selectnav {
display:none;
}
/*---Flicker Image Gallery-----*/
.flickr_plugin {
width: 100%;
}
.flickr_badge_image {
float: left;
height: 75px;
margin: 8px 5px 0px 5px;
width: 75px;
}
.flickr_badge_image a {
display: block;
}
.flickr_badge_image a img {
display: block;
width: 100%;
height: auto;
-webkit-transition: opacity 100ms linear;
-moz-transition: opacity 100ms linear;
-ms-transition: opacity 100ms linear;
-o-transition: opacity 100ms linear;
transition: opacity 100ms linear;
}
.flickr_badge_image a img:hover {
opacity: .5;
}
div#act {
display: none;
}
#sidebar-narrow .list-label-widget-content li:before {
content: "\f013";
font-family: fontawesome;
margin-right: 5px;
}
#sidebar-narrow .list-label-widget-content li {
display: block;
padding: 0 0 8px 0;
position: relative;
}
#sidebar-narrow .list-label-widget-content li a {
color: #555555;
font-size: 13px;
font-weight: normal;
}
#sidebar-narrow .list-label-widget-content li a:first-child {
text-transform: capitalize;
}
#sidebar-narrow .list-label-widget-content li a:hover {
text-decoration: underline;
}
#sidebar-narrow .list-label-widget-content li span:last-child {
color: #949494;
font-size: 12px;
font-weight: bold;
position: absolute;
right: 0;
top: 0;
}
#sidebar-narrow .list-label-widget-content li:hover span:last-child {
text-decoration: underline;
}
/***** Social link*****/
ul.socialbar li,ul.socialbar li{
float: left;
margin-right: 0px;
margin-bottom:0px;
padding: 0px;
display:block;
width: auto;
}
ul.socialbar li a, ul.socialbar li a, a.soc-follow {
display: block;
float: left;
margin: 0;
padding: 0;
width: 40px;
height: 43px;
margin-bottom:2px;
text-indent: -9999px;
-webkit-transition: all 0.3s ease 0s;
-moz-transition: all 0.3s ease 0s;
-ms-transition: all 0.3s ease 0s;
-o-transition: all 0.3s ease 0s;
transition: all 0.3s ease 0s;
}
a.soc-follow.dribbble {
background: url(//3.bp.blogspot.com/-NmMcKECatSQ/U6V_5SbOF1I/AAAAAAAAAkM/PWAmCSVs_wA/s1600/dribbble.png) no-repeat 0 0;
}
a.soc-follow.dribbble:hover {
background-color: #ef5b92;
}
a.soc-follow.facebook {
background: url(//1.bp.blogspot.com/-3ho0g-Dc4Y0/U7ZbVW1tuKI/AAAAAAAAAzE/bpGJ-s7r3Wk/s1600/facebook.png) no-repeat 0 0;
}
a.soc-follow.facebook:hover{
background-color: #3b5998;
}
a.soc-follow.flickrs {
background: url(//3.bp.blogspot.com/-rJglRJh1WW0/U7ZbcTKQcbI/AAAAAAAAAzk/33OW1b2t1xI/s1600/flickr.png) no-repeat 0 0;
}
a.soc-follow.flickrs:hover {
background-color: #f1628b;
}
a.soc-follow.googleplus {
background: url(//3.bp.blogspot.com/-RhkXdjwgEVo/U7ZbcWu-iTI/AAAAAAAAAzo/43hPWkLD5hQ/s1600/googleplus.png) no-repeat 0 0;
}
a.soc-follow.googleplus:hover {
background-color: #d94a39;
}
a.soc-follow.linkedin {
background: url(//2.bp.blogspot.com/-n0U6_fs415s/U7ZbVQ_YSRI/AAAAAAAAAzQ/wUAF46WN5oo/s1600/linkedin.png) no-repeat 0 0;
}
a.soc-follow.linkedin:hover {
background-color: #71b2d0;
}
a.soc-follow.twitter {
background: url(//4.bp.blogspot.com/-sIGAQtPQHP8/U7ZbVYIZcXI/AAAAAAAAAzI/GIY14uvXhg4/s1600/twitter.png) no-repeat 0 0;
}
a.soc-follow.twitter:hover {
background-color: #48c4d2;
}
a.soc-follow.vimeo {
background: url(//1.bp.blogspot.com/--F1xUtN_8FQ/U7ZbWG6lHdI/AAAAAAAAAzU/5GojeL_5aYc/s1600/vimeo.png) no-repeat 0 0;
}
a.soc-follow.vimeo:hover {
background-color: #62a0ad;
}
ul.socicon-2 li a:hover, ul.socicon li a:hover, a.soc-follow:hover {
background-position: 0 -40px;
}
#nav.fixed-nav{
position: fixed;
top: 0;
left: 0;
width: 100% !important;
z-index: 999;
/* -webkit-box-shadow: 0 5px 3px rgba(0, 0, 0, .1); */
-moz-box-shadow: 0 5px 3px rgba(0, 0, 0, .1);
/* box-shadow: 0 5px 3px rgba(0, 0, 0, .1); */
padding: 0;
border-top: none;
margin: 0;
}
div.conty {
width: 1140px;
margin: 0 auto;
}
@font-face {
font-family: OpenSansRegular;
src: url('https://lh3.googleusercontent.com/proxy/Ns-4iIyNdckTDUMN3a_yzu6w_sHu7AaYjaTvUQQSPU7vDoLg5LshpkYO76HD0ubPXEJ_j4x-0XneZYQEyEJoPmZMull1BmyGJaeC556UJ5hL0b6-T_xP-IQTBZlsIlY5Cqw=s0-d');
}
#beakingnews {
float: left;
height: 42px;
line-height:  42px;
overflow: hidden;
width: 80%;
}
#recentpostbreaking li a {
color:#949494;
font-family: sans-serif;
font-weight: bold;
}
#recentpostbreaking li a:hover {
color:#F9BF3B;
}
#beakingnews .tulisbreaking {
background:#FF6F69;
}
#beakingnews .tulisbreaking{
color:$(mainbgfontcol.background.color) !important;
}
span.tulisbreaking:after{
content: close-quote;
position: absolute;
width: 0px;
top: 15px;
right: -12px;
border-bottom: 6px solid rgba(0, 0, 0, 0);
border-left: 6px solid #FF6F69;
border-top: 6px solid rgba(0, 0, 0, 0);
border-right: 6px solid rgba(0, 0, 0, 0);
}
#beakingnews .tulisbreaking {
color: #FFFFFF;
display: block;
float: left;
font-family: sans-serif;
font-weight: bold;
padding: 0 10px;
position: absolute;
border-bottom: 1px solid #FF6F69;
}
#recentpostbreaking {
float: left;
margin-left: 125px;
}
#recentpostbreaking ul,#recentpostbreaking li{list-style:none;margin:0;padding:0}
/*------*|*|*| Featured Blog Posts *|*|*|----------*/
.blog_featured_posts {
display: none;
width: 100%;
margin-top: 10px;
margin-bottom: 10px;
}
.blog_featured_post {
display: none;
position: relative;
float: left;
overflow: hidden;
height:334px;
}
.blog_featured_post.first {
width: 43.36%;
margin-right: 9px;
}
.blog_featured_post.second {
width: 20.79%;
margin-right: 9px;
}
.blog_featured_post.third, .blog_featured_post.fourth {
width: 34.126%;
height:163px;
}
.blog_featured_post.third {
margin-bottom: 9px;
}
.blog_featured_post a {
display: none;
color: rgb(255, 255, 255);
text-shadow: rgba(0, 0, 0, 0.498039) 0px 1px 1px;
position: relative;
vertical-align: bottom;
z-index: 1;
height:100%;
}
.blog_featured_post a:hover:before {
opacity: 0.6;
box-shadow: inset 0px -3px 200px 5px #000;
}
.blog_featured_post a:before {
display: none;
position: absolute;
content: '';
left: 0px;
top: 0px;
width: 100%;
height: 100%;
box-shadow: inset 0px -3px 300px 5px #000;
opacity: 0.5;
-webkit-transition: all 0.2s;
transition: all 0.2s;
}
.blog_featured_post a .blog_contents {
display: block;
position: absolute;
z-index: 5;
bottom: 30px;
left: 30px;
right: 30px;
font-weight:bold;
letter-spacing: -1px;
text-transform: uppercase;
line-height: 120%;
-webkit-transition: all 0.2s;
transition: all 0.2s;
font-family: Lato,微軟正黑體,raleway, sans-serif;
}
.blog_contents span {
font-style: normal;
display: block;
position: absolute;
bottom: 100%;
padding: 5px 10px;
letter-spacing: 0px;
font-size: 11px;
line-height: 1;
text-shadow: none;
margin-bottom: 10px;
background:#F9BF3B;
}
.blog_contents span:after {
content: "";
border-style: solid;
border-width: 21px 7px 21px;
border-color: transparent;
border-bottom-color:#F9BF3B;
right: -7px;
bottom: 0;
position: absolute;
}
.blog_contents span:before {
content: "";
border-style: solid;
border-width: 21px 7px 21px;
border-color: transparent;
border-top-color: #F9BF3B;
left: -7px;
top: 0;
position: absolute;
}
.blog_featured_post a .blog_contents h3 {
font-size: 18px;
line-height: 1.35;
font-weight: bold;
}
.blog_featured_post.first a .blog_contents h3 {font-size: 22px!important;}
.blog_featured_post .feat-img{
width:100%;
height:100%;
background-size:cover;
background-position:50%;
}
.search-content {
background: #2A3744;
height: 95px;
position: absolute;
width: 50%;
padding-top: 20px;
padding-left: 160px;
background-color: transparent;
visibility: hidden;
opacity: 0;
transition: .4s;
z-index: 999;
}
.sc-active {
visibility: visible;
opacity: 1;
transition: .4s;
background-color: transparent;
}
.search-content input ,
.search-content input:focus {
border: none;
outline: 0;
background: transparent;
padding: 20px 0;
color: #fff;
width: 50%;
font-size: 16px;
margin: 4px 0 0;
box-shadow: none;
}
.search-content input::-webkit-input-placeholder {
color: #FFF;
opacity: 1;
}
.search-content input:-moz-placeholder {
color: #FFF;
opacity: 1;
}
.search-content input::-moz-placeholder{
color: #FFF;
opacity: 1;
}
.search-content input:-ms-input-placeholder {
color: #FFF;
opacity: 1;
}
.search-content input.search-submit{
display: none;
}
/* Footer subscription section */
#footer-socials {
padding: 23px 0 30px 0;
background: #30373b;
text-align: center;
height: 105px;
}
#footer-socials h3 {
color: #fff;
margin: 0 0 23px 0;
text-transform: uppercase;
text-align: center;
font-weight: normal;
font-family: 'Varela Round', Arial, Helvetica, sans-serif;
line-height: 1.6em;
font-size: 1.17em;
}
#footer-socials .socialicons a {
border-color: rgba(255, 255, 255, 0.1);
width: 70px;
height: 53px;
line-height: 53px;
}
#footer-socials .socialicons a:hover {
color: #f4b757;
border-color: #f4b757;
}
#footer-socials .socialicons ul {
margin-top: -10px;
}
#footer-socials .socialicons ul li {
margin-top: 10px;
}
#footer-socials .ftnewsletter p{
margin-bottom: 0;
}
#footer-socials .ftnewsletter ::-webkit-input-placeholder {
color: #b5babe;
}
#footer-socials .ftnewsletter :-moz-placeholder {
color: #b5babe;
}
#footer-socials .ftnewsletter ::-moz-placeholder {
color: #b5babe;
}
#footer-socials .ftnewsletter :-ms-input-placeholder {
color: #b5babe;
}
#footer-socials .ftnewsletter form {
position: relative;
padding-right: 125px;
}
#footer-socials .ftnewsletter form label {
display: none;
}
#footer-socials .ftnewsletter .form-group {
margin: 0;
}
input[type="submit"], button, .btn {
padding: 18px 20px;
outline: 0 !important;
border: 0;
border-radius: 0;
text-align: center;
font-size: 13px;
text-transform: uppercase;
-webkit-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
font-family: "Open Sans", Arial, Helvetica, sans-serif;
color: #fff;
background: #30373b !important;
position: relative;
-webkit-box-shadow: none !important;
box-shadow: none !important;
-webkit-appearance: none;
}
input[type="text"], input[type="password"], input[type="email"], input[type="search"], textarea {
border-radius: 0;
outline: 0;
border: 0;
-webkit-appearance: none;
-webkit-box-shadow: none !important;
box-shadow: none !important;
padding: 13px 20px;
height: auto;
color: #909396;
font-size: 14px;
font-family: "Open Sans", Arial, Helvetica, sans-serif;
-webkit-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
border: 1px solid #efeff0;
width: 100%;
background: transparent;
}
#footer-socials .ftnewsletter input[type="email"],
#footer-socials .ftnewsletter input[type="text"] {
padding: 17px 20px;
background: transparent;
border-color: rgba(255, 255, 255, 0.1);
color: #fff;
position: relative;
}
#footer-socials .ftnewsletter input[type="email"]:focus, #footer-socials .ftnewsletter input[type="text"]:focus {
border-color: #f4b757;
}
#footer-socials .ftnewsletter input[type="submit"] {
position: absolute;
right: 0;
top: 0;
padding-right: 0;
padding-left: 0;
width: 125px;
text-align: center;
margin: 0;
background: #f4b757 !important;
}
#footer-socials .ftnewsletter .formError {
left: 0 !important;
top: 100% !important;
margin-top: 12px !important;
}
.col-md-6 {
width: 50%;
float: left;
}
.widget_wysija_cont .abs-req {
display: none;
}
/* social icons */
.socialicons ul {
font-size: 0;
}
.socialicons ul li {
display: inline-block;
vertical-align: middle;
margin-right: 10px;
}
.socialicons ul li:last-child {
margin-right: 0;
}
.socialicons a {
text-decoration: none;
font-size: 16px;
width: 54px;
height: 40px;
line-height: 40px;
color: #b5babe;
border: 1px solid #efeff0;
text-align: center;
display: block;
}
.socialicons a:hover {
color: #f4b757;
border-color: #f4b757;
}
.about-widget-img {
border-radius: 50%;
overflow: hidden;
display: inline-block;
max-width: 160px;
max-height: 160px;
margin-bottom: 12px;
}
.about-widget h4 {
font-size: 16px;
margin-bottom: 16px;
}
.about-widget {
text-align: center;
}
.about-widget p {
font-size: 14px;
line-height: 24px;
}
.about-widget-social {
text-align: center;
background: #fdfdfd;
margin-left: -30px;
margin-right: -30px;
margin-bottom: -30px;
padding: 25px 30px;
border-top: 1px solid rgba(0,0,0,0.05);
margin-top: 30px;
}
.about-widget-social a i {
font-size: 14px;
margin: 0px 7px;
color: #191b28;
-webkit-transition: all 0.2s linear;
-moz-transition: all 0.2s linear;
-ms-transition: all 0.2s linear;
-o-transition: all 0.2s linear;
transition: all 0.2s linear;
}
.about-widget-social span {
display: none;
}
.sidebar .widget h2:after {
content: '';
display: inline-block;
left: 0px;
width: 100%;
height: 1px;
border: 1px solid rgba(0,0,0,0.08);
border-left: none;
border-right: none;
}
.blog_content span {
padding: 3px 10px;
font-size: 13px;
margin-bottom: 18px;
background: #F9BF3B;
color: #fff;
position: relative;
margin-right: 10px;
}
.blog_content span:before {
content: "";
border-style: solid;
border-width: 21px 7px 21px;
border-color: transparent;
border-top-color: #F9BF3B;
left: -7px;
top: 0;
position: absolute;
}
.blog_content span:after {
content: "";
border-style: solid;
border-width: 21px 7px 21px;
border-color: transparent;
border-bottom-color: #F9BF3B;
right: -7px;
bottom: 0;
position: absolute;
}
.blog_content span a{
color:#fff;
text-transform: capitalize;
}
.blog_content {
margin: 2px 0 15px;
}
form.search-form input {
border: none;
padding: 20px 0;
margin: 0px;
font-size:16px;
}
/* Widget Rekomendasi */
#chslidingbox{background:#fff;width:100%;max-width:355px;height:185px;position:fixed;overflow:hidden;border:none;right:-360px;z-index:99;text-align:left;box-shadow:0 1px 0 0 rgba(0,0,0,0.03);transition:all .4s ease-out}
.chslidingbox-title{background:#30373B;color:#fff;display:block;height:45px;line-height:45px;width:100%;font-size:14px;text-transform:capitalize;font-weight:700;letter-spacing:.5px}
.chslidingbox-title span a{font-family:initial;float:right;height:40px;margin:0 0 0 15px;text-align:center;color:#fff;font-size:20px}
a#chslidingbox-close,a#chslidingbox-close{margin-right:15px}
.chslidingbox-title >span >h2{font-size:20px!important;font-weight:normal!important}
.chslidingbox-container{border:none;float:left;width:100%;height:auto;margin:3px}
.chslidingbox-container >div{border:none;margin:3px 0;padding:10px 0}
.chslidingbox-container >div >span{font-size:14px}
.show{bottom:84px}
.hide{bottom:-145px}
.related-post{font-size:70%; font-family: Lato,微軟正黑體, Open Sans,'Helvetica Neue',Arial,sans-serif;}
.related-post h4{font-size:150%;margin:0 0 .5em}
.related-post-style-2{margin-top:-20px;padding-top:15px;list-style:none}
.related-post-style-2 li{padding:0 10px 10px 10px;overflow:hidden}
.related-post-style-2 li:first-child{border-top:none}
.related-post-style-2 .related-post-item-thumbnail{width:45px;height:45px;max-width:none;max-height:none;border:0;padding:0;float:left;margin:2px 10px 0 0}
.related-post-style-2 .related-post-item-title{font-weight:700;font-size:130%;line-height:normal}
a.related-post-item-title{color:#30373B;transition:all .4s ease-out}
a:hover.related-post-item-title{color:#2ecc71;text-decoration:none}
.related-post-style-2 .related-post-item-summary{display:block;overflow:hidden}
/* CSS Share Button */
.share-post{text-align:center;margin-bottom:20px;margin-top:20px;padding: 10px 0 50px;}
.share-post ul {
margin: 0 auto;
width: 90%;
}
.share-post li{float:left;margin:0 1%;width:18%;padding:0;list-style:none;position:relative;  text-align: center;}
.share-post li:hover{}
.share-post li a{padding:6px 7px 6px 38px;color:#fff;display:block;border-radius:2px;opacity:0.9;font-size:13px;transition:all 0.6s ease-out;}
.share-post li a:hover{color:#fff;opacity:1;}
.share-post li .twitter{background-color:#19bfe5;}
.share-post li .facebook{background-color:#3b5998;}
.share-post li .gplus{background-color:#d44132;}
.share-post li .pinterest{background-color:#cb2027;}
.share-post li .tumblr{background-color:#304e6c;}
.share-post li .twitter:hover,.share-post li .facebook:hover,.share-post li .gplus:hover,
.share-post li .pinterest:hover,.share-post li .tumblr:hover{color:#fff;}
.share-post li:last-child{margin-right:0}
.share-post li .fa:before{position:absolute;top:0;left:0;display:inline-block;padding:5.5px 12px;font-family:fontawesome;text-align:center;background:rgba(0,0,0,0.08);color:#fff;line-height:20px;text-shadow:2px 2px rgba(0,0,0,0.1);font-size:14px;transition:all 0.6s ease-out;}
.share-post li:hover .fa:before{text-shadow:-2px 2px rgba(0,0,0,0.1);}
.share-post li .fa {display:initial;}
/* CSS Tooltip */
.share-tooltip {position:relative;display:inline-block;}
.share-tooltip:before, .share-tooltip:after {position:absolute;opacity:0;z-index:1000000;-webkit-transition:0.3s ease;-moz-transition:0.3s ease;pointer-events:none;}
.share-tooltip:hover:before, .share-tooltip:hover:after {opacity:1;}
.share-tooltip:before {content:&#39;&#39;;position:absolute;background:transparent;border:6px solid transparent;position:absolute;}
.share-tooltip:after {content:attr(data-share-tooltip);background:rgba(0,0,0,0.7);background:hsla(0,0%,20%,0.9);color:#fff;padding:8px 10px;
font-size:12px;white-space:nowrap;border-radius:3px;-webkit-backface-visibility:hidden;}
.share-tooltip-top:before {bottom:125%;left:10%;margin:0 0 -18px 0;border-top-color:rgba(0,0,0,0.7);border-top-color:hsla(0,0%,20%,0.9);}
.share-tooltip-top:after {bottom:125%;left:10%;margin:0 0 -6px -10px;}
.share-tooltip-top:hover:before {margin-bottom:-10px;}
.share-tooltip-top:hover:after {margin-bottom:2px;}
.share-tooltip-bottom:before {top:100%;left:50%;margin:-14px 0 0 0;border-bottom-color:rgba(0,0,0,0.7);border-bottom-color:hsla(0,0%,20%,0.9);}
.share-tooltip-bottom:after {top:100%;left:50%;margin:-2px 0 0 -10px;}
.share-tooltip-bottom:hover:before {margin-top:-6px;}
.share-tooltip-bottom:hover:after {margin-top:6px;}
.share-tooltip-right:before {left:100%;bottom:50%;margin:0 0 -4px -8px;border-right-color:rgba(0,0,0,0.7);border-right-color:hsla(0,0%,20%,0.9);}
.share-tooltip-right:after {left:100%;bottom:50%;margin:0 0 -13px 4px;}
.share-tooltip-right:hover:before {margin:0 0 -4px -0;}
.share-tooltip-right:hover:after {margin:0 0 -13px 12px;}
.share-tooltip-left:before {right:100%;bottom:50%;margin:0 -8px -4px 0;border-left-color:rgba(0,0,0,0.7);border-left-color:hsla(0,0%,20%,0.9);}
.share-tooltip-left:after {right:100%;bottom:50%;margin:0 4px -13px 0;}
.share-tooltip-left:hover:before {margin:0 0 -4px 0;}
.share-tooltip-left:hover:after {margin:0 12px -13px 0;}
*/
--></style>
<style type="text/css">
        h2.post-title a, h1.post-title a, h2.post-title, h1.post-title {
          color:#383838;
          font-size:26px;
        }

.top-comment-widget-menu {
float: left;
margin: -15px 0 15px;
padding: 0;
width: 100%;
height: 40px;
background: #444444 url(//2.bp.blogspot.com/-YxxeRcqP6UI/U6V7A_pfmnI/AAAAAAAAAik/NyzEC4z7POQ/s1600/menu-bg2.png) repeat;
   
}

.top-comment {
   float: left;
font-size: 14px;
list-style: none outside none;
text-transform: uppercase;
width: 43%;
margin: 1px;
padding: 10px 20px !important;
font-weight: normal;
color: #fff;
cursor: pointer;
}

#relpost_img_sum .news-text {
    display: none;
}

.top-comment.selected {
   cursor: pointer;
padding: 11px 20px !important;
margin: 0px 0 0 -16px;
color: #FFF;
background: $(maincolor);
   
-webkit-transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
    -ms-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}

.top-comment.blogico:before {
    content: "\f0d5";
    font-family: fontawesome;
    margin-right: 15px;
}

.top-comment.faceico:before {
    content: "\f09a";
    font-family: fontawesome;
    margin-right: 15px;
}

      </style>
<style>
      @media only screen and (max-width:770px){
#menu-main {
    display: none!important;
}
        #selectnav1 {
          background: none repeat scroll 0 0 #333;
          border: 1px solid #232323;
          color: #FFF;
          width: 418px;
          margin: 8px 0px;
          float: left;
        }
        .selectnav {
          display:block;
          width:50%;
          margin:0;
          padding:7px;
        }
      }
      @media only screen and (max-width:768px){

        #selectnav1 {
          width: 401px;
        }
      }
      @media only screen and (max-width:480px){
        #selectnav1 {
          width:254px;
        }
      }
      @media only screen and (max-width:320px){
        #selectnav1 {
          width:256px;
        }
      }


      /* MEDIA QUERY */
 @media only screen and (max-width:1179px){
      .containz{width:975px}
div#mywrapper {
    width: 654px;
}
#post-wrapper { 
width: 654px;
max-width: 654px;        
}
.header-right {
margin: 30px 0px 0px;
width: 66.8%;        
}
.blog_featured_post.third, .blog_featured_post.fourth {
    width: 34%;
    height: 163px;
}
      }
      @media only screen and (max-width:1066px){
        #outer-wrapper {
          margin:0 auto;
        }
        #post-wrapper {
          width: 670px;
          max-width: 670px;
        }
                div#mywrapper {
          float: left;
          width: 670px;
        }
#related-posts a {
    width: 210px;
}
#related-posts .related_img {
    padding: 0px;
    width: 100%;
    max-width: 100%;
    height: 150px;
}
 
#sidebar-wrapper { 
max-width: 297px;
}
        ul.xpose_thumbs1{width:60%}
        ul.xpose_thumbs22{width:38%}

        div.conty,#nav{width: 968px;}
      }
      @media only screen and (max-width:1024px){
.header {
    max-width: 100%;
    height: 100px;
    margin: 0px 0px 0px;
    width: 100%;
    text-align: center;
}
.header-right {
    margin: 10px auto;
    width: 100%;
    display: block;
    float: center;
}
        #menu-main {
          display: none;
        }
   #my-slider {
      margin-left: 15px;
        }
#nav{width: 100%;margin:0;}

        div#main {
          width: auto;
        }
    .containz, #post-wrapper {
          width: 730px;
          max-width: 730px;
        }
        #sidebar-wrapper{
          width:100%;
          max-width:100%;
        }
#menu-main {
          display: none;
        }
        #searchformfix{display:none;}
#related-posts a {
    width: 235px;
        }

.blog_featured_post.second,.blog_featured_post.first,.blog_featured_post.third,.blog_featured_post.fourth {width: 100%;height:300px;margin-bottom: 9px;}
.blog_featured_post a .blog_contents{left:15px;right:15px;bottom:10px;}
.blog_featured_post.first a .blog_contents h3,.blog_featured_post a .blog_contents h3 {font-size: 20px;}
.blog_contents span{font-size:10px;padding:3px 10px;}
.blog_contents span:before{border-width: 17px 7px 0px;}
.blog_contents span:after{border-width: 0px 7px 16px;}

      }

@media only screen and (max-width:800px){
      .back-to-top {display: none;}
.menubar2 a {
    display: block;
    padding: 0px 10px;
}
.col-md-6 {
    width: 100%;
    float: left;
}
#footer-socials {

    height: 205px;
}
}

@media only screen and (max-width:768px){
        #outer-wrapper {
          padding:0 12px;
        }
        #menu-main {
          display: none;
        }
#my-slider {
margin-left: -6px;
}



.share-post li {
  float: left;
  margin: 1% 1%;
  width: 30%;}
.iconpretext{
padding-top: 8px;
margin: 0px;
}
#searchformfix {

display: none;
}
        #nav {margin:0 10px}
 #nav {
width: 443px;
}
.containz,div.conty {
width: 401px;
}

 ul.xpose_thumbs1{width:100%}
        ul.xpose_thumbs22{width:100%}

   ul.xpose_thumbs22 span.xpose_meta{line-height:51px}

               div#mywrapper {
          float: center;
          width: auto;
        }
        #post-wrapper, #sidebar-wrapper {
          float:right;
          width:100%;
          max-width:100%
        }
        .active {
          display: block;
        }
        .post-body img {
          max-width:90%;
        }
        .img-thumbnail {
          margin:0 0 15px 0;width: 100%;
        }
        .img-thumbnail img {width: 100%}
        .stylebox .widget {
          padding:0 0 10px 0;
        }
        #stylebox-1 .widget, #stylebox-3 .widget, #stylebox-5 .widget {
          padding:0 5px 10px 0;
        }
        #stylebox-2 .widget, #stylebox-4 .widget, #stylebox-6 .widget {
          padding:0 0 10px 5px;
        }
        .sidebar-container, .post-container {
          padding:15px 0 0px;
        }
.top-comment{width:41%}

        #beakingnews {display: none;}
        ul.socialbar {
width: 100%;
text-align: center;
}
ul.socialbar li, ul.socialbar li {
    float: none;
    margin-right: 0px;
    margin-bottom: 0px;
    padding: 0px;
    display: inline-block;
    width: auto;
}
ul.socialbar li a, ul.socialbar li a, a.soc-follow {
    display: inline-block;
    float: none;
    margin: 0px 0px 2px;
    padding: 0px;
    width: 40px;
    height: 43px;
    text-indent: -9999px;
    transition: all 0.3s ease 0s;
}
#nav {
    width: auto;height: 56px;min-height: 46px;
}
#bottombar .left, #bottombar .center, #bottombar .right {
    width: 100%;
}
.footer-left {
    float: left;
    margin: 10px 0;
    color: #626262;
    width: 100%;
    text-align: center;
}
.footer-right {
    display: none;
}
#related-posts a {
    width: 100%;
}
#related-posts .related_img {
    height: 170px;
}

.col-md-6 {
    width: 100%;
    float: left;
}
#footer-socials {

    height: 205px;
}

#footer-socials .socialicons a {
    border-color: rgba(255, 255, 255, 0.1);
    width: 50px;
    height: 53px;
    line-height: 53px;
}
      }
      @media only screen and (max-width:640px){
        #outer-wrapper {
          padding:0 10px;
        }
        #menu-main {
          display: none;
        }
        .top-comment{width:41%}
        #content-wrapper{padding:0 10px}
        #sidebar-narrow{display:none}
        div#mywrapper {
          float: center;
          width: auto;
        }
        
        #post-wrapper, #sidebar-wrapper, #bottombar .left, #bottombar .center, #bottombar .right {
          float:right;
          width:100%;
          max-width:100%
        }
.header {height: 75px;}
        .header, .header-right {
          margin:0px 0;
        }
        .sidebar-container, .post-container{
          padding:10px 0 0px;
        }
        .largebanner .widget, #bottombar {
          padding:10px;
        }
        .post, .breadcrumbs {
          margin:0 0 10px;
          padding:10px;
        }
        .pagenavi {
          margin: 6px 0 10px;
        }
        .stylebox .widget-content {
          padding:10px;
        }
        #bottombar .left .widget, #bottombar .center .widget, #bottombar .right .widget, .sidebar .widget {
          margin:0 0 10px 0;
        }
.top-comment{width:41%}
        .top-comment-widget-menu {background: #444;}
        .breadcrumbs {display: none;}
        h2.post-title {clear: both;}
div#top-social {
   float: none; 
    text-align: center;
}


      }
      @media only screen and (max-width:480px){
        #outer-wrapper {
          padding:0 8px;
        }
.containz {
width: 288px;
}
#footer-socials {

    height: 300px;
}

#nav {
    width: auto;
}
div#header-inner {
    margin-left: 0;
}
div.conty {
width: 256px;
}
#searchformfix, a.readmore, #header-right {
display: none;
}
.pagenavi span,.pagenavi a {
margin-top:3px;
}
.top-comment{width:37%}

        .top-comment-widget-menu{height:58px}
        ul.xpose_thumbs1,ul.xpose_thumbs22{width:100%}
        #menu-main {
          display: none;
        }
        #sidebar-narrow{display:none}
        div#mywrapper {
          float: center;
          width: auto;
        }
        .header, .header-right, .stylebox,.stylebox1  {
          float:none;
          width:100%;
          max-width:100%
        }
        .header img {
          margin: 0px auto 0;
        }
        .largebanner .widget, #bottombar {
          padding:8px;
        }
        .post, .breadcrumbs {
          margin:0 0 8px;
          padding:8px;
        }
        .stylebox .widget-content,.stylebox1  .widget-content {
          padding:8px;
        }
        h2.post-title, h1.post-title {
          font-size:16px;
        }
.img-thumbnail, .img-thumbnail img {
    width: 100%;
    height: 150px;
    margin-bottom: 15px !important;
}
        .img-thumbnail {
          margin:0 8px 0 0;
        }
        #stylebox-1 .widget, #stylebox-3 .widget,	#stylebox-2 .widget, #stylebox-4 .widget, #stylebox-5 .widget, #stylebox-6 .widget {
          padding:0 0 8px 0;
        }
        .comments .comment-block, .comments .comments-content .inline-thread {
          padding:10px !important;
        }
        .comment .comment-thread.inline-thread .comment {
          margin: 0 0 0 0 !important;
        }
        .footer-left, .footer-right {
          float:none;
          text-align:center;
        }
div#top-social {
   float: none; 
    text-align: center;
}
      }
 @media screen and (max-width:360px){
.header h1.title {font: bold 54px Fjalla One,Arial,Helvetica,sans-serif;padding-top: 6px;}
    }
      @media screen and (max-width:320px){
.containz {
    width: auto;
}
        #outer-wrapper {
          padding:0 6px;
        }
        #menu-main {
          display: none;
        }
        #sidebar-narrow{display:none}
        div#mywrapper {
          float: center;
          width: auto;
        }
        .post, .breadcrumbs {
          padding:6px;
        }
        .stylebox .widget-content,.stylebox1  .widget-content {
          padding:6px;
        }
  #bottombar {
padding: 8px 0;
width: 288px;
}
#bottombar h2 {
    padding: 15px 0px 10px;
}
      }

@media screen and (max-width:319px){
.header h1.title {font: bold 44px Fjalla One,Arial,Helvetica,sans-serif;padding-top: 11px;}
#selectnav1 {
    width: 220px;
}
#outer-wrapper {
    padding: 0px;
}
.containz {
    width: auto;
}
        #outer-wrapper {
          padding:0;
        }
        #menu-main {
          display: none;
        }
        #sidebar-narrow{display:none}
        div#mywrapper {
          float: center;
          width: auto;
        }
        .post, .breadcrumbs {
          padding:6px;
        }
        .stylebox .widget-content,.stylebox1  .widget-content {
          padding:6px;
        }
#bottombar {
    padding: 8px 0px;
    width: 220px;
}
.PopularPosts .item-title {
    padding-bottom: 0.2em;
    padding-top: 4px;
    padding-left: 0px;
    font-size: 10px;
    line-height: 1.3em;
}
        .PopularPosts ul li img {width: 52px;height:52px;}
      }
    </style>
<style type="text/css">   
@media screen and (max-width:480px){
div#mywrapper {
    width: 288px;
}
}
@media screen and (max-width:319px){
div#mywrapper {
    width: 100%;
}
    #author-box {display: none;}
#related-posts .related_img {
    height: auto;
}
.top-comment {
    width: 100%;
}
    .top-comment {padding: 10px 0!important;}
}
.top-comment-widget-menu {
    height: 81px;
}
</style>
<style type="text/css">
        /* COMMENT */
        .comment-form {
          overflow:hidden;
        }
        .comments h3 {
          line-height:normal;
          text-transform:uppercase;
          color:#333;
          font-weight:bold;
          margin:0 0 20px 0;
          font-size:14px;
          padding:0 0 0 0;
        }
        h4#comment-post-message {
          display:none;
          margin:0 0 0 0;
        }
        .comments{
          clear:both;
          margin-top:10px;
          margin-bottom:0
        }
        .comments .comments-content{
          font-size:13px;
          margin-bottom:8px
        }
        .comments .comments-content .comment-thread ol{
          text-align:left;
          margin:13px 0;
          padding:0
        }
        .comments .avatar-image-container {
          background:#fff;
          border:1px solid #DDD;
          overflow:hidden;
          padding:6px;
        }
        .comments .comment-block{
          position:relative;
          background:#fff;
          padding:15px;
          margin-left:60px;
          border-left:3px solid #ddd;
          border-top:1px solid #DDD;
          border-right:1px solid #DDD;
          border-bottom:1px solid #DDD;
        }
        .comments .comment-block:before {
          content:"";
          width:0px;
          height:0px;
          position:absolute;
          right:100%;
          top:14px;
          border-width:10px;
          border-style:solid;
          border-color:transparent #DDD transparent transparent;
          display:block;
        }
        .comments .comments-content .comment-replies{
          margin:8px 0;
          margin-left:60px
        }
        .comments .comments-content .comment-thread:empty{
          display:none
        }
        .comments .comment-replybox-single {
          background:#f0f0f0;
          padding:0;
          margin:8px 0;
          margin-left:60px
        }
        .comments .comment-replybox-thread {
          background:#f0f0f0;
          margin:8px 0 0 0;
          padding:0;
        }
        .comments .comments-content .comment{
          margin-bottom:6px;
          padding:0
        }
        .comments .comments-content .comment:first-child {
          padding:0;
          margin:0
        }
        .comments .comments-content .comment:last-child {
          padding:0;
          margin:0
        }
        .comments .comment-thread.inline-thread .comment, .comments .comment-thread.inline-thread .comment:last-child {
          margin:0px 0px 5px 30%
        }
        .comment .comment-thread.inline-thread .comment:nth-child(6) {
          margin:0px 0px 5px 25%;
        }
        .comment .comment-thread.inline-thread .comment:nth-child(5) {
          margin:0px 0px 5px 20%;
        }
        .comment .comment-thread.inline-thread .comment:nth-child(4) {
          margin:0px 0px 5px 15%;
        }
        .comment .comment-thread.inline-thread .comment:nth-child(3) {
          margin:0px 0px 5px 10%;
        }
        .comment .comment-thread.inline-thread .comment:nth-child(2) {
          margin:0px 0px 5px 5%;
        }
        .comment .comment-thread.inline-thread .comment:nth-child(1) {
          margin:0px 0px 5px 0;
        }
        .comments .comments-content .comment-thread{
          margin:0;
          padding:0
        }
        .comments .comments-content .inline-thread{
          background:#fff;
          border:1px solid #DDD;
          padding:15px;
          margin:0
        }
        .comments .comments-content .icon.blog-author {
          display:inline;
        }
        .comments .comments-content .icon.blog-author:after {
          content: "Admin";
background: $(maincolor);
color: #fff;
font-size: 11px;
padding: 2px 5px;
        }
        .comment-header {
          text-transform:uppercase;
          font-size:12px;
        }
        .comments .comments-content .datetime {
          margin-left: 6px;
        }
        .comments .comments-content .datetime a {
          color:#888;
        }
        .comments .comment .comment-actions a {
          display:inline-block;
          color:#333;
          font-weight:bold;
          font-size:10px;
          line-height:15px;
          margin:4px 8px 0 0;
        }
        .comments .continue a {
          color:#333;
          display:inline-block;
          font-size:10px;
        }
        .comments .comment .comment-actions a:hover, .comments .continue a:hover{
          text-decoration:underline;
        }
        .pesan-komentar {
                  }
        .pesan-komentar p {
          line-height:normal;
          margin:0 0;
        }
        .pesan-komentar:before {
         
        }
        .fb-comments{width: 100% !important;}
        .fb-comments iframe[style]{width: 100% !important;}
        .fb-like-box{width: 100% !important;}
        .fb-like-box iframe[style]{width: 100% !important;}
        .fb-comments span{width: 100% !important;}
        .fb-comments iframe span[style]{width: 100% !important;}
        .fb-like-box span{width: 100% !important;}
        .fb-like-box iframe span[style]{width: 100% !important;}
        .fotleft{float:left}
        .fotright{float:right;text-align:right;}
      </style>
<style id="template-skin-1" type="text/css"><!--
#layout:before {    content: 'This is the property of ThemeXpose.com';
text-transform: uppercase;
font-size: 20px;
color: #999;
margin: 0 0 20px 0;
display: inline-block;
font-weight: 700;
padding: 20px;
font-family: Lato,微軟正黑體,sans-serif;
border: 4px double #FD856E;}
body#layout .containz li {
list-style: none;
}
body#layout #bottombar .center {
float: left;
width: 32%;
}
body#layout #bottombar .right {
float: right;
width: 30%;
}
body#layout nav.top-menu {
overflow: visible;
width: 50%;
float: right;
}
body#layout div#top-social {
width: 100%;
float: right;
}
--></style>
<!-- author image in post-->
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/cb=gapi.loaded_3" async=""></script><script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/cb=gapi.loaded_2" async=""></script><script id="facebook-jssdk" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/sdk.js"></script><script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/cb=gapi.loaded_1" async=""></script><script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/cb=gapi.loaded_0" async=""></script><script style="text/javascript">
      //<![CDATA[
      function authorshow(data) {
        for (var i = 0; i < 1; i++) {
          var entry = data.feed.entry[i];
          var avtr = entry.author[0].gd$image.src;
          document.write('<img width="60" height="60" src="' + avtr + '"/>');
        }
      }
      //]]>
    </script>
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/jquery.min.js"></script>
<script type="text/javascript">
      $(function() {
        $(".set-1").mtabs();                                
      });
    </script>
<script type="text/javascript">
      //<![CDATA[
      window.selectnav=function(){return function(p,q){var a,h=function(b){var c;b||(b=window.event);b.target?c=b.target:b.srcElement&&(c=b.srcElement);3===c.nodeType&&(c=c.parentNode);c.value&&(window.location.href=c.value)},k=function(b){b=b.nodeName.toLowerCase();return"ul"===b||"ol"===b},l=function(b){for(var c=1;document.getElementById("selectnav"+c);c++){}return b?"selectnav"+c:"selectnav"+(c-1)},n=function(b){g++;var c=b.children.length,a="",d="",f=g-1;if(c){if(f){for(;f--;){d+=r}d+=" "}for(f=0;f<c;f++){var e=b.children[f].children[0];if("undefined"!==typeof e){var h=e.innerText||e.textContent,i="";j&&(i=-1!==e.className.search(j)||-1!==e.parentElement.className.search(j)?m:"");s&&!i&&(i=e.href===document.URL?m:"");a+='<option value="'+e.href+'" '+i+">"+d+h+"</option>";t&&(e=b.children[f].children[1])&&k(e)&&(a+=n(e))}}1===g&&o&&(a='<option value="">'+o+"</option>"+a);1===g&&(a='<select class="selectnav" id="'+l(!0)+'">'+a+"</select>");g--;return a}};if((a=document.getElementById(p))&&k(a)){document.documentElement.className+=" js";var d=q||{},j=d.activeclass||"active1",s="boolean"===typeof d.autoselect?d.autoselect:!0,t="boolean"===typeof d.nested?d.nested:!0,r=d.indent||"\u2192",o=d.label||"- Navigation -",g=0,m=" selected ";a.insertAdjacentHTML("afterend",n(a));a=document.getElementById(l());a.addEventListener&&a.addEventListener("change",h);a.attachEvent&&a.attachEvent("onchange",h)}}}();(jQuery);
      //]]></script>
<!--Menu To Drop Down Started-->
<script type="text/javascript">
      //<![CDATA[
      $(document).ready(function(){
        selectnav('menu-main', {
          label: 'Select Here ',
          nested: true,
          autoselect: false,
          indent: '-'
        });
      });
      //]]></script>
<script type="text/javascript">
      //<![CDATA[
      var relatedTitles=new Array();var relatedTitlesNum=0;var relatedUrls=new Array();var thumburl=new Array();function related_results_labels_thumbs(json){for(var i=0;i<json.feed.entry.length;i++){var entry=json.feed.entry[i];relatedTitles[relatedTitlesNum]=entry.title.$t;try{thumburl[relatedTitlesNum]=entry.gform_foot.url}catch(error){s=entry.content.$t;a=s.indexOf("<img");b=s.indexOf("src=\"",a);c=s.indexOf("\"",b+5);d=s.substr(b+5,c-b-5);if((a!=-1)&&(b!=-1)&&(c!=-1)&&(d!="")){thumburl[relatedTitlesNum]=d}else thumburl[relatedTitlesNum]='http://3.bp.blogspot.com/-zP87C2q9yog/UVopoHY30SI/AAAAAAAAE5k/AIyPvrpGLn8/s1600/picture_not_available.png'}if(relatedTitles[relatedTitlesNum].length>35)relatedTitles[relatedTitlesNum]=relatedTitles[relatedTitlesNum].substring(0,35)+"...";for(var k=0;k<entry.link.length;k++){if(entry.link[k].rel=='alternate'){relatedUrls[relatedTitlesNum]=entry.link[k].href;relatedTitlesNum++}}}}function removeRelatedDuplicates_thumbs(){var tmp=new Array(0);var tmp2=new Array(0);var tmp3=new Array(0);for(var i=0;i<relatedUrls.length;i++){if(!contains_thumbs(tmp,relatedUrls[i])){tmp.length+=1;tmp[tmp.length-1]=relatedUrls[i];tmp2.length+=1;tmp3.length+=1;tmp2[tmp2.length-1]=relatedTitles[i];tmp3[tmp3.length-1]=thumburl[i]}}relatedTitles=tmp2;relatedUrls=tmp;thumburl=tmp3}function contains_thumbs(a,e){for(var j=0;j<a.length;j++)if(a[j]==e)return true;return false}function printRelatedLabels_thumbs(){for(var i=0;i<relatedUrls.length;i++){if((relatedUrls[i]==currentposturl)||(!(relatedTitles[i]))){relatedUrls.splice(i,1);relatedTitles.splice(i,1);thumburl.splice(i,1);i--}}var r=Math.floor((relatedTitles.length-1)*Math.random());var i=0;if(relatedTitles.length>0)document.write('<h1>'+relatedpoststitle+'</h1>');document.write('<div style="clear: both;"/>');while(i<relatedTitles.length&&i<20&&i<maxresults){document.write('<a ');if(i!=0)document.write('"');else document.write('');document.write(' href="'+relatedUrls[r]+'"><img class="related_img" src="'+thumburl[r]+'"/><br/><div id="r-title"><h8>'+relatedTitles[r]+'<h8></div></a>');if(r<relatedTitles.length-1){r++}else{r=0}i++}document.write('</div>');relatedUrls.splice(0,relatedUrls.length);thumburl.splice(0,thumburl.length);relatedTitles.splice(0,relatedTitles.length)}

      //]]>
    </script>
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/jquery.min(1).js" type="text/javascript"></script>
<script type="text/javascript">//<![CDATA[
var summary = 27;
function stripTags(s, n) {
    return s.replace(/<.*?>/ig, "").split(/\s+/).slice(0, n - 1).join(" ")
}

var _0x9153=["\x67\x20\x48\x28\x61\x29\x7B\x39\x20\x70\x3D\x69\x2E\x6A\x28\x61\x29\x3B\x39\x20\x66\x3D\x57\x3B\x36\x3D\x22\x22\x3B\x35\x3D\x70\x2E\x56\x28\x22\x35\x22\x29\x3B\x73\x28\x35\x2E\x55\x3E\x3D\x31\x29\x36\x3D\x27\x3C\x32\x20\x33\x3D\x22\x54\x22\x3E\x3C\x61\x20\x34\x3D\x22\x27\x2B\x79\x2B\x27\x22\x3E\x3C\x35\x20\x6B\x3D\x22\x27\x2B\x35\x5B\x30\x5D\x2E\x6B\x2B\x27\x22\x20\x6C\x3D\x22\x50\x2D\x6E\x3A\x6F\x25\x3B\x6E\x3A\x6F\x25\x3B\x22\x20\x4E\x3D\x22\x27\x2B\x78\x2B\x27\x22\x20\x2F\x3E\x3C\x2F\x61\x3E\x3C\x2F\x32\x3E\x27\x3B\x4A\x20\x36\x3D\x27\x3C\x32\x20\x33\x3D\x22\x62\x2D\x76\x20\x49\x2D\x76\x22\x3E\x3C\x2F\x32\x3E\x27\x3B\x70\x2E\x63\x3D\x36\x2B\x27\x3C\x32\x20\x33\x3D\x22\x47\x3D\x4F\x22\x3E\x3C\x32\x20\x33\x3D\x22\x62\x2D\x44\x22\x3E\x3C\x37\x20\x33\x3D\x22\x45\x22\x3E\x27\x2B\x74\x2B\x27\x3C\x2F\x37\x3E\x3C\x37\x20\x33\x3D\x22\x46\x22\x3E\x2D\x3C\x2F\x37\x3E\x3C\x61\x20\x34\x3D\x22\x27\x2B\x79\x2B\x27\x23\x41\x22\x3E\x27\x2B\x75\x2B\x27\x20\x41\x3C\x2F\x61\x3E\x3C\x2F\x32\x3E\x3C\x7A\x20\x33\x3D\x22\x62\x2D\x77\x22\x20\x6C\x3D\x22\x72\x3A\x30\x3B\x72\x2D\x4B\x3A\x4C\x3B\x22\x3E\x3C\x61\x20\x34\x3D\x22\x27\x2B\x79\x2B\x27\x22\x3E\x27\x2B\x78\x2B\x27\x3C\x2F\x61\x3E\x3C\x2F\x7A\x3E\x3C\x70\x3E\x27\x2B\x4D\x28\x70\x2E\x63\x2C\x66\x29\x2B\x27\x2E\x2E\x2E\x3C\x2F\x70\x3E\x3C\x2F\x32\x3E\x27\x7D\x71\x2E\x43\x3D\x67\x28\x29\x7B\x39\x20\x65\x3D\x69\x2E\x6A\x28\x22\x51\x22\x29\x3B\x73\x28\x65\x3D\x3D\x52\x29\x7B\x71\x2E\x53\x2E\x34\x3D\x22\x68\x3A\x2F\x2F\x64\x2E\x42\x2E\x6D\x2F\x22\x7D\x65\x2E\x38\x28\x22\x34\x22\x2C\x22\x68\x3A\x2F\x2F\x64\x2E\x42\x2E\x6D\x2F\x22\x29\x3B\x65\x2E\x38\x28\x22\x58\x22\x2C\x22\x59\x22\x29\x3B\x65\x2E\x38\x28\x22\x77\x22\x2C\x22\x5A\x20\x31\x30\x22\x29\x3B\x65\x2E\x63\x3D\x22\x31\x31\x22\x7D","\x7C","\x73\x70\x6C\x69\x74","\x7C\x7C\x64\x69\x76\x7C\x63\x6C\x61\x73\x73\x7C\x68\x72\x65\x66\x7C\x69\x6D\x67\x7C\x69\x6D\x67\x74\x61\x67\x7C\x73\x70\x61\x6E\x7C\x73\x65\x74\x41\x74\x74\x72\x69\x62\x75\x74\x65\x7C\x76\x61\x72\x7C\x7C\x65\x6E\x74\x72\x79\x7C\x69\x6E\x6E\x65\x72\x48\x54\x4D\x4C\x7C\x77\x77\x77\x7C\x7C\x73\x75\x6D\x6D\x7C\x66\x75\x6E\x63\x74\x69\x6F\x6E\x7C\x68\x74\x74\x70\x7C\x64\x6F\x63\x75\x6D\x65\x6E\x74\x7C\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x42\x79\x49\x64\x7C\x73\x72\x63\x7C\x73\x74\x79\x6C\x65\x7C\x63\x6F\x6D\x7C\x77\x69\x64\x74\x68\x7C\x31\x30\x30\x7C\x7C\x77\x69\x6E\x64\x6F\x77\x7C\x6D\x61\x72\x67\x69\x6E\x7C\x69\x66\x7C\x7C\x7C\x69\x6D\x61\x67\x65\x7C\x74\x69\x74\x6C\x65\x7C\x7C\x7C\x68\x32\x7C\x63\x6F\x6D\x6D\x65\x6E\x74\x73\x7C\x74\x68\x65\x6D\x65\x78\x70\x6F\x73\x65\x7C\x6F\x6E\x6C\x6F\x61\x64\x7C\x6D\x65\x74\x61\x7C\x64\x61\x74\x65\x7C\x73\x65\x70\x7C\x65\x78\x63\x65\x72\x70\x74\x7C\x72\x6D\x7C\x6E\x6F\x7C\x65\x6C\x73\x65\x7C\x62\x6F\x74\x74\x6F\x6D\x7C\x31\x30\x70\x78\x7C\x73\x74\x72\x69\x70\x54\x61\x67\x73\x7C\x61\x6C\x74\x7C\x77\x72\x61\x70\x7C\x6D\x61\x78\x7C\x6D\x79\x63\x6F\x6E\x74\x65\x6E\x74\x7C\x6E\x75\x6C\x6C\x7C\x6C\x6F\x63\x61\x74\x69\x6F\x6E\x7C\x74\x68\x75\x6D\x62\x7C\x6C\x65\x6E\x67\x74\x68\x7C\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x73\x42\x79\x54\x61\x67\x4E\x61\x6D\x65\x7C\x73\x75\x6D\x6D\x61\x72\x79\x7C\x72\x65\x66\x7C\x64\x6F\x66\x6F\x6C\x6C\x6F\x77\x7C\x42\x6C\x6F\x67\x67\x65\x72\x7C\x54\x65\x6D\x70\x6C\x61\x74\x65\x73\x7C\x54\x68\x65\x6D\x65\x58\x70\x6F\x73\x65","","\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65","\x72\x65\x70\x6C\x61\x63\x65","\x5C\x77\x2B","\x5C\x62","\x67"];eval(function(_0x1726x1,_0x1726x2,_0x1726x3,_0x1726x4,_0x1726x5,_0x1726x6){_0x1726x5=function(_0x1726x3){return (_0x1726x3<_0x1726x2?_0x9153[4]:_0x1726x5(parseInt(_0x1726x3/_0x1726x2)))+((_0x1726x3=_0x1726x3%_0x1726x2)>35?String[_0x9153[5]](_0x1726x3+29):_0x1726x3.toString(36))};if(!_0x9153[4][_0x9153[6]](/^/,String)){while(_0x1726x3--){_0x1726x6[_0x1726x5(_0x1726x3)]=_0x1726x4[_0x1726x3]||_0x1726x5(_0x1726x3)};_0x1726x4=[function(_0x1726x5){return _0x1726x6[_0x1726x5]}];_0x1726x5=function(){return _0x9153[7]};_0x1726x3=1;};while(_0x1726x3--){if(_0x1726x4[_0x1726x3]){_0x1726x1=_0x1726x1[_0x9153[6]]( new RegExp(_0x9153[8]+_0x1726x5(_0x1726x3)+_0x9153[8],_0x9153[9]),_0x1726x4[_0x1726x3])}};return _0x1726x1;}(_0x9153[0],62,64,_0x9153[3][_0x9153[2]](_0x9153[1]),0,{}));






//]]></script>
<script type="text/javascript">
 //<![CDATA[

imgr = new Array();
imgr[0] = "http://sites.google.com/site/fdblogsite/Home/nothumbnail.gif";
showRandomImg = true;
aBold = true;
numposts1 = 4;
numposts11 = 1;
newsize = 400;
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('1S O=["\\1C\\h\\d\\T\\p\\16\\q\\V\\19\\c\\d\\1C\\1P\\d\\18\\g\\d\\1r\\p\\p\\1w\\g\\D\\o\\d\\q\\1Q\\d\\18\\g\\d\\1o\\p\\q\\q\\17\\Q\\k\\i\\c\\d\\1w\\h\\d\\1v\\k\\t\\p\\d\\u\\j\\c\\16\\g\\10\\g\\y\\g\\D\\q\\1v\\c\\d\\u\\k\\1B\\h\\1v\\c\\16\\g\\10\\g\\y\\g\\D\\k\\R\\g\\S\\p\\r\\j\\w\\h\\l\\c\\b\\d\\1n\\b\\m\\r\\q\\k\\1h\\p\\v\\h\\x\\c\\Q\\k\\x\\j\\1v\\k\\x\\o\\o\\q\\V\\v\\h\\y\\c\\16\\g\\10\\g\\y\\G\\x\\H\\k\\v\\h\\11\\c\\y\\g\\1d\\g\\1s\\e\\k\\v\\h\\12\\c\\y\\g\\d\\1c\\G\\Q\\H\\g\\d\\1m\\k\\v\\h\\d\\1l\\k\\v\\h\\X\\k\\v\\h\\d\\10\\c\\d\\15\\k\\t\\p\\x\\c\\c\\16\\g\\10\\g\\y\\g\\D\\q\\1f\\k\\1h\\p\\v\\h\\M\\c\\Q\\k\\M\\j\\y\\g\\I\\g\\D\\k\\M\\o\\o\\q\\t\\p\\y\\g\\I\\G\\M\\H\\g\\d\\1b\\c\\c\\b\\d\\1f\\b\\q\\V\\X\\c\\y\\g\\I\\G\\M\\H\\g\\T\\k\\1f\\U\\1h\\p\\v\\h\\M\\c\\Q\\k\\M\\j\\y\\g\\I\\g\\D\\k\\M\\o\\o\\q\\t\\p\\y\\g\\I\\G\\M\\H\\g\\d\\1b\\c\\c\\b\\d\\1j\\b\\13\\13\\y\\g\\I\\G\\M\\H\\g\\d\\14\\c\\c\\b\\d\\1a\\A\\d\\11\\b\\q\\V\\d\\1l\\c\\y\\g\\I\\G\\M\\H\\g\\1d\\g\\1e\\p\\b\\h\\b\\q\\G\\Q\\H\\k\\1f\\U\\t\\p\\b\\d\\J\\b\\d\\F\\h\\y\\q\\v\\h\\1c\\c\\y\\g\\d\\J\\g\\1s\\e\\k\\1B\\h\\t\\p\\b\\d\\f\\b\\d\\F\\h\\y\\q\\v\\h\\1c\\c\\y\\g\\d\\f\\g\\1s\\e\\k\\1B\\h\\v\\h\\1c\\c\\b\\b\\k\\1q\\c\\y\\g\\d\\12\\g\\1s\\e\\k\\t\\p\\19\\m\\1w\\g\\D\\L\\d\\q\\19\\c\\Q\\k\\i\\G\\x\\H\\c\\1w\\G\\19\\H\\k\\s\\c\\1c\\k\\u\\c\\s\\g\\1i\\p\\b\\j\\i\\b\\q\\k\\J\\c\\s\\g\\1i\\p\\r\\d\\16\\c\\b\\r\\B\\u\\q\\k\\F\\c\\s\\g\\1i\\p\\r\\b\\r\\B\\J\\o\\18\\q\\k\\E\\c\\s\\g\\d\\I\\p\\J\\o\\18\\B\\F\\L\\J\\L\\18\\q\\k\\t\\p\\u\\1u\\c\\L\\d\\13\\13\\p\\J\\1u\\c\\L\\d\\13\\13\\p\\F\\1u\\c\\L\\d\\13\\13\\E\\1u\\c\\b\\b\\q\\q\\q\\i\\G\\x\\H\\c\\E\\k\\v\\h\\1r\\c\\G\\d\\B\\N\\B\\1b\\B\\1y\\B\\18\\B\\1l\\B\\1F\\B\\1E\\B\\1D\\B\\d\\Q\\B\\d\\d\\B\\d\\N\\H\\k\\v\\h\\d\\v\\c\\G\\b\\d\\x\\b\\B\\b\\d\\19\\b\\B\\b\\d\\M\\b\\B\\b\\d\\t\\b\\B\\b\\d\\C\\b\\B\\b\\d\\l\\b\\B\\b\\d\\i\\b\\B\\b\\d\\z\\b\\B\\b\\d\\Z\\b\\B\\b\\d\\n\\b\\B\\b\\d\\s\\b\\B\\b\\d\\e\\b\\H\\k\\v\\h\\d\\w\\c\\1q\\g\\1e\\p\\b\\L\\b\\q\\G\\N\\H\\g\\d\\D\\p\\Q\\B\\N\\q\\k\\v\\h\\C\\c\\1q\\g\\1e\\p\\b\\L\\b\\q\\G\\d\\H\\k\\v\\h\\P\\c\\1q\\g\\1e\\p\\b\\L\\b\\q\\G\\Q\\H\\k\\1h\\p\\v\\h\\1a\\c\\Q\\k\\1a\\j\\1r\\g\\D\\k\\1a\\o\\o\\q\\t\\p\\d\\R\\p\\C\\q\\c\\c\\1r\\G\\1a\\H\\q\\V\\C\\c\\d\\v\\G\\1a\\H\\k\\1f\\U\\v\\h\\d\\P\\c\\d\\w\\o\\b\\h\\b\\o\\C\\o\\b\\h\\b\\o\\P\\k\\t\\p\\x\\c\\c\\Q\\q\\V\\v\\h\\d\\X\\c\\b\\1R\\d\\S\\b\\k\\v\\h\\Z\\c\\r\\j\\w\\h\\l\\c\\b\\1n\\h\\d\\y\\b\\m\\j\\u\\h\\T\\c\\b\\r\\o\\X\\o\\r\\b\\m\\j\\w\\h\\l\\c\\b\\W\\b\\m\\j\\z\\m\\r\\o\\12\\o\\r\\j\\A\\z\\m\\j\\n\\m\\r\\o\\11\\o\\r\\j\\A\\n\\m\\j\\A\\w\\m\\j\\w\\h\\l\\c\\b\\1m\\L\\i\\b\\h\\15\\c\\b\\1j\\L\\14\\17\\1g\\p\\r\\o\\i\\G\\x\\H\\o\\r\\q\\k\\b\\m\\j\\A\\w\\m\\j\\A\\u\\m\\j\\A\\w\\m\\r\\k\\R\\g\\S\\p\\Z\\q\\U\\t\\p\\x\\c\\c\\d\\q\\V\\v\\h\\Z\\c\\r\\j\\w\\h\\l\\c\\b\\1n\\h\\d\\1h\\b\\m\\j\\u\\h\\T\\c\\b\\r\\o\\X\\o\\r\\b\\m\\j\\w\\h\\l\\c\\b\\W\\b\\m\\j\\z\\m\\r\\o\\12\\o\\r\\j\\A\\z\\m\\j\\n\\m\\r\\o\\11\\o\\r\\j\\A\\n\\m\\j\\A\\w\\m\\j\\w\\h\\l\\c\\b\\1m\\L\\i\\b\\h\\15\\c\\b\\1j\\L\\14\\17\\1g\\p\\r\\o\\i\\G\\x\\H\\o\\r\\q\\k\\b\\m\\j\\A\\w\\m\\j\\A\\u\\m\\j\\A\\w\\m\\r\\k\\R\\g\\S\\p\\Z\\q\\U\\t\\p\\x\\c\\c\\N\\q\\V\\v\\h\\Z\\c\\r\\j\\w\\h\\l\\c\\b\\1n\\h\\d\\W\\b\\m\\j\\u\\h\\T\\c\\b\\r\\o\\X\\o\\r\\b\\m\\j\\w\\h\\l\\c\\b\\W\\b\\m\\j\\z\\m\\r\\o\\12\\o\\r\\j\\A\\z\\m\\j\\n\\m\\r\\o\\11\\o\\r\\j\\A\\n\\m\\j\\A\\w\\m\\j\\w\\h\\l\\c\\b\\1m\\L\\i\\b\\h\\15\\c\\b\\1j\\L\\14\\17\\1g\\p\\r\\o\\i\\G\\x\\H\\o\\r\\q\\k\\b\\m\\j\\A\\w\\m\\j\\A\\u\\m\\j\\A\\w\\m\\r\\k\\R\\g\\S\\p\\Z\\q\\U\\t\\p\\x\\c\\c\\1b\\q\\V\\v\\h\\Z\\c\\r\\j\\w\\h\\l\\c\\b\\1n\\h\\d\\1e\\b\\m\\j\\u\\h\\T\\c\\b\\r\\o\\X\\o\\r\\b\\m\\j\\w\\h\\l\\c\\b\\W\\b\\m\\j\\z\\m\\r\\o\\12\\o\\r\\j\\A\\z\\m\\j\\n\\m\\r\\o\\11\\o\\r\\j\\A\\n\\m\\j\\A\\w\\m\\j\\w\\h\\l\\c\\b\\1m\\L\\i\\b\\h\\15\\c\\b\\1j\\L\\14\\17\\1g\\p\\r\\o\\i\\G\\x\\H\\o\\r\\q\\k\\b\\m\\j\\A\\w\\m\\j\\A\\u\\m\\j\\A\\w\\m\\r\\k\\R\\g\\S\\p\\Z\\q\\U\\19\\o\\o\\U\\R\\g\\S\\p\\r\\j\\A\\w\\m\\r\\q\\U\\k\\d\\1y\\g\\d\\1q\\c\\1C\\p\\q\\V\\v\\h\\f\\c\\R\\g\\d\\1g\\p\\b\\d\\1i\\b\\q\\k\\t\\p\\f\\c\\c\\d\\1d\\q\\V\\d\\1y\\g\\d\\1B\\g\\T\\c\\b\\d\\1E\\17\\A\\A\\d\\1F\\g\\d\\E\\g\\d\\1D\\A\\b\\U\\f\\g\\1o\\p\\b\\T\\b\\B\\b\\d\\1E\\17\\A\\A\\d\\1F\\g\\d\\E\\g\\d\\1D\\A\\b\\q\\k\\f\\g\\1o\\p\\b\\N\\Q\\b\\B\\b\\N\\d\\b\\q\\k\\f\\g\\1o\\p\\b\\1d\\b\\B\\b\\N\\N\\h\\N\\1b\\b\\q\\k\\f\\g\\N\\1y\\c\\b\\N\\18\\b\\U","\\a","\\s\\z\\t\\x\\e","\\a\\a\\a\\a\\a\\a\\a\\a\\a\\a\\a\\a\\a\\a\\a\\E\\x\\T\\a\\T\\u\\n\\a\\f\\l\\e\\n\\P\\a\\a\\a\\a\\x\\w\\a\\a\\F\\t\\u\\s\\s\\a\\x\\C\\v\\a\\s\\z\\u\\l\\a\\e\\n\\e\\E\\a\\y\\1b\\a\\a\\a\\t\\f\\l\\v\\e\\y\\a\\y\\n\\f\\w\\a\\t\\x\\l\\M\\a\\E\\i\\F\\D\\C\\f\\l\\e\\a\\a\\z\\i\\s\\e\\D\\n\\t\\a\\I\\n\\x\\e\\f\\a\\19\\s\\i\\l\\a\\e\\u\\v\\a\\z\\i\\s\\e\\e\\x\\e\\t\\f\\a\\D\\N\\a\\x\\C\\u\\v\\f\\a\\J\\u\\F\\M\\v\\n\\i\\D\\l\\E\\a\\J\\n\\f\\u\\M\\a\\s\\e\\P\\t\\f\\a\\w\\f\\f\\E\\a\\w\\f\\u\\e\\a\\w\\i\\n\\a\\J\\t\\i\\v\\1p\\F\\i\\l\\e\\f\\l\\e\\s\\a\\s\\z\\t\\x\\e\\a\\z\\i\\s\\e\\F\\i\\l\\e\\f\\l\\e\\a\\z\\i\\s\\e\\E\\u\\e\\f\\a\\J\\t\\i\\v\\1p\\w\\f\\u\\e\\D\\n\\f\\E\\1p\\z\\i\\s\\e\\a\\D\\n\\t\\a\\x\\l\\E\\f\\R\\1c\\w\\a\\e\\x\\e\\t\\f\\a\\f\\t\\s\\f\\a\\C\\u\\R\\z\\i\\s\\e\\a\\x\\C\\v\\n\\a\\s\\f\\e\\S\\e\\e\\n\\x\\J\\D\\e\\f\\a\\C\\i\\l\\e\\y\\a\\w\\D\\l\\F\\e\\x\\i\\l\\a\\a\\a\\a\\n\\f\\t\\a\\I\\x\\l\\E\\i\\I\\a\\W\\u\\e\\y\\a\\z\\F\\C\\a\\I\\I\\I\\a\\y\\e\\e\\z\\a\\F\\i\\C\\a\\l\\D\\C\\z\\i\\s\\e\\s\\d\\a\\F\\i\\l\\e\\f\\l\\e\\a\\x\\l\\a\\e\\y\\f\\C\\f\\R\\z\\i\\s\\f\\a\\s\\D\\C\\C\\u\\n\\P\\a\\E\\u\\P\\a\\C\\i\\l\\e\\y\\N\\a\\w\\x\\n\\s\\e\\a\\10\\u\\l\\a\\14\\f\\J\\a\\W\\u\\n\\a\\S\\z\\n\\a\\W\\u\\P\\a\\10\\D\\l\\a\\10\\D\\t\\a\\S\\D\\v\\a\\1i\\f\\z\\a\\1c\\F\\e\\a\\1e\\i\\T\\a\\11\\f\\F\\a\\s\\D\\J\\s\\e\\n\\x\\l\\v\\a\\n\\f\\F\\f\\l\\e\\z\\i\\s\\e\\s\\d\\a\\s\\D\\J\\s\\e\\n\\a\\z\\u\\n\\s\\f\\15\\l\\e\\a\\E\\u\\P\\s\\e\\n\\a\\s\\e\\a\\14\\14\\1b\\11\\1l\\1l\\a\\s\\n\\F\\a\\z\\D\\J\\t\\x\\s\\y\\f\\E\\a\\y\\e\\C\\t\\a\\e\\f\\R\\e\\a\\e\\P\\z\\f\\a\\n\\f\\z\\t\\x\\f\\s\\a\\u\\t\\e\\f\\n\\l\\u\\e\\f\\a\\l\\f\\I\\s\\x\\X\\f\\a\\F\\n\\i\\z\\s\\x\\X\\f\\a\\e\\f\\n\\C\\a\\s\\f\\F\\i\\l\\E\\a\\e\\y\\x\\n\\E\\a\\w\\i\\D\\n\\e\\y\\a\\F\\u\\e\\f\\v\\i\\n\\P\\a\\i\\l\\t\\i\\u\\E\\a\\J\\t\\i\\v\\1p\\w\\f\\u\\e\\D\\n\\f\\E\\1p\\z\\i\\s\\e\\s\\a\\v\\f\\e\\1a\\t\\f\\C\\f\\l\\e\\16\\P\\15\\E\\a\\C\\P\\F\\i\\l\\e\\f\\l\\e\\a\\l\\D\\t\\t\\a\\t\\i\\F\\u\\e\\x\\i\\l\\a\\S\\n\\n\\u\\P\\a\\l\\f\\I\\a\\n\\u\\l\\E\\i\\C\\a\\w\\t\\i\\i\\n\\a\\s\\y\\i\\I\\1g\\u\\l\\E\\i\\C\\15\\C\\v\\a\\n\\f\\w\\a\\E\\i\\w\\i\\t\\t\\i\\I\\a\\16\\t\\i\\v\\v\\f\\n\\a\\1d\\f\\C\\z\\t\\u\\e\\f\\s\\a\\x\\l\\l\\f\\n\\1f\\1d\\W\\1h\\a\\1d\\y\\f\\C\\f\\1o\\z\\i\\s\\f","","\\w\\n\\i\\C\\12\\y\\u\\n\\12\\i\\E\\f","\\n\\f\\z\\t\\u\\F\\f","\\1K\\I\\o","\\1K\\J","\\v"];1L(1z(1A,1x,K,1k,Y,1G){Y=1z(K){1t(K<1x?O[4]:Y(1V(K/1x)))+((K=K%1x)>1W?1H[O[5]](K+1M):K.1N(1O))};1I(!O[4][O[6]](/^/,1H)){1J(K--){1G[Y(K)]=1k[K]||Y(K)};1k=[1z(Y){1t 1G[Y]}];Y=1z(){1t O[7]};K=1};1J(K--){1I(1k[K]){1A=1A[O[6]](1T 1U(O[8]+Y(K)+O[8],O[9]),1k[K])}};1t 1A}(O[0],1X,1Y,O[3][O[2]](O[1]),0,{}));',62,123,'||||||||||x7C|x22|x3D|x31|x74|x65|x2E|x20|x6F|x3C|x3B|x6E|x3E|x72|x2B|x28|x29|x27|x73|x6C|x61|x67|x66|x69|x68|x70|x2F|x2C|x6D|x75|x64|x63|x5B|x5D|x77|x62|_0xf3c6x3|x2D|x6B|x32|_0x4d4d|x79|x30|x78|x41|x76|x7D|x7B|x4D|x7A|_0xf3c6x5|x71|x4A|x44|x43|x26|x46|x49|x42|x3A|x35|x6A|x45|x33|x4F|x54|x4E|x48|x52|x4C|x53|x47|_0xf3c6x4|x36|x4B|x51|x58|x5F|x50|x59|x24|return|x21|x56|x57|_0xf3c6x2|x34|function|_0xf3c6x1|x55|x5A|x39|x38|x37|_0xf3c6x6|String|if|while|x5C|eval|29|toString|36|x3F|x2A|x23|var|new|RegExp|parseInt|35|62|130'.split('|'),0,{}))


var _0x5ef2=["\x31\x79\x20\x31\x78\x28\x6F\x29\x7B\x6A\x3D\x31\x73\x3F\x53\x2E\x31\x33\x28\x28\x42\x2E\x68\x2B\x31\x29\x2A\x53\x2E\x31\x35\x28\x29\x29\x3A\x30\x3B\x78\x3D\x59\x20\x5A\x3B\x67\x28\x4C\x3C\x3D\x6F\x2E\x75\x2E\x66\x2E\x68\x29\x7A\x3D\x4C\x3B\x45\x20\x7A\x3D\x6F\x2E\x75\x2E\x66\x2E\x68\x3B\x47\x2E\x46\x28\x27\x27\x29\x3B\x72\x28\x65\x20\x69\x3D\x30\x3B\x69\x3C\x7A\x3B\x69\x2B\x2B\x29\x7B\x65\x20\x66\x3D\x6F\x2E\x75\x2E\x66\x5B\x69\x5D\x3B\x65\x20\x4D\x3D\x66\x2E\x52\x2E\x24\x74\x3B\x65\x20\x31\x37\x3D\x66\x2E\x31\x71\x5B\x30\x5D\x2E\x31\x72\x3B\x65\x20\x4A\x3B\x65\x20\x41\x3B\x65\x20\x56\x3D\x58\x3B\x67\x28\x69\x3D\x3D\x6F\x2E\x75\x2E\x66\x2E\x68\x29\x70\x3B\x72\x28\x65\x20\x6B\x3D\x30\x3B\x6B\x3C\x66\x2E\x6C\x2E\x68\x3B\x6B\x2B\x2B\x29\x67\x28\x66\x2E\x6C\x5B\x6B\x5D\x2E\x55\x3D\x3D\x22\x31\x36\x22\x29\x7B\x41\x3D\x66\x2E\x6C\x5B\x6B\x5D\x2E\x4E\x3B\x70\x7D\x72\x28\x65\x20\x6B\x3D\x30\x3B\x6B\x3C\x66\x2E\x6C\x2E\x68\x3B\x6B\x2B\x2B\x29\x67\x28\x66\x2E\x6C\x5B\x6B\x5D\x2E\x55\x3D\x3D\x22\x31\x39\x22\x26\x26\x66\x2E\x6C\x5B\x6B\x5D\x2E\x31\x61\x3D\x3D\x22\x31\x62\x2F\x31\x6F\x22\x29\x7B\x4A\x3D\x66\x2E\x6C\x5B\x6B\x5D\x2E\x52\x2E\x77\x28\x22\x20\x22\x29\x5B\x30\x5D\x3B\x70\x7D\x67\x28\x22\x4B\x22\x4F\x20\x66\x29\x65\x20\x76\x3D\x66\x2E\x4B\x2E\x24\x74\x3B\x45\x20\x67\x28\x22\x49\x22\x4F\x20\x66\x29\x65\x20\x76\x3D\x66\x2E\x49\x2E\x24\x74\x3B\x45\x20\x65\x20\x76\x3D\x22\x22\x3B\x71\x3D\x66\x2E\x57\x2E\x24\x74\x3B\x67\x28\x6A\x3E\x42\x2E\x68\x2D\x31\x29\x6A\x3D\x30\x3B\x78\x5B\x69\x5D\x3D\x42\x5B\x6A\x5D\x3B\x73\x3D\x76\x3B\x61\x3D\x73\x2E\x44\x28\x22\x3C\x78\x22\x29\x3B\x62\x3D\x73\x2E\x44\x28\x27\x31\x34\x3D\x22\x27\x2C\x61\x29\x3B\x63\x3D\x73\x2E\x44\x28\x27\x22\x27\x2C\x62\x2B\x35\x29\x3B\x64\x3D\x73\x2E\x31\x38\x28\x62\x2B\x35\x2C\x63\x2D\x62\x2D\x35\x29\x3B\x67\x28\x61\x21\x3D\x2D\x31\x26\x26\x28\x62\x21\x3D\x2D\x31\x26\x26\x28\x63\x21\x3D\x2D\x31\x26\x26\x64\x21\x3D\x22\x22\x29\x29\x29\x78\x5B\x69\x5D\x3D\x64\x3B\x65\x20\x43\x3D\x5B\x31\x2C\x32\x2C\x33\x2C\x34\x2C\x35\x2C\x36\x2C\x37\x2C\x38\x2C\x39\x2C\x31\x30\x2C\x31\x31\x2C\x31\x32\x5D\x3B\x65\x20\x50\x3D\x5B\x22\x31\x63\x22\x2C\x22\x31\x64\x22\x2C\x22\x31\x65\x22\x2C\x22\x31\x66\x22\x2C\x22\x31\x67\x22\x2C\x22\x31\x68\x22\x2C\x22\x31\x69\x22\x2C\x22\x31\x6A\x22\x2C\x22\x31\x6B\x22\x2C\x22\x31\x6C\x22\x2C\x22\x31\x6D\x22\x2C\x22\x31\x6E\x22\x5D\x3B\x65\x20\x51\x3D\x71\x2E\x77\x28\x22\x2D\x22\x29\x5B\x32\x5D\x2E\x31\x70\x28\x30\x2C\x32\x29\x3B\x65\x20\x6D\x3D\x71\x2E\x77\x28\x22\x2D\x22\x29\x5B\x31\x5D\x3B\x65\x20\x79\x3D\x71\x2E\x77\x28\x22\x2D\x22\x29\x5B\x30\x5D\x3B\x72\x28\x65\x20\x6E\x3D\x30\x3B\x6E\x3C\x43\x2E\x68\x3B\x6E\x2B\x2B\x29\x67\x28\x31\x74\x28\x6D\x29\x3D\x3D\x43\x5B\x6E\x5D\x29\x7B\x6D\x3D\x50\x5B\x6E\x5D\x3B\x70\x7D\x65\x20\x31\x75\x3D\x51\x2B\x22\x20\x22\x2B\x6D\x2B\x22\x20\x22\x2B\x79\x3B\x67\x28\x69\x3D\x3D\x30\x29\x7B\x65\x20\x31\x76\x3D\x22\x23\x31\x77\x22\x3B\x65\x20\x54\x3D\x27\x3C\x48\x20\x31\x7A\x3D\x22\x31\x41\x22\x3E\x3C\x61\x20\x4E\x3D\x22\x27\x2B\x41\x2B\x27\x22\x3E\x27\x2B\x4D\x2B\x27\x3C\x2F\x61\x3E\x3C\x2F\x48\x3E\x27\x3B\x47\x2E\x46\x28\x54\x29\x7D\x6A\x2B\x2B\x7D\x47\x2E\x46\x28\x27\x3C\x2F\x48\x3E\x27\x29\x7D\x3B","\x7C","\x73\x70\x6C\x69\x74","\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x7C\x76\x61\x72\x7C\x65\x6E\x74\x72\x79\x7C\x69\x66\x7C\x6C\x65\x6E\x67\x74\x68\x7C\x7C\x7C\x7C\x6C\x69\x6E\x6B\x7C\x7C\x75\x32\x7C\x6A\x73\x6F\x6E\x7C\x62\x72\x65\x61\x6B\x7C\x70\x6F\x73\x74\x64\x61\x74\x65\x7C\x66\x6F\x72\x7C\x7C\x7C\x66\x65\x65\x64\x7C\x70\x6F\x73\x74\x63\x6F\x6E\x74\x65\x6E\x74\x7C\x73\x70\x6C\x69\x74\x7C\x69\x6D\x67\x7C\x7C\x6D\x61\x78\x70\x6F\x73\x74\x7C\x70\x6F\x73\x74\x75\x72\x6C\x7C\x69\x6D\x67\x72\x7C\x6D\x6F\x6E\x74\x68\x7C\x69\x6E\x64\x65\x78\x4F\x66\x7C\x65\x6C\x73\x65\x7C\x77\x72\x69\x74\x65\x7C\x64\x6F\x63\x75\x6D\x65\x6E\x74\x7C\x64\x69\x76\x7C\x73\x75\x6D\x6D\x61\x72\x79\x7C\x70\x63\x6D\x7C\x63\x6F\x6E\x74\x65\x6E\x74\x7C\x6E\x75\x6D\x70\x6F\x73\x74\x73\x31\x31\x7C\x70\x6F\x73\x74\x74\x69\x74\x6C\x65\x7C\x68\x72\x65\x66\x7C\x69\x6E\x7C\x6D\x6F\x6E\x74\x68\x32\x7C\x64\x61\x79\x7C\x74\x69\x74\x6C\x65\x7C\x4D\x61\x74\x68\x7C\x74\x72\x74\x64\x7C\x72\x65\x6C\x7C\x63\x72\x6F\x70\x73\x69\x7A\x65\x7C\x70\x75\x62\x6C\x69\x73\x68\x65\x64\x7C\x6E\x65\x77\x73\x69\x7A\x65\x7C\x6E\x65\x77\x7C\x41\x72\x72\x61\x79\x7C\x7C\x7C\x7C\x66\x6C\x6F\x6F\x72\x7C\x73\x72\x63\x7C\x72\x61\x6E\x64\x6F\x6D\x7C\x61\x6C\x74\x65\x72\x6E\x61\x74\x65\x7C\x74\x61\x67\x7C\x73\x75\x62\x73\x74\x72\x7C\x72\x65\x70\x6C\x69\x65\x73\x7C\x74\x79\x70\x65\x7C\x74\x65\x78\x74\x7C\x4A\x61\x6E\x7C\x46\x65\x62\x7C\x4D\x61\x72\x7C\x41\x70\x72\x7C\x4D\x61\x79\x7C\x4A\x75\x6E\x7C\x4A\x75\x6C\x7C\x41\x75\x67\x7C\x53\x65\x70\x7C\x4F\x63\x74\x7C\x4E\x6F\x76\x7C\x44\x65\x63\x7C\x68\x74\x6D\x6C\x7C\x73\x75\x62\x73\x74\x72\x69\x6E\x67\x7C\x63\x61\x74\x65\x67\x6F\x72\x79\x7C\x74\x65\x72\x6D\x7C\x73\x68\x6F\x77\x52\x61\x6E\x64\x6F\x6D\x49\x6D\x67\x7C\x70\x61\x72\x73\x65\x49\x6E\x74\x7C\x64\x61\x79\x73\x74\x72\x7C\x73\x74\x7C\x46\x46\x33\x44\x36\x36\x7C\x72\x65\x63\x65\x6E\x74\x70\x6F\x73\x74\x73\x31\x31\x7C\x66\x75\x6E\x63\x74\x69\x6F\x6E\x7C\x63\x6C\x61\x73\x73\x7C\x62\x6C\x6F\x67\x5F\x66\x65\x61\x74\x75\x72\x65\x64\x7A","","\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65","\x72\x65\x70\x6C\x61\x63\x65","\x5C\x77\x2B","\x5C\x62","\x67"];eval(function(_0x1080x1,_0x1080x2,_0x1080x3,_0x1080x4,_0x1080x5,_0x1080x6){_0x1080x5=function(_0x1080x3){return (_0x1080x3<_0x1080x2?_0x5ef2[4]:_0x1080x5(parseInt(_0x1080x3/_0x1080x2)))+((_0x1080x3=_0x1080x3%_0x1080x2)>35?String[_0x5ef2[5]](_0x1080x3+29):_0x1080x3.toString(36))};if(!_0x5ef2[4][_0x5ef2[6]](/^/,String)){while(_0x1080x3--){_0x1080x6[_0x1080x5(_0x1080x3)]=_0x1080x4[_0x1080x3]||_0x1080x5(_0x1080x3)};_0x1080x4=[function(_0x1080x5){return _0x1080x6[_0x1080x5]}];_0x1080x5=function(){return _0x5ef2[7]};_0x1080x3=1;};while(_0x1080x3--){if(_0x1080x4[_0x1080x3]){_0x1080x1=_0x1080x1[_0x5ef2[6]]( new RegExp(_0x5ef2[8]+_0x1080x5(_0x1080x3)+_0x5ef2[8],_0x5ef2[9]),_0x1080x4[_0x1080x3])}};return _0x1080x1;}(_0x5ef2[0],62,99,_0x5ef2[3][_0x5ef2[2]](_0x5ef2[1]),0,{}));
//]]>
</script>
<link href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/authorization.css" media="all" onload="if(media!=&#39;all&#39;)media=&#39;all&#39;" rel="stylesheet"><noscript>&lt;link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=37997006600210175&amp;amp;zx=6c2482fd-6791-4e61-95cd-567e29e75a7a' rel='stylesheet'/&gt;</noscript>
<script type="text/javascript" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/google_top_exp.js"></script><style>.gc-bubbleDefault{background-color:transparent !important;text-align:left;padding:0 !important;margin:0 !important;border:0 !important;table-layout:auto !important}.gc-reset{background-color:transparent !important;border:0 !important;padding:0 !important;margin:0 !important;text-align:left}.pls-bubbleTop{border-bottom:1px solid #ccc !important}.pls-topTail,.pls-vertShimLeft,.pls-contentLeft{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/border_3.gif) !important}.pls-topTail{background-repeat:repeat-x !important;background-position:bottom !important}.pls-vertShim{background-color:#fff !important;text-align:right}.tbl-grey .pls-vertShim{background-color:#f5f5f5 !important}.pls-vertShimLeft{background-repeat:repeat-y !important;background-position:right !important;height:4px}.pls-vertShimRight{height:4px}.pls-confirm-container .pls-vertShim{background-color:#fff3c2 !important}.pls-contentWrap{background-color:#fff !important;position:relative !important;vertical-align:top}.pls-contentLeft{background-repeat:repeat-y;background-position:right;vertical-align:top}.pls-dropRight{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropR_3.png) !important;background-repeat:repeat-y !important;vertical-align:top}.pls-vert,.pls-tailleft,.pls-dropTR .pls-dropBR,.pls-dropBL,.pls-vert img{vertical-align:top}.pls-dropBottom{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropB_3.png) !important;background-repeat:repeat-x !important;width:100%;vertical-align:top}.pls-topLeft{background:inherit !important;text-align:right;vertical-align:bottom}.pls-topRight{background:inherit !important;text-align:left;vertical-align:bottom}.pls-bottomLeft{background:inherit !important;text-align:right}.pls-bottomRight{background:inherit !important;text-align:left;vertical-align:top}.pls-tailtop,.pls-tailright,.pls-tailbottom,.pls-tailleft{display:none;position:relative}.pls-tailbottom,.pls-tailtop,.pls-tailright,.pls-tailleft,.pls-dropTR,.pls-dropBR,.pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite_3.png) !important;background-repeat:no-repeat}.tbl-grey .pls-tailbottom,.tbl-grey .pls-tailtop,.tbl-grey .pls-tailright,.tbl-grey .pls-tailleft,.tbl-grey .pls-dropTR,.tbl-grey .pls-dropBR,.tbl-grey .pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite-grey.png) !important}.pls-tailbottom{background-position:-23px 0}.pls-confirm-container .pls-tailbottom{background-position:-23px -10px}.pls-tailtop{background-position:-19px -20px}.pls-tailright{background-position:0 0}.pls-tailleft{background-position:-10px 0}.pls-tailtop{vertical-align:top}.gc-bubbleDefault td{line-height:0;font-size:0}.pls-topLeft img,.pls-topRight img,.pls-tailbottom{vertical-align:bottom}.pls-bottomLeft img,.bubbleDropTR,.pls-dropBottomL img,.pls-dropBottom img,.pls-dropBottomR img,.pls-bottomLeft{vertical-align:top}.pls-dropTR{background-position:0 -22px}.pls-dropBR{background-position:0 -27px}.pls-dropBL{background-position:0 -16px}.pls-spacertop,.pls-spacerright,.pls-spacerbottom,.pls-spacerleft{position:static !important}.pls-spinner{bottom:0;position:absolute;left:0;margin:auto;right:0;top:0} </style><link rel="stylesheet" type="text/css" href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/prettify.css"><script type="text/javascript" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/軟體"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:25px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:15px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:19px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:13px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:13px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:17px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}.fb_mobile_overlay_active{height:100%;overflow:hidden;position:fixed;width:100%}.fb_shrink_active{opacity:1;transform:scale(1, 1);transition-duration:200ms;transition-timing-function:ease-out}.fb_shrink_active:active{opacity:.5;transform:scale(.75, .75)}</style><script type="text/javascript" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/軟體(1)"></script><script async="" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/lazy.min.js"></script></head>
<body class="loading">
<div id="fb-root" class=" fb_reset"><script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/all.js" async=""></script><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/lY4eZXm_YWu.html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div>
<script>
      //<![CDATA[
      window.fbAsyncInit = function() {
        FB.init({
          appId : 'YOUR_APPLICATION_ID',
          status : true, // check login status
          cookie : true, // enable cookies to allow the server to access the session
          xfbml : true // parse XFBML
        });
      };
      (function() {
        var e = document.createElement('script');
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
      }());
      //]]>
    </script>
<div class="navbar section" id="navbar"><div class="widget Navbar" data-version="1" id="Navbar1"><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="" tabindex="0" vspace="0" width="100%" id="navbar-iframe" name="navbar-iframe" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/navbar.html"></iframe></div>
<script type="text/javascript" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/plusone.js" gapi_processed="true"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d37997006600210175\x26blogName\x3dE.E.RHAPSODY\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttps://simeneer.blogspot.com/search\x26blogLocale\x3dzh_TW\x26v\x3d2\x26homepageUrl\x3dhttps://simeneer.blogspot.com/\x26targetPostID\x3d3949927765296842465\x26blogPostOrPageUrl\x3dhttps://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html\x26vt\x3d8293227446561614347',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<!-- outer-wrapper start -->
<div id="outer-wrapper">
<div id="top-nav">
<nav class="top-menu">
<div class="containz">
<div id="beakingnews">
<div id="mydate">
EE 狂想曲，立志以廢文傳播知識！欲投廢文請寄: simenkid@gmail.com
  </div>
</div>
<div class="socialbar section" id="top-social"><div class="widget HTML" data-version="1" id="HTML3">
<div class="widget-content">

</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=HTML&amp;widgetId=HTML3&amp;action=editWidget&amp;sectionId=top-social" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML3&quot;));" target="configHTML3" title="編輯">
<img alt="" height="18" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget HTML" data-version="1" id="HTML1">
<div class="widget-content">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.7";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=HTML&amp;widgetId=HTML1&amp;action=editWidget&amp;sectionId=top-social" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML1&quot;));" target="configHTML1" title="編輯">
<img alt="" height="18" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div></div>
</div>
<!-- social media button end -->
</nav>
</div>
<div class="clear"></div>
<!-- header wrapper start -->
<header id="header-wrapper" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
<div class="containz">
<div class="header section section" id="header"><div class="widget Header" data-version="1" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="title">
<span itemprop="name"><a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html" itemprop="url">
</a><a href="https://simeneer.blogspot.tw/">
E.E.RHAPSODY
</a>
</span>
</h1>
</div>
<div class="descriptionwrapper">
<p class="description">
<span>
E. E. 狂想曲
</span>
</p>
</div>
</div>
</div></div>
<div class="col-md-8 searchHeader">
<div class="search-content">
<form action="https://simeneer.blogspot.tw/search" class="search-form" method="get" role="search">
<input autocomplete="off" class="search-field" name="q" placeholder="Search text here..." type="search" value="">
<input class="search-submit" type="submit" value="Search">
</form>
</div>
<div class="top-post">
<span>latest Post</span>
<h4>
<script>
document.write("<script src=\"/feeds/posts/default?max-results="+numposts11+"&orderby=published&alt=json-in-script&callback=recentposts11\"><\/script>");
</script><script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/default"></script><div class="blog_featuredz"><a href="http://simeneer.blogspot.com/2017/11/blog-post.html">一點雜感</a></div></h4></div>

</div>
</div>
<div class="col-md-1 col-xs-3 headerSearchButton">
<div class="search-trigger"><img alt="" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/search.png"></div>
</div>
</header></div>

<!-- header wrapper end -->
<nav id="nav" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
<div class="conty">
<ul class="nav menubar2" id="menu-main">
<li>
<a class="active" href="https://simeneer.blogspot.tw/" itemprop="url">
<span itemprop="name">   首頁</span>
</a>
</li>
<li>
<a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html#" class="parent">
<span> 開放教材</span>
</a>
<ul>
<li>
<a href="http://simeneer.blogspot.tw/p/blog-page_4.html" itemprop="url">
<span itemprop="name">課程教材</span>
</a>
</li>
<li>
<a href="http://simeneer.blogspot.tw/p/blog-page_36.html" itemprop="url">
<span itemprop="name">專題訓練</span>
</a>
</li>
</ul>
</li>
<li>
<a href="http://simeneer.blogspot.tw/p/blog-page.html">
<span>本誌與我</span>
</a>
</li>
</ul><select class="selectnav" id="selectnav1"><option value="">Select Here </option><option value="https://simeneer.blogspot.tw/">首頁</option><option value="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html#">開放教材</option><option value="http://simeneer.blogspot.tw/p/blog-page_4.html">- 
課程教材
</option><option value="http://simeneer.blogspot.tw/p/blog-page_36.html">- 
專題訓練
</option><option value="http://simeneer.blogspot.tw/p/blog-page.html">本誌與我</option></select>
</div>
</nav>
<div class="clear"></div>
<!-- secondary navigation menu end -->
<!-- content wrapper start -->
<div id="content-wrapper">
<div class="containz">
<div class="blog_featured_posts" id="blog_featured_posts">
<div class="ct-wrapper">
</div>
</div>
<div id="mywrapper">
<!-- post wrapper start -->
<div id="post-wrapper">
<div class="post-container">
<div id="singlepage">
<div class="main section" id="main"><div class="widget Blog" data-version="1" id="Blog1">
<div class="breadcrumbs"><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://simeneer.blogspot.tw/" itemprop="url"><span itemprop="title">Home</span></a></span> / <span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://simeneer.blogspot.tw/search/label/%E8%BB%9F%E9%AB%94?&amp;max-results=8" itemprop="url"><span itemprop="title">軟體</span></a></span> / 
<span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://simeneer.blogspot.tw/search/label/node?&amp;max-results=8" itemprop="url"><span itemprop="title">node</span></a></span>
 / <span>非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter</span>
</div>
<div class="blog-posts hfeed">
<!--Can't find substitution for tag [defaultAdStart]-->

                              <div class="date-outer">
                            

                              <div class="date-posts">
                            
<div class="post-outer">
<article class="post hentry" itemprop="blogPost" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
<meta content="https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s400/nodearchpng.png" itemprop="image">
<a name="3949927765296842465"></a>
<h1 class="post-title entry-title" itemprop="headline">
非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter
</h1>
<div class="post-info">
<span class="author-info">
                                By
                                <span class="vcard">
<span class="fn" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
<meta content="https://www.blogger.com/profile/04929133426620976166" itemprop="url">
<a class="g-profile" href="https://www.blogger.com/profile/04929133426620976166" rel="author" title="author profile" data-gapiscan="true" data-onload="true" data-gapiattached="true">
<span itemprop="name">
simen
</span>
</a>
</span>
</span>
</span>
<meta content="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html" itemprop="url">
<span class="time-info">
<i></i>
<a class="timestamp-link" href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html" rel="bookmark" title="permanent link">
<abbr class="published updated" itemprop="datePublished" title="2016-09-22T21:12:00+08:00">
下午9:12
</abbr>
</a>
</span>
<span class="label-info">
<i class="fa fa-tags"></i>
<a href="https://simeneer.blogspot.tw/search/label/%E8%BB%9F%E9%AB%94" rel="tag">
軟體
</a>

                                    ,
                                  
<a href="https://simeneer.blogspot.tw/search/label/node" rel="tag">
node
</a>
</span>
<span class="item-control blog-admin pid-1055765855">
<a href="https://www.blogger.com/post-edit.g?blogID=37997006600210175&amp;postID=3949927765296842465&amp;from=pencil" title="編輯文章">
<b style="color:#2A3744;">
<i class="fa fa-pencil"></i>
                              Edit
                            </b>
</a>
</span>
</div>
<div class="post-header">
<div class="post-header-line-1"></div>
</div>
<div class="post-body entry-content" id="post-body-3949927765296842465" itemprop="description articleBody">
　<br>
身為一個 Node.js 工程師，怎麼可以不夠了解「非同步程式碼」的行為？我希望能綜合自己的一點心得與經驗，寫一篇探討 Node.js Event Loop 與 Event Pattern 的文章，而且還不能只是泛泛之談，必須稍微有點深度，然後還期待大家能夠很容易地讀懂。<br>
<br>
　　這篇文章是我為這個想法所作的努力，它花了我好幾個晚上，寫了將近 20 個小時左右 (天吶～～)。雖然極力想要用更短的篇幅把一切說明清楚，卻發現這實在沒辦法用短短的幾句話就講完。然而，即便寫得夠多了，但難免還是有疏漏之處，也要請大家有發現錯誤之處，踴躍提出糾正！讓這篇文章能夠呈現最正確的內容！<br>
　<br>
<b><span style="color: #e06666;">導讀</span></b>：您知道現在已經不能再使用 process.nextTick() 來拆分你的 long-running task 了嗎？假使您對 Node.js 的非同步程式行為已經有很好的認識，您可直接跳至本文章的「<b><span style="color: #e06666;">警告！</span></b>」之處，直接了解 Node.js 官方給開發者的提醒。<br>
　<br>
接下來的文章會有點長，但其實是因為貼上程式碼的關係。在您要閱讀之前，請您先靜下心，請您給我 20 分鐘的耐心與時間，和我一起撥雲見日。<br>
<h3>
先來一段小程式，猜猜看 console.log 的列印順序</h3>
為了刺激一下你，請先看看底下的程式碼，那些訊息將被列印的順序？測試一下自己對 Node.js 非同步行為的認知。<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;0&gt; schedule with setTimeout in 1-sec<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">setTimeout</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
    </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[0] setTimeout in 1-sec boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
}, </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1000</span><span style="color: #333333;">);

</span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;1&gt; schedule with setTimeout in 0-sec<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">setTimeout</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
    </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[1] setTimeout in 0-sec boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
}, </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span><span style="color: #333333;">);

</span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;2&gt; schedule with setImmediate<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">setImmediate</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
    </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[2] setImmediate boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
});

</span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;3&gt; A immediately resolved promise<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">aPromiseCall</span><span style="color: #333333;">().</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">then</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
    </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[3] promise resolve boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
});

</span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;4&gt; schedule with process.nextTick<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">process</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">nextTick</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[4] process.nextTick boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
});

<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">aPromiseCall</span> () {
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">new</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">Promise</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span>(<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">resolve</span>, <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">reject</span>) {
        <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">resolve</span>();
    });
}</span></pre>
執行結果：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;0&gt;</span><span style="color: #333333;"> schedule with setTimeout </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">in</span><span style="color: #333333;"> 1-sec
</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;1&gt;</span><span style="color: #333333;"> schedule with setTimeout </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">in</span><span style="color: #333333;"> 0-sec
</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;2&gt;</span><span style="color: #333333;"> schedule with setImmediate
</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;3&gt;</span><span style="color: #333333;"> A immediately resolved promise
</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;4&gt;</span><span style="color: #333333;"> schedule with process.nextTick
[4] process.nextTick boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">
[3] promise resolve boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">
</span><b><span style="color: #6aa84f;">[1]</span></b><span style="color: #333333;"> setTimeout in 0-sec boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">
</span><span style="color: #6aa84f;"><b>[2]</b></span><span style="color: #333333;"> setImmediate boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">
[0] setTimeout in 1-sec boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span></pre>
<div style="text-align: right;">
(<b><span style="color: #e06666;">注意</span></b>：在你的電腦上，<b><span style="color: #6aa84f;">[1] </span></b>與<span style="color: #6aa84f;"> <b>[2]</b> </span>發生的順序<span style="color: #6aa84f;">可能會與我的不同</span>)</div>
<br>
好的，如果您猜對了。讓我們再來看看，如果這些事情發生在 I/O Callback 中又是如何？同樣的程式碼，整包塞進&nbsp;readFile() 這支非同步 I/O API 的 Callback 中：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span><span style="color: #333333;"> fs </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span><span style="color: #333333;"> </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">require</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>fs<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);

</span><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box; color: #333333;">fs</span><span style="color: #333333;">.</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">readFile</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>./file.txt<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">, </span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>utf8<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">, </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> (</span><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box; color: #333333;">err</span><span style="color: #333333;">, </span><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box; color: #333333;">data</span><span style="color: #333333;">) {
    </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span><span style="color: #333333;"> (</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">err) {
       </span><span style="color: #6aa84f;"> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[I/O Callback get called] <span class="pl-pds" style="box-sizing: border-box;">'</span></span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box;">+</span> data  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box;">+</span> <span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span><span class="pl-cce" style="box-sizing: border-box;">\n</span><span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">

        </span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;0&gt; schedule with setTimeout in 1-sec<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
        </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">setTimeout</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
            </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[0] setTimeout in 1-sec boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
        }, </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1000</span><span style="color: #333333;">);

        </span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;1&gt; schedule with setTimeout in 0-sec<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
        </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">setTimeout</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
            </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[1] setTimeout in 0-sec boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
        }, </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span><span style="color: #333333;">);

        </span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;2&gt; schedule with setImmediate<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
        </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">setImmediate</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
            </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[2] setImmediate boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
        });

        </span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;3&gt; A immediately resolved promise<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
        </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">aPromiseCall</span><span style="color: #333333;">().</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">then</span><span style="color: #333333;">(</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span><span style="color: #333333;"> () {
            </span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span><span style="color: #333333;">.</span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span><span style="color: #333333;">(</span><span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[3] promise resolve boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span><span style="color: #333333;">);
        });

        </span><span style="color: #e69138;"><span class="pl-en rich-diff-level-one" style="box-sizing: border-box;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box;"><span class="pl-pds" style="box-sizing: border-box;">'</span>&lt;4&gt; schedule with process.nextTick<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</span><span style="color: #333333;">
        <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">process</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">nextTick</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
            <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>[4] process.nextTick boom!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
        });
    }
});

<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">aPromiseCall</span> () {  // ... 略</span></pre>
執行結果<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span style="color: #333333;">[I/O Callback get called] <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">read</span> file boom<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span>

<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;0&gt;</span> schedule with setTimeout <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">in</span> 1-sec
<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;1&gt;</span> schedule with setTimeout <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">in</span> 0-sec
<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;2&gt;</span> schedule with setImmediate
<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;3&gt;</span> A immediately resolved promise
<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;4&gt;</span> schedule with process.nextTick
[4] process.nextTick boom<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span>
[3] promise resolve boom<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span>
</span><span style="color: #6aa84f;"><b>[2]</b></span><span style="color: #333333;"> setImmediate boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">
</span><span style="color: #6aa84f;"><b>[1]</b></span><span style="color: #333333;"> setTimeout in 0-sec boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span style="color: #333333;">
[0] setTimeout 1-sec boom</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span></pre>
<div style="text-align: right;">
(<b><span style="color: #e06666;">注意</span></b>：在你的電腦上，<span style="color: #6aa84f;"><b>[2]</b></span> 與<span style="color: #6aa84f;"><b> [1] </b></span>發生的順序<span style="color: #6aa84f;">一定會跟我的相同</span>)</div>
<br>
接下來，請靜下心，讓我們好好地來了解 Node.js 的非同步機制。真的要靜下心來看哦！因為很希望讓你看過一次，就把它給搞懂！<br>
<br>
<h3>
熱身：JavaScript 的事件迴圈與非同步機制</h3>
對於 JavaScript 的事件迴圈與非同步行為，很多書或網路文章都做了很淺顯易懂的說明，加上從實作中累積的經驗，相信每個 JS 的開發者內心，都隱隱約約有概念。<br>
　　<br>
　　如果您還不是那麼清楚，以下兩部 P. Roberts 的影片，您可以花一點時間先看一下。第一部長約 15 分鐘，講得非常好，他很清楚地說明了<b><span style="color: #6aa84f;">瀏覽器</span></b>中 JS 的 Single Thread + Single Call Stack + Callback Queue 是怎麼樣搭配運行起來的，簡單易懂。第二部影片是他在 JSConfEU 的演講，內容跟第一部大同小異，但是多了一個展示用的 webapp，所以可以跳過不看。當然，JS 老手這兩部都可以直接跳過啦 XDDD....<br>
<ul>
<li><a href="https://vimeo.com/96425312" target="_blank">Help, I’m stuck in an event-loop</a>&nbsp;-&nbsp;Philip Roberts</li>
<li><a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" target="_blank">What the heck is the event loop anyway?</a>&nbsp;| JSConf EU &nbsp;- Philip Roberts</li>
</ul>
<div class="separator" style="clear: both; text-align: center;">
</div>
<br>
　　在 Browser 上的情況很容易理解。相對於瀏覽器，作為執行在 Server-side 的 Node.js，事情會稍微複雜一點。Node.js 採用 Google <a href="https://developers.google.com/v8/?hl=zh-tw" target="_blank">V8 </a>作為 JS 的解釋引擎，而在處理 I/O 方面則使用了自己設計的 <a href="http://docs.libuv.org/en/v1.x/" target="_blank">libuv</a>。libuv 幫你封裝了不同 OS 平台的 I/O 操作，往上提供一致的 asynchronous/non-blocking API 與事件迴圈建設。當我們在討論 Node.js 的事件迴圈時，將會與 libuv 有關。<br>
<br>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s1600/nodearchpng.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="270" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/nodearchpng.png" width="400"></a></div>
<br>
<h3>
Node.js 真的是單執行緒嗎？</h3>
對於 Node.js 的評論，最常聽見它「單一執行緒」的環境，但實際上它的底層是多執行緒的。Daniel Khan 在 <a href="http://apmblog.dynatrace.com/2016/01/14/how-to-track-down-cpu-issues-in-node-js/" target="_blank">"How to track down CPU issues in Node.js"</a>&nbsp;這篇文章中起了很好的頭，它直接將 node 執行一支 app.js 時，所跑起來的 process 都列出來給你看。我們直接看 Khan 先生怎麼說 (要我自己說，絕對不會比他說的好)：<br>
<blockquote class="tr_bq">
<span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><span style="color: #444444;"><i>The famous statement ‘Node.js runs in a single thread’ is only partly true. <span style="background-color: yellow;">Actually only your ‘userland’ code runs in one thread.</span> Starting a simple node application and looking at the processes reveals that Node.js in fact spins up a number of threads. This is because Node.js maintains a thread pool to delegate synchronous tasks to, while Google V8 creates its own threads for tasks like garbage collection.</i></span>&nbsp;</span></blockquote>
<div class="separator" style="clear: both; text-align: center;">
<a href="https://3.bp.blogspot.com/-BGE5jF78dbM/V-EwucVyv3I/AAAAAAAAB0Q/vW7o53J3ScwZ1y0DB7iJKd92JewbJ6WowCLcB/s1600/CPU1-1024x214.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="81" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/CPU1-1024x214.png" style="cursor: move;" width="400"></a></div>
<h3>
<br>
libuv 的 Event Loop 與 Loop Iteration</h3>
在 libuv 的核心程式碼中，我們會看到一支<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"> uv_run() </span>的函式，他所接受的第一個參數是一個指向<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp;uv_loop_t&nbsp;</span>結構體的指標。這裡，<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">uv_loop_t </span>結構體即事件迴圈&nbsp;<span style="font-size: x-small;">(名詞)</span>，而每一次執行<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"> uv_run()</span> 則是進行一次事件迴圈的 iteration <span style="font-size: x-small;">(執行 uv_run() 是動詞)</span>。<br>
<br>
　　<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">uv_run()</span> 這函式真的是寫得淺顯易懂，我們不需要太執著於細節，只需要知道這支函式一執行起來，將依序跑過 <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">uv__update_time(), uv__run_timers(), uv__run_pendings(), ..., uv__run_closing_handles() </span>等函式，每支函式稱之為 event loop 的<b><span style="color: #3d85c6;"><i> phase</i></span></b> (階段)。Event Loop 跑完一圈，總共會歷經這幾個階段。<br>
<br>
<b>libuv core.cc</b> (<span id="goog_917402993"></span><a href="https://github.com/libuv/libuv/blob/v1.x/src/unix/core.c#L332-L372" target="_blank">原始碼&nbsp;core.cc</a>)，底下的程式碼片段用眼睛稍微掃過即可：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: consolas, &quot;liberation mono&quot;, menlo, courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span style="color: #333333;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">int</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">uv_run</span>(<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_loop_t</span>* loop, uv_run_mode mode) {
  </span><span style="color: #999999;">// ... 略</span><span style="color: #333333;">
  r = </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__loop_alive</span><span style="color: #333333;">(loop);
  </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span><span style="color: #333333;"> (!r)
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__update_time</span><span style="color: #333333;">(loop);

  </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">while</span><span style="color: #333333;"> (r != </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span><span style="color: #333333;"> &amp;&amp; loop-&gt;stop_flag == </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span><span style="color: #333333;">) {
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__update_time</span><span style="color: #333333;">(loop);
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_timers</span><span style="color: #333333;">(loop);
    ran_pending = </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_pending</span><span style="color: #333333;">(loop);
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_idle</span><span style="color: #333333;">(loop);
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_prepare</span><span style="color: #333333;">(loop);

    timeout = </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span><span style="color: #333333;">;
    </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span><span style="color: #333333;"> ((mode == UV_RUN_ONCE &amp;&amp; !ran_pending) || mode == UV_RUN_DEFAULT)
      timeout = </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_backend_timeout</span><span style="color: #333333;">(loop);

    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__io_poll</span><span style="color: #333333;">(loop, timeout);
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_check</span><span style="color: #333333;">(loop);
    </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_closing_handles</span><span style="color: #333333;">(loop);

    </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span><span style="color: #333333;"> (mode == UV_RUN_ONCE) {
      </span><span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #666666;">// ... 略</span><span style="color: #333333;">
      </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__update_time</span><span style="color: #333333;">(loop);
      </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__run_timers</span><span style="color: #333333;">(loop);
    }

    r = </span><span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv__loop_alive</span><span style="color: #333333;">(loop);
</span><span style="color: #333333;">    </span><span style="color: #666666;">// ... 略</span><span style="color: #333333;">
  </span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span><span style="color: #333333;"> r;
}</span></pre>
<h3>
</h3>
<h3>
Node.js 官方文件對事件迴圈的說明</h3>
Node.js 官方隨附在原始碼中有一份非常佛心的文件，很簡要地說明了 <a href="https://github.com/nodejs/node/blob/v4.x/doc/topics/the-event-loop-timers-and-nexttick.md" target="_blank">Event Loop 的運作方式</a>，讓我們不需要苦讀原始碼，便能對 Event Loop 的行為略知一二。這份文件是今年 4 月(2016 年 4 月) 加上去的，熱騰騰呀！<br>
<br>
　　這份文件給了一張圖，我把它重新畫了一次，並且跟上面 libuv core.cc 中看到的各個 phase 工作函式左右對照一下，這樣應該就夠簡單清楚了。我認為每個 Node.js 的開發者，都應該好好閱讀一下這份文件。那如果你真的很懶得看，我下面會作一些重點摘要。這裡先說明一下圖中右邊的「I/O Callbacks」，例如系統錯誤 (比如 socket 的錯誤, ECONNREFSED) 這一類的 callbacks 都會被 queue 在這裡，對應的是 uv__run_pending() 階段。如果是一般的 I/O 請求，callbacks 是在 poll 階段被執行。<br>
<br>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="https://2.bp.blogspot.com/-GRE4ySmk9kY/V-FGYV3nMCI/AAAAAAAAB08/ERQArg-1JWkrACrRpjP6Wg_MheRXCEo1gCLcB/s1600/node-libuv.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="288" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/node-libuv.png" width="640"></a></div>
<br>
<br>
<h3>
Event Loop 特點摘要</h3>
<ul>
<li><span style="background-color: yellow;">每個 phase 都有自己的 FIFO queue</span>，裡面存放和自己相關的 callbacks</li>
<li>進入一個 phase 後，該 phase 會將自己 queue 中的 callbacks <span style="background-color: yellow;">依序地同步執行</span>，直到完全消化完畢時 (或達到最高數量限制) 再繼續往下個 phase 走</li>
<ul>
<li>「不要在 callback 中執行繁重的工作，否則事件迴圈將會被阻塞住」，原因在此</li>
</ul>
<li>當 Event Loop 繞完後，若檢查發現已無任何等待中的非同步 I/O 或 timers，事件迴圈即結束退出</li>
<ul>
<li>比如說你寫一支 app.js，裡面只有 console.log('Hello')，執行完一定馬上退出。如果你寫一個 http server.listen(3000, function () { ... })，執行起來之後，就一直執行著，因為底層開了一個 socket 一直在等待它的 I/O 事件，除非你把 socket 給 close 掉</li>
</ul>
</ul>
<h3>
各 Phase 的責任說明</h3>
<ul>
<li>timer：執行由 setTimeout() 及 setInterval() 排進來的 callbacks</li>
<li>I/O callbacks：有關系統錯誤等 Callbacks 將 queue 在此</li>
<li>idle, prepare：內部使用</li>
<li>poll：向系統取回新的 I/O 事件，執行對應的 I/O callbacks</li>
<li>check：執行由 setImmediate() 排進來的 callbacks</li>
<li>close callbacks：監聽 I/O 'close' 事件的 callbacks (如 socket.on('close', ...))</li>
</ul>
<h3>
將工作 (或 callback) 排入事件迴圈中的方法</h3>
如何將工作排入事件迴圈的觀念非常非常重要，或許你覺得沒什麼，但這卻會關係到如何寫出行為正確地的非同步程式碼。<br>
<div>
<ul>
<li>使用了 timer 的 <span style="background-color: yellow;">setTimeout()</span>, <span style="background-color: yellow;">setInterval()</span></li>
<ul>
<li>callbacks 會被排進 timer phase 的 queue</li>
</ul>
<li>呼叫了使用 libuv <span style="background-color: yellow;">non-blocking IO 的 API</span></li>
<ul>
<li>如 sockets, filesystem 相關 API，在 node 裡即如 fs.readFile() 這種非同步的 API</li>
</ul>
<li>使用 <span style="background-color: yellow;">setImmediate()</span></li>
<ul>
<li>callbacks 被排入 check phase 的 queue</li>
</ul>
<li>透過 <span style="background-color: yellow;">process.nextTick()</span></li>
<ul>
<li>屬於 Node Event Loop 的一部分，但不屬於 libuv 的 phase。這後面我會說明。</li>
</ul>
<li>還有一個文件中沒有提到，就是使用了 <span style="background-color: yellow;">Promise (microtask)</span></li>
<ul>
<li>屬於 node event loop 的一部分，但不屬於 libuv 的 phase。這後面我會說明。</li>
</ul>
</ul>
</div>
<h3>
一個 tick 到底是多長?</h3>
前面我們有看到 process.nextTick() 這個 API，您是否有想過，nextTick？那一個 tick 的時間到底是多長？<a href="http://stackoverflow.com/questions/19822668/what-exactly-is-a-node-js-event-loop-tick" target="_blank">Stackoverflow 上的這個回答</a>很清楚，很簡短地說是這樣：<br>
<blockquote class="tr_bq">
一個 tick 的時間長度，是 Event Loop 繞完一圈，把所有 queues 中的 callbacks 依序且同步地執行完，所消耗的總時間。因此，一個 tick 的值是不固定的。可能很長，可能很短，但我們希望它能盡量地短。</blockquote>
所以再一次，所有 Node.js 開發者一再強調：「不要在 callback 中執行 long-running 的工作！」因為你會阻塞 Event Loop，當每一個 tick 的時間被你拉長，代表每單位時間 Event Loop 可以繞行而檢測出 I/O 事件的次數就會降低，非同步程式碼的效能因而折損。<br>
<br>
<h3>
執行順序</h3>
關於執行順序，請閱讀官方文件的 <a href="https://github.com/nodejs/node/blob/v4.x/doc/topics/the-event-loop-timers-and-nexttick.md#phases-in-detail" target="_blank">Phases in Detail </a>一節。我很快地總結一下幾個重點，同樣回到底下這張圖。雖然整個迴圈看起來是從 timers 開始執行起，在 libuv 看起來也是這樣子。這樣說好了，Event Loop 是一個閉迴路，它在第一次 kick off 時，確實是從 timers 那個 phase 跑起。但是以長遠來看，一個閉迴路，你可以拿任意點當作起跑點。由於程式的目的大多與 I/O 有關，例如你開了一個 socket，所以 Event Loop 的重心可以視為圍繞在 poll phase 上，因為繞來繞去，你總是會在 poll phase 停留一下子，把該執行的執行完後，再東看看、西看看，看還有沒有其他事情要繼續做的。你在網路上會看到許多文章，或是這份官方文件，都是以 poll phase 作為討論的核心。並且注意官方文件的這句話：<br>
<blockquote class="tr_bq">
<span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><i>Technically, the poll phase controls when timers are executed.</i></span></blockquote>
<a href="https://2.bp.blogspot.com/-GRE4ySmk9kY/V-FGYV3nMCI/AAAAAAAAB08/ERQArg-1JWkrACrRpjP6Wg_MheRXCEo1gCLcB/s1600/node-libuv.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em; text-align: center;"><img border="0" height="288" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/node-libuv.png" width="640"></a><br>
<div>
<br></div>
官方的說明比較零碎一點，我依照我的理解整理一下，如果我們從 poll 開始看起，整個順序會像這樣：<br>
<div>
<ul>
<li>poll phase：I/O 事件先處理，同時會關心即將逾期的 timer，都處理完後進 check phase&nbsp;</li>
<li>check phase：處理&nbsp;setImmedaite() 排進來的東西，如果沒有、或處理完了，就捲回 timers 看沒有要到期的</li>
<li>然後繼續往下走回到 poll，先看有沒有 I/O 事件要處理同時關心即將逾期的 timer</li>
<li><b>一般原則</b></li>
<ul>
<li>timer 快逾期，但 I/O 事件先發生，一律會先等 I/O 先處理完，再處理到期的 timers，也因此 timers 的 callbacks 不保證可以準時執行</li>
<li>以官網的例子來講：例如有個 timer 在 100ms 後到期，但在即將到期之前來了一個 I/O 事件，則先處理 I/O，所以 timer 的 callback 可能會稍微延宕一下才被執行到，例如在第 105 ms 時才執行</li>
</ul>
<li><b>最高原則</b></li>
<ul>
<li><span style="background-color: yellow;">所有以 process.nextTick() 所安排進來的 callbacks 都將在每一個 phase 結束，要轉換至下個 phase 之前，馬上被依序且同步地執行</span></li>
<li>因此絕對不可在 process.nextTick 的 callback 中執行 long-running task</li>
<li>不可以執行會遞迴呼叫 process.nextTick 的函式，因為那個 phase 永遠會檢測到還有 1 個 callback 要執行，因而造成 Event Loop 永遠被阻塞於該 phase</li>
</ul>
</ul>
<div style="text-align: right;">
<span style="color: #e06666;">(如果有人看了官方文件，認為我的理解有誤，請一定要讓我知道！)</span></div>
<div>
<br></div>
<h3>
setTimeout() 與 setImmediate()</h3>
<ul>
<li>setTimeout() 屬於 timers phase。被設計於逾時執行。</li>
<li>setImmediate() 屬於 check phase。被設計在每次 poll phase 之後執行。</li>
<li>setImmediate() 並不是以計時器來定時的，但 Node.js 仍將這個 API 歸類在 timers 核心模組</li>
<li>這兩支方法，如果在 I/O cycle 被呼叫，setImmediate(cb) 者必定會先執行(因為下一個 phase 就是 check)。如果不是在 I/O cycle 被呼叫，setImmediate(cb) 與 zeo-second &nbsp;setTimeout(cb, 0) 兩者被執行的次序為<span style="background-color: yellow;">不可預測</span> (non-deterministic)</li>
<li>請回到文章最開始的「猜猜看」，那裡的 <b><span style="color: #6aa84f;">[1] </span></b>與 <span style="color: #6aa84f;"><b>[2]</b></span> 發生順序的問題在此處得到了說明</li>
</ul>
<br>
<h3>
process.nextTick() 與 setImmediate()</h3>
<ul>
<li>process.nextTick 不屬於任何一個 phase (後面會提到)</li>
<li>由&nbsp;process.nextTick()&nbsp;所排進 queue 的 callbacks 會在當下的那個 phase 結束前被拉出來，全部執行完。所以你若遞迴地呼叫&nbsp;process.nextTick()，將造成 queue 永遠無法清空，該 phase 永遠無法轉換到下一個 phase，因而會造成 I/O starving(飢餓) 的問題 (無法再 poll)</li>
<li>遞迴地呼叫 setImmediate() 所排進的下一個 callback，會被排到下一次 loop iteration 才執行，所以不會塞住 Event Loop</li>
<li>神奇的 process.nextTick()，連大神 <a href="https://github.com/mafintosh" target="_blank">mafintosh </a>去年 7 月都在 twitter 上徵求：「<a href="https://twitter.com/mafintosh/status/624590818125352960" target="_blank">Does anyone have a good code example of when to use setImmediate instead of nextTick?</a>」 XDDDD....</li>
</ul>
<h4>
<b><span style="color: red;">警告！</span></b></h4>
</div>
<div>
你很可能在書上看到一些教你「使用 process.nextTick()」來拆分 long-running task 的做法！由於 Node.js 對 process.nextTick() 的行為已經調整過。請勿再使用書上介紹的方式，因為 Event Loop 仍然會被你的 long-running task 阻塞住！(拆開的 sub-tasks 仍是排在同一個 phase 中，同步地執行完，結果變成有拆跟沒拆一樣啊！哈哈～ 請改用 setImmediate() 去拆囉～)</div>
<div>
　<br>
從今天起，請勿被它的名字誤導，請不要再有「process.nextTick」可以將工作排到下一次 tick 的想法了！非常非常危險！官方文件這樣說：<br>
<blockquote class="tr_bq">
<span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><i>We recommend developers use setImmediate() in all cases because it's easier to reason about (and it leads to code that's compatible with a wider variety of environments, like browser JS.)</i></span></blockquote>
<br>
<h3>
Node.js 的 Event Loop</h3>
Node 官方文件上有提到，它說 process.nextTick 並不算 libuv 的 event loop phases 的一部分。你可以這樣想，Node 的 Event Loop 是對底層 libuv 的一層包裹，在這一層包裹之內、libuv 之外，還有其他事情得處理，就是 process.nextTick 與 Promise 的 microtask。所以當我們談論 Node 的 Event Loop，指的是在 Node 層級的 Event Loop 整體，而不僅是單單 libuv 的 event loop 本身。<br>
　<br>
我在「<a href="http://simeneer.blogspot.tw/2016/09/node-i-module.html" target="_blank">從 node.js 原始碼看 exports 與 module.exports</a>」這篇文章有提到 Node 核心是如何執行起來的，順序是這樣：<br>
<div style="text-align: center;">
<span style="color: blue; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">StartNodeInstance() -&gt; CreateEnvironment() -&gt; LoadEnvironment()</span></div>
<br>
<h4>
StartNodeInstance()</h4>
在 StartNodeInstance() 中 uv_run() 被呼叫了，而且是在一個 do ... while 迴圈之中。在 Node 層級上看到的 Event Loop 就在這裡：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;">    {
      SealHandleScope <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">seal</span>(isolate);
      bool more;
      <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">do</span> {
        v8<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">::</span>platform<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">::</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">PumpMessageLoop</span>(default_platform, isolate);
        more <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">uv_run</span>(env<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">event_loop</span>(), <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">UV_RUN_ONCE</span>);

        <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (more <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">==</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">false</span>) {
          v8<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">::</span>platform<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">::</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">PumpMessageLoop</span>(default_platform, isolate);
          <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">EmitBeforeExit</span>(env);

          <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// Emit `beforeExit` if the loop became alive either after emitting</span>
          <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// event, or after running some callbacks.</span>
          more <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">uv_loop_alive</span>(env<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">event_loop</span>());
          <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">uv_run</span>(env<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">event_loop</span>(), <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">UV_RUN_NOWAIT</span>) <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span>)
            more <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">true</span>;
        }
      } <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">while</span> (more <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">==</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">true</span>);
    }</pre>
<br>
<h4>
CreateEnvironment()</h4>
建立環境時，需要傳入一個指向 uv_loop_t 結構體的指標，這也告訴我們，每一個 node 的實例都將擁有自己的 Event Loop。建立過程的一部分程式碼即在初始化各個 phase。<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;">Environment* <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">CreateEnvironment</span>(Isolate* isolate,
                               <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_loop_t</span>* loop,
                               // ... 略
                               <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">const</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">char</span>* <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">const</span>* exec_argv) {
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>

  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_check_init</span>(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">event_loop</span>(), env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">immediate_check_handle</span>());
  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_unref</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">reinterpret_cast</span>&lt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_handle_t</span>*&gt;(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">immediate_check_handle</span>()));

  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_idle_init</span>(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">event_loop</span>(), env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">immediate_idle_handle</span>());
  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_prepare_init</span>(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">event_loop</span>(), env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">idle_prepare_handle</span>());
  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_check_init</span>(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">event_loop</span>(), env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">idle_check_handle</span>());
  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_unref</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">reinterpret_cast</span>&lt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_handle_t</span>*&gt;(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">idle_prepare_handle</span>()));
  <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_unref</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">reinterpret_cast</span>&lt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">uv_handle_t</span>*&gt;(env-&gt;<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">idle_check_handle</span>()));
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>

  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span> env;
}</pre>
<h4>
&nbsp;startup.processNextTick() (/src/node.js)</h4>
<div>
這裡我們只要關注一開始的 nextTickQueue，還有 process.nextTick()，這支方法僅僅是把註冊的 callbacks 安排進這個 queue 中。在 _tickCallback() 被抓出來執行時，就把 queue 中的每支 callbacks 撈出來執行，而這些處理完後，下一步則是 _runMicroTasks() 繼續處理 Promise 的事情。如果您想更進一步了解 microtasks，您可以看看這篇 Google 工程師 Jake Archibald 寫的「<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/" target="_blank">Tasks, microtasks, queues and schedules</a>」，他在裡面也準備了小測驗讓你猜程式碼的執行順序 XDDD。<br>
　<br>
總地來說，我想表達的是：「process.nextTick() 與 microtasks 在非同步程式碼中的優先序是數一數二高的！每個 phase 結束之前都會被執行！(再次提醒，不是每個 tick！)」</div>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;">  <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">startup</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">processNextTick</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span>() {
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> nextTickQueue <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> [];   <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// Callbacks 會排進這個 queue!!</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> pendingUnhandledRejections <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> [];
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> microtasksScheduled <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">false</span>;
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> _runMicrotasks <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> {};
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
    <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">process</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">nextTick</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> nextTick;  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// nextTick 函式在下面</span>
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// process._setupNextTick 在 node.cc 中, 我認為意思到了, 就不用再挖下去了</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">const</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">tickInfo</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">process</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">_setupNextTick</span>(_tickCallback, _runMicrotasks);
    _runMicrotasks <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_runMicrotasks</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">runMicrotasks</span>;
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">_tickCallback</span>() {
      <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> callback, args, tock;

      <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">do</span> {
        <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">while</span> (tickInfo[kIndex] <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;</span> tickInfo[kLength]) {
        <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// callbacks 從 queue 中一個一個被挖出來執行</span>
          tock <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> nextTickQueue[tickInfo[kIndex]<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">++</span>];
          callback <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">tock</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">callback</span>;
          args <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">tock</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">args</span>;

          <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (args <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">===</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">undefined</span>) {
            <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">nextTickCallbackWith0Args</span>(callback);
          } <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">else</span> {
            <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">switch</span> (<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">args</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">length</span>) {
              <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">case</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1</span>:
                <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">nextTickCallbackWith1Arg</span>(callback, args[<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span>]);
              <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ...</span>
            }
          }
          <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1e4</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;</span> tickInfo[kIndex])
            <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">tickDone</span>();
        }
        <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">tickDone</span>();
        <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// process.nextTick 的 callbacks 跑完, 接著跑 Promise 的 microtasks</span>
        <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">_runMicrotasks</span>();
        <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emitPendingUnhandledRejections</span>();
      } <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">while</span> (tickInfo[kLength] <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!==</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span>);
    }

    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ...略</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">nextTick</span>(<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">callback</span>) {
      <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> args;
      <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">arguments</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">length</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&gt;</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1</span>) {
        args <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> [];
        <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">for</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> i <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1</span>; i <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;</span> <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">arguments</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">length</span>; i<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">++</span>)
          <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">args</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">push</span>(<span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">arguments</span>[i]);
      }

      <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 將 callback 連它的 arguments 用一個物件存起來推進 queue</span>
      <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">nextTickQueue</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">push</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">new</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">TickObject</span>(callback, args));
      tickInfo[kLength]<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">++</span>;
    }

    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ...</span>
  };</pre>
原始碼看到這裡，大致上也拼湊出了一些圖像，因為原始碼實在很多，我想就留給有興趣的人繼續追下去吧！您可以看看 module.js 的 Module.runMain() 方法、node.cc 的&nbsp;MakeCallback() 方法以及它所呼叫&nbsp;env-&gt;tick_callback_function() 都是相關的。<br>
<br>
這裡 nextTickQueue 的 nextTick 從字面上看也會造成誤會，以為是在下一個 loop iteration 執行，實際上這個 queue 中的 callbacks 會在 Event Loop 每次準備作 phase transition 之前執行。關於 nextTick 與 setImmediate 命名上的語義不清之處，Node 官方文件上也有提出說明：<br>
<blockquote class="tr_bq">
<span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><i>In essence, the names should be swapped. process.nextTick() fires more immediately than setImmediate() but this is an artifact of the past which is unlikely to change. Making this switch would break a large percentage of the packages on npm.&nbsp;</i></span></blockquote>
<br>
看到這裡，假如您還沒睡著！我真的是佩服佩服！...<br>
先不要幹角我啊！我們終於要進入另一個主題 EventEmitter 了！<br>
相信我！這個題目會很快！<br>
<hr>
<h3>
EventEmitter</h3>
Node.js 最著名的就是它的「非同步」以及「事件驅動」特性，看完我們上面對 Event Loop 的淺析，相信大家現在應該有點爽爽的感覺。在這邊，我們要再討論一個很重要的東西，就是 <span style="color: blue;"><b>EventEmitter</b></span>。這邊我先說一下我對它的總結：<br>
<br>
<blockquote class="tr_bq">
<i><span style="color: #444444; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">Node.js 給你 EventEmitter，是讓你在使用者空間創造 event pattern 的工具。它的本身與 Event Loop 毫無關係！</span></i></blockquote>
<br>
什麼？？？？！！！！<br>
<br>
當你看完這句話，或許你會帶點疑惑，又或者帶一點不服氣！很想質疑我到底懂不懂 Node.js！先別抓狂、先別暴怒、先不要摔電腦！讓我們繼續看下去～<br>
<br>
<h3>
EventEmitter 本身是「同步的」</h3>
關於 EventEmitter 的「同步」本質，在我讀過一些書或文章，很遺憾地，都沒有很明確地指出這一點。甚至有些說法比較囫圇吞棗一點、有些說的比較隱晦、又或者有書上以為 EventEmitter 是事件迴圈的抽象 (這完全不對呀，請不要問我哪本書了)！<br>
<br>
　　當我還是 Node.js 新手時，我也曾經這樣相信了。直到我自己使用 Lua 實作一套符合 Node.js 介面的 <a href="https://github.com/simenkid/lua-events" target="_blank">EventEmitter</a> 與 <a href="https://github.com/simenkid/nodemcu-timer" target="_blank">timer</a> 時，我才發現事情完全不是那麼樣子。也因為想著要符合 Node.js 的介面，也讓我「抄襲」了 Node.js 的作法 (呵呵~ 是向優秀偉大的開發者學習啦~)<br>
<br>
　　以下一樣是以 node.js v4.5.0 LTS 原始碼為例。EventEmitter 的實作在 /lib/events.js，它總共不超過 450 行。事件模式有兩支很重要的方法，我們在實作上幾乎都是圍繞在<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"> .emit(event, ...)</span> 以及<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"> .on(listener)</span> 這兩支方法。.on() 讓你註冊事件監聽器，而 .emit() 讓你發射事件。一旦事件發生，註冊監聽該事件的 callbacks 將被執行。我想這樣的模式，使用 JavaScript 的開發者應該都蠻熟悉的 (豈止熟悉？連想都不用想了....)。<br>
<br>
EventEmitter 的 constructor 長這樣，它的構造真的很簡單，內部就是一個 protected member this._event = {}，這個盒子裡，會以 event type (事件名稱) 當 key，而註冊進來的 listener 作為 value。如果一個事件有很多個 listeners，那麼 value 就會是一個按註冊順序來儲存這些 handlers 的陣列。<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">EventEmitter</span>() {
  <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">EventEmitter</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">init</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">call</span>(<span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>);
}

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">EventEmitter</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">init</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span>() {
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span><span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_events</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">||</span> <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_events</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">===</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">Object</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">getPrototypeOf</span>(<span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>).<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_events</span>) {
    <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_events</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> {};      <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 這個物件將用來管理註冊進來的 listeners</span>
    <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_eventsCount</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span>;
  }

  <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_maxListeners</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_maxListeners</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">||</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">undefined</span>;
};</pre>
<br>
現在讓我們先來看 .on()，它是 addListener 的別名，所以我們直接看 addListener 方法：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">EventEmitter</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">prototype</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">on</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">EventEmitter</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">prototype</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">addListener</span>;</pre>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">EventEmitter</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">prototype</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">addListener</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">addListener</span>(<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">type</span>, <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">listener</span>) {
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> events;
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> existing;
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  events <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_events</span>;

  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
    existing <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> events[type];

  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 如果 event type 不存在, 就把以 type 當 key, 把 listener 當 value 塞進去</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span>existing) {
    existing <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> events[type] <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> listener;
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">++</span><span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_eventsCount</span>;
  } <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">else</span> {
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 如果事件已存在, 它的值是函式, 現在要改用陣列來儲存</span>
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 如果已經是陣列, 帶有已經有 2 個以上的 listeners, 就繼續把新的 listener push 進去</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">typeof</span> existing <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">===</span> <span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>function<span class="pl-pds" style="box-sizing: border-box;">'</span></span>) {
      <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// Adding the second element, need to change to array.</span>
      existing <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> events[type] <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> [existing, listener];
    } <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">else</span> {
      <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// If we've already got an array, just append.</span>
      <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">existing</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">push</span>(listener);
    }
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  }

  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span> <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>;
};</pre>
是不是很簡單啊！接著，我們來看 .emit()：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">EventEmitter</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">prototype</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">type</span>) {
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> er, handler, len, args, i, events, domain;
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  events <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>.<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">_events</span>;
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>

  handler <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> events[type];  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 找出 handler</span>

  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 若沒有那個 type 的監聽器, 就直接 return</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span>handler)
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">false</span>;

  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 接下的 cases, 只是 node 為了效能起見, 針對不同 args 數量寫了不同的呼叫方式</span>
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 我們就抓 emitOne 出來看吧</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">switch</span> (len) {
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// fast cases</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">case</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1</span>:
      <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emitNone</span>(handler, isFn, <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>);
      <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">break</span>;
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">case</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">2</span>:
      <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emitOne</span>(handler, isFn, <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">this</span>, <span class="pl-v rich-diff-level-one" style="box-sizing: border-box; color: #ed6a43;">arguments</span>[<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">1</span>]);
      <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  }

  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">return</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">true</span>;
};</pre>
就拿 .emitOne() 當代表來說明：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emitOne</span>(<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">handler</span>, <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">isFn</span>, <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">self</span>, <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">arg1</span>) {
  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 如果 handler 是一支函式, 就直接執行</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (isFn)
    <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">handler</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">call</span>(self, arg1);

  <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 若非函式, 那就是一堆函式的陣列</span>
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">else</span> {
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> len <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">handler</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">length</span>;
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> listeners <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">arrayClone</span>(handler, len);

    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 陣列中的 handlers 一支支依序被拉出來執行</span>
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 註: 這是同步的程式碼</span>
    <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">for</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> i <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">0</span>; i <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">&lt;</span> len; <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">++</span>i)
      listeners[i].<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">call</span>(self, arg1);
  }
}</pre>
這告訴我們，<span style="background-color: yellow;">每一次的 emit，都將跑起一段同步的程式碼</span>，一個 callback 執行完再接著下一個，直到執行結束。是不是聽起來跟前面的 callback queue 感覺很像呀！是的，就是那一回事！可是，EventEmitter 本身的運作，壓根與 Node.js 的事件迴圈完全沒有關係！你可以把整份 event.js 讀一讀，你不會看到任何非同步的程式碼！<br>
<br>
如果你曾經使用過 React flux 模式，它的 <a href="https://github.com/facebook/flux/blob/master/src/Dispatcher.js#L185-L223" target="_blank">Dispatcher</a> 也運用了相同的模式來完成 payload 的 broadcast (請見 register() 與 dispatch() 兩支方法是不是跟 on() 與 emit() 的感覺很像呢？只是裡面多了些狀態控制的東東啦！)。<br>
<br>
<h3>
使用 EventEmitter 要格外小心</h3>
我們在 node.js 中大部分會使用到 EventEmitter 的情況，除了用於協助工作流程控制外，最常見的場合就是<span style="color: #6aa84f;">用於通知某件事情的發生(或完成)</span>，而這大部分多用於通知某個<span style="color: #6aa84f;">非同步</span>的工作完成了、發生了(讀檔完成、斷線了、socket 關閉了等等)。例如：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">fooEmitter</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>data<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> (<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">data</span>) {
  <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(data);
});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">fs</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">readFile</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>/path/to/file<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, (<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">err</span>, <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">data</span>) <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=&gt;</span> {
  <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">if</span> (<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">!</span>err)
    <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">fooEmitter</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>data<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, data);
});</pre>
因為使用情境常常都是像上面這樣，所以造成了「使用了 EventEmitter 就好像是寫了非同步程式碼的假象」。<br>
<br>
<h4>
看過狗追自己的尾巴嗎？來寫一個！</h4>
我們在一個 event1 handler 中 emit 了一個 'event2' 事件，而在 event2 handler 中又繼續 emit 一個 'event3' 事件，然後最後一個 event3&nbsp;&nbsp;handler 發射 'event1' 事件：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> EventEmitter <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">require</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">"</span>events<span class="pl-pds" style="box-sizing: border-box;">"</span></span>);

<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> crazy <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">new</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">EventEmitter</span>();

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event3<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);

});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event3<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event3 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</pre>
執行看看！你將會得到 call stack 爆炸的例外 XDDD....　狗狗因為過度暈眩就這樣死了。為什麼？因為所有 callback 的執行是同步的！一直遞迴地 call 下去，永遠不回頭！不要以為這種事不會發生，天底下就是會有那麼多巧合！<br>
<br>
<h4>
瘋狂旋轉的不死狗</h4>
那如果第一次 fire 使用 setImmediate() 推入事件迴圈呢(注意哦！很非同步 style 對不對)？你還是會得到一樣的結果！你只是把第一次的 fire 丟入事件迴圈，當事件一發生時，<span style="background-color: yellow;">整個 EventEmitter 的觸發鏈是同步的</span>，將把事件迴圈阻塞住，然後 callback 一直遞迴地呼叫下去，直到 stack 爆掉而當機。同樣的道理，如果我們沒有故意把事件兜成一個閉迴路，但是每一個 event handler 都是 long-running 的話，那麼同樣會使事件迴圈被阻塞的時間變長。<br>
<br>
　　接下來，我們將剛剛的程式碼中的每個 emit() 都用&nbsp;setImmediate() 丟入事件迴圈呢？你將得到一隻不死狗：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> EventEmitter <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">require</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>events<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);

<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> crazy <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">new</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">EventEmitter</span>();

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">setImmediate</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
        <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    });
});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">setImmediate</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
        <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event3<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    });

});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event3<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event3 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">setImmediate</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
        <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    });
});

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</pre>
執行看看！這是真正的非同步程式碼！你會很開心！因為不再當機了！<br>
<br>
<h4>
那改用 process.nextTick 好了</h4>
現在，你看 process.nextTick 應該也夠眼熟了，如果我們把上面程式碼<b><span style="color: #e06666;">全部的</span></b> setImmediate() 換成 process.nextTick 呢？你猜結果會怎樣？ (不要試！很恐怖！)<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1 fired!<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    <span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// 將 全部的 setImmediate 換成 process.nextTick</span>
    <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">process</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">nextTick</span>(<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
        <span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event2<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
    });
});

<span class="pl-c rich-diff-level-one" style="box-sizing: border-box; color: #969896;">// ... 略</span>
<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">crazy</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">emit</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>event1<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);</pre>
它會卡住！你要等久一點.... 大概 30 秒左右，最後它會給你一個&nbsp;process out of memory 的例外。現在不是 stack 爆掉，而是 GC 沒有辦法成功回收記憶體&nbsp;<span style="color: #666666; font-size: x-small;">(每個 handler 都有自己的 closure 去存取外層的那個 crazy，這個開銷會在 heap 上)</span>。姑且不管最後那個 GC 為何無法成功回收的原因，但相信你應該也猜的到，我們的程式會一直鎖死在某個 phase，因為永遠有清除不完的下一個 process.nextTick 的 callback (所以事件迴圈完全被阻塞住了，啾咪～ Heap 爆掉可以說是意外的收穫阿... XDDD)。<br>
<br>
所以，關於 EventEmitter，回到我前面說的：<br>
<blockquote class="tr_bq">
<i><span style="color: #444444; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">Node.js 給你 EventEmitter，是讓你在使用者空間創造 event pattern 的工具。它的本身與 Event Loop 毫無關係！</span></i></blockquote>
那麼我們應該要怎麼樣寫出「非同步的 event pattern」呢？現在你知道，你需要的只是將 EventEmitter 與那些可以將工作丟入 Event Loop 的 APIs 搭配使用即可！<span style="font-size: x-small;">(setTimeout(), setInterval(), Async I/O APIs, setImmediate(), 以及 process.nextTick()。如果使用 process.nextTick() 要稍微小心一點，只要避免產生遞迴呼叫、避免在 callback 中執行 long-running task，一般是不會有什麼大問題。)</span><br>
　<br>
如果說到這裡，您還是沒辦法被說服，那麼請您試著執行以下程式碼，您認為程式會一直執行下去還是馬上結束呢：<br>
<pre class="rich-diff-level-zero" style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; margin-left: 15px; overflow: auto; padding: 10px 20px; word-wrap: normal;"><span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> EventEmitter <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">require</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>events<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
<span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">var</span> server <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">new</span> <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">EventEmitter</span>();

<span class="pl-smi rich-diff-level-one" style="box-sizing: border-box;">server</span>.<span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">on</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>data<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-k rich-diff-level-one" style="box-sizing: border-box; color: #a71d5d;">function</span> () {
    <span class="pl-en rich-diff-level-one" style="box-sizing: border-box; color: #795da3;">console</span>.<span class="pl-c1 rich-diff-level-one" style="box-sizing: border-box; color: #0086b3;">log</span>(<span class="pl-s rich-diff-level-one" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>Am I waiting for data incoming?<span class="pl-pds" style="box-sizing: border-box;">'</span></span>);
});</pre>
如果您不用執行，就馬上能回答出來。您已經確確實實懂我的意思了！那裡根本沒有任何事情被安排進 Event Loop。<br>
　<br>
<span style="color: #3d85c6;">[2016/9/23] 謝謝網友的回應，聽說在 node 4.4.7@windows 上跑 process.nextTick 的不死狗範例，竟然不會爆!! 我覺得超有趣的阿!!</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/report.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/report.jpg"></a></div>
<br>
<h3>
結語</h3>
這篇文章，我們把 Node.js 的「Event Loop」跟「EventEmitter」兩個概念完全切割開了，把它們各自梳理的很清楚，它們本來就不是天生就結合在一起的東西，EventEmitter&nbsp;更不是&nbsp;Event Loop 的抽象。一旦我們對這兩個概念不再模模糊糊，那麼把它們兩者結合起來運用，你一定會覺得更加得心應手！<br>
<br>
　　很希望這篇文章，對於跟我一樣熱愛 JavaScript、熱愛 Node.js 的開發者，能夠對 Node.js 的非同步行為可以有很好的啟發與認識，然後能繼續寫出更棒的非同步程式碼。然後，我自己有個<strike>很不要臉的</strike>期待是，希望這篇文章可以成為大家探討 Node.js 非同步行為很好的範例，非常歡迎各界拿去修修改改當教材(因為我覺得正確認識它，真的非常非常重要)。同時也希望大家有發現錯誤的話，能告訴我，讓我們一起把它修改得更好、更正確！<br>
　<br>
　　還有還有，我很久沒在文章裡面請求大家支持我們的<a href="https://www.facebook.com/eeRhapsody/" target="_blank">粉絲團</a>啦！之前都覺得<strike>粉絲跟朋友一樣，不用多，死忠的有一個足矣</strike>。不過呢，如果您覺得這裡的文章真的寫得不錯，那麼就請您多多推薦給您的朋友。其實我是不知道這對 front-end 有沒有用，所以我只打算發布在 Node.js TW，不過還是很歡迎大家的轉載。<br>
<br>
當然也別忘了給粉絲團按個讚，持續接受 E.E. 狂想曲的騷擾 XDDD。有大家的鼓勵，也會讓我更有動力繼續努力寫文章！ (眼神死)<br>
　<br>
<span style="font-size: x-small;">(前幾天看到&nbsp;TechBridge技術週刊 - (第 46 期) 的標題 - <span style="color: #3d85c6;">Github 是全世界最大的同/異性程式員交友平台</span>，讓我想到我在 GitHub 上真的有交到朋友。改天我想寫寫這個的故事，也歡迎大家加我 <a href="https://www.facebook.com/chienjung.li.7" target="_blank">facebook </a>啊～)</span></div>
<div style="clear: both;"></div>
<div class="share-post">
<ul>
<li><a class="twitter share-tooltip share-tooltip-top" data-share-tooltip="Share on Twitter" href="http://twitter.com/share?url=https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html" rel="nofollow" target="_blank"><i class="fa fa-twitter"></i>Twitter</a></li>
<li><a class="facebook share-tooltip share-tooltip-top" data-share-tooltip="Share on Facebook" href="http://www.facebook.com/sharer.php?u=https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html" rel="nofollow" target="_blank"><i class="fa fa-facebook"></i>Facebook</a></li>
<li><a class="gplus share-tooltip share-tooltip-top" data-share-tooltip="Share on Google Plus" href="http://plus.google.com/share?url=https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html" rel="nofollow" target="_blank"><i class="fa fa-google-plus"></i>Google</a></li>
<li><a class="tumblr share-tooltip share-tooltip-top" data-share-tooltip="Share on Tumblr" href="http://www.tumblr.com/share" rel="nofollow" target="_blank"><i class="fa fa-tumblr"></i>Tumblr</a></li>
<li><a class="pinterest share-tooltip share-tooltip-top" data-share-tooltip="Share on Pinterest" href="http://pinterest.com/pin/create/button/?url=https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html&amp;media=https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s72-c/nodearchpng.png&amp;description=%E9%9D%9E%E5%90%8C%E6%AD%A5%E7%A8%8B%E5%BC%8F%E7%A2%BC%E4%B9%8B%E9%9C%A7%EF%BC%9ANode.js%20%E7%9A%84%E4%BA%8B%E4%BB%B6%E8%BF%B4%E5%9C%88%E8%88%87%20EventEmitter" target="_blank"><i class="fa fa-pinterest"></i>Pinterest</a></li>
</ul>
</div>
<div style="clear:both"></div>
<div style="clear: both;"></div>
<div id="author-box">
<div class="block-head">
<h3>
                            About 
                            simen
</h3>
<div class="stripe-line"></div>
</div>
<div class="post-listing">
<div class="author-avatar">
<img alt="simen" class="author_avatar" height="80" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head.jpg" width="80">
</div>
<div class="author-description">
一個熱衷於學習的工程師。結束學生生涯之後，當過研究員、在竹科當過工程師，後來跑到大學去教書，而現在又回到業界當起阿宅工程師了。
</div>
<div class="clear"></div>
</div>
</div>
<div id="related-posts">
<p class="title title-medium">
</p><h2><span>
                              RELATED POSTS
                              </span>
</h2>
<p></p>
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/軟體(2)" type="text/javascript"></script>
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/node" type="text/javascript"></script>
<script type="text/javascript">
                          var currentposturl="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html";
                          var maxresults=3;
                          var relatedpoststitle="<b></b>";
                          removeRelatedDuplicates_thumbs();
                          printRelatedLabels_thumbs();
                        </script><h1><b></b></h1><div style="clear: both;"><a href="http://simeneer.blogspot.com/2016/10/nodejs-streams.html"><img class="related_img" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/buffer_explosion.jpg"><br><div id="r-title"><h8>海納百川：Node.js Streams<h8></h8></h8></div></a><a "="" href="http://simeneer.blogspot.com/2016/10/curl-http.html"><img class="related_img" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/01.jpg"><br><div id="r-title"><h8>使用 curl 工具進行簡單的 http 測試<h8></h8></h8></div></a><a "="" href="http://simeneer.blogspot.com/2016/10/smart-phone-ble.html"><img class="related_img" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/hedy.jpg"><br><div id="r-title"><h8>準備跟 Smart Phone 說分手？淺談 BLE 開發模式<h8></h8></h8></div></a></div>
</div>
<div class="clear"></div>
</div>
</article>
<div class="show" id="chslidingbox">
<div class="chslidingbox-title chslidingbox-www">
<span style="float:left;margin:0 15px;">Recommended Posts</span>
<span><a href="javascript:void(0);" id="chslidingbox-close" title="close">×</a></span>
<span><a href="javascript:void(0);" id="chslidingbox-minimize" title="minimize">−</a></span>
<span><a href="javascript:void(0);" id="chslidingbox-maximize" title="maximize" style="display: none;">+</a></span>
</div>
<div class="chslidingbox-container">
<div class="related-post" id="sliding-tab"><h4></h4><ul class="related-post-style-2"><li><img alt="" class="related-post-item-thumbnail" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/LinkItSmart7688_fwm_bootloader_upgrade.png" width="45" height="45"><a class="related-post-item-title" title="LinkIt Smart 7688 (Duo) - 韌體與Bootloader更新/建置步驟" href="http://simeneer.blogspot.com/2017/03/linkit-smart-7688-duo-bootloader.html" target="_blank">LinkIt Smart 7688 (Duo) - 韌體與Bootloader更新/建置步驟</a><span class="related-post-item-summary"><span class="related-post-item-summary-text"></span> <a href="http://simeneer.blogspot.com/2017/03/linkit-smart-7688-duo-bootloader.html" class="related-post-item-more" target="_blank"></a></span><span style="display:block;clear:both;"></span></li><li><img alt="" class="related-post-item-thumbnail" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/dump.jpg" width="45" height="45"><a class="related-post-item-title" title="Node.js fs 模組  APIs 的三種類型" href="http://simeneer.blogspot.com/2016/11/nodejs-fs-apis_12.html" target="_blank">Node.js fs 模組  APIs 的三種類型</a><span class="related-post-item-summary"><span class="related-post-item-summary-text"></span> <a href="http://simeneer.blogspot.com/2016/11/nodejs-fs-apis_12.html" class="related-post-item-more" target="_blank"></a></span><span style="display:block;clear:both;"></span></li></ul><span style="display:block;clear:both;"></span></div>
<script type="text/javascript">
var labelArray = [
"軟體",

"node"
];
var relatedPostConfig = {homePage: "https://simeneer.blogspot.tw/",widgetTitle: "<h4></h4>",numPosts: 2,summaryLength: 0,
titleLength: "auto",thumbnailSize: 45,noImage: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAA3NCSVQICAjb4U/gAAAADElEQVQImWOor68HAAL+AX7vOF2TAAAAAElFTkSuQmCC",containerId: "sliding-tab",newTabLink: true,moreText: "",widgetStyle: 2,callBack: function() {}};
</script>
<script type="text/javascript">  

//<![CDATA[
/*! Related Post Widget for Blogger by Taufik Nurrohman => http://gplus.to/tovic */
var randomRelatedIndex,showRelatedPost;(function(n,m,k){var d={widgetTitle:"<h4>Artikel Terkait:</h4>",widgetStyle:1,homePage:"http://www.arlinadzgn.com",numPosts:7,summaryLength:370,titleLength:"auto",thumbnailSize:72,noImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAA3NCSVQICAjb4U/gAAAADElEQVQImWOor68HAAL+AX7vOF2TAAAAAElFTkSuQmCC",containerId:"related-post",newTabLink:false,moreText:"Baca Selengkapnya",callBack:function(){}};for(var f in relatedPostConfig){d[f]=(relatedPostConfig[f]=="undefined")?d[f]:relatedPostConfig[f]}var j=function(a){var b=m.createElement("script");b.type="text/javascript";b.src=a;k.appendChild(b)},o=function(b,a){return Math.floor(Math.random()*(a-b+1))+b},l=function(a){var p=a.length,c,b;if(p===0){return false}while(--p){c=Math.floor(Math.random()*(p+1));b=a[p];a[p]=a[c];a[c]=b}return a},e=(typeof labelArray=="object"&&labelArray.length>0)?"/-/"+l(labelArray)[0]:"",h=function(b){var c=b.feed.openSearch$totalResults.$t-d.numPosts,a=o(1,(c>0?c:1));j(d.homePage.replace(/\/$/,"")+"/feeds/posts/summary"+e+"?alt=json-in-script&orderby=updated&start-index="+a+"&max-results="+d.numPosts+"&callback=showRelatedPost")},g=function(z){var s=document.getElementById(d.containerId),x=l(z.feed.entry),A=d.widgetStyle,c=d.widgetTitle+'<ul class="related-post-style-'+A+'">',b=d.newTabLink?' target="_blank"':"",y='<span style="display:block;clear:both;"></span>',v,t,w,r,u;if(!s){return}for(var q=0;q<d.numPosts;q++){if(q==x.length){break}t=x[q].title.$t;w=(d.titleLength!=="auto"&&d.titleLength<t.length)?t.substring(0,d.titleLength)+"&hellip;":t;r=("media$thumbnail" in x[q]&&d.thumbnailSize!==false)?x[q].media$thumbnail.url.replace(/\/s[0-9]+(\-c)?/,"/s"+d.thumbnailSize+"-c"):d.noImage;u=("summary" in x[q]&&d.summaryLength>0)?x[q].summary.$t.replace(/<br ?\/?>/g," ").replace(/<.*?>/g,"").replace(/[<>]/g,"").substring(0,d.summaryLength)+"&hellip;":"";for(var p=0,a=x[q].link.length;p<a;p++){v=(x[q].link[p].rel=="alternate")?x[q].link[p].href:"#"}if(A==2){c+='<li><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"><a class="related-post-item-title" title="'+t+'" href="'+v+'"'+b+">"+w+'</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">'+u+'</span> <a href="'+v+'" class="related-post-item-more"'+b+">"+d.moreText+"</a></span>"+y+"</li>"}else{if(A==3||A==4){c+='<li class="related-post-item" tabindex="0"><a class="related-post-item-title" href="'+v+'"'+b+'><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"></a><div class="related-post-item-tooltip"><a class="related-post-item-title" title="'+t+'" href="'+v+'"'+b+">"+w+"</a></div>"+y+"</li>"}else{if(A==5){c+='<li class="related-post-item" tabindex="0"><a class="related-post-item-wrapper" href="'+v+'" title="'+t+'"'+b+'><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"><span class="related-post-item-tooltip">'+w+"</span></a>"+y+"</li>"}else{if(A==6){c+='<li><a class="related-post-item-title" title="'+t+'" href="'+v+'"'+b+">"+w+'</a><div class="related-post-item-tooltip"><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"><span class="related-post-item-summary"><span class="related-post-item-summary-text">'+u+"</span></span>"+y+"</div></li>"}else{c+='<li><a title="'+t+'" href="'+v+'"'+b+">"+w+"</a></li>"}}}}}s.innerHTML=c+="</ul>"+y;d.callBack()};randomRelatedIndex=h;showRelatedPost=g;j(d.homePage.replace(/\/$/,"")+"/feeds/posts/summary"+e+"?alt=json-in-script&orderby=updated&max-results=0&callback=randomRelatedIndex")})(window,document,document.getElementsByTagName("head")[0]); 


//]]>
</script>
</div>
</div>
<div id="top-comment">
<div class="widget2" id="top-comment1">
<div class="centerare1">
<div class="comments" id="comments">
<a name="comments"></a>
<div class="komhead">
<h4>
27
意見:
      
</h4>
<div class="stripe-line"></div>
</div>
<div class="comments-content">
<script async="async" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/comments.js" type="text/javascript"></script>
<script type="text/javascript">
                        (function() {
                          var items = [{'id': '164523302918202569', 'body': '多謝分享&#65292;寫的非常詳細清楚', 'timestamp': '1474600564687', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474600564687#c164523302918202569', 'author': {'name': 'Newcomer', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/10684780268772874481'}, 'displayTime': '2016年9月23日 上午11:16', 'deleteclass': 'item-control blog-admin pid-831544607'}, {'id': '8736074211524835180', 'body': '很棒的文章&#65292;謝謝您', 'timestamp': '1474609439129', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474609439129#c8736074211524835180', 'author': {'name': 'Birkhoff Lee', 'avatarUrl': '//lh3.googleusercontent.com/-6FB5J69whPE/AAAAAAAAAAI/AAAAAAAAALA/KM-1MmBTh54/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/14763286696617537171'}, 'displayTime': '2016年9月23日 下午1:43', 'deleteclass': 'item-control blog-admin pid-2111260272'}, {'id': '4076805893835864528', 'parentId': '164523302918202569', 'body': 'Hello~ 謝謝哦!', 'timestamp': '1474611384197', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474611384197#c4076805893835864528', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年9月23日 下午2:16', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '1022911160157240926', 'parentId': '8736074211524835180', 'body': 'Hi! 謝謝呀~', 'timestamp': '1474611401372', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474611401372#c1022911160157240926', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年9月23日 下午2:16', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '4775192669928529497', 'body': '太精彩了&#65281;&#65281;\x3cbr /\x3e感謝分享', 'timestamp': '1474624106395', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474624106395#c4775192669928529497', 'author': {'name': '鄭元傑', 'avatarUrl': '//lh6.googleusercontent.com/-Q0FdvS0ieJs/AAAAAAAAAAI/AAAAAAAAFuc/9cM1CX7uptw/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/09646515673968354965'}, 'displayTime': '2016年9月23日 下午5:48', 'deleteclass': 'item-control blog-admin pid-1669030880'}, {'id': '2991777731701115555', 'parentId': '4775192669928529497', 'body': 'Hi 謝謝~ 你這樣我以後寫不出一樣精采的怎麼辦啦  XDDD', 'timestamp': '1474637804813', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474637804813#c2991777731701115555', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年9月23日 下午9:36', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '1831877323446062314', 'body': '非常棒!! 連我這個沒寫過nodejs的人看了都有所收穫 非常感謝這個用心的分享!!', 'timestamp': '1474648454254', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474648454254#c1831877323446062314', 'author': {'name': '謝松庭', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/08001574282254960068'}, 'displayTime': '2016年9月24日 上午12:34', 'deleteclass': 'item-control blog-admin pid-882118275'}, {'id': '6943626216180035521', 'parentId': '1831877323446062314', 'body': '謝謝! 我說你也太強大了.... 沒寫過 node, 竟然還有耐心看完, 毅力太驚人了啊!!', 'timestamp': '1474683104965', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474683104965#c6943626216180035521', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年9月24日 上午10:11', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '404792884628406137', 'body': '好文章', 'timestamp': '1474860729898', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474860729898#c404792884628406137', 'author': {'name': '祥平君', 'avatarUrl': '//4.bp.blogspot.com/-_FhRvU-cbz0/T7d78Ujx8jI/AAAAAAAABzw/LOARJjlbMfw/s35/%252525E6%25252596%252525B0%252525E6%252525B3%252525A8%252525E9%2525259F%252525B3%252525E6%25252596%252525B0%252525E8%25252581%2525259Elogo.jpg', 'profileUrl': 'https://www.blogger.com/profile/12409761706281439923'}, 'displayTime': '2016年9月26日 上午11:32', 'deleteclass': 'item-control blog-admin pid-271339674'}, {'id': '8127379212469680802', 'parentId': '404792884628406137', 'body': 'Hi~ 謝謝!!', 'timestamp': '1474883604548', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1474883604548#c8127379212469680802', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年9月26日 下午5:53', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '3360793362613488489', 'body': '好文章&#12290; nodejs event loop 文件連結換了 請更新一下', 'timestamp': '1475761530407', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1475761530407#c3360793362613488489', 'author': {'name': 'Mond Wan', 'avatarUrl': '//lh5.googleusercontent.com/-YdTgUdJr3GA/AAAAAAAAAAI/AAAAAAAAADw/ZQDZchIFJiM/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/12676957195891226709'}, 'displayTime': '2016年10月6日 下午9:45', 'deleteclass': 'item-control blog-admin pid-1208449428'}, {'id': '7421924348060348316', 'parentId': '3360793362613488489', 'body': 'Hello~ 謝謝提醒(太重要了)!連結已經更新了~', 'timestamp': '1475762703960', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1475762703960#c7421924348060348316', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年10月6日 下午10:05', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '7745887699030433808', 'body': '我用node v5.11.1 + macbookPro 16G, 跑process.nextTick 的不死狗也不會爆呢~:p', 'timestamp': '1476181123890', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1476181123890#c7745887699030433808', 'author': {'name': 'hank', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/09647438154268285574'}, 'displayTime': '2016年10月11日 下午6:18', 'deleteclass': 'item-control blog-admin pid-2026374803'}, {'id': '2250386727330674869', 'parentId': '7745887699030433808', 'body': '太神奇啦~~  疑?? 我剛剛裝 v5.11.1 來跑, 一樣會死阿~~  該不會 mac 就是比較強吧 @@', 'timestamp': '1476183868714', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1476183868714#c2250386727330674869', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2016年10月11日 下午7:04', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '5033681749608765268', 'body': '謝謝分享&#65292;對理解 Event Loop 幫助很大&#65281;\x3cbr /\x3e另外我的 iMac 也比較強&#65292;跑 process.nextTick  不會爆&#65306;&#65289;', 'timestamp': '1476951998019', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1476951998019#c5033681749608765268', 'author': {'name': 'kai ye', 'avatarUrl': '//lh4.googleusercontent.com/-5oSOrwrHDbE/AAAAAAAAAAI/AAAAAAAABDc/LVCdhxut658/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/16049877477506384136'}, 'displayTime': '2016年10月20日 下午4:26', 'deleteclass': 'item-control blog-admin pid-427975818'}, {'id': '4770121246178339548', 'parentId': '5033681749608765268', 'body': '謝謝阿 @@  剛才發現您的留言~', 'timestamp': '1488774916172', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1488774916172#c4770121246178339548', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2017年3月6日 下午12:35', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '5071498545112779647', 'body': '謝謝分享&#65292;我在debian8.8&#12289;node版本8.2.1跑process.nextTick也不會爆耶XD\x3cbr /\x3e\x3cbr /\x3e另外想請教您&#65292;如果我寫了一份js檔裡面只有console.log(...)&#65292;沒有把任何工作排進event loop的任何phase&#12290;這份js code執行的地方是類似於前端js的call stack嗎&#65311;還是說它也是屬於event loop的某個phase?~謝謝^^', 'timestamp': '1501216268315', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1501216268315#c5071498545112779647', 'author': {'name': 'ray', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/03539193151132807876'}, 'displayTime': '2017年7月28日 下午12:31', 'deleteclass': 'item-control blog-admin pid-2066247564'}, {'id': '2856921270233321495', 'parentId': '5071498545112779647', 'body': 'Hi Ray, 謝謝您又帶來這個令人\x26quot;振奮\x26quot;的消息 XDD....\x3cbr /\x3e&#12288;\x3cbr /\x3e這邊以我的觀念回覆一下&#65292;如果你的 js 檔中只有 console.log()&#65292;那麼它會在進入Event Loop之前的\x26quot;準備期\x26quot;(英文書也可能寫作program 的initial期) 被執行&#65292;這不屬於 Event loop 的 phase&#12290;準備期其實就是一支程式開始執行&#65292;首先就會同步地全部執行完&#12290;如果有事情被排進事件迴圈&#65292;那麼程式就不會直接跳出&#65292;會待在那裏等待將要做的事情(或事件)發生&#65292;不然事件迴圈中沒有事情在等&#65292;程式就會在執行完畢後&#65292;直接結束跳出&#12290;\x3cbr /\x3e&#12288;\x3cbr /\x3e我認為這和前端的 call stack 沒有什麼意義上的直接關係~ mmm, 應該說, call stack 這個詞有點太泛用了一點...', 'timestamp': '1501263121592', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1501263121592#c2856921270233321495', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2017年7月29日 上午1:32', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '3850719406321695983', 'body': '謝謝分享! \x3cbr /\x3emacOs 10.12.6\x3cbr /\x3enode 8.4.0\x3cbr /\x3eiterm2\x3cbr /\x3e全部的 setImmediate() 換成 process.nextTick\x3cbr /\x3e執行後&#65292;cpu 負載維持在 150% 左右 &#65292;記憶體維持在 90~100 MB 左右\x3cbr /\x3e10分鐘之後還是在運轉&#65292;其他軟體操作都沒影響', 'timestamp': '1504182758649', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1504182758649#c3850719406321695983', 'author': {'name': 'yhoif', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/11769079960771600798'}, 'displayTime': '2017年8月31日 下午8:32', 'deleteclass': 'item-control blog-admin pid-2057023489'}, {'id': '2678585352859455983', 'body': '很精彩的文章&#65292;谢谢你', 'timestamp': '1508925028664', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1508925028664#c2678585352859455983', 'author': {'name': '董玉强', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/09737159990594731337'}, 'displayTime': '2017年10月25日 下午5:50', 'deleteclass': 'item-control blog-admin pid-1773801118'}, {'id': '4685975997334773739', 'body': '\x3cspan class\x3d\x27deleted-comment\x27\x3e作者已經移除這則留言&#12290;\x3c/span\x3e', 'timestamp': '1511847280962', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511847280962#c4685975997334773739', 'author': {'name': 'Unknown', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/04004825506482789717'}, 'displayTime': '2017年11月28日 下午1:34', 'deleteclass': 'item-control blog-admin '}, {'id': '2650961965615561077', 'body': '感谢&#65292;感谢&#65292;写的很好', 'timestamp': '1511847282790', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511847282790#c2650961965615561077', 'author': {'name': 'Unknown', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/04004825506482789717'}, 'displayTime': '2017年11月28日 下午1:34', 'deleteclass': 'item-control blog-admin pid-1662591379'}, {'id': '3256471567990704606', 'body': '版主您好&#65306;\x3cbr /\x3e\x3cbr /\x3e最近在看Libuv&#65292;突然對於Event loop的poll phase有點不太懂&#65292;以下說明截自文件\x3cbr /\x3ePoll timeout is calculated. Before blocking for I/O the loop calculates for how long it should block. \x3cbr /\x3eLibuv底層不都是透過 非同步的System call為什麼還需要 block for I/O&#65292;請問這在實際上是什麼意思呢?\x3cbr /\x3e\x3cbr /\x3ehttp://docs.libuv.org/en/v1.x/design.html#the-i-o-loop\x3cbr /\x3e\x3cbr /\x3e謝謝版主', 'timestamp': '1511865524764', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511865524764#c3256471567990704606', 'author': {'name': '鄭元傑', 'avatarUrl': '//lh6.googleusercontent.com/-Q0FdvS0ieJs/AAAAAAAAAAI/AAAAAAAAFuc/9cM1CX7uptw/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/09646515673968354965'}, 'displayTime': '2017年11月28日 下午6:38', 'deleteclass': 'item-control blog-admin pid-1669030880'}, {'id': '2000390596988685509', 'parentId': '3850719406321695983', 'body': '哇~ 感謝您的分享~~', 'timestamp': '1511871225643', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511871225643#c2000390596988685509', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2017年11月28日 下午8:13', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '919340699836502659', 'parentId': '2678585352859455983', 'body': '謝謝支持哦&#65374;', 'timestamp': '1511871252598', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511871252598#c919340699836502659', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2017年11月28日 下午8:14', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '3328622544660916196', 'parentId': '2650961965615561077', 'body': '^^ 謝謝~', 'timestamp': '1511871275731', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511871275731#c3328622544660916196', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2017年11月28日 下午8:14', 'deleteclass': 'item-control blog-admin pid-1055765855'}, {'id': '8577705204522871251', 'parentId': '3256471567990704606', 'body': 'Hi 我認為雖然系統呼叫是非同步的&#65292;但 libuv 的 event loop 還是要去檢查底層的事件佇列, 雖然底層是非同步沒錯, 但 event loop 沒辦法在底層事件一發生的時候就馬上執行相應的 callback, 大家都需要排隊, 讓 event loop 一一地去執行它們 (event loop 自身一直繞迴圈進行檢查有沒有事情要做, 直到事情做完).', 'timestamp': '1511872471390', 'permalink': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment\x3d1511872471390#c8577705204522871251', 'author': {'name': 'simen', 'avatarUrl': '//3.bp.blogspot.com/-klmWr-6PHcM/VsfZR3Ie38I/AAAAAAAABjc/7hdTA3U5aww/s35/blogger_head.jpg', 'profileUrl': 'https://www.blogger.com/profile/04929133426620976166'}, 'displayTime': '2017年11月28日 下午8:34', 'deleteclass': 'item-control blog-admin pid-1055765855'}];
                          var msgs = {'loadMore': '載入更多&#8230;', 'loading': '載入中&#8230;', 'loaded': '已經是最後一頁&#65281;', 'addComment': '新增留言', 'reply': '回覆', 'delete': '刪除'};
                          var config = {'blogId': '37997006600210175', 'postId': '3949927765296842465', 'feed': 'https://simeneer.blogspot.com/feeds/3949927765296842465/comments/default', 'authorName': 'simen', 'authorUrl': 'https://www.blogger.com/profile/04929133426620976166', 'baseUri': 'https://www.blogger.com', 'maxThreadDepth': 2};
                          // <![CDATA[
                          var cursor = null;
                          if (items && items.length > 0) {
                            cursor = parseInt(items[items.length - 1].timestamp) + 1;
                          }
                          var bodyFromEntry = function(entry) {
                            if (entry.gd$extendedProperty) {
                              for (var k in entry.gd$extendedProperty) {
                                if (entry.gd$extendedProperty[k].name == 'blogger.contentRemoved') {
                                  return '<span class="deleted-comment">' + entry.content.$t + '</span>';
                                }
                              }
                            }
                            return entry.content.$t;
                          }
                          var parse = function(data) {
                            cursor = null;
                            var comments = [];
                            if (data && data.feed && data.feed.entry) {
                              for (var i = 0, entry; entry = data.feed.entry[i]; i++) {
                                var comment = {};
                                // comment ID, parsed out of the original id format
                                var id = /blog-(\d+).post-(\d+)/.exec(entry.id.$t);
                                comment.id = id ? id[2] : null;
                                comment.body = bodyFromEntry(entry);
                                comment.timestamp = Date.parse(entry.published.$t) + '';
                                if (entry.author && entry.author.constructor === Array) {
                                  var auth = entry.author[0];
                                  if (auth) {
                                    comment.author = {
                                      name: (auth.name ? auth.name.$t : undefined),
                                      profileUrl: (auth.uri ? auth.uri.$t : undefined),
                                      avatarUrl: (auth.gd$image ? auth.gd$image.src : undefined)
                                    };
                                  }
                                }
                                if (entry.link) {
                                  if (entry.link[2]) {
                                    comment.link = comment.permalink = entry.link[2].href;
                                  }
                                  if (entry.link[3]) {
                                    var pid = /.*comments\/default\/(\d+)\?.*/.exec(entry.link[3].href);
                                    if (pid && pid[1]) {
                                      comment.parentId = pid[1];
                                    }
                                  }
                                }
                                comment.deleteclass = 'item-control blog-admin';
                                if (entry.gd$extendedProperty) {
                                  for (var k in entry.gd$extendedProperty) {
                                    if (entry.gd$extendedProperty[k].name == 'blogger.itemClass') {
                                      comment.deleteclass += ' ' + entry.gd$extendedProperty[k].value;
                                    } else if (entry.gd$extendedProperty[k].name == 'blogger.displayTime') {
                                      comment.displayTime = entry.gd$extendedProperty[k].value;
                                    }
                                  }
                                }
                                comments.push(comment);
                              }
                            }
                            return comments;
                          };
                          var paginator = function(callback) {
                            if (hasMore()) {
                              var url = config.feed + '?alt=json&v=2&orderby=published&reverse=false&max-results=50';
                              if (cursor) {
                                url += '&published-min=' + new Date(cursor).toISOString();
                              }
                              window.bloggercomments = function(data) {
                                var parsed = parse(data);
                                cursor = parsed.length < 50 ? null
                                : parseInt(parsed[parsed.length - 1].timestamp) + 1
                                callback(parsed);
                                window.bloggercomments = null;
                              }
                              url += '&callback=bloggercomments';
                              var script = document.createElement('script');
                              script.type = 'text/javascript';
                              script.src = url;
                              document.getElementsByTagName('head')[0].appendChild(script);
                            }
                          };
                          var hasMore = function() {
                            return !!cursor;
                          };
                          var getMeta = function(key, comment) {
                            if ('iswriter' == key) {
                              var matches = !!comment.author
                              && comment.author.name == config.authorName
                              && comment.author.profileUrl == config.authorUrl;
                              return matches ? 'true' : '';
                            } else if ('deletelink' == key) {
                              return config.baseUri + '/delete-comment.g?blogID='
                              + config.blogId + '&postID=' + comment.id;
                            } else if ('deleteclass' == key) {
                              return comment.deleteclass;
                            }
                            return '';
                          };
                          var replybox = null;
                          var replyUrlParts = null;
                          var replyParent = undefined;
                          var onReply = function(commentId, domId) {
                            if (replybox == null) {
                              // lazily cache replybox, and adjust to suit this style:
                              replybox = document.getElementById('comment-editor');
                              if (replybox != null) {
                                replybox.height = '250px';
                                replybox.style.display = 'block';
                                replyUrlParts = replybox.src.split('#');
                              }
                            }
                            if (replybox && (commentId !== replyParent)) {
                              document.getElementById(domId).insertBefore(replybox.parentNode, null);
                              replybox.src = replyUrlParts[0]
                              + (commentId ? '&parentID=' + commentId : '')
                              + '#' + replyUrlParts[1];
                              replyParent = commentId;
                            }
                          };
                          var hash = (window.location.hash || '#').substring(1);
                          var startThread, targetComment;
                          if (/^comment-form_/.test(hash)) {
                            startThread = hash.substring('comment-form_'.length);
                          } else if (/^c[0-9]+$/.test(hash)) {
                            targetComment = hash.substring(1);
                          }
                          // Configure commenting API:
                          var configJso = {
                            'maxDepth': config.maxThreadDepth
                          };
                          var provider = {
                            'id': config.postId,
                            'data': items,
                            'loadNext': paginator,
                            'hasMore': hasMore,
                            'getMeta': getMeta,
                            'onReply': onReply,
                            'rendered': true,
                            'initComment': targetComment,
                            'initReplyThread': startThread,
                            'config': configJso,
                            'messages': msgs
                          };
                          var render = function() {
                            if (window.goog && window.goog.comments) {
                              var holder = document.getElementById('comment-holder');
                              window.goog.comments.render(holder, provider);
                            }
                          };
                          // render now, or queue to render when library loads:
                          if (window.goog && window.goog.comments) {
                            render();
                          } else {
                            window.goog = window.goog || {};
                            window.goog.comments = window.goog.comments || {};
                            window.goog.comments.loadQueue = window.goog.comments.loadQueue || [];
                            window.goog.comments.loadQueue.push(render);
                          }
                        })();
                        // ]]>
                      </script>
<div id="comment-holder">

<div id="bc_0_28C" kind="c"><div id="bc_0_28CT"><div id="bc_0_27T" class="comment-thread" kind="r" t="0" u="0"><ol id="bc_0_27TB"><li id="bc_0_1B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c164523302918202569" class="comment-block"><div id="bc_0_1M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/10684780268772874481">Newcomer</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474600564687#c164523302918202569">2016年9月23日 上午11:16</a></span></div><p id="bc_0_1MC" class="comment-content">多謝分享，寫的非常詳細清楚</p><span id="bc_0_1MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-831544607"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=164523302918202569">刪除</a></span></span></div><div id="bc_0_1BR" class="comment-replies"><span id="bc_0_1b+seedKSpuD" kind="d"><div id="bc_0_0T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_0TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_0TA" class="thread-arrow"></span><span id="bc_0_0TN" class="thread-count"><span id="bc_0_0TNT" style="display: none;"></span><span id="bc_0_0TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_0TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_0TC" class="thread-chrome thread-expanded"><div><li id="bc_0_0B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c4076805893835864528" class="comment-block"><div id="bc_0_0M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474611384197#c4076805893835864528">2016年9月23日 下午2:16</a></span></div><p id="bc_0_0MC" class="comment-content">Hello~ 謝謝哦!</p><span id="bc_0_0MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=4076805893835864528">刪除</a></span></span></div><div id="bc_0_0BR" class="comment-replies"></div><div id="bc_0_0B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_0I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_0T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_1B_box" class="comment-replybox-single"></div></li><li id="bc_0_3B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/photo.jpg"></div><div id="c8736074211524835180" class="comment-block"><div id="bc_0_3M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/14763286696617537171">Birkhoff Lee</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474609439129#c8736074211524835180">2016年9月23日 下午1:43</a></span></div><p id="bc_0_3MC" class="comment-content">很棒的文章，謝謝您</p><span id="bc_0_3MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-2111260272"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=8736074211524835180">刪除</a></span></span></div><div id="bc_0_3BR" class="comment-replies"><span id="bc_0_3b+seedKSpvD" kind="d"><div id="bc_0_2T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_2TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_2TA" class="thread-arrow"></span><span id="bc_0_2TN" class="thread-count"><span id="bc_0_2TNT" style="display: none;"></span><span id="bc_0_2TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_2TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_2TC" class="thread-chrome thread-expanded"><div><li id="bc_0_2B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c1022911160157240926" class="comment-block"><div id="bc_0_2M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474611401372#c1022911160157240926">2016年9月23日 下午2:16</a></span></div><p id="bc_0_2MC" class="comment-content">Hi! 謝謝呀~</p><span id="bc_0_2MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=1022911160157240926">刪除</a></span></span></div><div id="bc_0_2BR" class="comment-replies"></div><div id="bc_0_2B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_2I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_2T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_3B_box" class="comment-replybox-single"></div></li><li id="bc_0_5B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/photo(1).jpg"></div><div id="c4775192669928529497" class="comment-block"><div id="bc_0_5M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/09646515673968354965">鄭元傑</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474624106395#c4775192669928529497">2016年9月23日 下午5:48</a></span></div><p id="bc_0_5MC" class="comment-content">太精彩了！！<br>感謝分享</p><span id="bc_0_5MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-1669030880"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=4775192669928529497">刪除</a></span></span></div><div id="bc_0_5BR" class="comment-replies"><span id="bc_0_5b+seedKSpxD" kind="d"><div id="bc_0_4T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_4TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_4TA" class="thread-arrow"></span><span id="bc_0_4TN" class="thread-count"><span id="bc_0_4TNT" style="display: none;"></span><span id="bc_0_4TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_4TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_4TC" class="thread-chrome thread-expanded"><div><li id="bc_0_4B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c2991777731701115555" class="comment-block"><div id="bc_0_4M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474637804813#c2991777731701115555">2016年9月23日 下午9:36</a></span></div><p id="bc_0_4MC" class="comment-content">Hi 謝謝~ 你這樣我以後寫不出一樣精采的怎麼辦啦  XDDD</p><span id="bc_0_4MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=2991777731701115555">刪除</a></span></span></div><div id="bc_0_4BR" class="comment-replies"></div><div id="bc_0_4B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_4I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_4T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_5B_box" class="comment-replybox-single"></div></li><li id="bc_0_7B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c1831877323446062314" class="comment-block"><div id="bc_0_7M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/08001574282254960068">謝松庭</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474648454254#c1831877323446062314">2016年9月24日 上午12:34</a></span></div><p id="bc_0_7MC" class="comment-content">非常棒!! 連我這個沒寫過nodejs的人看了都有所收穫 非常感謝這個用心的分享!!</p><span id="bc_0_7MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-882118275"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=1831877323446062314">刪除</a></span></span></div><div id="bc_0_7BR" class="comment-replies"><span id="bc_0_7b+seedKSpzD" kind="d"><div id="bc_0_6T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_6TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_6TA" class="thread-arrow"></span><span id="bc_0_6TN" class="thread-count"><span id="bc_0_6TNT" style="display: none;"></span><span id="bc_0_6TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_6TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_6TC" class="thread-chrome thread-expanded"><div><li id="bc_0_6B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c6943626216180035521" class="comment-block"><div id="bc_0_6M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474683104965#c6943626216180035521">2016年9月24日 上午10:11</a></span></div><p id="bc_0_6MC" class="comment-content">謝謝! 我說你也太強大了.... 沒寫過 node, 竟然還有耐心看完, 毅力太驚人了啊!!</p><span id="bc_0_6MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=6943626216180035521">刪除</a></span></span></div><div id="bc_0_6BR" class="comment-replies"></div><div id="bc_0_6B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_6I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_6T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_7B_box" class="comment-replybox-single"></div></li><li id="bc_0_9B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/%2525E6%252596%2525B0%2525E6%2525B3%2525A8%2525E9%25259F%2525B3%2525E6%252596%2525B0%2525E8%252581%25259Elogo.jpg"></div><div id="c404792884628406137" class="comment-block"><div id="bc_0_9M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/12409761706281439923">祥平君</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474860729898#c404792884628406137">2016年9月26日 上午11:32</a></span></div><p id="bc_0_9MC" class="comment-content">好文章</p><span id="bc_0_9MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-271339674"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=404792884628406137">刪除</a></span></span></div><div id="bc_0_9BR" class="comment-replies"><span id="bc_0_9b+seedKSp1D" kind="d"><div id="bc_0_8T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_8TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_8TA" class="thread-arrow"></span><span id="bc_0_8TN" class="thread-count"><span id="bc_0_8TNT" style="display: none;"></span><span id="bc_0_8TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_8TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_8TC" class="thread-chrome thread-expanded"><div><li id="bc_0_8B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c8127379212469680802" class="comment-block"><div id="bc_0_8M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1474883604548#c8127379212469680802">2016年9月26日 下午5:53</a></span></div><p id="bc_0_8MC" class="comment-content">Hi~ 謝謝!!</p><span id="bc_0_8MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=8127379212469680802">刪除</a></span></span></div><div id="bc_0_8BR" class="comment-replies"></div><div id="bc_0_8B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_8I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_8T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_9B_box" class="comment-replybox-single"></div></li><li id="bc_0_11B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/photo(2).jpg"></div><div id="c3360793362613488489" class="comment-block"><div id="bc_0_11M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/12676957195891226709">Mond Wan</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1475761530407#c3360793362613488489">2016年10月6日 下午9:45</a></span></div><p id="bc_0_11MC" class="comment-content">好文章。 nodejs event loop 文件連結換了 請更新一下</p><span id="bc_0_11MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-1208449428"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=3360793362613488489">刪除</a></span></span></div><div id="bc_0_11BR" class="comment-replies"><span id="bc_0_11b+seedKSp3D" kind="d"><div id="bc_0_10T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_10TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_10TA" class="thread-arrow"></span><span id="bc_0_10TN" class="thread-count"><span id="bc_0_10TNT" style="display: none;"></span><span id="bc_0_10TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_10TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_10TC" class="thread-chrome thread-expanded"><div><li id="bc_0_10B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c7421924348060348316" class="comment-block"><div id="bc_0_10M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1475762703960#c7421924348060348316">2016年10月6日 下午10:05</a></span></div><p id="bc_0_10MC" class="comment-content">Hello~ 謝謝提醒(太重要了)!連結已經更新了~</p><span id="bc_0_10MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=7421924348060348316">刪除</a></span></span></div><div id="bc_0_10BR" class="comment-replies"></div><div id="bc_0_10B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_10I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_10T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_11B_box" class="comment-replybox-single"></div></li><li id="bc_0_13B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c7745887699030433808" class="comment-block"><div id="bc_0_13M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/09647438154268285574">hank</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1476181123890#c7745887699030433808">2016年10月11日 下午6:18</a></span></div><p id="bc_0_13MC" class="comment-content">我用node v5.11.1 + macbookPro 16G, 跑process.nextTick 的不死狗也不會爆呢~:p</p><span id="bc_0_13MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-2026374803"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=7745887699030433808">刪除</a></span></span></div><div id="bc_0_13BR" class="comment-replies"><span id="bc_0_13b+seedKSp5D" kind="d"><div id="bc_0_12T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_12TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_12TA" class="thread-arrow"></span><span id="bc_0_12TN" class="thread-count"><span id="bc_0_12TNT" style="display: none;"></span><span id="bc_0_12TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_12TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_12TC" class="thread-chrome thread-expanded"><div><li id="bc_0_12B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c2250386727330674869" class="comment-block"><div id="bc_0_12M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1476183868714#c2250386727330674869">2016年10月11日 下午7:04</a></span></div><p id="bc_0_12MC" class="comment-content">太神奇啦~~  疑?? 我剛剛裝 v5.11.1 來跑, 一樣會死阿~~  該不會 mac 就是比較強吧 @@</p><span id="bc_0_12MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=2250386727330674869">刪除</a></span></span></div><div id="bc_0_12BR" class="comment-replies"></div><div id="bc_0_12B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_12I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_12T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_13B_box" class="comment-replybox-single"></div></li><li id="bc_0_15B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/photo(3).jpg"></div><div id="c5033681749608765268" class="comment-block"><div id="bc_0_15M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/16049877477506384136">kai ye</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1476951998019#c5033681749608765268">2016年10月20日 下午4:26</a></span></div><p id="bc_0_15MC" class="comment-content">謝謝分享，對理解 Event Loop 幫助很大！<br>另外我的 iMac 也比較強，跑 process.nextTick  不會爆：）</p><span id="bc_0_15MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-427975818"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=5033681749608765268">刪除</a></span></span></div><div id="bc_0_15BR" class="comment-replies"><span id="bc_0_15b+seedKSp7D" kind="d"><div id="bc_0_14T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_14TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_14TA" class="thread-arrow"></span><span id="bc_0_14TN" class="thread-count"><span id="bc_0_14TNT" style="display: none;"></span><span id="bc_0_14TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_14TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_14TC" class="thread-chrome thread-expanded"><div><li id="bc_0_14B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c4770121246178339548" class="comment-block"><div id="bc_0_14M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1488774916172#c4770121246178339548">2017年3月6日 下午12:35</a></span></div><p id="bc_0_14MC" class="comment-content">謝謝阿 @@  剛才發現您的留言~</p><span id="bc_0_14MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=4770121246178339548">刪除</a></span></span></div><div id="bc_0_14BR" class="comment-replies"></div><div id="bc_0_14B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_14I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_14T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_15B_box" class="comment-replybox-single"></div></li><li id="bc_0_17B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c5071498545112779647" class="comment-block"><div id="bc_0_17M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/03539193151132807876">ray</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1501216268315#c5071498545112779647">2017年7月28日 下午12:31</a></span></div><p id="bc_0_17MC" class="comment-content">謝謝分享，我在debian8.8、node版本8.2.1跑process.nextTick也不會爆耶XD<br><br>另外想請教您，如果我寫了一份js檔裡面只有console.log(...)，沒有把任何工作排進event loop的任何phase。這份js code執行的地方是類似於前端js的call stack嗎？還是說它也是屬於event loop的某個phase?~謝謝^^</p><span id="bc_0_17MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-2066247564"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=5071498545112779647">刪除</a></span></span></div><div id="bc_0_17BR" class="comment-replies"><span id="bc_0_17b+seedKSp9D" kind="d"><div id="bc_0_16T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_16TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_16TA" class="thread-arrow"></span><span id="bc_0_16TN" class="thread-count"><span id="bc_0_16TNT" style="display: none;"></span><span id="bc_0_16TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_16TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_16TC" class="thread-chrome thread-expanded"><div><li id="bc_0_16B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c2856921270233321495" class="comment-block"><div id="bc_0_16M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1501263121592#c2856921270233321495">2017年7月29日 上午1:32</a></span></div><p id="bc_0_16MC" class="comment-content">Hi Ray, 謝謝您又帶來這個令人"振奮"的消息 XDD....<br>　<br>這邊以我的觀念回覆一下，如果你的 js 檔中只有 console.log()，那麼它會在進入Event Loop之前的"準備期"(英文書也可能寫作program 的initial期) 被執行，這不屬於 Event loop 的 phase。準備期其實就是一支程式開始執行，首先就會同步地全部執行完。如果有事情被排進事件迴圈，那麼程式就不會直接跳出，會待在那裏等待將要做的事情(或事件)發生，不然事件迴圈中沒有事情在等，程式就會在執行完畢後，直接結束跳出。<br>　<br>我認為這和前端的 call stack 沒有什麼意義上的直接關係~ mmm, 應該說, call stack 這個詞有點太泛用了一點...</p><span id="bc_0_16MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=2856921270233321495">刪除</a></span></span></div><div id="bc_0_16BR" class="comment-replies"></div><div id="bc_0_16B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_16I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_16T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_17B_box" class="comment-replybox-single"></div></li><li id="bc_0_19B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c3850719406321695983" class="comment-block"><div id="bc_0_19M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/11769079960771600798">yhoif</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1504182758649#c3850719406321695983">2017年8月31日 下午8:32</a></span></div><p id="bc_0_19MC" class="comment-content">謝謝分享! <br>macOs 10.12.6<br>node 8.4.0<br>iterm2<br>全部的 setImmediate() 換成 process.nextTick<br>執行後，cpu 負載維持在 150% 左右 ，記憶體維持在 90~100 MB 左右<br>10分鐘之後還是在運轉，其他軟體操作都沒影響</p><span id="bc_0_19MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-2057023489"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=3850719406321695983">刪除</a></span></span></div><div id="bc_0_19BR" class="comment-replies"><span id="bc_0_19b+seedKSqDD" kind="d"><div id="bc_0_18T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_18TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_18TA" class="thread-arrow"></span><span id="bc_0_18TN" class="thread-count"><span id="bc_0_18TNT" style="display: none;"></span><span id="bc_0_18TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_18TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_18TC" class="thread-chrome thread-expanded"><div><li id="bc_0_18B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c2000390596988685509" class="comment-block"><div id="bc_0_18M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511871225643#c2000390596988685509">2017年11月28日 下午8:13</a></span></div><p id="bc_0_18MC" class="comment-content">哇~ 感謝您的分享~~</p><span id="bc_0_18MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=2000390596988685509">刪除</a></span></span></div><div id="bc_0_18BR" class="comment-replies"></div><div id="bc_0_18B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_18I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_18T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_19B_box" class="comment-replybox-single"></div></li><li id="bc_0_21B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c2678585352859455983" class="comment-block"><div id="bc_0_21M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/09737159990594731337">董玉强</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1508925028664#c2678585352859455983">2017年10月25日 下午5:50</a></span></div><p id="bc_0_21MC" class="comment-content">很精彩的文章，谢谢你</p><span id="bc_0_21MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-1773801118"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=2678585352859455983">刪除</a></span></span></div><div id="bc_0_21BR" class="comment-replies"><span id="bc_0_21b+seedKSqED" kind="d"><div id="bc_0_20T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_20TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_20TA" class="thread-arrow"></span><span id="bc_0_20TN" class="thread-count"><span id="bc_0_20TNT" style="display: none;"></span><span id="bc_0_20TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_20TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_20TC" class="thread-chrome thread-expanded"><div><li id="bc_0_20B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c919340699836502659" class="comment-block"><div id="bc_0_20M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511871252598#c919340699836502659">2017年11月28日 下午8:14</a></span></div><p id="bc_0_20MC" class="comment-content">謝謝支持哦～</p><span id="bc_0_20MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=919340699836502659">刪除</a></span></span></div><div id="bc_0_20BR" class="comment-replies"></div><div id="bc_0_20B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_20I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_20T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_21B_box" class="comment-replybox-single"></div></li><li id="bc_0_22B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c4685975997334773739" class="comment-block"><div id="bc_0_22M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/04004825506482789717">Unknown</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511847280962#c4685975997334773739">2017年11月28日 下午1:34</a></span></div><p id="bc_0_22MC" class="comment-content"><span class="deleted-comment">作者已經移除這則留言。</span></p><span id="bc_0_22MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin "><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=4685975997334773739">刪除</a></span></span></div><div id="bc_0_22BR" class="comment-replies"></div><div id="bc_0_22B_box" class="comment-replybox-single"></div></li><li id="bc_0_24B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35"></div><div id="c2650961965615561077" class="comment-block"><div id="bc_0_24M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/04004825506482789717">Unknown</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511847282790#c2650961965615561077">2017年11月28日 下午1:34</a></span></div><p id="bc_0_24MC" class="comment-content">感谢，感谢，写的很好</p><span id="bc_0_24MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-1662591379"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=2650961965615561077">刪除</a></span></span></div><div id="bc_0_24BR" class="comment-replies"><span id="bc_0_24b+seedKSqFD" kind="d"><div id="bc_0_23T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_23TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_23TA" class="thread-arrow"></span><span id="bc_0_23TN" class="thread-count"><span id="bc_0_23TNT" style="display: none;"></span><span id="bc_0_23TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_23TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_23TC" class="thread-chrome thread-expanded"><div><li id="bc_0_23B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c3328622544660916196" class="comment-block"><div id="bc_0_23M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511871275731#c3328622544660916196">2017年11月28日 下午8:14</a></span></div><p id="bc_0_23MC" class="comment-content">^^ 謝謝~</p><span id="bc_0_23MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=3328622544660916196">刪除</a></span></span></div><div id="bc_0_23BR" class="comment-replies"></div><div id="bc_0_23B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_23I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_23T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_24B_box" class="comment-replybox-single"></div></li><li id="bc_0_26B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/photo(1).jpg"></div><div id="c3256471567990704606" class="comment-block"><div id="bc_0_26M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/09646515673968354965">鄭元傑</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511865524764#c3256471567990704606">2017年11月28日 下午6:38</a></span></div><p id="bc_0_26MC" class="comment-content">版主您好：<br><br>最近在看Libuv，突然對於Event loop的poll phase有點不太懂，以下說明截自文件<br>Poll timeout is calculated. Before blocking for I/O the loop calculates for how long it should block. <br>Libuv底層不都是透過 非同步的System call為什麼還需要 block for I/O，請問這在實際上是什麼意思呢?<br><br>http://docs.libuv.org/en/v1.x/design.html#the-i-o-loop<br><br>謝謝版主</p><span id="bc_0_26MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">回覆</a><span class="item-control blog-admin pid-1669030880"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=3256471567990704606">刪除</a></span></span></div><div id="bc_0_26BR" class="comment-replies"><span id="bc_0_26b+seedKSqGD" kind="d"><div id="bc_0_25T" class="comment-thread inline-thread" kind="t" t="0" u="0"><span id="bc_0_25TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_25TA" class="thread-arrow"></span><span id="bc_0_25TN" class="thread-count"><span id="bc_0_25TNT" style="display: none;"></span><span id="bc_0_25TNU" style="display: none;"></span><a href="javascript:;" target="_self">回覆</a><div id="bc_0_25TD" class="thread-dropContainer thread-expanded"><span class="thread-drop"></span></div></span></span><ol id="bc_0_25TC" class="thread-chrome thread-expanded"><div><li id="bc_0_25B" class="comment" kind="b"><div class="avatar-image-container"><img src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/blogger_head(1).jpg"></div><div id="c8577705204522871251" class="comment-block"><div id="bc_0_25M" class="comment-header" kind="m"><cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/04929133426620976166">simen</a></cite><span class="icon user blog-author"></span><span class="datetime secondary-text"><a rel="nofollow" href="https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html?showComment=1511872471390#c8577705204522871251">2017年11月28日 下午8:34</a></span></div><p id="bc_0_25MC" class="comment-content">Hi 我認為雖然系統呼叫是非同步的，但 libuv 的 event loop 還是要去檢查底層的事件佇列, 雖然底層是非同步沒錯, 但 event loop 沒辦法在底層事件一發生的時候就馬上執行相應的 callback, 大家都需要排隊, 讓 event loop 一一地去執行它們 (event loop 自身一直繞迴圈進行檢查有沒有事情要做, 直到事情做完).</p><span id="bc_0_25MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1055765855"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=37997006600210175&amp;postID=8577705204522871251">刪除</a></span></span></div><div id="bc_0_25BR" class="comment-replies"></div><div id="bc_0_25B_box" class="comment-replybox-single"></div></li></div><div id="bc_0_25I" class="continue" kind="ci"><a href="javascript:;" target="_self">回覆</a></div></ol><div id="bc_0_25T_box" class="comment-replybox-thread"></div></div></span></div><div id="bc_0_26B_box" class="comment-replybox-single"></div></li></ol><div id="bc_0_27I" class="continue" kind="ci" style="display: none;"><a href="javascript:;" target="_self">新增留言</a></div><div id="bc_0_27T_box" class="comment-replybox-thread"><div class="comment-form">
<a name="comment-form"></a>
<div class="pesan-komentar">
<p>
</p>
</div>
<a href="https://www.blogger.com/comment-iframe.g?blogID=37997006600210175&amp;postID=3949927765296842465&amp;blogspotRpcToken=5317933" id="comment-editor-src"></a>
<iframe allowtransparency="true" class="blogger-iframe-colorize blogger-comment-from-post" frameborder="0" height="196px" id="comment-editor" name="comment-editor" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/comment-iframe.html" width="100%" style="display: block;" data-resized="true"></iframe>
<!--Can't find substitution for tag [post.friendConnectJs]-->
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/2244480862-comment_from_post_iframe.js" type="text/javascript"></script>
<script type="text/javascript">
                          BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html', '0');
                        </script>
</div></div><div id="bc_0_27L" class="loadmore loaded" kind="rb"><a href="javascript:;" target="_self">載入更多&amp;#8230;</a></div></div></div></div></div>
</div>
<p class="comment-footer">
</p>
<p></p>
<div id="backlinks-container">
<div id="Blog1_backlinks-container">
</div>
</div>
</div>
</div>
</div>
</div>
<div style="clear: both;"></div>
</div>

                            </div></div>
                          
<!--Can't find substitution for tag [adEnd]-->
</div>
<div class="blog-pager" id="blog-pager">
<span id="blog-pager-newer-link">
<a class="blog-pager-newer-link" href="https://simeneer.blogspot.tw/2016/09/blog-post.html" id="Blog1_blog-pager-newer-link" title="較新的文章">
較新的文章
</a>
</span>
<span id="blog-pager-older-link">
<a class="blog-pager-older-link" href="https://simeneer.blogspot.tw/2016/09/node-i-module.html" id="Blog1_blog-pager-older-link" title="較舊的文章">
較舊的文章
</a>
</span>
<a class="home-link" href="https://simeneer.blogspot.tw/">
首頁
</a>
</div>
<div class="clear"></div>
<div class="post-feeds">
<div class="feed-links">
訂閱：
<a class="feed-link" href="https://simeneer.blogspot.com/feeds/3949927765296842465/comments/default" target="_blank" type="application/atom+xml">
張貼留言
                            (
                            Atom
                            )
                          </a>
</div>
</div>
<script type="text/javascript">window.___gcfg = {'lang': 'zh_TW'};</script>
</div></div>
</div><!--singlepage end-->
</div>
</div>
<!-- post wrapper end -->
</div>
<!--my wrapper end -->
<!-- sidebar wrapper start -->
<!-- sidebar wrapper start -->
<aside id="sidebar-wrapper" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
<div class="sidebar-container">
<div class="sidebar section section" id="sidebar"><div class="widget HTML" data-version="1" id="HTML2">
<div class="widget-content">
<div class="fb-page fb_iframe_widget" data-href="https://www.facebook.com/eeRhapsody/" data-width="260" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" fb-xfbml-state="rendered" fb-iframe-plugin-query="adapt_container_width=true&amp;app_id=&amp;container_width=268&amp;hide_cover=false&amp;href=https%3A%2F%2Fwww.facebook.com%2FeeRhapsody%2F&amp;locale=zh_TW&amp;sdk=joey&amp;show_facepile=true&amp;small_header=true&amp;width=260"><span style="vertical-align: bottom; width: 260px; height: 154px;"><iframe name="ff5e769eecc17" width="260px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:page Facebook Social Plugin" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/page.html" style="border: none; visibility: visible; width: 260px; height: 154px;" class=""></iframe></span></div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=HTML&amp;widgetId=HTML2&amp;action=editWidget&amp;sectionId=sidebar" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML2&quot;));" target="configHTML2" title="編輯">
<img alt="" height="18" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget PopularPosts" data-version="1" id="PopularPosts1">
<div class="widget-content popular-posts">
<ul>
<li>
<div class="item-thumbnail-only">
<div class="item-thumbnail">
<a href="https://simeneer.blogspot.tw/2015/05/blog-post_30.html" target="_blank">
<img alt="傅立葉轉換到底在轉換什麼?" border="0" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/voice_time.png" width="100">
</a>
</div>
<div class="item-title"><a href="https://simeneer.blogspot.tw/2015/05/blog-post_30.html">傅立葉轉換到底在轉換什麼?</a></div>
</div>
<div style="clear: both;"></div>
</li>
<li>
<div class="item-thumbnail-only">
<div class="item-thumbnail">
<a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html" target="_blank">
<img alt="非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter" border="0" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/nodearchpng(1).png" width="100">
</a>
</div>
<div class="item-title"><a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html">非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter</a></div>
</div>
<div style="clear: both;"></div>
</li>
<li>
<div class="item-thumbnail-only">
<div class="item-thumbnail">
<a href="https://simeneer.blogspot.tw/2016/08/lora-i.html" target="_blank">
<img alt="跟我一起學 LoRa (I) - 相愛容易相處難" border="0" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/003.jpg" width="100">
</a>
</div>
<div class="item-title"><a href="https://simeneer.blogspot.tw/2016/08/lora-i.html">跟我一起學 LoRa (I) - 相愛容易相處難</a></div>
</div>
<div style="clear: both;"></div>
</li>
<li>
<div class="item-thumbnail-only">
<div class="item-thumbnail">
<a href="https://simeneer.blogspot.tw/2016/10/smart-phone-ble.html" target="_blank">
<img alt="準備跟 Smart Phone 說分手？淺談 BLE 開發模式" border="0" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/hedy(1).jpg" width="100">
</a>
</div>
<div class="item-title"><a href="https://simeneer.blogspot.tw/2016/10/smart-phone-ble.html">準備跟 Smart Phone 說分手？淺談 BLE 開發模式</a></div>
</div>
<div style="clear: both;"></div>
</li>
<li>
<div class="item-thumbnail-only">
<div class="item-thumbnail">
<a href="https://simeneer.blogspot.tw/2015/06/db.html" target="_blank">
<img alt="小品：dB、電壓增益與功率增益" border="0" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/pgain01.png" width="100">
</a>
</div>
<div class="item-title"><a href="https://simeneer.blogspot.tw/2015/06/db.html">小品：dB、電壓增益與功率增益</a></div>
</div>
<div style="clear: both;"></div>
</li>
<li>
<div class="item-thumbnail-only">
<div class="item-thumbnail">
<a href="https://simeneer.blogspot.tw/2015/07/ic.html" target="_blank">
<img alt="面板驅動IC設計目的簡介" border="0" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/tft01.jpg" width="100">
</a>
</div>
<div class="item-title"><a href="https://simeneer.blogspot.tw/2015/07/ic.html">面板驅動IC設計目的簡介</a></div>
</div>
<div style="clear: both;"></div>
</li>
</ul>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=PopularPosts&amp;widgetId=PopularPosts1&amp;action=editWidget&amp;sectionId=sidebar" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;PopularPosts1&quot;));" target="configPopularPosts1" title="編輯">
<img alt="" height="100" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="100">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget Label" data-version="1" id="Label1">
<div class="widget-content cloud-label-widget-content">
<span class="label-size label-size-5">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E8%BB%9F%E9%AB%94">軟體</a>
<span class="label-count" dir="ltr">(27)</span>
</span>
<span class="label-size label-size-5">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E9%96%92%E8%81%8A">閒聊</a>
<span class="label-count" dir="ltr">(25)</span>
</span>
<span class="label-size label-size-5">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E7%A1%AC%E9%AB%94">硬體</a>
<span class="label-count" dir="ltr">(21)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/node">node</a>
<span class="label-count" dir="ltr">(14)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/IoT">IoT</a>
<span class="label-count" dir="ltr">(7)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E9%9B%BB%E5%AD%90%E9%9B%BB%E8%B7%AF">電子電路</a>
<span class="label-count" dir="ltr">(7)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/MT7688">MT7688</a>
<span class="label-count" dir="ltr">(6)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/RF">RF</a>
<span class="label-count" dir="ltr">(5)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/Qt">Qt</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/npm">npm</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E5%B5%8C%E5%85%A5%E5%BC%8F">嵌入式</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E9%9F%8C%E9%AB%94">韌體</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/EE%E4%BA%BA%E5%B0%88%E6%AC%84">EE人專欄</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E9%A0%BB%E7%8E%87%E9%9F%BF%E6%87%89">頻率響應</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/Linux">Linux</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/LoRa">LoRa</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/crosstool">crosstool</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/%E9%87%8F%E6%B8%AC">量測</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/Beaglebone">Beaglebone</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/PLC">PLC</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/ST">ST</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/ZigBee">ZigBee</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/esp8266">esp8266</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="https://simeneer.blogspot.tw/search/label/nodemcu">nodemcu</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=Label&amp;widgetId=Label1&amp;action=editWidget&amp;sectionId=sidebar" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Label1&quot;));" target="configLabel1" title="編輯">
<img alt="" height="18" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget HTML" data-version="1" id="HTML10">
<div class="widget-content">
<div class="about-widget">
    <div class="about-widget-img">
        <img alt="" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/ftrNY5Hlr6EUI_kGayfSdA7qY9JaQBO2BNElxDPW3tY" width="160" height="160">
    </div>
    <h4>Chien-Jung Li (simen)</h4>
    <p>
一個熱衷於學習的工程師。結束學生生涯之後，當過研究員、在竹科當過工程師，後來跑到大學去教書，而現在又回到業界當起阿宅工程師了。
</p>
        <a href="https://www.facebook.com/chienjung.li.7" target="_blank">
            <span>Facebook</span>
        </a>
        <a href="https://github.com/simenkid" target="_blank">
            <span>GitHub</span>
        </a>

</div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=HTML&amp;widgetId=HTML10&amp;action=editWidget&amp;sectionId=sidebar" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML10&quot;));" target="configHTML10" title="編輯">
<img alt="" height="18" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget Stats" data-version="1" id="Stats1">
<div class="widget-content">
<div id="Stats1_content" style="">
<span class="counter-wrapper graph-counter-wrapper" id="Stats1_totalCount">
<span class="digit stage-0"><strong>3</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>9</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>9</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>5</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>8</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>7</strong><span class="blind-plate"></span></span></span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="https://www.blogger.com/rearrange?blogID=37997006600210175&amp;widgetType=Stats&amp;widgetId=Stats1&amp;action=editWidget&amp;sectionId=sidebar" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Stats1&quot;));" target="configStats1" title="編輯">
<img alt="" height="18" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div>
</div></div>
</div>
</aside>
<!-- sidebar wrapper end -->
</div>
<!-- content wrapper end -->
<div class="clear"></div>
</div>
<div class="clearfix" id="footer-socials">
</div>
<!-- footer wrapper start -->
<footer id="footer-wrapper" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
<div class="containz">
<div class="footer-left">
          Created By <a href="http://www.themexpose.com/" id="mycontent" title="Blogger Templates" ref="dofollow">ThemeXpose</a>
</div>
<div class="footer-right">
<nav class="top-menu1" id="menu-footer" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
<!-- primary navigation menu start -->
<ul class="menubar">
<li>
<a href="https://simeneer.blogspot.tw/" itemprop="url">
<span itemprop="name">Home</span>
</a>
</li>
<li>
<a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html#" itemprop="url">
<span itemprop="name">About</span>
</a>
</li>
<li>
<a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html#" itemprop="url">
<span itemprop="name">Contact</span>
</a>
</li>
<li>
<a href="https://simeneer.blogspot.tw/404" itemprop="url">
<span itemprop="name">Error Page</span>
</a>
</li>
</ul></nav>
</div>
</div>
</footer>
<!-- footer wrapper end -->
<!-- wrapper end -->

<div class="back-to-top">
<a href="https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html#" id="back-to-top" title="back to top" style="display: none;">
<i class="fa fa-chevron-up"></i>
</a>
</div>
<script>
      $(window).scroll(function() {
        if($(this).scrollTop() > 200) {
          $('#back-to-top').fadeIn();
            } else {
            $('#back-to-top').fadeOut();
            }
            });
          $('#back-to-top').hide().click(function() {
            $('html, body').animate({scrollTop:0}, 1000);
            return false;
            });
    </script>
<script>
/*<![CDATA[*/
var _0x3d1d=["\x24\x28\x4D\x28\x29\x7B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x76\x2E\x41\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x76\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x6B\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x6B\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x77\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x77\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x42\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x4A\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x78\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x78\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x62\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x62\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x63\x2E\x64\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x64\x2D\x63\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x65\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x65\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x66\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x66\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x7A\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x7A\x2D\x70\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x68\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x68\x2D\x4C\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x6A\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x6A\x2D\x50\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x6C\x2E\x43\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x6C\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x6D\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x6D\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x48\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x49\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x6E\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x6E\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x6F\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x6F\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x71\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x71\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x72\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x72\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x73\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x73\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x74\x2E\x44\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x74\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x75\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x75\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x45\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x46\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x47\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x37\x2D\x38\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x39\x2F\x4B\x2F\x79\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x36\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x39\x2F\x4E\x2F\x79\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x36\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x39\x2E\x4F\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x36\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x67\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x37\x2D\x38\x22\x29\x3B\x24\x28\x27\x2E\x34\x2E\x33\x20\x61\x5B\x31\x2A\x3D\x22\x67\x2E\x35\x22\x5D\x20\x69\x27\x29\x2E\x32\x28\x22\x30\x20\x30\x2D\x37\x2D\x38\x22\x29\x7D\x29\x3B","\x7C","\x73\x70\x6C\x69\x74","\x66\x61\x7C\x68\x72\x65\x66\x7C\x61\x64\x64\x43\x6C\x61\x73\x73\x7C\x4C\x69\x6E\x6B\x4C\x69\x73\x74\x7C\x77\x69\x64\x67\x65\x74\x7C\x63\x6F\x6D\x7C\x72\x73\x73\x7C\x73\x68\x6F\x70\x70\x69\x6E\x67\x7C\x63\x61\x72\x74\x7C\x66\x65\x65\x64\x73\x7C\x7C\x66\x6C\x69\x63\x6B\x72\x7C\x70\x6C\x75\x73\x7C\x67\x6F\x6F\x67\x6C\x65\x7C\x69\x6E\x73\x74\x61\x67\x72\x61\x6D\x7C\x6C\x69\x6E\x6B\x65\x64\x69\x6E\x7C\x65\x74\x73\x79\x7C\x76\x69\x6D\x65\x6F\x7C\x7C\x79\x6F\x75\x74\x75\x62\x65\x7C\x66\x61\x63\x65\x62\x6F\x6F\x6B\x7C\x76\x69\x6E\x65\x7C\x73\x6F\x75\x6E\x64\x63\x6C\x6F\x75\x64\x7C\x64\x65\x76\x69\x61\x6E\x74\x61\x72\x74\x7C\x66\x6F\x75\x72\x73\x71\x75\x61\x72\x65\x7C\x7C\x72\x65\x64\x64\x69\x74\x7C\x74\x75\x6D\x62\x6C\x72\x7C\x73\x70\x6F\x74\x69\x66\x79\x7C\x74\x77\x69\x74\x63\x68\x7C\x76\x6B\x7C\x62\x65\x68\x61\x6E\x63\x65\x7C\x74\x77\x69\x74\x74\x65\x72\x7C\x64\x72\x69\x62\x62\x62\x6C\x65\x7C\x64\x65\x66\x61\x75\x6C\x74\x7C\x70\x69\x6E\x74\x65\x72\x65\x73\x74\x7C\x6E\x65\x74\x7C\x62\x6C\x6F\x67\x6C\x6F\x76\x69\x6E\x7C\x63\x6F\x7C\x74\x76\x7C\x6D\x61\x69\x6C\x74\x6F\x7C\x65\x6E\x76\x65\x6C\x6F\x70\x65\x7C\x73\x68\x6F\x70\x7C\x67\x6F\x6F\x64\x72\x65\x61\x64\x73\x7C\x62\x6F\x6F\x6B\x7C\x68\x65\x61\x72\x74\x7C\x70\x6F\x73\x74\x73\x7C\x73\x71\x75\x61\x72\x65\x7C\x66\x75\x6E\x63\x74\x69\x6F\x6E\x7C\x63\x6F\x6D\x6D\x65\x6E\x74\x73\x7C\x66\x65\x65\x64\x62\x75\x72\x6E\x65\x72\x7C\x70\x6C\x61\x79","","\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65","\x72\x65\x70\x6C\x61\x63\x65","\x5C\x77\x2B","\x5C\x62","\x67"];eval(function(_0xa6a3x1,_0xa6a3x2,_0xa6a3x3,_0xa6a3x4,_0xa6a3x5,_0xa6a3x6){_0xa6a3x5=function(_0xa6a3x3){return (_0xa6a3x3<_0xa6a3x2?_0x3d1d[4]:_0xa6a3x5(parseInt(_0xa6a3x3/_0xa6a3x2)))+((_0xa6a3x3=_0xa6a3x3%_0xa6a3x2)>35?String[_0x3d1d[5]](_0xa6a3x3+29):_0xa6a3x3.toString(36))};if(!_0x3d1d[4][_0x3d1d[6]](/^/,String)){while(_0xa6a3x3--){_0xa6a3x6[_0xa6a3x5(_0xa6a3x3)]=_0xa6a3x4[_0xa6a3x3]||_0xa6a3x5(_0xa6a3x3)};_0xa6a3x4=[function(_0xa6a3x5){return _0xa6a3x6[_0xa6a3x5]}];_0xa6a3x5=function(){return _0x3d1d[7]};_0xa6a3x3=1;};while(_0xa6a3x3--){if(_0xa6a3x4[_0xa6a3x3]){_0xa6a3x1=_0xa6a3x1[_0x3d1d[6]]( new RegExp(_0x3d1d[8]+_0xa6a3x5(_0xa6a3x3)+_0x3d1d[8],_0x3d1d[9]),_0xa6a3x4[_0xa6a3x3])}};return _0xa6a3x1;}(_0x3d1d[0],52,52,_0x3d1d[3][_0x3d1d[2]](_0x3d1d[1]),0,{}));
/*]]>*/
</script>
<script type="text/javascript">//<![CDATA[
$(document).ready(function() {


    // SEARCH
    var social = true;
    $(".social-trigger").on("click", function() {
        //$(this).addClass("st-hide");
        $(".sinHiddenSocial").slideToggle(400);
        return false;
    });

    $(".search-trigger img").on("click", function(e) {
        e.stopPropagation();
        $(".search-content").toggleClass("sc-active");
    });


    $("body").on("click", function(e) {
        e.stopPropagation();
        $(".search-content").removeClass("sc-active");
    });

    $(".search-content").on("click", function(e) {
        e.stopPropagation();
        $(".search-content").addClass("sc-active");
    });


$('.popular-posts ul li .item-snippet').each(function(){
    var txt=$(this).text().substr(0,80);
    var j=txt.lastIndexOf(' ');
    if(j>10)
      $(this).text(txt.substr(0,j).replace(/[?,!\.-:;]*$/,' ...'));
  });

});
//]]></script>
<script type="text/javascript">
//<![CDATA[
var ww=document.body.clientWidth;$(document).ready(function(){$(".nav li a").each(function(){if($(this).next().length>0){$(this).addClass("parent")}});$(".toggleMenu").click(function(e){e.preventDefault();$(this).toggleClass("active");$(".nav").toggle()});adjustMenu()});$(window).bind("resize orientationchange",function(){ww=document.body.clientWidth;adjustMenu()});var adjustMenu=function(){if(ww<770){$(".toggleMenu").css("display","inline-block");if(!$(".toggleMenu").hasClass("active")){$(".nav").hide()}else{$(".nav").show()}$(".nav li").unbind("mouseenter mouseleave");$(".nav li a.parent").unbind("click").bind("click",function(e){e.preventDefault();$(this).parent("li").toggleClass("hover")})}else if(ww>=770){$(".toggleMenu").css("display","none");$(".nav").show();$(".nav li").removeClass("hover");$(".nav li a").unbind("click");$(".nav li").unbind("mouseenter mouseleave").bind("mouseenter mouseleave",function(){$(this).toggleClass("hover")})}}
//]]>
</script>
<script type="text/javascript">
      //<![CDATA[
      /*! Matt Tabs v2.2.1 | https://github.com/matthewhall/matt-tabs */
      !function(a){"use strict";var b=function(b,c){var d=this;d.element=b,d.$element=a(b),d.tabs=d.$element.children(),d.options=a.extend({},a.fn.mtabs.defaults,c),d.current_tab=0,d.init()};b.prototype={init:function(){var a=this;a.tabs.length&&(a.build(),a.buildTabMenu())},build:function(){var b=this,c=b.options,d=c.tab_text_el,e=c.container_class;b.tab_names=[],b.$wrapper=b.$element.wrapInner('<div class="'+e+'" />').find("."+e),b.tabs.wrapAll('<div class="'+c.tabs_container_class+'" />'),b.tabs.each(function(c,e){var f,g=a(e),h=d;f=g.find(h).filter(":first").hide().text(),b.tab_names.push(f)}),a.isFunction(c.onReady)&&c.onReady.call(b.element)},buildTabMenu:function(){for(var b,c=this,d=c.options,e=d.tabsmenu_el,f=c.tab_names,g="<"+e+' class="'+d.tabsmenu_class+'">',h=0,i=f.length,j=function(){var a=arguments;return d.tmpl.tabsmenu_tab.replace(/\{[0-9]\}/g,function(b){var c=Number(b.replace(/\D/g,""));return a[c]||""})};i>h;h++)g+=j(h+1,f[h]);g+="</"+e+">",c.$tabs_menu=a(g).prependTo(c.$wrapper),b=c.$tabs_menu.find(":first")[0].nodeName.toLowerCase(),c.$tabs_menu.on("click",b,function(b){var d=a(this),e=d.index();c.show(e),b.preventDefault()}).find(":first").trigger("click")},show:function(b){var c=this,d=c.options,e=d.active_tab_class;c.tabs.hide().filter(":eq("+b+")").show(),c.$tabs_menu.children().removeClass(e).filter(":eq("+b+")").addClass(e),a.isFunction(d.onTabSelect)&&b!==c.current_tab&&d.onTabSelect.call(c.element,b),c.current_tab=b},destroy:function(){var a=this,b=a.options.tab_text_el;a.$tabs_menu.remove(),a.tabs.unwrap().unwrap(),a.tabs.removeAttr("style"),a.tabs.children(b+":first").removeAttr("style"),a.$element.removeData("mtabs")}},a.fn.mtabs=function(c,d){return this.each(function(){var e,f=a(this),g=f.data("mtabs");e="object"==typeof c&&c,g||f.data("mtabs",g=new b(this,e)),"string"==typeof c&&g[c](d)})},a.fn.mtabs.defaults={container_class:"tabs",tabs_container_class:"tabs-content",active_tab_class:"active-tab",tab_text_el:"h1, h2, h3, h4, h5, h6",tabsmenu_class:"tabs-menu",tabsmenu_el:"ul",tmpl:{tabsmenu_tab:'<li class="tab-{0}"><span>{1}</span></li>'},onTabSelect:null}}(window.jQuery,window,document);
      //]]>
    </script>
<script type="text/javascript">//<![CDATA[
$(document).ready(function() {
  // change the dimension variable below to be the pixel size you want
  var dimension = 100;
  // this identifies the PopularPosts1 div element, finds each image in it, and resizes it
  $('#PopularPosts1').find('img').each(function(n, image){
    var image = $(image);
    image.attr({src : image.attr('src').replace(/s\B\d{2,4}/,'s' + dimension)});
    image.attr('width',dimension);
    image.attr('height',dimension);
  });

});
//]]></script>
<script type="text/javascript">
//<![CDATA[
$(window).scroll(function(){$("#chslidingbox").css($(this).scrollTop()>400?{right:"0px"}:{right:"-360px"})}),$(document).ready(function(){var i=$("#chslidingbox"),s=$("#chslidingbox-close"),o=$("#chslidingbox-minimize"),l=$("#chslidingbox-maximize");l.hide(),s.click(function(){i.css({right:"-350px"}),i.fadeOut("slow")}),o.click(function(){i.toggleClass("hide"),$(this).hide(),l.show()}),l.click(function(){i.toggleClass("hide"),$(this).hide(),o.show()})});

//]]>
</script>
<style>
h2.post-title, h1.post-title {
  color: #464970;
}

.post-body {
    font-size: 18px;
    color: #7F7F7F;
}

.post-body ul ul {
    list-style-type: circle;
}

.post-body ul ul ul {
    list-style-type: square;
}

.post-body td, .post-body th {
    font-size: 16px;
    padding: 6px 20px;
}

.popular-posts {
    font-family: Lato,微軟正黑體, Open Sans,'Helvetica Neue',Arial,sans-serif;
    font-size: 120%
}

.prettyprint {
    font-family:consolas;"Courier New",Courier,Monospace,微軟正黑體;color:inherit;
    font-size: 13px;
}

</style>
<script src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/plusone.js" type="text/javascript" gapi_processed="true"></script>

<script type="text/javascript" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/4187781524-widgets.js"></script>
<script type="text/javascript">
window['__wavt'] = 'AOuZoY7ZSo-BujDDSbJ5yW-5KyuRX0jOmg:1514217391970';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d37997006600210175','//simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html','37997006600210175');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '37997006600210175', 'title': 'E.E.RHAPSODY', 'url': 'https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html', 'canonicalUrl': 'https://simeneer.blogspot.com/2016/09/nodejs-eventemitter.html', 'homepageUrl': 'https://simeneer.blogspot.tw/', 'searchUrl': 'https://simeneer.blogspot.tw/search', 'canonicalHomepageUrl': 'https://simeneer.blogspot.com/', 'blogspotFaviconUrl': 'https://simeneer.blogspot.tw/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'zh-TW', 'localeUnderscoreDelimited': 'zh_tw', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22E.E.RHAPSODY - Atom\x22 href\x3d\x22https://simeneer.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22E.E.RHAPSODY - RSS\x22 href\x3d\x22https://simeneer.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22E.E.RHAPSODY - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/37997006600210175/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22E.E.RHAPSODY - Atom\x22 href\x3d\x22https://simeneer.blogspot.com/feeds/3949927765296842465/comments/default\x22 /\x3e\n', 'meTag': '', 'openIdOpTag': '', 'adsenseClientId': 'ca-pub-2685119076628923', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'ieCssRetrofitLinks': '\x3c!--[if IE]\x3e\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22https://www.blogger.com/static/v1/jsbin/771816573-ieretrofit.js\x22\x3e\x3c/script\x3e\n\x3c![endif]--\x3e', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/0dd3924c44dde034', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sharing': {'platforms': [{'name': '取得連結', 'key': 'link', 'shareMessage': '取得連結', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': '分享到 Facebook', 'target': 'facebook'}, {'name': 'BlogThis&#65281;', 'key': 'blogThis', 'shareMessage': 'BlogThis&#65281;', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': '分享到 Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': '分享到 Pinterest', 'target': 'pinterest'}, {'name': 'Google+', 'key': 'googlePlus', 'shareMessage': '分享到 Google+', 'target': 'googleplus'}, {'name': '以電子郵件傳送', 'key': 'email', 'shareMessage': '以電子郵件傳送', 'target': 'email'}], 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27zh_TW\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': '閱讀完整內容', 'pageType': 'item', 'postId': '3949927765296842465', 'postImageThumbnailUrl': 'https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s72-c/nodearchpng.png', 'postImageUrl': 'https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s400/nodearchpng.png', 'pageName': '非同步程式碼之霧&#65306;Node.js 的事件迴圈與 EventEmitter', 'pageTitle': 'E.E.RHAPSODY: 非同步程式碼之霧&#65306;Node.js 的事件迴圈與 EventEmitter'}}, {'name': 'features', 'data': {'lazy_images': 'false', 'unsupported_browser_message': 'false', 'sharing_get_link_dialog': 'true', 'sharing_native': 'false'}}, {'name': 'messages', 'data': {'edit': '編輯', 'linkCopiedToClipboard': '已將連結複製到剪貼簿&#65281;', 'ok': '確定', 'postLink': '文章連結'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': '自訂', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': true}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': '非同步程式碼之霧&#65306;Node.js 的事件迴圈與 EventEmitter', 'description': '&#12288;  身為一個 Node.js 工程師&#65292;怎麼可以不夠了解&#12300;非同步程式碼&#12301;的行為&#65311;我希望能綜合自己的一點心得與經驗&#65292;寫一篇探討 Node.js Event Loop 與 Event Pattern 的文章&#65292;而且還不能只是泛泛之談&#65292;必須稍微有點深度&#65292;然後還期待大家能夠很容易地讀懂&#12290; ...', 'featuredImage': 'https://2.bp.blogspot.com/-5HK7GJNiMoI/V-NWXY1RuSI/AAAAAAAAB1Q/U23hdfs2bmohitL7iKoxCyDqErg-9Bd7ACLcB/s400/nodearchpng.png', 'url': 'https://simeneer.blogspot.tw/2016/09/nodejs-eventemitter.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 3949927765296842465}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML3', 'top-social', null, document.getElementById('HTML3'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML1', 'top-social', null, document.getElementById('HTML1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'useNgc': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/613567837-lbx__zh_tw.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML2', 'sidebar', null, document.getElementById('HTML2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PopularPostsView', new _WidgetInfo('PopularPosts1', 'sidebar', null, document.getElementById('PopularPosts1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar', null, document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML10', 'sidebar', null, document.getElementById('HTML10'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_StatsView', new _WidgetInfo('Stats1', 'sidebar', null, document.getElementById('Stats1'), {'title': '', 'showGraphicalCounter': true, 'showAnimatedCounter': false, 'showSparkline': false, 'statsUrl': '//simeneer.blogspot.tw/b/stats?style\x3dBLACK_TRANSPARENT\x26timeRange\x3dALL_TIME\x26token\x3dZDsbkGABAAA.n95lS4iNalGA1H5K5r62ZXXKqMP4DhdG5rTAFUrg2TU.R8SWPSRc2jQ2OThjpAb1GA'}, 'displayModeFull'));
</script>

<link type="text/css" rel="stylesheet" href="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/368954415-lightbox_bundle.css"><script type="text/javascript" src="./非同步程式碼之霧：Node.js 的事件迴圈與 EventEmitter - E.E.RHAPSODY_files/613567837-lbx__zh_tw.js"></script></body></html>