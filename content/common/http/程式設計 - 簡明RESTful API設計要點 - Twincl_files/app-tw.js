require=function e(t,n,a){function r(i,l){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return r(n?n:e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActions=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=e("fluent-js"),c=e("../dispatcher/AppDispatcher"),d=r(c),f=e("../utils/webapi"),p=a(f),h=e("../actions/HubServerActionCreators"),m=r(h),g=e("../actions/HeaderActionCreators"),v=r(g),y=e("../actions/PageActionCreators"),b=r(y),w=e("../utils/dictionary"),k=r(w),E={reconfirm:"ConfirmEmailSent",confirm:"-",reset:"-",password:"-",player:"-"},_=n.AccountActions=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"updateAccount",value:function(e,t){this.dispatch(e,t),v["default"].showSpinner(),p.updateAccount(e,function(n){var a=E[e.action]||(t?"ProfileCreated":"ProfileUpdated");if(v["default"].hideSpinner(),"-"===a){var r="OK"===n?"done":"error";b["default"].loadURL(location.pathname+"?status="+r,"confirm"===e.action)}else v["default"].showMessage(k["default"].get("Account")[a],5),e.action||m["default"].receiveUpdatedAccount(n)})}},{key:"updatePassword",value:function(e){this.dispatch(e);var t=k["default"].get("Account");p.updateAccount(e,function(){return v["default"].showMessage(t.PasswordUpdated)},function(e){403===e.target.status&&v["default"].showError(t.PasswordInvalid)})}},{key:"updatePayment",value:function(e){function t(e){v["default"].hideSpinner(),b["default"].loadURL(location.pathname+"?status="+e,!0)}this.dispatch(e),v["default"].showSpinner(30),p.updatePayment(e,function(e){return t("OK"===e?"finish":"pending")},function(){return t("pending")})}},{key:"getChecksum",value:function(e,t){this.dispatch(e),p.updatePayment({method:"checksum",data:e},t)}}]),t}(u.Actions),P=new _(d["default"]);n["default"]=P},{"../actions/HeaderActionCreators":3,"../actions/HubServerActionCreators":4,"../actions/PageActionCreators":5,"../dispatcher/AppDispatcher":22,"../utils/dictionary":27,"../utils/webapi":29,"fluent-js":33}],2:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.BrowseActions=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=e("fluent-js"),c=e("../dispatcher/AppDispatcher"),d=r(c),f=e("../utils/webapi"),p=a(f),h=e("../actions/HubServerActionCreators"),m=r(h),g=e("../actions/HeaderActionCreators"),v=r(g),y=e("../utils/dictionary"),b=r(y),w=n.BrowseActions=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"updateHub",value:function(e,t){this.dispatch(e,t),p.updateHub(e,t,function(e){m["default"].receiveUpdatedHub(e),v["default"].showMessage(b["default"].get("HubConfig").Updated)})}}]),t}(u.Actions),k=new w(d["default"]);n["default"]=k},{"../actions/HeaderActionCreators":3,"../actions/HubServerActionCreators":4,"../dispatcher/AppDispatcher":22,"../utils/dictionary":27,"../utils/webapi":29,"fluent-js":33}],3:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.HeaderActions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("fluent-js"),u=e("../dispatcher/AppDispatcher"),c=a(u),d=3,f=5,p=n.HeaderActions=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"showMessage",value:function(e,t){this.dispatch(e),window.setTimeout(function(){return h.hideMessage(e)},1e3*(t||d))}},{key:"hideMessage",value:function(e){this.dispatch(e)}},{key:"showError",value:function(e,t){this.dispatch(e),window.setTimeout(function(){return h.hideError(e)},1e3*(t||f))}},{key:"hideError",value:function(e){this.dispatch(e)}},{key:"showSpinner",value:function(e){this.dispatch(),window.setTimeout(function(){return h.hideSpinner()},1e3*(e||d))}},{key:"hideSpinner",value:function(){this.dispatch()}}]),t}(s.Actions),h=new p(c["default"]);n["default"]=h},{"../dispatcher/AppDispatcher":22,"fluent-js":33}],4:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ServerActions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("fluent-js"),u=e("../dispatcher/AppDispatcher"),c=a(u),d=n.ServerActions=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"init",value:function(e){this.dispatch(e)}},{key:"clientReady",value:function(){this.dispatch()}},{key:"receiveUpdatedPost",value:function(e){this.dispatch(e)}},{key:"receiveCreatedComment",value:function(e,t){this.dispatch(e,t)}},{key:"receiveUpdatedComment",value:function(e,t){this.dispatch(e,t)}},{key:"receiveUpdatedRemark",value:function(e,t){this.dispatch(e,t)}},{key:"receiveUpdatedHub",value:function(e){this.dispatch(e)}},{key:"receiveUpdatedAccount",value:function(e){this.dispatch(e)}}]),t}(s.Actions),f=new d(c["default"],!0);n["default"]=f},{"../dispatcher/AppDispatcher":22,"fluent-js":33}],5:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.PageActions=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=e("fluent-js"),c=e("../dispatcher/AppDispatcher"),d=r(c),f=e("../utils/state"),p=a(f),h=e("../utils/webapi"),m=a(h),g=e("../actions/HeaderActionCreators"),v=r(g),y=e("../utils/dictionary"),b=r(y),w=void 0,k=n.PageActions=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"loadURL",value:function(e,t,n){t||v["default"].showSpinner(),m.getPageJSON(e,function(e){t||v["default"].hideSpinner(),e&&e.page?(w=!0,p.changeState(e,t),n&&v["default"].showMessage(n),setTimeout(function(){w&&window.scrollTo(0,0)},0)):v["default"].showError(b["default"].get("Page").LoadingError)},function(){return v["default"].hideSpinner()})}},{key:"noScroll",value:function(){w=!1}},{key:"setURL",value:function(e){this.dispatch(e)}}]),t}(u.Actions),E=new k(d["default"]);n["default"]=E},{"../actions/HeaderActionCreators":3,"../dispatcher/AppDispatcher":22,"../utils/dictionary":27,"../utils/state":28,"../utils/webapi":29,"fluent-js":33}],6:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.PostActions=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=e("fluent-js"),c=e("../dispatcher/AppDispatcher"),d=r(c),f=e("../utils/webapi"),p=a(f),h=e("../actions/HubServerActionCreators"),m=r(h),g=e("../actions/HeaderActionCreators"),v=r(g),y=e("../actions/PageActionCreators"),b=r(y),w=e("../utils/dictionary"),k=r(w),E=n.PostActions=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"collect",value:function(e,t){this.dispatch(e,t),p.updatePostField(e,0,"collect",t)}},{key:"delete",value:function(e,t){return this.dispatch(e,t),t?_.updateComment(e,t,""):void p.deletePost(e,function(e){return b["default"].loadURL(e.location,!0,k["default"].get("Post").Deleted)})}},{key:"bookmark",value:function(e,t){this.dispatch(e,t),p.updatePostField(e,0,"bookmark",t)}},{key:"vote",value:function(e,t,n){this.dispatch(e,t,n),p.updatePostField(e,t,"vote",n)}},{key:"report",value:function(e,t,n){this.dispatch(e,t,n),p.createReport(e,t,n,function(){v["default"].showMessage(k["default"].get("Report").Submitted)})}},{key:"remark",value:function(e,t,n){this.dispatch(e,t,n),p.updatePostField(e,0,"remark",n,function(t){m["default"].receiveUpdatedRemark(e,t),v["default"].showMessage(k["default"].get("Remark").Submitted)})}},{key:"answer",value:function(e){this.dispatch(e)}},{key:"startEditing",value:function(e,t){this.dispatch(e,t)}},{key:"createPost",value:function(e){this.dispatch(e),p.createPost(e,function(e){b["default"].loadURL("/"+e.hub+"/*"+e.pid,!0,k["default"].get("Post").Created)})}},{key:"updatePost",value:function(e,t){this.dispatch(e,t),p.updatePost(e,t,function(e){m["default"].receiveUpdatedPost(e),v["default"].showMessage(k["default"].get("Post").Updated)})}},{key:"movePost",value:function(e,t){this.dispatch(e,t),p.updatePostField(e,0,"hub",t,function(){b["default"].loadURL("/"+t+"/*"+e,!0)})}},{key:"newReply",value:function(e,t){this.dispatch(e,t)}},{key:"submitReply",value:function(e,t,n){this.dispatch(e,t,n),n&&p.createComment(e,t,n,function(t){m["default"].receiveCreatedComment(e,t),v["default"].showMessage(k["default"].get("Comment").Created)})}},{key:"updateComment",value:function(e,t,n){this.dispatch(e,t,n),"string"==typeof n&&(n={content:n}),p.updateComment(e,t,n,function(t){m["default"].receiveUpdatedComment(e,t),v["default"].showMessage(k["default"].get("Comment").Updated)})}},{key:"uploadImage",value:function(e,t,n){this.dispatch(e),p.upload(e,t,function(){return t({})},n)}}]),t}(u.Actions),_=new E(d["default"]);n["default"]=_},{"../actions/HeaderActionCreators":3,"../actions/HubServerActionCreators":4,"../actions/PageActionCreators":5,"../dispatcher/AppDispatcher":22,"../utils/dictionary":27,"../utils/webapi":29,"fluent-js":33}],7:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){t[0]=null!==e.password.match(/[a-z]/),t[1]=null!==e.password.match(/[A-Z]/),t[2]=null!==e.password.match(/[^a-zA-Z]/),t[3]=e.password.length>=8,t[4]=e.password&&e.password===e.retypePassword||!1}function s(e,t,n){var a=m["default"].get("Account"),r=a.FormPassword.split("|"),o=a.PasswordCriteria.split("\n").map(function(e,n){return p["default"].createElement("div",{key:n},p["default"].createElement("span",{className:"check-input "+(t[n]?"valid":"validating")}),p["default"].createElement("span",null,e))}),i=function(t){return p["default"].createElement("input",{name:t,type:"password",value:e[t],onChange:n,required:!0})};return[[p["default"].createElement("em",null,r[0]),i("oldPassword")],[p["default"].createElement("em",null,r[1]),i("password")],[p["default"].createElement("em",null,r[2]),i("retypePassword")],[null,o]]}Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerForm=n.PaymentForm=n.SubscriptionForm=n.MembershipForm=n.ConfirmForm=n.ResetForm=n.PasswordForm=n.ProfileForm=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=function S(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:S(r,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},d=e("url"),f=e("react"),p=a(f),h=e("../utils/dictionary"),m=a(h),g=e("../utils/webapi"),v=e("../stores/UserStore"),y=a(v),b=e("../actions/AccountActionCreators"),w=a(b),k=e("../actions/HeaderActionCreators"),E=a(k),_=e("./PostUtils.react"),P=e("./PageForm.react"),C=e("./HubForm.react"),O=a(C);n.ProfileForm=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state=e.register?{check:{loginId:"",uid:""},met:[]}:{check:{loginId:"valid"}};var a=(0,d.parse)(e.url||"",!0).query;return"undefined"!=typeof window&&a.pcode&&(0,g.checkId)({pcode:a.pcode},function(e){return e&&e.pcode?n.setState({campaign:e}):E["default"].showError(m["default"].get("Account").InvalidPCode.replace("${code}",a.pcode))}),n}return i(t,e),u(t,[{key:"buttons",value:function(){return this.props.register?[c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)[0],null]:this.props.edit?c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this):[m["default"].get("Button_Form").Edit,null]}},{key:"disableSubmitButton",value:function(){return!this.props.data.name||!this.props.data.email||!this.props.data.realName||"valid"!==this.state.check.loginId||this.props.register&&("valid"!==this.state.check.uid||this.state.met.filter(function(e){return e}).length<5||"agree"!==this.props.data.terms)}},{key:"_reconfirmEmail",value:function(e){e.preventDefault(),w["default"].updateAccount({action:"reconfirm"})}},{key:"_changeHandler",value:function(e){var t=this,n=e.target,a=n.name,r=n.value,o=m["default"].get("Account");return"name"===a&&r.match(/[@^]/)?E["default"].showError(o.BadUserName):"uid"===a&&r.match(/[^a-z0-9_]/)?E["default"].showError(o.BadUserId):(("uid"===a||"loginId"===a||"email"===a&&!this.props.data.loginId)&&!function(){var e=y["default"].getCurrent(),n="uid"===a?"uid":"loginId";r||"loginId"===a&&t.props.data.email?r&&(r===e.uid||e.account&&r===e.account.loginId)?t.state.check[n]="valid":("validating"!==t.state.check[n]&&setTimeout(function(){return(0,P.validateId)(function(){return t.props.data[n]||t.props.data.email},function(){return t.timeToValidate},function(e){return t.state.check[n]=e,t.forceUpdate()})},P.DelayValidation),t.timeToValidate=+new Date+P.DelayValidation,t.state.check[n]="validating"):t.state.check[n]=""}(),this.props.data[a]=r,"checkbox"!==n.type||n.checked||(this.props.data[a]=""),this.props.register&&l(this.props.data,this.state.met),void this.forceUpdate())}},{key:"formElement",value:function(){var e=m["default"].get("Account"),t=y["default"].getCurrent(),n=this.props.data,a=this.props.edit,r=this.props.register,o=n.emailCheck>0,i=t.account&&t.account.pictures||[],l=this._changeHandler.bind(this),u=e.FormProfile.split("|"),c=e.ProfileHint.split("\n"),d=n.loginId&&"#"===n.loginId.charAt(2),f=function(e){return a?p["default"].createElement("em",null,u[e]):u[e]},h=function(e,t,r){return a?p["default"].createElement("input",{name:e,type:"email"===e?"email":"text",value:n[e],required:t,placeholder:r,onChange:l}):n[e]},g=function(e){return e?function(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}(new Date(1e3*e)):""},v=[[u[0],n.uid],[f(1),h("name",!0,c[1])],[f(2),a?i.map(function(e,n){return p["default"].createElement("label",{key:n},p["default"].createElement("input",{name:"picture",type:"radio",value:e,defaultChecked:t.picture===e}),p["default"].createElement("img",{src:(0,_.getUserPicture)(e)}))}):p["default"].createElement("img",{src:(0,_.getUserPicture)(t.picture)})],[u[3],t.memberSince?p["default"].createElement("span",{className:y["default"].isMember()?"check-input valid":null},g(t.memberSince)+" - "+g(+t.memberUntil-86400)):"-"],[f(4),a?h("email",!0,c[2]):o?p["default"].createElement("span",{className:"check-input valid"},n.email):p["default"].createElement("span",null,p["default"].createElement("span",{className:"check-input invalid",title:c[3]},n.email),p["default"].createElement("br",null),"(",p["default"].createElement("a",{href:"#",onClick:this._reconfirmEmail.bind(this)},u[5]),")")],[u[6],a&&!d?p["default"].createElement("span",{className:"check-input "+this.state.check.loginId},h("loginId",null,n.email||c[4])):n.loginId],[u[7],a?"********":p["default"].createElement("span",null,"******** (",p["default"].createElement("a",{href:e.Password.split(" ")[0]},u[8]),")")],[f(9),h("realName",!0,c[5])],[u[10],h("cellPhone",!1,r?c[6]:null)]];if(d&&v.splice(-3,1),i.length<2&&v.splice(2,1),r){var b=s(n,this.state.met,l),w=[[f(0),p["default"].createElement("span",{className:"check-input "+this.state.check.uid},h("uid",!0,c[0]))],v[1]],k=[f(11),p["default"].createElement("label",null,p["default"].createElement("input",{name:"terms",type:"checkbox",value:"agree",onChange:l,checked:!!n.terms}),p["default"].createElement("input",{name:"pcode",type:"hidden",value:this.state.campaign?this.state.campaign.pcode:null}),p["default"].createElement("span",{dangerouslySetInnerHTML:{__html:" "+e.Agreement}}))];v=v.slice(3,5).concat(b.slice(1)).concat(w).concat(v.slice(6)),v[2][0]=f(7),v.push(k)}return this.htmlTable(v,r&&this.state.campaign&&this.state.campaign.name?e.PCodeRegistration.replace("${name}",this.state.campaign.name):void 0)}}]),t}(O["default"]),n.PasswordForm=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={password:"",met:[]},n}return i(t,e),u(t,[{key:"buttons",value:function(){return this.query.code?[c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)[0],null]:c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)}},{key:"disableSubmitButton",value:function(){return this.state.met.filter(function(e){return e}).length<5}},{key:"_changeHandler",value:function(e){var t=e.target;this.state[t.name]=t.value,l(this.state,this.state.met),this.forceUpdate()}},{key:"formElement",value:function(){var e=this._changeHandler.bind(this),t=s(this.state,this.state.met,e);return this.query.code&&(t[0]=[null,p["default"].createElement("input",{type:"hidden",name:"code",value:this.query.code})]),this.htmlTable(t)}},{key:"render",value:function(){var e=m["default"].get("Account"),n=this.query=(0,d.parse)(this.props.url,!0).query,a=n.status?"done"===n.status?e.SetPasswordDone:e.SetPasswordError:null;return a?p["default"].createElement("div",{className:"form account"},p["default"].createElement("form",null,p["default"].createElement("p",null,a))):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}(O["default"]),n.ResetForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"buttons",value:function(){return[c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)[0],null]}},{key:"formHandler",value:function(e,t){t.email&&w["default"].updateAccount({action:"reset",email:t.email})}},{key:"formElement",value:function(){var e=m["default"].get("Account"),t=[[null,p["default"].createElement("span",null,e.ResetPasswordEmail,"  ")],[null,p["default"].createElement("input",{name:"email",type:"email",required:!0})]];return this.htmlTable(t)}},{key:"render",value:function(){var e=m["default"].get("Account"),n=this.query=(0,d.parse)(this.props.url,!0).query,a=n.status?"done"===n.status?e.ResetPasswordSent:e.ResetPasswordError:null;return a?p["default"].createElement("div",{className:"form account"},p["default"].createElement("form",null,p["default"].createElement("p",null,a))):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}(O["default"]),n.ConfirmForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.query&&this.query.code;e&&w["default"].updateAccount({action:"confirm",code:e})}},{key:"render",value:function(){var e=m["default"].get("Account"),t=this.query=(0,d.parse)(this.props.url,!0).query,n=t.status?"done"===t.status?"Done":"Error":"Checking";return p["default"].createElement("div",{className:"form account"},p["default"].createElement("form",null,p["default"].createElement("p",null,e["ConfirmEmail"+n])))}}]),t}(p["default"].Component),n.MembershipForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=m["default"].get("Account"),t=(y["default"].getCurrent().account||{}).emailCheck>0,n=p["default"].createElement("p",{className:"buttons"},t?[y["default"].fbConnected()?null:p["default"].createElement("a",{key:"0",onClick:this.props.fbLogin,href:"#"},e.GoToFacebookLogin,"  "),p["default"].createElement("a",{key:"1",href:e.Subscription.split(" ")[0]},e.GoToSubscription)]:p["default"].createElement("a",{href:e.Profile.split(" ")[0]},e.NeedConfirmEmail));return p["default"].createElement("div",{className:"form account"},p["default"].createElement("form",null,p["default"].createElement("p",null,e.JoinCommunity),n))}}]),t}(p["default"].Component),n.SubscriptionForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"_formHandler",value:function(e){var t=this;if(this.validForm)return!0;for(var n=m["default"].get("Payment"),a=e.target,r=n.Items[a[n.FieldNames.item].value],o={},i=0;i<a.elements.length;i++){var l=a.elements[i];o[l.name]=l.value=l.value.replace(/\$\{item\.(\w+)\}/g,function(e,t){return r?r[t]:""})}return w["default"].getChecksum(o,function(e){e&&e.checksum&&(a.elements[n.FieldNames.checksum].value=e.checksum,t.validForm=!0,a.submit())}),!1}},{key:"render",value:function(){var e=m["default"].get("Payment"),t=(this.props.params||e.Params).split(" "),n=e.Images.split(" "),a=e.FormMarkup.replace(/\$\{account\}/g,this.props.account).replace(/\$\{back\}/g,this.props.back).replace(/\$\{(param|image)(\d)\}/g,function(e,a,r){return("param"===a?t:n)[r-1]});if("allPay"===e.Method){var r=new Date,o=function(e){return e.toString(35)},i=new Date(r-6e4*r.getTimezoneOffset()).toISOString().slice(0,19),l=i.replace(/-/g,"/").replace("T"," "),s=o(20*r.getUTCMinutes()+Math.floor(r.getUTCSeconds()/3)),u=o(Math.floor(r.getUTCFullYear()/10)-200)+r.getUTCFullYear()%10+o(r.getUTCMonth()+1)+o(r.getUTCDate())+o(r.getUTCHours())+(s.length<2?"0":"")+s;a=a.replace(/\$\{datetime}/g,l).replace(/\$\{dateEncode\}/g,u.toUpperCase()).replace(/\$\{emailEncode\}/g,encodeURIComponent((y["default"].getCurrent().account||{}).email)).replace(/\$\{deviceType\}/g,window.innerWidth<875?"M":"P")}return"undefined"!=typeof window&&e.NeedFormHandler&&(window.formHandler=this._formHandler.bind(this)),this.validForm=!1,p["default"].createElement("div",{className:"form account wide",dangerouslySetInnerHTML:{__html:a}})}}]),t}(p["default"].Component),n.PaymentForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.query&&!this.query.status&&w["default"].updatePayment(this.query)}},{key:"render",value:function(){var e=m["default"].get("Payment"),t=this.query=(0,d.parse)(this.props.url,!0).query;t.method=e.Method;var n="cancel"===t.status?e.Canceled:"finish"===t.status?e.Finished:"pending"===t.status?e.Pending:t.status?null:e.Processing;return p["default"].createElement("div",{className:"form account"},n?p["default"].createElement("form",null,p["default"].createElement("p",null,n)):null)}}]),t}(p["default"].Component),n.PlayerForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"buttons",value:function(){return[c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)[0],null]}},{key:"formHandler",value:function(e,t){t.plid&&w["default"].updateAccount(Object.assign({action:"player"},t))}},{key:"formElement",value:function(){var e=m["default"].get("Player"),t=e.Fields.split("|"),n=this.props.data,a=function(e,t,a){return p["default"].createElement("input",{name:e,type:"text",defaultValue:n[e],required:t,placeholder:a})},r=[[t[0],a("uid")],[p["default"].createElement("em",null,t[1]),a("plid",!0)],[p["default"].createElement("em",null,t[2]),a("url",!0)],[p["default"].createElement("em",null,t[3]),a("name",!0)],[t[4],a("note")]];return this.htmlTable(r)}},{key:"render",value:function(){var e=m["default"].get("Account"),n=this.query=(0,d.parse)(this.props.url,!0).query,a=n.status?"done"===n.status?e.PlayerUpdateDone:e.PlayerUpdateError:null;return a?p["default"].createElement("div",{className:"form account"},p["default"].createElement("form",null,p["default"].createElement("p",null,a))):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}(O["default"])},{"../actions/AccountActionCreators":1,"../actions/HeaderActionCreators":3,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/webapi":29,"./HubForm.react":14,"./PageForm.react":18,"./PostUtils.react":21,react:"react",url:42}],8:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Account=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=e("react"),c=r(u),d=e("fluent-js"),f=e("../utils/dictionary"),p=r(f),h=e("../utils/state"),m=a(h),g=e("../utils/webapi"),v=e("../stores/PageStore"),y=r(v),b=e("../stores/UserStore"),w=r(b),k=e("../actions/HeaderActionCreators"),E=r(k),_=e("../actions/AccountActionCreators"),P=r(_),C=e("./AccountForm.react"),O=a(C),S=e("./PageForm.react"),H=n.Account=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={profile:{},editProfile:!1,passwordChanged:!1},n}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.needFacebookSDK&&((0,
S.initFacebookSDK)(),(0,S.initGoogleAPI)(this.refs.glogin,this._googleLoginHandler.bind(this),function(e){return E["default"].showError(e&&e.reason)}))}},{key:"_registerFormHandler",value:function(e,t){t.loginId||(t.loginId=t.email),P["default"].updateAccount(t,!0)}},{key:"_profileFormHandler",value:function(e,t){return t&&this.state.editProfile?(this.state.editProfile=!1,t.loginId||(t.loginId=t.email),void P["default"].updateAccount(t)):this.setState({editProfile:!this.state.editProfile})}},{key:"_passwordFormHandler",value:function(e,t){return t&&t.code?P["default"].updateAccount(Object.assign({action:"password"},t)):(this.setState({passwordChanged:!0}),void(t&&t.oldPassword&&t.password&&P["default"].updatePassword(t)))}},{key:"_fbLoginClickHandler",value:function(e){e.preventDefault(),window.FB.login(function(){window.FB.getLoginStatus(function(e){if("connected"===e.status){var t="fb#"+e.authResponse.userID,n=e.authResponse.accessToken;(0,g.checkId)({id:t},function(e){var a=p["default"].get("Account");return e?E["default"].showError(a.FacebookAccountInUse):void window.FB.api("/me?fields=id,verified",function(e){return e.verified?void P["default"].updateAccount({loginId:t,_accessToken:n}):E["default"].showError(a.FacebookNotVerified)})})}})},{scope:"public_profile,email"})}},{key:"_googleLoginHandler",value:function(e){var t="gl#"+e.getBasicProfile().getId(),n=e.getAuthResponse().id_token;(0,g.checkId)({id:t},function(e){return e?E["default"].showError(p["default"].get("Account").GoogleAccountInUse):void P["default"].updateAccount({loginId:t,_accessToken:n})})}},{key:"render",value:function(){var e=p["default"].get("Account"),t=w["default"].getCurrent(),n=t.account||{},a=t.uid?{uid:t.uid,name:t.name,email:n.email,loginId:n.loginId,realName:n.realName,cellPhone:n.cellPhone,emailCheck:n.emailCheck}:{password:""},r=y["default"].getURL(),o=this.state.passwordChanged?null:r.split("?")[0],i=t.uid?["Profile","Confirm","Password","Membership","Subscription","Payment","Player"]:["Register","Confirm","Reset","Password"],l=i.filter(function(t){return e[t].split(" ")[0]===o})[0]||i[0],s="Password"===l&&r.indexOf("?")>0?e.Reset:e[l],u=s.slice(s.indexOf(" ")+1),d=[e.Subscription.split(" ")[0],e.Subscription.slice(e.Subscription.indexOf(" ")+1)],f=this._fbLoginClickHandler.bind(this),h=null;switch(l){case"Membership":h=c["default"].createElement(O.MembershipForm,{fbLogin:f});break;case"Payment":h=c["default"].createElement(O.PaymentForm,{url:r});break;case"Confirm":h=c["default"].createElement(O.ConfirmForm,{url:r});break;case"Reset":h=c["default"].createElement(O.ResetForm,{url:r});break;case"Password":h=c["default"].createElement(O.PasswordForm,{formHandler:this._passwordFormHandler.bind(this),url:r});break;case"Register":h=c["default"].createElement(O.ProfileForm,{formHandler:this._registerFormHandler.bind(this),url:r,edit:!0,register:!0,data:this.state.profile=a});break;case"Profile":h=c["default"].createElement(O.ProfileForm,{formHandler:this._profileFormHandler.bind(this),edit:this.state.editProfile,data:this.state.profile=a});break;case"Subscription":var g="undefined"!=typeof window&&window.location||{};h=c["default"].createElement(O.SubscriptionForm,{account:n.uniqueKey,back:g.protocol+"//"+g.hostname+(g.port?":"+g.port:"")+e.Payment.split(" ")[0],params:(y["default"].getExtraConfig()||{})["params."+p["default"].get("Payment").Method]});break;case"Player":h=c["default"].createElement(O.PlayerForm,{url:r,data:{}})}var v=[];switch(l){case"Profile":v=this.state.editProfile?[]:[["/",e.BackToHome],d];break;case"Payment":case"Confirm":v=[[e.Profile.split(" ")[0],e.BackToProfile]];break;case"Membership":case"Reset":v=[["/",e.BackToHome]]}var b=v.map(function(e,t){return c["default"].createElement("span",{key:t},c["default"].createElement("a",{onClick:m.linkHandler,href:e[0]},e[1]))});return"Profile"!==l&&"Membership"!==l||w["default"].fbConnected()||("Profile"===l&&(b.push(c["default"].createElement("span",{key:"f"},c["default"].createElement("a",{onClick:f,href:"#"},p["default"].get("Login").FacebookLogin))),b.push(c["default"].createElement("span",{key:"g"},c["default"].createElement("a",{ref:"glogin",href:"#"},p["default"].get("Login").GoogleLogin)))),this.needFacebookSDK=!0),c["default"].createElement("div",{className:"account wrap"},c["default"].createElement("div",null,"Profile"!==l||w["default"].isMember()||w["default"].fbConnected()?null:c["default"].createElement("div",{className:"to-subscribe",dangerouslySetInnerHTML:{__html:t.memberSince?e.ExtendMembership:e.SubscribeMembership}}),c["default"].createElement("h2",null,u),h,c["default"].createElement("div",{className:"bottom-links"},b)))}}]),t}(c["default"].Component);n["default"]=(0,d.connectToStores)(c["default"],H,[w["default"]])},{"../actions/AccountActionCreators":1,"../actions/HeaderActionCreators":3,"../stores/PageStore":24,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/state":28,"../utils/webapi":29,"./AccountForm.react":7,"./PageForm.react":18,"fluent-js":33,react:"react"}],9:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.HubApp=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("react"),u=a(s),c=e("fluent-js"),d=e("../stores/PageStore"),f=a(d),p=e("./PageHeader.react"),h=a(p),m=e("./HubBrowse.react"),g=a(m),v=e("./HubPosts.react"),y=a(v),b=e("./AccountSection.react"),w=a(b),k=n.HubApp=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=f["default"].getType(),t=f["default"].getHub();return"post"===e?u["default"].createElement(y["default"],null):u["default"].createElement("div",null,u["default"].createElement(h["default"],null),"s:account"===t.distinct?u["default"].createElement(w["default"],null):"postlist"===e?u["default"].createElement(g["default"],null):u["default"].createElement("p",null))}}]),t}(u["default"].Component);n["default"]=(0,c.connectToStores)(u["default"],k,[f["default"]])},{"../stores/PageStore":24,"./AccountSection.react":8,"./HubBrowse.react":10,"./HubPosts.react":17,"./PageHeader.react":19,"fluent-js":33,react:"react"}],10:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.hubNames&&e.hub!==_["default"].getHub().hid&&_["default"].getURL().indexOf("comment=")<0?h["default"].createElement("span",{className:"post-hub-name bordered"},e.hubNames.map(function(e,t){return h["default"].createElement("span",{key:t},e)})):null}function u(e,t){var n=e.pathPart||"";return"/"+(t||e.hub)+("/"===n.charAt(0)?n:"/*"+e.pid+(n?"/"+n:""))}function c(e,t,n,a){var r=u(e),o=_["default"].getNow(),i=_["default"].atClientSide(),l=T.getLightClass(e.upvote||0,e.downvote||0),c=k.linkHandler,d=e.thumbnail?h["default"].createElement("img",{className:"post-thumbnail",src:e.thumbnail}):null,f="p"===a&&e.tags?(e.tags.match(/\S+/g)||[]).map(function(e,t){return h["default"].createElement("span",{key:t,className:"post-hub-name bordered"+(t?" left-spaced":"")},h["default"].createElement("span",null,e))}):null,p=e.comments&&e.comments[0],m=p?p.content.length>1e3?p.content.slice(0,1e3)+"...":p.content:e.summary,g=p&&p.date?h["default"].createElement("span",{className:"commenter-box"},h["default"].createElement("span",{className:"commenter"},T.addBadge(p.by.split(" @")[0],!0)),T.getAgeGauge(p.date,o,i),h["default"].createElement("span",{className:"comment-scale"},T.getScale(p.upvote,p.downvote,"comment"))):null;return h["default"].createElement("tr",{key:t,className:l},h["default"].createElement("td",{className:"post-scale"},T.getScale(e.upvote,e.downvote,e.collectDate&&"2")),h["default"].createElement("td",null,d,h["default"].createElement("div",{className:"post-author-box"},h["default"].createElement("a",{href:r,onClick:c},h["default"].createElement("span",{className:"post-author"},T.addBadge(e.by.split(" @")[0])),T.getAgeGauge(e.date,o,i)),e.commentDate?h["default"].createElement("a",{href:e.commentCount?r+"?n="+e.commentCount:r,onClick:c},h["default"].createElement("br",null),h["default"].createElement("span",{className:"comment-count-scale"},T.getScale(e.commentCount,0,"count")),e.commentCount?h["default"].createElement("span",{className:"latest-comment"},b["default"].get("PostList").LatestComment):null,T.getAgeGauge(e.commentDate,o,i)):null),h["default"].createElement("a",{className:"post-title",href:r,onClick:c},T.getKind(e.kind,e.rating,e.reviewCount)," ",e.title),h["default"].createElement("br",null),s(e),f?h["default"].createElement("span",{className:"post-tags"},f):null,g,h["default"].createElement("span",{className:"post-summary"},m?" "+m:null)))}Object.defineProperty(n,"__esModule",{value:!0}),n.HubBrowse=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=e("react"),h=r(p),m=e("fluent-js"),g=e("twincled"),v=r(g),y=e("../utils/dictionary"),b=r(y),w=e("../utils/state"),k=a(w),E=e("../stores/PageStore"),_=r(E),P=e("../stores/PostStore"),C=r(P),O=e("../stores/UserStore"),S=r(O),H=e("../actions/BrowseActionCreators"),j=r(H),A=e("../actions/PageActionCreators"),x=r(A),N=e("./PostUtils.react"),T=a(N),L=e("./HubBrowseForm.react"),M=e("./HubConfigForm.react"),F=e("./PageForm.react"),R=e("../actions/HeaderActionCreators"),D=r(R),I=10,U=["tag","type","age","sortby","hub","comment"],B=n.HubBrowse=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={newpost:0,select:!1,config:!1,hid:_["default"].getHub().hid,loginForm:!1},n.selection={},n._steerRightRail=function(){var e=document.getElementById("sidebar"),t=document.getElementById("wrapper"),n=t&&t.parentElement;if(!e||!n)throw"Cannot find #sidebar or #wrapper element";var a=t.offsetWidth+"px",r=n.getBoundingClientRect(),o=r.height-(t.offsetTop+t.offsetHeight);if(e.style.width!==a&&(e.style.width=a),!(50>o)){var i="";r.bottom<Math.min(e.offsetHeight,window.innerHeight)?i="sidebar1":(e.offsetHeight<window.innerHeight?t.getBoundingClientRect().top<0:t.getBoundingClientRect().top+e.offsetHeight<window.innerHeight)&&(i=e.offsetHeight<window.innerHeight?"sidebar2":"sidebar3"),e.className!==i&&(e.className=i)}},n}return l(t,e),f(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this._steerRightRail,!1),window.addEventListener("resize",this._steerRightRail,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this._steerRightRail,!1),window.removeEventListener("resize",this._steerRightRail,!1)}},{key:"_clickHandler",value:function(e){var t=e.target,n=t.getAttribute("data-action"),a={newpost:0,select:!1,config:!1,loginForm:!1};switch(e.preventDefault(),n){case"select":a.select=!this.state.select;break;case"config":a.config=!this.state.config;break;case"post":a.newpost=this.state.newpost?0:+(t.getAttribute("data-row")||1);break;case"login":this.state.loginForm||D["default"].showError(b["default"].get("Login").LoginFirst),a.loginForm=!this.state.loginForm}this.setState(a)}},{key:"_postFormHandler",value:function(e,t){if(t&&t.url&&"http"!==t.url.slice(0,4)){var n="/"===t.url.charAt(0)?location.protocol+"//"+location.hostname+(location.port?":"+location.port:""):"http://";e.elements.url.value=n+t.url}this.setState({newpost:0})}},{key:"_selectFormHandler",value:function(e,t){var n=this;this.setState({select:!1}),t&&!function(){var e=_["default"].getHub().hid,t=n.selection,a=U.filter(function(e){return t[e]}).map(function(e){return e+"="+t[e]}).join("&");a&&(a="?"+a),x["default"].loadURL("/"+("/"===e?"":e)+a)}()}},{key:"_configFormHandler",value:function(e,t){this.setState({config:!1}),t&&j["default"].updateHub(_["default"].getHub().hid,t)}},{key:"render",value:function(){function e(e,t){return e.map(function(e,n){var o=void 0,l=void 0,c=void 0,f=void 0;switch(e){case"hubs":o="hubs"+("v"===i?" virtual":""),l=a.Hubs,c=r.children.map(function(e){return[h["default"].createElement("span",null," "),h["default"].createElement("a",{href:"/"+e.hid,className:e.leaf?e.names?"post-hub-name":null:"parent",onClick:y},e.names&&(f=e.names.join(_["default"].getHubTierSeparator()))?e.badge?T.addBadge(f+" "+e.badge,!0,e.level):f:e.name)]}),r.note&&c.unshift(h["default"].createElement("div",{key:"n",className:"note"},r.note));break;case"tags":o="post-tags",l=a.Tags,c=D.map(function(e,t){return h["default"].createElement("a",{key:t,className:R.indexOf(e)>=0?"selected":null,href:"/"+("/"===r.hid.charAt(0)?r.hid.slice(1):r.hid)+"?tag="+encodeURIComponent(e),onClick:y},e)}),"/"===r.hid&&(c=null);break;case"collection":o="collection",l=a["p:notes"===r.distinct?"NotesCollection":"Collection"],c=(r.collection||[]).map(function(e,t){return h["default"].createElement("li",{key:t},s(e),h["default"].createElement("a",{className:"post-title",href:u(e),onClick:y},h["default"].createElement("span",null," "),T.getKind(e.kind,e.rating,e.reviewCount),"QPost"===e.kind?null:" ",e.title),T.getAgeGauge(e.date,X,J),t<r.collection.length-1||I-1>t?null:h["default"].createElement("a",{className:"more-collection",onClick:y,href:"/"+("/"===r.hid?"":r.hid)+"?collection=1"},a.More))}),c=c.length?h["default"].createElement("ul",{className:"postlist"},c):r.distinct?null:W;break;case"about":if(o="about",l=a.About,r.profile){var p=r.profile.author,m=p.since&&_["default"].atClientSide()?new Date(p.since+864e5):null,g=m&&a.MemberSince.replace("${year}",m.getUTCFullYear()).replace("${month}",m.getUTCMonth()+1).replace("${mon}",m.toDateString().split(" ")[1]);c=p?[h["default"].createElement("div",{className:"post-author-box clearfix",key:"0"},h["default"].createElement("div",null,h["default"].createElement("img",{className:"post-author-pic",src:T.getUserPicture(p.picture)})),h["default"].createElement("div",null,h["default"].createElement("a",{className:"post-author",href:"/@"+p.uid,onClick:y},p.name),h["default"].createElement("br",null),"@"+p.uid)),h["default"].createElement("div",{key:"1"},h["default"].createElement("div",null,T.getCountString(p.postCount,"Comment","PluralPostCount")),h["default"].createElement("div",null,T.getCountString(p.commentCount,"Comment","PluralCount")),g?h["default"].createElement("div",null,g):null),p.authorPage&&p.authorPage.about?h["default"].createElement("div",{key:"2"},h["default"].createElement("hr",null),h["default"].createElement("div",{className:"article comments",dangerouslySetInnerHTML:{__html:v["default"].toHTML(p.authorPage.about)}})):null]:null}break;case"hubtenders":o="hubtenders",l=a.Hubtender,r.hubtenders&&(c=r.hubtenders.map(function(e){return e.split(" @")}).map(function(e,t){return h["default"].createElement("div",{key:t},h["default"].createElement("a",{href:"/@"+e[1].split("/")[0],onClick:y},e[0]))}));break;case"statistic":if(o="statistic",l=a.Statistic,r.statistic&&r.statistic.length>0){var b=h["default"].createElement("tr",null,h["default"].createElement("th",null,a.StatPost),h["default"].createElement("th",null,a.StatComment),h["default"].createElement("th",null,a.StatVote),h["default"].createElement("th",null,a.StatLevel),h["default"].createElement("th",null)),w=r.statistic.map(function(e,t){return h["default"].createElement("tr",{key:t},h["default"].createElement("td",null,e.postCount||null),h["default"].createElement("td",null,e.commentCount||null),h["default"].createElement("td",null,e.upvote||e.downvote?e.upvote-e.downvote:null),h["default"].createElement("td",null,e.level||null),h["default"].createElement("td",null,h["default"].createElement("a",{href:"/@"+(r.profile?r.profile.author.uid:"")+"?hub="+e.hub},e.hubNames.join(_["default"].getHubTierSeparator()))))});c=h["default"].createElement("article",null,h["default"].createElement("table",null,h["default"].createElement("tbody",null,b,w)))}break;default:if(e&&":posts:"===e.slice(0,7)){var k=e.split(":");o="collection",l=h["default"].createElement("a",{href:"/"+k[2],onClick:y},k[3]),c=((r.lists||{})[k[2]]||[]).slice(0,k[4]||10).map(function(e,t){return h["default"].createElement("li",{key:t},s(e),h["default"].createElement("a",{className:"post-title",href:u(e),onClick:y},h["default"].createElement("span",null," "),T.getKind(e.kind,e.rating,e.reviewCount),"QPost"===e.kind?null:" ",e.title),T.getAgeGauge(e.date,X,J))}),c=c.length?h["default"].createElement("ul",{className:"postlist"},c):W}else o="article comments",e||(e=""),l=e.split("\n",1)[0],c=h["default"].createElement("div",{dangerouslySetInnerHTML:{__html:v["default"].toHTML(e.slice(l.length+1))}})}return l=l&&t?h["default"].createElement("div",{className:"heading"},l):null,!c||"object"===("undefined"==typeof c?"undefined":d(c))&&0===c.length?null:h["default"].createElement("aside",{key:n,className:"hubblock "+o},l,c)})}var t=this,n=b["default"].get("Button_PostList"),a=b["default"].get("HubBlock"),r=_["default"].getHub(),o=S["default"].getPermissions(),i=_["default"].getHubDistinctType(),l=r.profile&&r.hid.length>1&&r.hid==="@"+S["default"].getCurrent().uid,f=this._clickHandler.bind(this),p=this._postFormHandler.bind(this),m=this._selectFormHandler.bind(this),g=this._configFormHandler.bind(this),y=k.linkHandler,w=C["default"].getPostList().map(function(e,t){return c(e,t,r,i)});r.hid!==this.state.hid&&(this.state={newpost:0,select:!1,config:!1,hid:r.hid,loginForm:!1});var E=this.state.newpost,P=_["default"].getURL(),O=+((P.match(/\bpage=(\d+)/)||[])[1]||1),H=P.replace(/\bpage=[^&]*&?/g,"");"?"!==H.slice(-1)&&"&"!==H.slice(-1)&&(H+=H.indexOf("?")>=0?"&":"?");var j=O>2?H+"page="+(O-1):H.slice(0,-1),A="p"===i?"p:notes"===r.distinct?n.Note:"p:draft"===r.distinct?n.Draft:n.Post:n.Post,x=function(e){return[{action:"previous",text:n.Previous,show:O>1,href:j},{action:"next",text:n.Next,show:_["default"].hasMore(),href:H+"page="+(O+1)},{action:"select",text:n.Select,pressed:t.state.select,show:r.selectable&&1===e},{action:"config",text:n.Config,pressed:t.state.config,show:(o._config||l)&&1===e},{action:"post",text:A,pressed:E,show:(o.post||o.prepost)&&E!==3-e,row:e},{action:"login",text:A,pressed:t.state.loginForm,show:S["default"].isGuest()&&1===e}]},N=(P.match(/[?&]\w+=[^&]+/g)||[]).map(function(e){return e.slice(1).split("=")});this.selection={},N.forEach(function(e){return U.indexOf(e[0])>=0&&(t.selection[e[0]]=decodeURIComponent(e[1]))});var R=this.selection.tag?this.selection.tag.split(","):[],D=(r.tags||[]).concat(R.filter(function(e){return(r.tags||[]).indexOf(e)<0}));if(this.selection.hub){var B=r.children.filter(function(e){return e.hid.split("hub=")[1]===t.selection.hub})[0],q=this.selection.comment,$=(q?P.replace("&comment=1",""):P+"&comment=1").replace(/&page=\d+/,"");this.selection.hub=B&&B.names?h["default"].createElement("span",null,h["default"].createElement("span",{className:"post-hub-name bordered"},B.names.map(function(e,t){return h["default"].createElement("span",{key:t},e)})),q?null:n.HubPost+" | ",h["default"].createElement("a",{href:$,onClick:y},q?n.HubPost:n.HubComment),q?" | "+n.HubComment:null):null}var V=this.state.loginForm?h["default"].createElement(F.LoginForm,{formHandler:function(){return t.setState({loginForm:!1})}}):null,z=E?h["default"].createElement(L.NewPostForm,{formHandler:p,hub:r}):null,G=this.state.select?h["default"].createElement(L.SelectForm,{formHandler:m,skips:r.skips,data:this.selection}):null,K=this.state.config?h["default"].createElement(M.ConfigForm,{formHandler:g,authorPage:l?r.profile.author.authorPage||{}:null}):null,Y=Object.keys(this.selection).length?h["default"].createElement(L.SelectNote,{data:this.selection}):null,W=h["default"].createElement("div",{className:"empty"},b["default"].get("Select").Empty),Q=function(e){return h["default"].createElement("div",{className:1===e&&Y?"buttons icons":"buttons"},x(e).filter(function(e){return e.show}).map(function(e,t){return h["default"].createElement("a",{href:e.href||"#",key:t,onClick:e.href?y:f,"data-action":e.action,"data-pressed":e.pressed||null,"data-row":e.row||null},e.text)}))},X=_["default"].getNow(),J=_["default"].atClientSide(),Z=(r.blocks&&r.blocks.top||[]).slice(),ee=(r.blocks&&r.blocks.right||[]).slice();["tags","hubs"].forEach(function(e){return Z.indexOf(e)<0&&ee.indexOf(e)<0&&Z.unshift(e)}),["collection","about","hubtenders","statistic"].forEach(function(e){return Z.indexOf(e)<0&&ee.indexOf(e)<0&&ee.push(e)});var te=e(Z),ne=e(ee,!0),ae=h["default"].createElement("main",{className:"postlist"},h["default"].createElement("table",null,h["default"].createElement("tbody",null,h["default"].createElement("tr",null,h["default"].createElement("td",null),h["default"].createElement("td",{className:"button-bar"},Q(1),h["default"].createElement("div",{className:"select-note"},Y),1===E?z:null,G,K,V)),w,h["default"].createElement("tr",null,h["default"].createElement("td",null),h["default"].createElement("td",{className:"button-bar"},w.length?Q(2):W,h["default"].createElement("div",{className:"select-note"}),2===E?z:null)))));return h["default"].createElement("div",{className:"hubblocks wrap"},te,h["default"].createElement("div",{className:"separator"}),ae,h["default"].createElement("div",{className:"right",id:"wrapper"},h["default"].createElement("div",{id:"sidebar"},ne)))}}]),t}(h["default"].Component);n["default"]=(0,m.connectToStores)(h["default"],B,[C["default"]])},{"../actions/BrowseActionCreators":2,"../actions/HeaderActionCreators":3,"../actions/PageActionCreators":5,"../stores/PageStore":24,"../stores/PostStore":25,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/state":28,"./HubBrowseForm.react":11,"./HubConfigForm.react":13,"./PageForm.react":18,"./PostUtils.react":21,"fluent-js":33,react:"react",twincled:"twincled"}],11:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.SelectNote=n.SelectForm=n.NewPostForm=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function b(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:b(r,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},u=e("react"),c=a(u),d=e("../utils/dictionary"),f=a(d),p=e("./HubForm.react"),h=a(p),m=e("./PostUtils.react"),g=e("./HubPostForm.react"),v="00new",y=(n.NewPostForm=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={kind:null,swap:!1},n}return i(t,e),l(t,[{key:"buttons",value:function(){return[this.state.hub?f["default"].get("Button_Form").Continue:null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)[1]]}},{key:"_changeHandler",value:function(e){var t=e.target,n={};n[t.name]=t.value,this.setState(n)}},{key:"_chosenHandler",value:function(e,t){this.state.swap?this.setState({secondHub:e,secondNames:t}):this.setState({hub:e,names:t})}},{key:"_chosenSecondHandler",value:function(e,t){this.state.swap||this.setState({secondHub:this.state.hub,secondNames:this.state.names,swap:!0}),this.setState({hub:e,names:t})}},{key:"formAction",value:function(){return this.state.hub?"/"+this.state.hub.hid+"/*"+v:null}},{key:"formElement",value:function(){var e=f["default"].get("NewPost"),t=this.state.hub,n=this._chosenHandler.bind(this),a=c["default"].createElement(g.HubList,{hub:this.props.hub,chosenHandler:n}),r="~"===this.props.hub.hid.charAt(0),o=this._chosenSecondHandler.bind(this),i=r?c["default"].createElement(g.HubList,{chosenHandler:o}):null,l=this.state.secondHub?c["default"].createElement("input",{name:"secondHub",type:"hidden",value:this.state.secondHub.hid}):null,s=this._changeHandler.bind(this),u=t?t.skips||[]:[],d=this.state.kind,p=null,h=e.KindOptions.split("\n").map(function(e,t){var n=e.split("/"),a=u.indexOf(n[0])>=0;d||a||(d=n[0]);var r=n[0]===d;return r&&(p=n[2]),a?null:c["default"].createElement("label",{key:t},c["default"].createElement("input",{name:"kind",type:"radio",key:t,value:n[0],onChange:s,checked:r}),c["default"].createElement("span",null," "),c["default"].createElement("span",{className:"post-type-icon"},(0,m.getKind)(n[0]))," "+n[1])}),v="QReview"===d||"Review"===d,y="Link"===d||v,b="Review"===d,w=this.state.names?this.state.names.map(function(e,t){return c["default"].createElement("span",{key:t},e)}):null,k=[[e.PostOn,a],[r?e.AlsoPostOn:null,i,l],[e.Kind,h],["",c["default"].createElement("div",{className:"type-hint"},p)],[e.Title,c["default"].createElement("input",{name:"title",type:"text",placeholder:y?e.TitleWithUrlHint:null})],[v?c["default"].createElement("em",null,e.ReviewTarget):null,c["default"].createElement("input",{name:"target",type:"text",required:v,placeholder:e.ReviewTargetHint})],[y?c["default"].createElement("em",null,e.Link):null,c["default"].createElement("input",{name:"url",type:"text",required:y,placeholder:v?e.ReviewLinkHint:null})],[b?c["default"].createElement("em",null,e.Rating):null,c["default"].createElement("div",null,c["default"].createElement("select",{name:"rating"},(0,g.getRatingOptions)(!0))," ",e.RatingStars)]];return this.htmlTable(k,c["default"].createElement("span",{className:"post-hub-name"},w))}},{key:"render",value:function(){return c["default"].createElement("div",{className:"popup newpost"},s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(h["default"]),"/1/2/3/5/7/10/15/30/60/90/180/365");n.SelectForm=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"_changeHandler",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;"type"===a&&!function(){var e=t.props.data.type?t.props.data.type.split(","):[],n=f["default"].get("Select").KindOptions.split("\n").map(function(e){return e.split("/")[0]});r=(e.indexOf(r)>=0?e.splice(e.indexOf(r),1)&&e:n.filter(function(t){return t===r||e.indexOf(t)>=0})).join(",")}(),this.props.data[a]=r,this.forceUpdate()}},{key:"formElement",value:function(){var e=f["default"].get("Select"),t=this._changeHandler.bind(this),n=(this.props.data.type||"").split(","),a=(this.props.skips||[]).map(function(e){return e.toLowerCase()}),r=e.KindOptions.split("\n").map(function(e){return e.split("/")}).filter(function(e){return a.indexOf(e[0])<0}).map(function(e,a){return c["default"].createElement("label",{key:a},c["default"].createElement("input",{name:"type",type:"checkbox",value:e[0],onChange:t,checked:n.indexOf(e[0])>=0}),c["default"].createElement("span",null," "),c["default"].createElement("span",{className:"post-type-icon"},(0,m.getKind)(e[0]))," "+e[1])}),o=y.split("/").map(function(e){return c["default"].createElement("option",{key:e,value:e},e)}),i=e.SortbyOptions.split("\n").map(function(e){return e.split("/")}).map(function(e){return c["default"].createElement("option",{key:e[0],value:e[0]},e[1])});return this.htmlTable([[e.Kind,r],[e.Age,c["default"].createElement("div",null,c["default"].createElement("select",{name:"age",onChange:t,value:this.props.data.age},o)," ",e.AgeDays)],[e.Sortby,c["default"].createElement("select",{name:"sortby",onChange:t,value:this.props.data.sortby},i)]])}},{key:"render",value:function(){return c["default"].createElement("div",{className:"popup select"},s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(h["default"]),n.SelectNote=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=f["default"].get("Select"),t=this.props.data,n=[t.hub?c["default"].createElement("span",{key:"h"},t.hub):null,t.type?c["default"].createElement("span",{key:"0"},c["default"].createElement("span",{className:"name"},e.Kind),t.type.split(",").map(function(e){return c["default"].createElement("span",{key:e,className:"post-type-icon"},(0,m.getKind)(e,0,!0)," ")})):null,t.age?c["default"].createElement("span",{key:"1"},c["default"].createElement("span",{className:"name"},e.Age),t.age+e.AgeDays):null,t.sortby?c["default"].createElement("span",{key:"2"},c["default"].createElement("span",{className:"name"},e.Sortby),e.SortbyOptions.slice(e.SortbyOptions.indexOf("\n"+t.sortby)).split("/",2)[1].split("\n")[0]):null,t.tag?c["default"].createElement("span",{key:"3"},c["default"].createElement("span",{className:"name"},e.Tag),t.tag):null];return c["default"].createElement("div",null,n)}}]),t}(c["default"].Component)},{"../utils/dictionary":27,"./HubForm.react":14,"./HubPostForm.react":16,"./PostUtils.react":21,react:"react"}],12:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){
e.stopPropagation(),k.linkHandler(e)}function u(e){for(var t=null,n=e;n&&!t;n=n.parentElement)t=n.getAttribute("data-comment-id");return t?+t:-1}function c(e){for(;e&&!e.getAttribute("data-comment-id");)e=e.parentElement;var t=e?e.querySelector("article > div:last-child"):null;if(!t)throw"Cannot find <article><div>";return t}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=e("react"),p=r(f),h=e("react-dom"),m=r(h),g=e("twincled"),v=r(g),y=e("../utils/dictionary"),b=r(y),w=e("../utils/state"),k=a(w),E=e("../stores/PageStore"),_=r(E),P=e("../stores/PostStore"),C=r(P),O=e("../stores/UserStore"),S=r(O),H=e("../actions/PostActionCreators"),j=r(H),A=e("../actions/PageActionCreators"),x=r(A),N=e("../actions/HeaderActionCreators"),T=r(N),L=e("./PostUtils.react"),M=a(L),F=e("./HubPostForm.react"),R=e("./PageForm.react"),D=0,I=1,U=2,B=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),d(t,[{key:"reportFormHandler",value:function(e,t){this.props.display.report=null,this.forceUpdate(),t&&j["default"].report(this.props.post.pid,u(e),t)}},{key:"_getEditingCommentId",value:function(){var e=C["default"].getEditing(),t=this.props.post.pid;return e&&e.slice(0,t.length+1)===t+"."?+e.slice(t.length+1):null}},{key:"componentDidMount",value:function(){var e=this._getEditingCommentId();if(C["default"].isTempCommentId(e)){var t=m["default"].findDOMNode(this),n=u(t)===e;n&&!c(t).childElementCount&&v["default"].prepare(c(t),null,!0)}}},{key:"render",value:function(){var e=this,n=b["default"].get("Comment"),a=this.props.post,r=a.comments,o=_["default"].getNow(),i=_["default"].atClientSide(),l=S["default"].getCurrent().uid,u=S["default"].getPermissions(),c=this.props.display,d=this.props.handler,f=this.reportFormHandler.bind(this),h=this.props.level||0,m=this.props.replies||[],g=this._getEditingCommentId(),y=m.map(function(y,w){var k=c[y];if(k===D)return null;var E=r[y],_=h?"fence"+(h%2?"":" thick")+(5>h?"":" deep"):null,P=M.getLightClass(E.upvote,E.downvote),O=k===I,S=C["default"].getVote(a.pid,y),H=w&&c[m[w-1]]===I,j=E.by.split(" @"),A=j[1]===l,x="QReview"===a.kind&&!E.parent,N=g===y,T=N?null:O?"expand":"collapse";N&&x&&!c.review.data&&(c.review.data={rating:E.rating});var L=N&&c.review.data?+c.review.data.rating:E.rating,R=N?function(){c.review.on=!c.review.on,e.forceUpdate()}:null,U=x?p["default"].createElement("div",{className:"review","data-editing":N||null},p["default"].createElement("span",{className:"stars"+(L>0?"":" empty"),"data-pressed":c.review.on||null,onClick:R},p["default"].createElement("span",null,M.getRatingStars(L)))):null,B=O?[{action:"expand",text:"",show:!0}]:N?[{action:"submit",text:n.Submit,show:!0},{action:"cancel",text:n.Cancel,show:!0},{action:"switch",text:n.Switch,show:!0},{action:"help",text:n.Help,show:!0,url:b["default"].get("Button_Post").HelpLink,target:"help"}]:[{action:"edit",text:n.Edit,show:A||+u._edit>0},{action:"report",text:n.Report,show:0>S},{action:"fold",text:n.Fold,show:w>0&&!H},{action:"unfold",text:n.Unfold,show:w>0&&H},{action:"reply",text:n.Reply,show:+u.comment>0},{action:"delete",text:n.Delete,show:+u._delete>0},{action:"upvote",text:"+1",show:+u.vote>0&&!A,pressed:S>0},{action:"downvote",text:"-1",show:+u.vote>0&&!A,pressed:0>S},{action:"collapse",text:"",show:!0}],q=B.filter(function(e){return e.show}).map(function(e,t){return p["default"].createElement("a",{key:t,href:e.url||"#",onClick:e.url?null:d,target:e.target||null,"data-action":e.action,"data-pressed":e.pressed||null},e.text)}),$=p["default"].createElement("div",{className:"commenter-box clearfix",onClick:N?null:d,"data-action":T},p["default"].createElement("div",{className:P},U,p["default"].createElement("a",{name:"c"+y,href:"/@"+j[1],onClick:s},M.addBadge(j[0],!0)),M.getAgeGauge(E.date,o,i),E.update?M.getAgeGauge(E.update,o,i,b["default"].get("Age").Updated,!0):null,p["default"].createElement("span",{className:"comment-scale"},M.getScale(E.upvote,E.downvote,"comment")),N?p["default"].createElement("span",{className:"comment-editing"},n.Editing):null),p["default"].createElement("div",{className:"comment-menu"},q));return O?p["default"].createElement("div",{key:y,className:_,"data-comment-id":y},$,p["default"].createElement("div",{className:"collapsed"})):p["default"].createElement("div",{key:y,className:_,"data-comment-id":y},$,c.report===y?p["default"].createElement(F.ReportForm,{author:j,formHandler:f}):null,N&&c.review.on?p["default"].createElement(F.ReviewEditForm,{data:c.review.data,zeroStar:!0,formHandler:R}):null,p["default"].createElement("article",{className:P?"text "+P:"text"},p["default"].createElement("div",{dangerouslySetInnerHTML:{__html:v["default"].toHTML(E.content)}})),p["default"].createElement(t,{post:a,display:c,replies:E.replies,level:h+1,handler:d}))});return p["default"].createElement("div",null,y)}}]),t}(p["default"].Component),q=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.editingCids=[],n.display=C["default"].getPostState(n.props.pid),n.display.report=null,n.display.review={on:!1},n.display.count||(n.display.count=n.props.pageSize),n.state={display:n.display,loginForm:!1},n._setDisplayByCount(),n._autoLoadMoreComments=function(){var e=document.getElementById("bottom");e?e.getBoundingClientRect().bottom+30<window.innerHeight&&n._showMoreComments():(window.removeEventListener("load",n._autoLoadMoreComments,!1),window.removeEventListener("scroll",n._autoLoadMoreComments,!1))},n}return l(t,e),d(t,[{key:"_getPost",value:function(){return C["default"].getPost(this.props.pid)}},{key:"_setDisplayByCount",value:function(){function e(o){o&&o.length&&o.forEach(function(o){r++,t[o]=t[o]||(n>=r?U:D),e(a.comments[o].replies)})}var t=this.display,n=t.count,a=this._getPost(),r=0;e(a.replies)}},{key:"_showMoreComments",value:function(){this.display.count+=this.props.pageSize,this._setDisplayByCount(),this.setState({display:this.display})}},{key:"_clickMoreComments",value:function(e){var t=e.target;e.preventDefault(),t.setAttribute("data-pressed","true"),window.setTimeout(this._showMoreComments.bind(this),10)}},{key:"componentDidMount",value:function(){var e=this;if(this.props.autoLoad&&(window.addEventListener("load",this._autoLoadMoreComments,!1),window.addEventListener("scroll",this._autoLoadMoreComments,!1),_["default"].getURL().indexOf("?n=")>0)){var t=C["default"].getPostState(this.props.pid),n=function(){return e.refs.comments.scrollIntoView(),x["default"].noScroll()};t.scrolled||setTimeout(n,0),t.scrolled=!0}}},{key:"componentWillUnmount",value:function(){this.props.autoLoad&&(window.removeEventListener("load",this._autoLoadMoreComments,!1),window.removeEventListener("scroll",this._autoLoadMoreComments,!1))}},{key:"componentDidUpdate",value:function(){if("undefined"!=typeof window&&this.state.anchor){var e=this.state.anchor.getBoundingClientRect().top-this.state.anchorYPos;window.scrollTo(window.pageXOffset,window.pageYOffset+e),this.setState({anchor:null})}this.refs.moreCmt&&this.refs.moreCmt.removeAttribute("data-pressed")}},{key:"_setEditingCids",value:function(e){for(var t=C["default"].getComment(this.props.pid,e);t;t=C["default"].getComment(this.props.pid,t.cid||-1,!0))this.editingCids.push(t.cid||-1)}},{key:"_finishEditing",value:function(e){var t=v["default"].finish(e);return j["default"].startEditing(null),this.editingCids=[],this.display.review={on:!1},t}},{key:"_commentAction",value:function(e){var t=e.target,n=t.getAttribute("data-action"),a=this._getPost(),r=a.pid,o=u(t),i=C["default"].getComment(r,o),l=i&&i.parent||0,s={},d=void 0;switch(e.preventDefault(),e.stopPropagation(),s.display=this.display,n){case"fold":case"unfold":for(var f="fold"===n?I:U,p=C["default"].getComment(r,o,!0).replies,h=0;h<p.length&&o!==p[h];h++)s.display[p[h]]=this.editingCids.indexOf(p[h])<0?f:U;s.anchor=t.parentElement,t.parentElement&&(s.anchorYPos=t.parentElement.getBoundingClientRect().top);break;case"collapse":case"expand":var m="collapse"===n?I:U;s.display[o]=this.editingCids.indexOf(o)<0?m:U;break;case"upvote":case"downvote":var g=C["default"].getVote(r,o)||0,y="upvote"===n?g>0?0:1:0>g?0:-1;j["default"].vote(r,o,y);break;case"report":s.display.report=o;break;case"answer":C["default"].getEditing()?T["default"].showError(b["default"].get("Post").EditingAlert):j["default"].answer(r);break;case"delete":window.confirm(b["default"].get("Comment").DeleteConfirm)&&j["default"]["delete"](r,o);break;case"reply":case"edit":if(C["default"].getEditing())T["default"].showError(b["default"].get("Post").EditingAlert);else if("reply"===n)if(S["default"].isGuest())T["default"].showError(b["default"].get("Login").LoginFirst),s.loginForm=!0;else if("QReview"===a.kind&&!i&&a.replies.filter(function(e){return S["default"].getCurrent().uid===a.comments[e].by.split(" @")[1]}).length>0)T["default"].showError(b["default"].get("Comment").ReviewedAlert);else{var w=C["default"].getTempCommentId();j["default"].startEditing(r,w),j["default"].newReply(r,o),this._setEditingCids(w)}else d=c(t),j["default"].startEditing(r,o),s.editedContent=d.innerHTML,v["default"].prepare(d,i.content,!0),this._setEditingCids(o);break;case"cancel":d=c(t),this._finishEditing(d),C["default"].isTempCommentId(o)?j["default"].submitReply(r,l,""):d.innerHTML=this.state.editedContent;break;case"submit":d=c(t);var k=this.display.review.data?+this.display.review.data.rating:-1,E=this._finishEditing(d),_=M.findHttpImage(E);if(_)return v["default"].prepare(d,E,!0),void T["default"].showError(b["default"].get("Post").HttpImageFound.replace("${image}",_),10);E&&!d.textContent.match(/\S/)&&(E=d.innerHTML=""),k>0&&!E&&(k=0);var P=E!==i.content||k>=0&&k!==i.rating;k>=0&&P&&(E={content:E,rating:k}),C["default"].isTempCommentId(o)?j["default"].submitReply(r,l,E):P&&j["default"].updateComment(r,o,E);break;case"switch":d=c(t),v["default"].toggle(d)}this.setState(s)}},{key:"render",value:function(){var e=this,t=S["default"].getPermissions(),n=this._getPost(),a=_["default"].getHub(),r=a.hide,o=n.commentCount||0,i=this.state.display.count,l=this._commentAction.bind(this),u=n.answers&&n.answers.length||0,c=p["default"].createElement("b",null,M.getCountString(u,"Comment","PluralAnswerCount")),d="Question"!==n.kind?null:p["default"].createElement("div",{className:"comments-count"},p["default"].createElement("span",{className:"count"},this.props.additionalCount>=u?c:p["default"].createElement("a",{href:"/"+n.hub+"/*"+n.pid,onClick:s},c)),t.post?p["default"].createElement("span",{className:"buttons"}," ",p["default"].createElement("a",{href:"#",onClick:l,"data-action":"answer"},b["default"].get("Button_Post").Answer)):null),f=null;if("QReview"===n.kind){var h=n.reviewCount||0,m=" ("+M.getCountString(h,"Comment","PluralReviewCount")+")";f=p["default"].createElement("span",{className:"review"},m)}var g=this.state.loginForm?p["default"].createElement(R.LoginForm,{formHandler:function(){return e.setState({loginForm:!1})}}):null,v=i>=o?null:this.props.autoLoad&&i<3*this.props.pageSize?p["default"].createElement("div",{id:"bottom"},p["default"].createElement("div",{className:"spinner"})):p["default"].createElement("div",{className:"more-comments buttons"},p["default"].createElement("a",{href:"#",onClick:this._clickMoreComments.bind(this),"data-action":"-",ref:"moreCmt"},b["default"].get("Comment").MoreComments.replace("${pagesize}",this.props.pageSize)),p["default"].createElement("div",{className:"spinner"}));return n.draft||"p:draft"===a.distinct||r&&(r.comments||r.all)?p["default"].createElement("p",null):p["default"].createElement("div",{className:"card gray"},p["default"].createElement("section",{ref:"comments",className:"comments wrap"},d,p["default"].createElement("div",{className:"comments-count"},p["default"].createElement("a",{name:"c0"}),p["default"].createElement("span",{className:"count"},M.getCountString(o,"Comment","PluralCount")),f,t.comment||S["default"].isGuest()?p["default"].createElement("span",{className:"buttons"}," ",p["default"].createElement("a",{href:"#",onClick:l,"data-action":"reply"},b["default"].get("Button_Post")[f?"Review":"Comment"])):null),g,p["default"].createElement(B,{post:n,display:this.state.display,replies:n.replies,handler:l}),v))}}]),t}(p["default"].Component);n["default"]=q},{"../actions/HeaderActionCreators":3,"../actions/PageActionCreators":5,"../actions/PostActionCreators":6,"../stores/PageStore":24,"../stores/PostStore":25,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/state":28,"./HubPostForm.react":16,"./PageForm.react":18,"./PostUtils.react":21,react:"react","react-dom":"react-dom",twincled:"twincled"}],13:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigForm=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function E(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:E(r,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},u=e("react"),c=a(u),d=e("twincled"),f=a(d),p=e("../utils/dictionary"),h=a(p),m=e("../utils/webapi"),g=e("../stores/PageStore"),v=a(g),y=e("../stores/UserStore"),b=a(y),w=e("./HubForm.react"),k=a(w);n.ConfigForm=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=h["default"].get("HubConfig"),i=v["default"].getHub(),l=b["default"].getPermissions(),s=(i.blocks&&i.blocks.top||[]).concat(""),u=(i.blocks&&i.blocks.right||[]).concat("");return n._menu=[{id:"basic",name:a.Basic},{id:"subhub",name:a.Subhubs},{id:"block",name:a.Blocks}],"~"===i.hid.charAt(0)&&i.hid.indexOf("/")<0&&n._menu.push({id:"member",name:a.Members}),e.authorPage&&(s=[],u=[n.props.authorPage.about||""],n._menu=[{id:"about",name:h["default"].get("HubBlock").About}]),n.state={current:0,newhub:!1,children:i.children.slice(),removeMembers:[],blocks:{top:s.length,right:u.length,edit:-1,all:s.concat(u)}},(i.leaf&&!l._newhub||i.nonpublic&&!l._admin)&&n._menu.splice(1,1),n}return i(t,e),l(t,[{key:"disableSubmitButton",value:function(){var e=this._menu[this.state.current];return("block"===e.id||"about"===e.id)&&this.state.blocks.edit>=0}},{key:"_clickCaptionHandler",value:function(e){var t=e.target,n=t.getAttribute("data-action");e.preventDefault(),this.setState({current:+n,newhub:!1})}},{key:"_clickNewhubHandler",value:function(e){e.preventDefault(),this.setState({newhub:!0})}},{key:"_clickEditHandler",value:function(e){var t=e.target,n=+t.getAttribute("data-edit"),a=this.state.blocks;if(e.preventDefault(),a.edit>=0){var r=a.all[a.edit]=f["default"].finish(this.refs["edit"+a.edit]);"<"===r.charAt(0)&&(a.all[a.edit]=this.refs["edit"+a.edit].innerHTML="")}a.edit=n===a.edit?-1:n,a.edit>=0&&f["default"].prepare(this.refs["edit"+a.edit],a.all[a.edit],!0),this.setState({blocks:a})}},{key:"_changeOrderHandler",value:function(e){var t=e.target,n="up"===t.getAttribute("data-action"),a=this.refs.order.selectedIndex,r=this.state.children.slice();if(e.preventDefault(),!(n?1>a:0>a||a>=r.length-1)){var o=n?a-1:+a;r.splice(o,2,r[o+1],r[o]),this.refs.order.selectedIndex=n?o:o+1,this.setState({children:r})}}},{key:"_clickMemberHandler",value:function(e){var t=e.target,n=t.getAttribute("data-member"),a=this.state.removeMembers,r=a.indexOf(n);r>=0?a.splice(r,1):a.push(n),e.preventDefault(),this.setState({removeMembers:a})}},{key:"formElement",value:function(){var e=this,t=h["default"].get("HubConfig"),n=t.BasicFields.split("|"),a=t.FieldHints.split("\n"),r=t.MoreFields.split("|"),o=t.SubhubHints.split("\n"),i=v["default"].getHub(),l=b["default"].getPermissions(),s=this._clickCaptionHandler.bind(this),u=this._changeOrderHandler.bind(this),d=this._clickEditHandler.bind(this),p=this._menu[this.state.current].id,g=this._menu.map(function(e,t){return c["default"].createElement("span",{key:t},e.id===p?c["default"].createElement("span",null,e.name):c["default"].createElement("a",{href:"#",onClick:s,"data-action":t},e.name))}),y=this.state.blocks,w=function(e,n){return c["default"].createElement("div",null,c["default"].createElement("input",{name:"block"+n,type:"hidden",value:e}),c["default"].createElement("a",{href:"#","data-edit":n,onClick:d},y.edit===n?t.EditFinish:t.EditBlock),c["default"].createElement("hr",null),c["default"].createElement("div",{ref:"edit"+n,dangerouslySetInnerHTML:{__html:f["default"].toHTML(e)}}))},k=[];switch(p){case"basic":k=[[n[0],i.hid],[c["default"].createElement("em",null,n[1]),c["default"].createElement("input",{key:"b1",name:"name",type:"text",defaultValue:i.name,required:!0})],[n[2],c["default"].createElement("input",{key:"b2",name:"nameAsParent",type:"text",placeholder:a[0],defaultValue:i.nameAsParent})],[n[3],c["default"].createElement("input",{key:"b3",name:"note",type:"text",defaultValue:i.note})],[n[4],c["default"].createElement("input",{key:"b4",name:"hubtenders",type:"text",placeholder:a[1],defaultValue:i.hubtenders&&i.hubtenders.map(function(e){return e.split(" @")[1]}).join(", ")})],[n[5],c["default"].createElement("label",null,c["default"].createElement("input",{key:"b5",name:"membersOnly",type:"checkbox",value:"true",defaultChecked:i.membersOnly}),c["default"].createElement("span",null," "+a[2]))]],i.leaf&&k.splice(2,1),l._owner||k.splice(-2,1),"~"!==i.hid.charAt(0)&&k.splice(-1,1);break;case"subhub":var E=this.state.children;k=this.state.newhub?[[null,c["default"].createElement("span",{className:"newhub-note"},t.NewHubNote)],[c["default"].createElement("em",null,n[0]),c["default"].createElement("input",{key:"s1",name:"newChild",type:"text",placeholder:o[0],defaultValue:"",required:!0})],[c["default"].createElement("em",null,n[1]),c["default"].createElement("input",{key:"s2",name:"newName",type:"text",placeholder:o[1],defaultValue:"",required:!0})],[r[0],c["default"].createElement("input",{key:"s3",name:"newDependency",type:"text",placeholder:o[2],defaultValue:""})],[r[1],c["default"].createElement("label",null,c["default"].createElement("input",{key:"s4",name:"nonpublic",type:"checkbox",value:"true",defaultChecked:null}),c["default"].createElement("span",null," "+o[3]))]]:[[c["default"].createElement("div",{className:"move"},c["default"].createElement("a",{href:"#",onClick:u,"data-action":"up"},t.MoveUp),c["default"].createElement("br",null),c["default"].createElement("a",{href:"#",onClick:u,"data-action":"down"},t.MoveDown),c["default"].createElement("input",{name:"childrenOrder",type:"hidden",value:E.map(function(e){return e.hid}).join(" ")})),c["default"].createElement("select",{ref:"order",size:E.length||1},E.map(function(e,t){return c["default"].createElement("option",{key:t,value:e.hid},e.name)}))],[l._newhub?c["default"].createElement("a",{href:"#",onClick:this._clickNewhubHandler.bind(this)},t.NewHub):null,null]],i.leaf&&!this.state.newhub&&k.splice(0,1);break;case"block":k=y.all.map(function(e,t){return[null,w(e,t)]}),k.splice(y.top,0,[r[3],c["default"].createElement("input",{name:"blocksTop",type:"hidden",value:y.top})]),k.splice(0,0,[r[2],c["default"].createElement("input",{name:"blocksRight",type:"hidden",value:y.right})]);break;case"member":"members"in this.state?!function(){var n=e._clickMemberHandler.bind(e),a=e.state.removeMembers,r=e.state.members.map(function(e){return e.split(" @")}).map(function(e,t){return c["default"].createElement("li",{key:t,className:a.indexOf(e[1])>=0?"remove":null},c["default"].createElement("span",null,c["default"].createElement("span",{"data-member":e[1],onClick:n}),c["default"].createElement("a",{href:"/@"+e[1]},e[0])))});k=[[c["default"].createElement("input",{name:"removeMembers",type:"hidden",value:a.join(" ")}),c["default"].createElement("ul",{className:"members"},r)],[null,c["default"].createElement("textarea",{name:"newMembers",rows:"3",placeholder:t.NewMembers})]]}():(0,m.checkId)({hid:i.hid,members:1},function(t){return e.setState({members:t&&t.members?t.members:[]})});break;case"about":k=[[c["default"].createElement("div",null,c["default"].createElement("span",null,t.AboutMe),c["default"].createElement("input",{name:"authorPage",type:"hidden",value:"1"})),w(y.all[0],0)]]}return this.htmlTable(k,g)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"popup hub-config"},s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(k["default"])},{"../stores/PageStore":24,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/webapi":29,"./HubForm.react":14,react:"react",twincled:"twincled"}],14:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("react"),u=a(s),c=e("../utils/dictionary"),d=a(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"htmlTable",value:function(e,t){var n=e.map(function(e,t){var n=e.length>1?e.map(function(t,n){return u["default"].createElement("td",{key:n,className:n?null:"field-name"},e[n])}):u["default"].createElement("td",{colSpan:"2"},e[0]),a=null===e[0]?"hidden":null;return u["default"].createElement("tr",{key:t,className:a},n)});return u["default"].createElement("table",null,t?u["default"].createElement("caption",null,t):null,u["default"].createElement("tbody",null,n))}},{key:"formAction",value:function(){return null}},{key:"formElement",value:function(){return this.htmlTable([[u["default"].createElement("em",null,"Name"),u["default"].createElement("input",{type:"text",name:"name",required:!0})],["Age",u["default"].createElement("label",null,u["default"].createElement("input",{type:"checkbox",name:"age",value:"18+"})," I am over 18")]],"Sample Form")}},{key:"buttons",value:function(){return[d["default"].get("Button_Form").Submit,d["default"].get("Button_Form").Cancel]}},{key:"disableSubmitButton",value:function(){return!1}},{key:"handleEscKey",value:function(e){"Escape"===e.key&&this.props.formHandler()}},{key:"_actionHandler",value:function(e){var t=e.target,n=t.getAttribute("data-action"),a=this.props.formHandler||this.formHandler;if(e.preventDefault(),"cancel"===n)a(t,null);else{if(this.disableSubmitButton())return;if("ok"===n||"edit"===n){var r=e.target.previousSibling;r.click()}else if("submit"===n){for(var o=e.target,i="function"==typeof o.checkValidity,l={},s=0;s<o.elements.length;s++){var u=o.elements[s],c=i?!u.checkValidity():u.hasAttribute("required")&&!u.value;if(c)return void u.focus();u.name&&("radio"!==u.type&&"checkbox"!==u.type||u.checked)&&(l[u.name]=u.value)}a(o,l),this.formAction()&&o.submit()}}}},{key:"render",value:function(){var e=this._actionHandler.bind(this),t=this.buttons(),n=t[0]||t[1]?u["default"].createElement("div",{className:"buttons"},u["default"].createElement("input",{type:"submit",className:"hidden-submit"}),t[0]?u["default"].createElement("a",{href:"#",onClick:e,"data-disabled":this.disableSubmitButton()||null,"data-action":t[0]===d["default"].get("Button_Form").Edit?"edit":"ok"},t[0]):null,t[1]?u["default"].createElement("a",{href:"#",onClick:e,"data-action":"cancel"},t[1]):null):null;return u["default"].createElement("form",{className:"form",onSubmit:e,"data-action":"submit",method:"POST",action:this.formAction()},this.formElement(),n)}}]),t}(u["default"].Component);n["default"]=f},{"../utils/dictionary":27,react:"react"}],15:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=e("react"),d=r(c),f=e("twincled"),p=r(f),h=e("../utils/dictionary"),m=r(h),g=e("../utils/state"),v=a(g),y=e("../stores/PageStore"),b=r(y),w=e("../stores/PostStore"),k=r(w),E=e("../stores/UserStore"),_=r(E),P=e("../actions/PostActionCreators"),C=r(P),O=e("../actions/PageActionCreators"),S=r(O),H=e("../actions/HeaderActionCreators"),j=r(H),A=e("./PostUtils.react"),x=a(A),N=e("./PostRich.react"),T=e("./PageForm.react"),L=e("./HubPostForm.react"),M=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={expand:0,report:0,remark:0,remarkList:!1,review:!1,stats:!1,imageUpload:!1,moreEdit:!1,publish:!1,move:!1},n.data={},n}return l(t,e),u(t,[{key:"_getPost",value:function(){return k["default"].getPost(this.props.pid)}},{key:"_isEditing",value:function(){return k["default"].getEditing()===this.props.pid}},{key:"_findArticleElements",value:function(){var e=this.refs.post,t=e.getElementsByTagName("article"),n=e.getElementsByClassName("post-title"),a=e.getElementsByClassName("post-url");return[t[0].lastElementChild,n[0],a[0]&&a[0].lastElementChild]}},{key:"componentDidMount",value:function(){var e=this,t=this._getPost(),n=b["default"].getURL(),a=n.match(new RegExp("/\\*"+this.props.pid+"\\b"));if(a&&!function(){var e=t.by.slice(t.by.indexOf(" @")+1),a=n.split("/*")[0].slice(1),r=a===t.hub||a===e,o="/"+(r?a:t.hub)+"/*"+t.pid+(t.pathPart?"/"+t.pathPart:"")+(n.indexOf("?")>=0?n.slice(n.indexOf("?")):"");n!==o&&setTimeout(function(){return S["default"].setURL(o)},0)}(),t.draft&&this._clickHandler({_action:"edit"}),this.props.additional&&a){var r=k["default"].getPostState(this.props.pid),o=function(){return e.refs.post.scrollIntoView(),S["default"].noScroll()};r.scrolled||setTimeout(o,0),r.scrolled=!0}x.isLocalhost()||(0,T.initFacebookSDK)(),window.FB&&window.FB.XFBML.parse()}},{key:"_clickHandler",value:function(e){var t=this,n=e.target,a=this._getPost(),r=a.pid,o=e._action||n.getAttribute("data-action"),i={},l=void 0;e.preventDefault&&e.preventDefault();var u=function(){switch(o){case"upvote":case"downvote":case"bookmark":if(_["default"].isGuest())j["default"].showError(m["default"].get("Login").LoginFirst),i.loginForm=+(n.getAttribute("data-row")||1);else if("bookmark"===o)C["default"].bookmark(r,k["default"].getBookmark(r)?0:1);else{var e=k["default"].getVote(r)||0,s="upvote"===o?e>0?0:1:0>e?0:-1;C["default"].vote(r,0,s)}break;case"collect":var u=m["default"].get("Post").UncollectConfirm;a.collectDate&&"p"!==b["default"].getHubDistinctType()&&!window.confirm(u)||C["default"].collect(r,a.collectDate?0:1),i.expand=0;break;case"delete":window.confirm(m["default"].get("Post").DeleteConfirm)&&C["default"]["delete"](r),i.expand=0;break;case"report":i.report=+(n.getAttribute("data-row")||1);break;case"proremark":case"conremark":i.remark=+(n.getAttribute("data-row")||1);break;case"publish-draft":i.publish=!t.state.publish;break;case"move":i.move=!t.state.move;break;case"stats":i.stats=!t.state.stats;break;case"expand":case"back":i.expand=t.state.expand?0:1;break;case"image":if(!("FormData"in window)){j["default"].showError(m["default"].get("Post").ImageUploadNotSupported);break}i.imageUpload=!t.state.imageUpload&&+(n.getAttribute("data-row")||1);break;case"more":i.moreEdit=!t.state.moreEdit;break;case"edit":if(k["default"].getEditing()){j["default"].showError(m["default"].get("Post").EditingAlert);break}l=t._findArticleElements(),C["default"].startEditing(r),i={report:0,remark:0,remarkList:!1,stats:!1,originalContents:l.map(function(e){return e&&e.innerHTML})},l.slice(1).forEach(function(e){return e&&(e.contentEditable="true")});var c=x.getDefaultSummary(a.content),d={url:a.url,pathPart:a.pathPart,thumbnail:a.thumbnail,thumbnailValid:!0,images:a.images,tags:a.tags||"",summary:a.summary===c?"":a.summary||"",defaultSummary:c};"Review"===a.kind&&(d.rating=a.rating),t.data=d,a.richPlayers&&(l[0].innerHTML=p["default"].toHTML(a.content)),p["default"].prepare(l[0],a.content,!0);break;case"cancel":l=t._findArticleElements(),p["default"].finish(l[0]),l.forEach(function(e,n){e&&(n&&(e.contentEditable="false"),e.innerHTML=t.state.originalContents[n])}),C["default"].startEditing(null),i.review=i.imageUpload=i.moreEdit=i.publish=i.move=!1,t.data={},a.draft&&"Answer"===a.kind&&C["default"].answer(null);break;case"publish-newpost":case"save-draft":case"submit":if(l=t._findArticleElements(),l[1]&&!l[1].textContent)return j["default"].showError(m["default"].get("Post").EmptyTitleAlert),l[1].focus(),{v:void 0};if(t.data.thumbnail&&!t.data.thumbnailValid)return j["default"].showError(m["default"].get("Post").InvalidThumbnail),{v:void 0};var f=p["default"].finish(l[0]),h=x.findHttpImage(f);if(h)return p["default"].prepare(l[0],f,!0),j["default"].showError(m["default"].get("Post").HttpImageFound.replace("${image}",h),10),{v:void 0};var g=!l[0].textContent.match(/\S/),v=l.slice(1).map(function(e){return e&&(e.contentEditable="false")&&(e.innerHTML=e.textContent)}),y=v.filter(function(e,n){return e!==t.state.originalContents[n+1]}).length>0,w=t.data;if(a.draft&&g)return{v:void 0};if(a.richPlayers&&f===a.content&&(l[0].innerHTML=t.state.originalContents[0]),f&&g&&(f=l[0].innerHTML=""),!f&&a.draft||C["default"].startEditing(null),w.summary||(w.summary=x.getDefaultSummary(f)),w.tags&&(w.tags=(w.tags.toLocaleLowerCase().match(/\S+/g)||[]).join(" ")),w.pathPart&&(w.pathPart=w.pathPart.toLocaleLowerCase().replace(/[ -,.\/:-@]/g,"")),
w.images&&(w.images=w.images.filter(function(e){return f.indexOf("](/img/"+r+"-"+e+")")>0})),i.review=i.imageUpload=i.moreEdit=i.publish=i.move=!1,y||f!==a.content||w.url!==a.url||w.tags!==a.tags||w.pathPart!==a.pathPart||w.thumbnail!==a.thumbnail||w.summary!==a.summary||a.draft||"Review"===a.kind&&w.rating!==a.rating){var E={title:v[0],content:f,summary:w.summary,tags:w.tags,pathPart:w.pathPart,thumbnail:w.thumbnail,images:w.images};v[1]&&(E["Link"===a.kind?"url":"target"]=v[1]),w.url&&(E.url=w.url),w.rating&&(E.rating=+w.rating),a.secondHub&&(E.secondHub=a.secondHub),a.draft?(E.pid=a.pid,E.hub="save-draft"===o?"draft":a.hub||b["default"].getHub().hid,E.kind=a.kind,a.replyTo&&(E.replyTo=a.replyTo),C["default"].createPost(E)):C["default"].updatePost(r,E)}}}();return"object"===("undefined"==typeof u?"undefined":s(u))?u.v:void this.setState(i)}},{key:"_clickRatingHandler",value:function(){var e=this._getPost().kind;!this._isEditing()||"QReview"!==e&&"Review"!==e||this.setState({review:!this.state.review})}},{key:"_postStatsFormHandler",value:function(){this.setState({stats:!1})}},{key:"_reportFormHandler",value:function(e,t){this.setState({report:0}),t&&C["default"].report(this._getPost().pid,0,t)}},{key:"_remarkFormHandler",value:function(e,t){this.setState({remark:0});var n=this.props.pid;t&&t.remark.match(/\S/)&&C["default"].remark(n,k["default"].getVote(n)>0,t.remark)}},{key:"_remarkCountHandler",value:function(e){e.preventDefault(),this.setState({remarkList:!this.state.remarkList})}},{key:"_insertImageHandler",value:function(e){var t=this._findArticleElements();this.setState({imageUpload:!1}),e&&p["default"].doCmd(t[0],"image",x.getImageUrl(this._getPost().pid,e))}},{key:"_publishFormHandler",value:function(e,t){if(this.setState({publish:!1}),t&&t.hid){var n=this._getPost();n.hub=t.hid,n.draft=!0,this._clickHandler({_action:"submit"})}}},{key:"_moveFormHandler",value:function(e,t){this.setState({move:!1,expand:0}),t&&t.hid&&C["default"].movePost(this._getPost().pid,t.hid)}},{key:"render",value:function(){var e=this,t=m["default"].get("Button_Post"),n=this._getPost(),a=n.kind,r=b["default"].getHub(),o=b["default"].getURL(),i=b["default"].getNow(),l=b["default"].atClientSide(),s=_["default"].getCurrent().uid,u=_["default"].getPermissions(),c=(0,N.expandRichSnippets)(p["default"].toHTML(n.content),n),f=k["default"].getBookmark(n.pid),h=k["default"].getRemark(n.pid),g=k["default"].getVote(n.pid),y=this.state.loginForm,w=this.state.report,E=this.state.remark,P=this.state.remarkList,C=this.state.review,O=this.state.stats,S=this.state.imageUpload,H=this.state.moreEdit,j=this.state.publish,A=this.state.move,M=this._isEditing(),F=this.state.expand,R=Boolean(n.restriction&&n.restriction.demoEdit),D=r.hide||{},I=n.by.split(" @"),U=I[1]===s,B=_["default"].isGuest(),q=+u._edit>0||U,$=+u.vote>0&&!U&&!h,V=/[?&]raw=1/.test(o),z=v.linkHandler,G=this._clickHandler.bind(this),K=this._postStatsFormHandler.bind(this),Y=this._reportFormHandler.bind(this),W=this._remarkFormHandler.bind(this),Q=this._clickRatingHandler.bind(this),X=this._insertImageHandler.bind(this),J=this._publishFormHandler.bind(this),Z=this._moveFormHandler.bind(this),ee=function(){return e.setState({moreEdit:!1})},te="p:draft"===r.distinct,ne=Boolean(n.draft)&&("p"!==b["default"].getHubDistinctType()||te),ae="number"==typeof this.props.additional,re=function(a){return M?[{action:"image",text:t.Image,pressed:S,show:q&&S!==3-a&&!navigator.userAgent.match(/android|iphone|ipad/i),row:a},{action:"more",text:t.More,pressed:H,show:2===a||ae},{action:"publish-draft",text:t.Publish,show:1===a&&te&&!ne},{action:"publish-newpost",text:t.Publish,show:!te&&ne},{action:"submit",text:t.Submit,show:!te&&!ne},{action:"save-draft",text:t.SaveDraft,show:ne||te},{action:"cancel",text:t.Cancel,show:!n.draft||e.props.additional},{action:"help",text:t.Help,show:!0,url:t.HelpLink,target:"help"}]:1===F?[{action:"collect",text:t.Collect,pressed:n.collectDate,show:+u._collect>0},{action:"delete",text:t.Delete,show:U||+u._delete>0},{action:"move",text:t.Move,show:1===a&&(U||+u._delete>0)&&!n.nonpublic&&"Answer"!==n.kind},{action:"stats",text:t.Stat,pressed:O,show:1===a&&u._admin&&!n.nonpublic},{action:"back",text:t.Back,show:!0}]:[{action:"edit",text:t.Edit,show:(q||R)&&!V},{action:"report",text:t.Report,show:0>g&&w!==3-a,row:a},{action:"proremark",text:t.Remark,pressed:h,show:g>0&&E!==3-a,row:a},{action:"conremark",text:t.Remark,pressed:h,show:0>g&&E!==3-a,row:a},{action:"bookmark",text:t.Bookmark,pressed:f,show:+u.bookmark>0||B,row:a},{action:"upvote",text:"+",title:t.Upvote,pressed:g>0,show:$||B,row:a},{action:"downvote",text:"-",title:t.Downvote,pressed:0>g,show:$||B,row:a},{action:"stats",text:t.Stat,pressed:O,show:1===a&&U&&!n.nonpublic},{action:"expand",text:t.More,show:U||+u._collect>0||+u._delete>0}]},oe=function(e){return D.buttons||D.all?null:d["default"].createElement("div",{className:"buttons"},re(e).filter(function(e){return e.show}).map(function(t){return d["default"].createElement("a",{key:t.id||t.action,href:t.url||"#",onClick:t.url?null:G,target:t.target||null,title:t.title||null,"data-action":t.action,"data-pressed":t.pressed||null,"data-row":t.row&&e},t.text)}))},ie=n.remarks.length,le=x.getCountString(ie,"Remark","PluralCount"),se=n.remarks.filter(function(e){return e.positive}).length,ue=P?d["default"].createElement("div",{className:"remark-list-box"},d["default"].createElement("div",null,x.getCountString(ie,"Remark","PluralProAndConCount").replace("${procount}",String(se)).replace("${concount}",String(ie-se))),d["default"].createElement("ul",null,n.remarks.map(function(e,t){return d["default"].createElement("li",{key:t,className:e.positive?"clearfix":"clearfix con"},e.content,d["default"].createElement("div",null,d["default"].createElement("a",{href:"/"+e.by.slice(e.by.indexOf(" @")+1),onClick:z},x.addBadge(e.by.slice(0,e.by.indexOf(" @")))),x.getAgeGauge(e.date,i,l)))}))):null,ce=ie?d["default"].createElement("div",{className:"post-remarks-count"},d["default"].createElement("a",{href:"#",onClick:this._remarkCountHandler.bind(this),"data-pressed":P||null},le),ue):null,de=D.buttons||D.all||n.draft?null:d["default"].createElement("div",{className:"post-score-box"+(P?" remark-list":"")},d["default"].createElement("span",{className:"post-scale"},x.getScale(n.upvote,n.downvote,n.collectDate&&"1")),n.upvote||n.downvote?d["default"].createElement("span",{className:"post-scale-value"},n.upvote+"-"+n.downvote):null,ce),fe=D.author||D.all?null:d["default"].createElement("div",{className:"post-author-box"},d["default"].createElement("div",null,d["default"].createElement("img",{className:"post-author-pic",src:x.getUserPicture(n.picture)})),d["default"].createElement("div",null,d["default"].createElement("a",{className:"post-author",href:"/@"+I[1],onClick:z},x.addBadge(I[0])),d["default"].createElement("br",null),x.getAgeGauge(n.date,i,l,m["default"].get("Age").Ago),n.update?d["default"].createElement("span",{className:"post-updated"}," ",x.getAgeGauge(n.update,i,l,m["default"].get("Age").Updated,!0)):null)),pe=x.getKind(a,this.data.rating||n.rating,n.reviewCount),he="Question"!==a&&"BlogPost"!==a?null:d["default"].createElement("h1",{className:"post-type-box"},d["default"].createElement("div",null,pe)),me=Math.floor(5*(n.rating||0)/(n.reviewCount||1)+.5)/10,ge=n.target||n.url,ve=ge?d["default"].createElement("div",{className:n.target?"post-url review post-tags":"post-url","data-editing":M||null},n.rating&&"QReview"===n.kind?d["default"].createElement("span",{className:"rating"},me+(Math.floor(me)===me?".0":"")):null,d["default"].createElement("span",{className:"stars",onClick:Q,"data-pressed":C||null},pe),d["default"].createElement("a",{href:n.url,target:"reflink","data-hint":ge},ge)):null,ye=y?d["default"].createElement(T.LoginForm,{formHandler:function(){return e.setState({loginForm:!1})}}):null,be=O?d["default"].createElement(L.PostStatsForm,{pid:n.pid,date:n.date,data:this.data,formHandler:K}):null,we=w?d["default"].createElement(L.ReportForm,{author:I,formHandler:Y}):null,ke=E?d["default"].createElement(L.RemarkForm,{vote:g,remark:h,formHandler:W}):null,Ee=C?d["default"].createElement(L.ReviewEditForm,{data:this.data,halfStar:!0,formHandler:Q}):null,_e=S?d["default"].createElement(L.ImageUploadForm,{data:this.data,pid:n.pid,formHandler:X}):null,Pe=H?d["default"].createElement(L.PostEditForm,{data:this.data,pid:n.pid,formHandler:ee}):null,Ce=j?d["default"].createElement(L.PublishForm,{kind:n.kind,formHandler:J}):null,Oe=A?d["default"].createElement(L.PublishForm,{kind:n.kind,move:!0,formHandler:Z}):null,Se="/"+r.hid+"?tag=",He="tags"in this.data?this.data.tags.toLocaleLowerCase():n.tags,je=(He&&He.match(/\S+/g)||[]).map(function(e,t){return d["default"].createElement("a",{href:Se+e,key:t,onClick:z},e)}),Ae=D.buttons||D.all||n.nonpublic||n.draft?null:d["default"].createElement("div",{className:"fb-like","data-href":m["default"].get("Site").Host+o.split("?")[0],"data-size":"small","data-layout":"button_count","data-action":"recommend","data-show-faces":"false","data-share":"true"});return d["default"].createElement("div",{className:"card"},d["default"].createElement("main",{ref:"post",className:"post wrap"+(this.props.additional?" additional":"")},oe(1),be,1===y?ye:null,1===w?we:null,1===E?ke:null,1===S?_e:null,ae?Pe:null,Ce,Oe,de,fe,he,this.props.additional&&"Answer"===n.kind||D.title||D.all?null:d["default"].createElement("h1",{className:"post-title","data-hint":m["default"].get("NewPost").TitleHint},n.title),ve,Ee,d["default"].createElement("article",{className:"text"},V?d["default"].createElement("pre",{className:"rawtext"},n.content):d["default"].createElement("div",{dangerouslySetInnerHTML:{__html:c}})),je.length?d["default"].createElement("div",{className:"post-tags"},je):null,ae?null:oe(2),2===y?ye:null,2===w?we:null,2===E?ke:null,2===S?_e:null,ae?d["default"].createElement("div",{className:"comment-separator"}):Pe,Ae))}}]),t}(d["default"].Component);n["default"]=M},{"../actions/HeaderActionCreators":3,"../actions/PageActionCreators":5,"../actions/PostActionCreators":6,"../stores/PageStore":24,"../stores/PostStore":25,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/state":28,"./HubPostForm.react":16,"./PageForm.react":18,"./PostRich.react":20,"./PostUtils.react":21,react:"react",twincled:"twincled"}],16:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return(t?[0]:[]).concat(e?[10,9,8,7,6,5,4,3,2,1]:[10,8,6,4,2]).map(function(e){return p["default"].createElement("option",{key:e,value:e},(Math.floor(e/2)||"")+(e%2?" ½":""))})}function u(e){var t=new Date(e);return t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2)}Object.defineProperty(n,"__esModule",{value:!0}),n.PostStatsForm=n.ImageUploadForm=n.HubList=n.PublishForm=n.RemarkForm=n.ReportForm=n.ReviewEditForm=n.PostEditForm=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function F(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:F(r,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)};n.getRatingOptions=s;var f=e("react"),p=r(f),h=e("../utils/dictionary"),m=r(h),g=e("../utils/webapi"),v=e("../utils/state"),y=a(v),b=e("../stores/PageStore"),w=r(b),k=e("../actions/HeaderActionCreators"),E=r(k),_=e("../actions/PostActionCreators"),P=r(_),C=e("./PostUtils.react"),O=e("./HubForm.react"),S=r(O),H=1e3,j=5,A=200,x=100,N=320,T=320,L=[[14,14],[30,29],[90,90]],M=(n.PostEditForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.maxSummaryLen=Math.floor(A/+m["default"].get("CharDensity")),n.summaryHint=n.props.data.defaultSummary||m["default"].get("Post").SummaryHint.replace("${maxsize}",n.maxSummaryLen),n}return l(t,e),c(t,[{key:"buttons",value:function(){return[m["default"].get("Button_Form").OK,null]}},{key:"_changeHandler",value:function(e){var t=e.target,n=t.name,a=t.value;"thumbnail"===n&&(this.props.data.thumbnailValid=!1),"tags"===n&&a.split(" ").length>j||"summary"===n&&a.length>this.maxSummaryLen||(this.props.data[n]=a,this.forceUpdate())}},{key:"_checkThumbnail",value:function(e){var t=e.target,n=m["default"].get("Post"),a=this.props.data.thumbnail;this.props.data.thumbnailValid||(a?a.match(/^\/|^https:/)?t.naturalWidth>N||t.naturalHeight>T?E["default"].showError(n.ThumbnailTooBig,5):this.props.data.thumbnailValid=!0:E["default"].showError(n.HttpImageFound.replace("${image}",a),5):this.props.data.thumbnailValid=!0)}},{key:"formElement",value:function(){var e=m["default"].get("Post"),t=e.TagsHint.replace("${maxsize}",j),n=this._changeHandler.bind(this),a=Math.min(100,Math.floor(100*this.props.data.summary.length/this.maxSummaryLen)),r=p["default"].createElement("div",{className:"flex-input"},p["default"].createElement("span",null,"*"+this.props.pid+"/"),p["default"].createElement("input",{name:"pathPart",type:"text",onChange:n,value:this.props.data.pathPart,placeholder:e.PathPartHint})),o=p["default"].createElement("div",{className:"summary-textarea"},p["default"].createElement("textarea",{name:"summary",onChange:n,value:this.props.data.summary,placeholder:this.summaryHint}),p["default"].createElement("div",{className:"length-meter"},p["default"].createElement("div",{style:{width:a+"%"}}))),i=this.props.data.thumbnail,l=p["default"].createElement("div",null,p["default"].createElement("input",{name:"thumbnail",type:"text",onChange:n,value:i,placeholder:e.ThumbnailHint}),i?[p["default"].createElement("br",{key:"1"}),p["default"].createElement("img",{key:"2",className:"post-thumbnail",src:i,onLoad:this._checkThumbnail.bind(this)})]:null);return this.htmlTable([[e.PathPart,r],[e.Thumbnail,l],[e.Tags,p["default"].createElement("input",{name:"tags",type:"text",onChange:n,value:this.props.data.tags,placeholder:t})],[e.Summary,o]])}},{key:"render",value:function(){return p["default"].createElement("div",{className:"popup editpost"},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(S["default"]),n.ReviewEditForm=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"buttons",value:function(){return[m["default"].get("Button_Form").OK,null]}},{key:"_changeHandler",value:function(e){var t=e.target;this.props.data[t.name]=t.value,this.forceUpdate(),this.props.formHandler&&"rating"===t.name&&this.props.formHandler(e)}},{key:"formElement",value:function(){var e=m["default"].get("NewPost"),t=this._changeHandler.bind(this),n=this.props.halfStar||this.props.data.rating%2===1,a=[];return this.props.data.rating>=0&&a.push([e.Rating,p["default"].createElement("div",null,p["default"].createElement("select",{name:"rating",onChange:t,value:this.props.data.rating},s(n,this.props.zeroStar))," ",e.RatingStars)]),"url"in this.props.data&&a.push([e.Link,p["default"].createElement("input",{name:"url",type:"text",onChange:t,value:this.props.data.url,placeholder:e.ReviewLinkHint})]),this.htmlTable(a)}},{key:"render",value:function(){return p["default"].createElement("div",{className:"popup review"},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(S["default"]),n.ReportForm=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"formElement",value:function(){var e=m["default"].get("Report"),t=p["default"].createElement("select",{name:"category",required:!0},e.TypeOptions.split("\n").map(function(e){var t=e.split(".")[0],n=e.slice(t.length+1);return p["default"].createElement("option",{key:t,value:t+". "+n},n)})),n=this.props.author,a=e.ReasonNote.replace("${name}",n[0]).replace("${id}",n[1]);return this.htmlTable([[e.Target,p["default"].createElement("a",{href:"/@"+n[1],onClick:y.linkHandler},n[0])],[p["default"].createElement("em",null,e.Type),t],[p["default"].createElement("em",null,e.Reason),p["default"].createElement("textarea",{name:"content",placeholder:a,required:!0})]],e.Caption)}},{key:"render",value:function(){return p["default"].createElement("div",{className:"popup report"},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(S["default"]),n.RemarkForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={remark:e.remark||""},n.maxRemarkLen=Math.floor(x/+m["default"].get("CharDensity")),n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.refs.remark.focus()}},{key:"_changeHandler",value:function(e){var t=e.target,n=t.value;"remark"===t.name&&n.length<=this.maxRemarkLen&&this.setState({remark:n})}},{key:"formElement",value:function(){var e=m["default"].get("Remark"),t=e[this.props.vote<0?"ConHint":"ProHint"].replace("${maxsize}",this.maxRemarkLen),n=this._changeHandler.bind(this),a=Math.min(100,Math.floor(100*this.state.remark.length/this.maxRemarkLen)),r=p["default"].createElement("div",{className:"remark-textarea"},p["default"].createElement("textarea",{name:"remark",ref:"remark",onChange:n,value:this.state.remark,placeholder:t,required:!0}),p["default"].createElement("div",{className:"length-meter"},p["default"].createElement("div",{style:{width:a+"%"}})));return this.htmlTable([[null,r]],e.Caption)}},{key:"render",value:function(){return p["default"].createElement("div",{className:"popup remark"},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(S["default"]),n.PublishForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={checking:!1,error:"",name:"",hid:""},n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.refs.hid.focus()}},{key:"disableSubmitButton",value:function(){return this.state.checking||this.state.error||!this.state.name}},{key:"_validateId",value:function(){var e=this,t=this.timeToValidate-new Date;if(this.state.checking){if(t>0)return setTimeout(function(){return e._validateId()},t);var n=m["default"].get("Publish"),a=this.state.hid;(0,g.checkId)({hid:a,edit:1},function(t){e.setState(t.hid?{checking:!1,hid:t.hid,name:t.names.join(w["default"].getHubTierSeparator()),error:t.can.post?t.skips&&t.skips.indexOf(e.props.kind)>=0?n.ErrorKind:"":n.ErrorPost}:{checking:!1,name:"",error:""})})}}},{key:"_prepareValidateId",value:function(e,t){var n=this;this.timeToValidate=+new Date+t,this.state.checking||setTimeout(function(){return n._validateId()},t),this.setState({checking:!0,hid:e,error:""})}},{key:"_changeHandler",value:function(e){var t=e.target,n=t.value;this._prepareValidateId(n,H)}},{key:"_chosenHandler",value:function(e){this._prepareValidateId(e.hid,0)}},{key:"formElement",value:function(){var e=m["default"].get("Publish"),t=this.state.checking?e.Checking:this.state.name||"-",n=this._chosenHandler.bind(this),a=p["default"].createElement(M,{chosenHandler:n});return this.htmlTable([[e.HubName,p["default"].createElement("span",null,p["default"].createElement("span",null,t),p["default"].createElement("em",{className:"error"},this.state.error))],[p["default"].createElement("em",null,e.HubId),p["default"].createElement("input",{name:"hid",ref:"hid",type:"text",onChange:this._changeHandler.bind(this),value:this.state.hid,placeholder:e.HubIdHint})],[e.PostOn,a]],this.props.move?e.CaptionMove:e.Caption)}},{key:"render",value:function(){return p["default"].createElement("div",{className:"popup publish hubblocks"},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(S["default"]),n.HubList=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hubListLevels:[]},n.hubListLevels=[],n.names=[],n}return l(t,e),c(t,[{key:"componentWillMount",value:function(){this.props.hub?("/"!==this.props.hub.hid&&(this.hubListLevels.push([this.props.hub]),this.setState({hubListLevels:this.hubListLevels})),this._populateHubs(this.props.hub)):this._checkId("/","Twincl")}},{key:"_checkId",value:function(e,t){var n=this;(0,g.checkId)({hid:e,children:1,readonly:1},function(e){e.name=t,n._populateHubs(e)})}},{key:"_populateHubs",value:function(e){if(this.setState({fromHid:e.hid}),e.children&&e.children.length){var t=e.children.slice();this.hubListLevels.push(t),this.setState({hubListLevels:this.hubListLevels}),"/"!==e.hid&&(this.names=this.names.concat(e.name),this.props.chosenHandler(e,this.names))}else this.props.chosenHandler(e,this.names.concat(e.name))}},{key:"_locateHubAndUpdateLevels",value:function(e){for(var t=0;t<this.hubListLevels.length;t++)for(var n=this.hubListLevels[t],a=0;a<n.length;a++)if(n[a].hid===e){var r=this.hubListLevels.length-t-1;return this.hubListLevels.splice(t+1,r),this.names.splice(this.names.length-r,r),this.setState({hubListLevels:this.hubListLevels}),n[a]}}},{key:"_clickHandler",value:function(e){var t=e.target,n=t.getAttribute("data-hub");e.preventDefault();var a=this._locateHubAndUpdateLevels(n);a&&(this.setState({fromHid:a.hid}),this.props.chosenHandler(a,this.names.concat(a.name)),a.leaf||this._checkId(n,a.name))}},{key:"render",value:function(){var e=this,t=this._clickHandler.bind(this),n=this.state.hubListLevels.map(function(n,a){var r=null,o=n.map(function(n){var a=e.names.indexOf(n.name)>=0||n.hid===e.state.fromHid,o=p["default"].createElement("span",{className:a?r="selected":null,"data-hub":n.hid,onClick:t},n.name);return[p["default"].createElement("span",null," "),p["default"].createElement("a",{href:"#",className:n.leaf?null:"parent"},o)]});return p["default"].createElement("div",{key:a,className:"hub-level"+(r?"":" selecting")},o)});return p["default"].createElement("div",{className:"hubs"},n)}}]),t}(p["default"].Component));n.ImageUploadForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={drop:0,file:null,progress:0,progressMax:1},n}return l(t,e),c(t,[{key:"_uploadHandler",value:function(e){e.image?(this.props.data.images||(this.props.data.images=[]),this.props.data.images.indexOf(e.image)<0&&this.props.data.images.push(e.image),this.props.formHandler(e.image)):(E["default"].showError(m["default"].get("ImageUpload").ImageUploadFail),this.setState({drop:0,file:null}))}},{key:"_draggingHandler",value:function(e){var t=this,n=void 0,a=void 0;if(e.preventDefault(),2!==this.state.drop){switch(e.type){case"dragover":n=1;break;case"dragenter":n=1;break;case"dragleave":n=0;break;case"drop":n=2;break;default:return}if(n!==this.state.drop&&(a="drop"===e.type&&e.dataTransfer&&e.dataTransfer.files[0]||null,a&&a.size>31457280&&(E["default"].showError(m["default"].get("ImageUpload").ImageTooBig),n=0,a=null),this.setState({drop:n,file:a}),a)){for(var r=this.refs.form.resize[1].checked?800:640,o=a.size*r,i=0;i<a.name.length;i++)o^=a.name.charCodeAt(i)<<8*(i%4);o=(4294967295&o|268435456).toString(16);var l={file:a,pid:this.props.pid,fid:o,resize:r},s=function(e){return t.setState({progress:e.loaded,progressMax:e.total})};P["default"].uploadImage(l,this._uploadHandler.bind(this),s)}}}},{key:"_clickHandler",value:function(e){var t=e.target;e.preventDefault(),this.props.formHandler(t.getAttribute("data-image"))}},{key:"render",value:function(){var e=this,t=m["default"].get("ImageUpload"),n=this._clickHandler.bind(this),a=this._draggingHandler.bind(this),r=this.state.file,o=this.props.data.images?this.props.data.images.map(function(t,a){return p["default"].createElement("input",{key:a,type:"image",className:"thumbnail",src:(0,C.getImageUrl)(e.props.pid,t),"data-image":t,onClick:n})}):null,i=p["default"].createElement("div",{className:"drop-border","data-dragging":this.state.drop?1:null},p["default"].createElement("div",{className:"drop-area"},r?r.name:t.DragHere,r?p["default"].createElement("progress",{value:this.state.progress,max:this.state.progressMax}):null)),l=[640,800].map(function(e){return p["default"].createElement("label",{key:e},p["default"].createElement("input",{name:"resize",type:"radio",value:e,defaultChecked:640===e})," ",e+t.ImagePixel," ")});return p["default"].createElement("div",{className:"popup image-upload",onDragEnter:a,onDragLeave:a,onDragOver:a,onDrop:a},p["default"].createElement("form",{className:"form",ref:"form"},o?p["default"].createElement("div",{className:"thumbnails"},o):null,i,p["default"].createElement("div",{className:"resize"},t.ImageResize,l)))}}]),t}(p["default"].Component),n.PostStatsForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={days:L[0][1]},n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data.stats;if(!(t&&t.update>+new Date-18e5)){var n=function(n){t||(t=e.props.data.stats={}),t.update=+new Date,t.rows=n&&n.rows||[],e.forceUpdate()};(0,g.getPostStats)(this.props.pid,n,function(){return n()})}}},{key:"buttons",value:function(){return[m["default"].get("Button_Form").Close,null]}},{key:"_selectHandler",value:function(e){var t=e.target;this.setState({days:+t.value})}},{key:"formElement",value:function(){var e=this,t=m["default"].get("PostStats"),n=this.props.data.stats;if(!n)return this.htmlTable([[null,t.Loading]],t.Caption);var a=+new Date,r=Math.max(a-864e5*this.state.days,1e3*this.props.date),o=u(r),i=n.rows.filter(function(e){return e[0]>=o}),l={},s={},c=0;i.forEach(function(e){l[e[0]]=+e[2]+(l[e[0]]||0),s[e[1]]=+e[2]+(s[e[1]]||0),c+=+e[2]});for(var d=function(e,t){return t>0?e.map(function(e,n){return p["default"].createElement("tr",{key:n},p["default"].createElement("td",{className:"entry"},e[0]),p["default"].createElement("td",{className:"count"},e[1]),p["default"].createElement("td",{className:e[1]?"bar":null},p["default"].createElement("div",{style:{width:Math.floor(1e3*e[1]/t)/10+"%"}}," ")))}):null},f=Object.keys(s).sort(function(e,t){return s[t]-s[e]}).map(function(e){return[e,s[e]]}),h=f[0]&&f[0][1],g=d(f,h),v=Math.floor((a-r)/864e5),y=15>=v?1:30>=v?2:7,b=[],w=+r;a>=w;w+=864e5*y){var k=u(w)+(y>1?" ~ "+u(w+864e5*(y-1)).slice(4):"");b.unshift([k,0]);for(var E=0;y>E;E++)b[0][1]+=l[u(w+864e5*E)]||0}var _=Math.max.apply(null,b.map(function(e){return e[1]})),P=d(b,_),C=L.map(function(n,a){return p["default"].createElement("label",{key:a},p["default"].createElement("input",{name:"days",type:"radio",value:n[1],defaultChecked:n[1]===e.state.days,onChange:e._selectHandler.bind(e)})," ",n[0]%7?n[0]+t.Days:n[0]/7+t.Weeks," ")});return this.htmlTable([[t.DateRange,p["default"].createElement("div",null,C)],[t.TotalPageviews,p["default"].createElement("div",{className:"total"},c)],[p["default"].createElement("table",{className:"bydate"},p["default"].createElement("tbody",null,P))],[p["default"].createElement("table",null,p["default"].createElement("tbody",null,g))]],t.Caption)}},{key:"render",value:function(){return p["default"].createElement("div",{className:"popup poststats"},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(S["default"])},{"../actions/HeaderActionCreators":3,"../actions/PostActionCreators":6,"../stores/PageStore":24,"../utils/dictionary":27,"../utils/state":28,"../utils/webapi":29,"./HubForm.react":14,"./PostUtils.react":21,react:"react"}],17:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.HubPosts=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("react"),u=a(s),c=e("fluent-js"),d=e("../utils/dictionary"),f=a(d),p=e("../stores/PageStore"),h=a(p),m=e("../stores/PostStore"),g=a(m),v=e("./PageHeader.react"),y=a(v),b=e("./HubPost.react"),w=a(b),k=e("./HubComment.react"),E=a(k),_="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js",P=n.HubPosts=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=g["default"].getPostList().some(function(e){return e.content&&e.content.indexOf("```")>=0});if(e){if(window.hljs)return this.componentDidUpdate();var t=document.createElement("script");t.onload=function(){return window.hljs.initHighlighting()},t.src=_,document.body.appendChild(t)}}},{key:"componentDidUpdate",value:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())}},{key:"render",value:function(){var e=g["default"].getIds(),t=e.length,n=e.map(function(e,n){return g["default"].hasPost(e)?[u["default"].createElement(w["default"],{key:n?e:0,pid:e,additional:t>1?n:null}),u["default"].createElement(E["default"],{key:n?e+"c":"c",pid:e,autoLoad:2>=t&&n===t-1,additional:t>1?n:null,additionalCount:t>1&&!n?t-1:null,pageSize:2>=t?h["default"].getPageSize():h["default"].getLessPageSize()})]:u["default"].createElement("div",{key:n,className:"wrap postlist"},u["default"].createElement("div",{className:"empty"},u["default"].createElement("br",null),f["default"].get("Select").Empty))});return u["default"].createElement("div",null,u["default"].createElement(y["default"],null),n)}}]),t}(u["default"].Component);n["default"]=(0,c.connectToStores)(u["default"],P,[g["default"]])},{"../stores/PageStore":24,"../stores/PostStore":25,"../utils/dictionary":27,"./HubComment.react":12,"./HubPost.react":15,"./PageHeader.react":19,"fluent-js":33,react:"react"}],18:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}function s(e,t,n){var a=t()-new Date;a>0?setTimeout(function(){return s(e,t,n)},a):(0,v.checkId)({id:e()},function(e){e&&_["default"].showError(g["default"].get("Account").IdInUse.replace("${id}",e)),n(e?"invalid":"valid")})}function u(){if("undefined"!=typeof window&&!window.FB){var e=document.querySelector('meta[property="fb:app_id"]').getAttribute("content"),t=function(){return window.FB.init({appId:e,cookie:!0,xfbml:!0,version:"v2.5"})};window.fbAsyncInit=function(){return setTimeout(t,0)},function(e,t,n){var a=void 0,r=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="https://connect.facebook.net/"+g["default"].get("Site").Lang+"/sdk.js",r.parentNode.insertBefore(a,r))}(document,"script","facebook-jssdk")}}function c(e,t,n){if("undefined"!=typeof window){var a=function(){return window.googleAuth2.attachClickHandler(e,{},t,n)};if(window.gapi&&window.googleAuth2)return a();window.gapiAsyncInit=function(){return window.gapi.load("auth2",function(){var e=document.querySelector('meta[property="google:client_id"]').getAttribute("content");window.googleAuth2=window.gapi.auth2.init({client_id:e,cookiepolicy:"single_host_origin"}),a()})};var r=document.createElement("script");r.src="https://apis.google.com/js/api:client.js?onload=gapiAsyncInit",document.body.appendChild(r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.LoginForm=n.DelayValidation=void 0;var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=function S(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:S(r,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)};n.validateId=s,n.initFacebookSDK=u,n.initGoogleAPI=c;var p=e("react"),h=r(p),m=e("../utils/dictionary"),g=r(m),v=e("../utils/webapi"),y=e("../utils/state"),b=a(y),w=e("../stores/PageStore"),k=r(w),E=e("../actions/HeaderActionCreators"),_=r(E),P=e("./HubForm.react"),C=r(P),O=n.DelayValidation=1e3;n.LoginForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={fb:{}},n}return l(t,e),d(t,[{key:"componentDidMount",value:function(){u(),c(this.refs.glogin,this._googleCheckLoginState.bind(this),function(e){return _["default"].showError(e&&e.reason)})}},{key:"buttons",value:function(){return[g["default"].get("Login").Login,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buttons",this).call(this)[1]]}},{key:"disableSubmitButton",value:function(){if(!this.state.fb.newUser)return!1;var e="valid"===this.state.check&&this.state.uid&&this.state.email;if(e&&this.refs.uid){var t=this.refs.uid.form.elements;t.password.value=[this.state.fb.token,t.uid.value,t.name.value,t.picture&&t.picture.checked?t.picture.value:"-",t.email?t.email.value:""].join("	")}return!e}},{key:"_clickHandler",value:function(e){e.preventDefault(),window.FB.login(this._fbCheckLoginState.bind(this),{scope:"public_profile,email"})}},{key:"_submitLoginForm",value:function(e,t){var n=this.refs.user.form;n.elements.user.value=e,n.elements.password.value=t,n.submit(),this.props.formHandler()}},{key:"_fbCheckLoginState",value:function(){var e=this;window.FB.getLoginStatus(function(t){if(e.setState({fb:{}}),"connected"===t.status){var n="fb#"+t.authResponse.userID,a=t.authResponse.accessToken;(0,v.checkId)({id:n},function(t){t?e._submitLoginForm(n,a):window.FB.api("/me?fields=id,name,email,picture,verified",function(t){e.setState({fb:t.verified?{newUser:t,id:n,token:a}:{notVerified:!0},uid:t.email?t.email.replace(/[^a-z0-9_@]|@.*/g,""):"fb_"+n.slice(3),email:t.email}),t.verified&&e._startValidation(0)})})}})}},{key:"_googleCheckLoginState",value:function(e){var t=this,n=e.getBasicProfile();this.setState({fb:{}});var a="gl#"+n.getId(),r=e.getAuthResponse().id_token,o=n.getEmail();(0,v.checkId)({id:a},function(e){e?t._submitLoginForm(a,r):(t.setState({fb:{newUser:{name:n.getName(),email:o,isGoogle:!0},id:a,token:r},uid:o.replace(/[^a-z0-9_@]|@.*/g,""),email:o}),t._startValidation(0))})}},{key:"_startValidation",value:function(e){var t=this;this.timeToValidate=+new Date+e,"validating"!==this.state.check&&setTimeout(function(){return s(function(){return t.state.uid},function(){return t.timeToValidate},function(e){return t.setState({check:e})})},e),this.setState({check:"validating"})}},{key:"_changeHandler",value:function(e){var t=e.target,n=t.name,a=t.value,r=g["default"].get("Account");if("uid"===n){if(a.match(/[^a-z0-9_]/))return _["default"].showError(r.BadUserId);this.setState({uid:a}),a&&this._startValidation(O)}else"email"===n&&this.setState({email:a})}},{key:"formAction",value:function(){return"/login"}},{key:"formElement",value:function(){var e=this,t=g["default"].get("Login"),n=g["default"].get("Account"),a=this.state.fb.newUser;if(a){var r=n.FormProfile.split("|"),o=this._changeHandler.bind(this),i=[[r[0],h["default"].createElement("span",{className:"check-input "+this.state.check},h["default"].createElement("input",{className:"fb-login-uid",ref:"uid",name:"uid",type:"text",value:this.state.uid,onChange:o}),h["default"].createElement("input",{name:"user",type:"hidden",value:this.state.fb.id}),h["default"].createElement("input",{name:"password",type:"hidden"}))],[r[1],h["default"].createElement("input",{name:"name",type:"text",defaultValue:a.name,placeholder:a.name})]];return a.isGoogle||i.push([r[2],h["default"].createElement("span",null,h["default"].createElement("input",{name:"picture",type:"checkbox",value:"fb",defaultChecked:!0})," ",h["default"].createElement("img",{src:a.picture.data.url}))]),a.email||i.push([r[4],h["default"].createElement("input",{name:"email",type:"email",value:this.state.email,onChange:o,required:!0})]),this.htmlTable(i,t.MyPreference)}var l=n.Register.split(" ")[0],s=n.Reset.split(" ")[0],u=k["default"].getURL(),c=u.slice(0,n.AccountPath.length+1)===n.AccountPath+"/"?"/?":u.indexOf("login=")>=0?u.replace(/login=.*/,""):u+(u.indexOf("?")>=0?"&":"?"),d=this.handleEscKey.bind(this),f=this._clickHandler.bind(this),p=function(t){e.props.formHandler(),b.linkHandler(t)},m=[[t.Account,h["default"].createElement("input",{ref:"user",name:"user",type:"text",onKeyUp:d,required:!0})],[t.Password,h["default"].createElement("input",{name:"password",type:"password",onKeyUp:d,required:!0})],[h["default"].createElement("div",{className:"register"},h["default"].createElement("a",{href:l,onClick:p},t.Register),h["default"].createElement("span",null," | "),h["default"].createElement("a",{href:s,onClick:p},t.ForgotPassword),h["default"].createElement("input",{name:"redirect",type:"hidden",value:c+"login="}))]];return h["default"].createElement("div",null,this.state.fb.notVerified?h["default"].createElement("div",{className:"fb-login-notverified",dangerouslySetInnerHTML:{__html:t.FacebookNotVerified}}):null,h["default"].createElement("div",{className:"fb-login-button"},h["default"].createElement("a",{href:"#",onClick:f},t.FacebookLogin)),h["default"].createElement("div",{className:"fb-login-button google"},h["default"].createElement("a",{name:"glogin",ref:"glogin"},t.GoogleLogin)),h["default"].createElement("div",{className:"fb-login-sep"},h["default"].createElement("span",null,t.LoginOr)),this.htmlTable(m))}},{key:"render",value:function(){return h["default"].createElement("div",{className:"popup login"},f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}(C["default"])},{"../actions/HeaderActionCreators":3,"../stores/PageStore":24,"../utils/dictionary":27,"../utils/state":28,"../utils/webapi":29,"./HubForm.react":14,react:"react"}],19:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.PageHeader=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=e("react"),c=r(u),d=e("fluent-js"),f=e("../utils/dictionary"),p=r(f),h=e("../utils/state"),m=a(h),g=e("../stores/UserStore"),v=r(g),y=e("../stores/HeaderStore"),b=r(y),w=e("../stores/PageStore"),k=r(w),E=e("../stores/PostStore"),_=r(E),P=e("../actions/HeaderActionCreators"),C=r(P),O=e("./PostUtils.react"),S=e("./PageForm.react"),H=["Posts","Drafts","Notes","Bookmarks","Membership","Profile","Logout"],j=n.PageHeader=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loginForm:!1},n}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=k["default"].getURL().indexOf("login=0")>0;e&&window.setTimeout(function(){return C["default"].showError(p["default"].get("Login").AuthFail)},0)}},{key:"_clickLogin",value:function(e){e.preventDefault(),this.setState({loginForm:!this.state.loginForm})}},{key:"render",value:function(){var e=this,t=p["default"].get("Account"),n=k["default"].getHub(),a=v["default"].getCurrent(),r=b["default"].getMessages(),o=b["default"].getErrors(),i=b["default"].isSpinning(),l="/"===n.hid,s=n.hide&&(n.hide.all||n.hide.title)&&_["default"].getPost()?n.links.concat(" "+_["default"].getPost().title):n.links;s.length>1&&"/~ "===s[0].slice(0,3)&&(s=s.slice(1));var u=s.map(function(e,t){var a=e.indexOf(" "),r=e.slice(0,a),o=e.slice(a+1),i=n.nonpublic&&t===s.length-1?c["default"].createElement("span",{className:"private"},p["default"].get("Page").Private):null;return c["default"].createElement("li",{key:t},r?c["default"].createElement("a",{className:"~"===r.charAt(1)?"group":null,href:r,onClick:m.linkHandler},o,i):o)}),d=l?null:c["default"].createElement("ul",null,u),f=H.map(function(e){return[t[e].slice(0,t[e].indexOf(" ")).replace("${uid}",a.uid),t[e].slice(t[e].indexOf(" ")+1)]});v["default"].isMember()||v["default"].fbConnected()?f.splice(f.length-3,1):f.splice(0,2),"undefined"!=typeof window&&(window.linkHandler=m.linkHandler);var h="<ul>"+f.map(function(e,t){return"<li><a "+(t===f.length-1?"":'onclick="linkHandler(event)" ')+'href="'+e[0]+'">'+e[1]+"</a></li>"}).join("")+"</ul>",g='<div class="header-user-menu dropdown-menu">\n<span tabindex="0" onclick="return true" class="needsclick">'+a.name+'</span>\n<div tabindex="0" onclick="return true"></div>'+h+"</div>",y=c["default"].createElement("ul",null,c["default"].createElement("li",{key:"0"},c["default"].createElement("img",{className:"header-user-pic",src:(0,O.getUserPicture)(a.picture)})),a.uid?c["default"].createElement("li",{key:"1",dangerouslySetInnerHTML:{__html:g}}):c["default"].createElement("li",{className:"login-link",key:"2"},c["default"].createElement("a",{href:"#",onClick:this._clickLogin.bind(this)},p["default"].get("Login").Login))),w=this.state.loginForm?c["default"].createElement("div",{className:"wrap"},c["default"].createElement(S.LoginForm,{formHandler:function(){return e.setState({loginForm:!1})}})):null;return c["default"].createElement("header",{className:"header"},c["default"].createElement("div",{className:"wrap nav"},c["default"].createElement("nav",{className:"header-hub-nav"},c["default"].createElement("div",{className:"header-logo"},c["default"].createElement("a",{href:"/",onClick:m.linkHandler},c["default"].createElement("img",{src:b["default"].getLogo()}))),d),c["default"].createElement("nav",{className:"header-user-nav"},y)),w,c["default"].createElement("div",{className:"message"},i?c["default"].createElement("div",{className:"spinner"}):null,o.length?c["default"].createElement("div",null,c["default"].createElement("div",{className:"error"},o.join("\n"))):null,r.length?c["default"].createElement("div",null,c["default"].createElement("div",null,r.join("\n"))):null))}}]),t}(c["default"].Component);n["default"]=(0,d.connectToStores)(c["default"],j,[v["default"],b["default"]])},{"../actions/HeaderActionCreators":3,"../stores/HeaderStore":23,"../stores/PageStore":24,"../stores/PostStore":25,"../stores/UserStore":26,"../utils/dictionary":27,"../utils/state":28,"./PageForm.react":18,"./PostUtils.react":21,"fluent-js":33,react:"react"}],20:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.data;if(t&&"object"===("undefined"==typeof t?"undefined":l(t))){for(var n=null,a=0;a<window.frames.length;a++)e.source===window.frames[a]&&(n=document.getElementsByTagName("iframe")[a]);if(n){var r=null;switch(t.command){case"init":var i=n.getAttribute("name").slice(3),s=i.split("-"),c=u["default"].getPost(s[0]),d=c&&c.richSnippets&&c.richSnippets[s[1]||0];d&&(r=o(d));break;case"ping":break;case"screen":switch(t.width&&n.setAttribute("width",String(t.width)),t.height&&n.setAttribute("height",String(t.height)),t.state){case"full":n.setAttribute("data-fullscreen","1");break;case"normal":n.removeAttribute("data-fullscreen")}break;default:return}n.contentWindow.postMessage({_id:t._id,data:r},"*")}}}function o(e){for(var t="> "===e.slice(0,2)?0:e.indexOf("\n> "),n={items:0>t?[{data:e}]:[]},a={},r=0;t>=0;r++){t+=2;for(var o=e.indexOf("\n",t),i=e.slice(t,o>=0?o:e.length).trim(),l=e.indexOf("\n> ",o),s=n.items[r]={},u=void 0;null!==(u=f.exec(i));)(u[1]?a:s)[u[2]]=u[3]?u[3].slice(1,-1):u[4];s.data=e.slice(o+1,l>=0?l:e.length),s.label&&(n[s.label]=s),t=l}return n.lang=document.documentElement.lang,n.item=n.items[0],n.items.forEach(function(e){return Object.assign(e,a)}),n}function i(e,t){var n=0;return e.replace(g,function(e,a,r){var o=(r.match(/\bdata-param="([^"]*)"/)||["",""])[1].replace(/&quot;/g,'"'),i=t.richPlayers&&t.richPlayers[a];if("test"===a&&(i=d["default"].getCurrent().uid!==t.by.split(" @")[1]?null:{url:(o.match(/\burl=(\S+)/)||[])[1]}),!i||!i.url||o.match(/\braw=1/))return e;var l=o.match(/\bheight=(\d+)\b/),s=l&&l[1]||m,u=t.pid+(n?"-"+n:""),c=i.url.indexOf("twincl.com/")>0?"":" allow-same-origin",f='<iframe name="tl-'+u+'" src="'+i.url+'" className="needsclick" height="'+s+'"'+(' sandbox="allow-scripts'+c+'" scrolling="no"></iframe>');if(h){var g=document.createElement("div");g.innerHTML=e,t.richSnippets||(t.richSnippets=[]),t.richSnippets[n]=g.childNodes[0].textContent}return n++,p||h?f:"** Your browser does not support sandbox iframe. **"})}Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.expandRichSnippets=i;var s=e("../stores/PostStore"),u=a(s),c=e("../stores/UserStore"),d=a(c);"undefined"!=typeof window&&(window.onmessage=r);var f=/(\*?)([\w-]+)=(?:('[^']*'|"[^"]*")|(\S+))(?:\s|$)/g,p="undefined"==typeof document,h=!p&&"sandbox"in document.createElement("iframe"),m="200",g=/<pre><code class="language-rich-([\w-]+)"([^>]*)>[\s\S]*?<\/code><\/pre>/g},{"../stores/PostStore":25,"../stores/UserStore":26}],21:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,a,r){if(!e)return null;var i=k["default"].get("Age"),l=n?new Date(6e4*Math.floor(e/60)).toLocaleString():null,s=Math.floor((t-e)/60),u=Math.floor(s/1440),c=Math.floor((s-1440*u)/60),d=Math.floor(u/365),f=Math.floor((u-365*d)/30),p=u-365*d-30*f,h=1>u?0:Math.log(u)/Math.LN10*2+1;f=f>=9?9:f>=6?6:f,u=5>u?u:u>=7&&10>u?7:u-u%5,c=6>c?c:c>=18?18:c-c%3,s-=s%(s>=15?15:5),h=h>10?10:Math.floor(h);var m=5>s?"< 5"+i.M:d?""+d+(d>1?i.Years:i.Year)+(3>d&&f>=3?""+i.Sep+(f-f%3)+i.Months:""):f?""+f+(f>1?i.Months:i.Month)+(3>f&&p>=10?""+i.Sep+(p-p%10)+i.Days:""):u?""+u+(u>1?i.Days:i.Day)+(3>u&&c>=6?""+i.Sep+(c-c%6)+i.H:""):c?""+c+i.H+(3>c&&s%60>=15?""+i.Sep+(s%60-s%15)+i.M:""):""+s+i.M;return a&&(m=a.replace("${age}",m)),l&&(l=l.replace(/(:\d\d):00/,"$1")),r&&(m="("+m+")"),r&&l&&(l="("+l+")"),b["default"].createElement("span",{title:l,className:"age age"+h,onClick:o},m)}function o(e){var t=e.target,n=t.title;t.title=t.textContent,t.textContent=n}function i(e,t){var n=e>t?e:t+3,a=(e-t)/n;return Math.floor(5*(a+.1))}function l(e,t){var n=i(e||0,t||0);return 0>n?"light"+-n:null}function s(e,t,n){var a=+e>0?+e:0,r=Math.floor(10*Math.log(a?a+.5:1)/Math.LN10),o=i(a,t||0),l=n>0?b["default"].createElement("span",{className:"post-collected"},n>1?b["default"].createElement("br",null):" "):null;if(!r&&!l)return null;var s="count"===n?P:"comment"===n?_:E,u=r%5,c=(r-u)/5,d=Math.floor(c/2),f=d?Array.apply(null,Array(d)).map(function(e,t){return b["default"].createElement("span",{key:t,className:t%2?null:"light-pair"},s+s)}):null,p=u?b["default"].createElement("span",{className:"ssize"+u},s):null,h="count"===n?null:("comment"===n?"dimc":"dim")+(0>o?5:5-o),m=t?a+"-"+t:a;return b["default"].createElement("span",{className:h,title:m},l,p,c%2?s:null,f)}function u(e,t,n){var a="posttype-"+e.toLowerCase();if("Review"===e||"QReview"===e&&t){t=Math.min(10,Math.floor(+(t||0)/(n||1)+.5));var r=new Array(Math.floor(t/2)+1).join(S),o=new Array(Math.floor(5-t/2)+1).join(H),i=t%2?b["default"].createElement("span",{className:"half-star"},H):null;return t||(o=""),"QReview"===e&&(a="posttype-review qreview"),i?b["default"].createElement("span",{className:a},r||null,i,o||null):b["default"].createElement("span",{className:a},r+o)}return"QPost"!==e||n?b["default"].createElement("span",{className:a}):null}function c(e){var t=new Array(Math.floor(e/2)+1).join(S),n=new Array(Math.floor(5-e/2)+1).join(H);return t+n}function d(e,t,n){var a=e>1?n:n.replace("Plural","Singular"),r=k["default"].get(t)[a]||k["default"].get(t)[n];return r.indexOf("${")>=0?r:e+r}function f(e){return e.indexOf("/")>=0?e:"#"===e.charAt(0)?"https://graph.facebook.com/"+e.slice(1)+"/picture?type=normal":"https://www.gravatar.com/avatar/"+e+"?d=identicon"}function p(e,t,n){var a=e.split(" ^");if(!a[1])return a[0];var r=k["default"].get("Badge"),o=n?b["default"].createElement("span",{className:"level"},"("+n+") "):null,i=a[1].split("^").map(function(e,n){var a=+e.charAt(0);if(a||t){var o=a?"":" status",i=a?r.Contributor.replace("${badge}",e):r[e.toUpperCase()];return e=a?(a>1?new Array(a).join(C):"")+(1===a?P:"")+("+"===e.charAt(e.length-1)?a>1?P:O:""):e,b["default"].createElement("span",{key:n,title:i,className:"author-badge"+o},e)}});return b["default"].createElement("span",null,b["default"].createElement("span",null,a[0]+" "),o,i)}function h(e){var t=Math.floor(j/+k["default"].get("CharDensity"));return e=e.replace(A,"$1"),e.length>t?e.slice(0,t)+"...":e}function m(e){var t=e.match(/!\[[^\[\]]*\]\((?!\/|https:)[^)]*\)/);return t?t[0]:null}function g(e,t){return"/img/"+e+"-"+t}function v(){return"undefined"!=typeof window&&"localhost"===window.location.hostname}Object.defineProperty(n,"__esModule",{value:!0}),n.getAgeGauge=r,n.getLightClass=l,n.getScale=s,n.getKind=u,n.getRatingStars=c,n.getCountString=d,n.getUserPicture=f,n.addBadge=p,n.getDefaultSummary=h,n.findHttpImage=m,n.getImageUrl=g,n.isLocalhost=v;var y=e("react"),b=a(y),w=e("../utils/dictionary"),k=a(w),E="❀",_="♣",P="♪",C="♫",O=".",S="★",H="☆",j=150,A=/!?\[([^\]]*)\]\([^\)]*\)/g},{"../utils/dictionary":27,react:"react"}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("fluent-js");n["default"]=new a.Dispatcher},{"fluent-js":33}],23:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.HeaderStore=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("../dispatcher/AppDispatcher"),u=a(s),c=e("fluent-js"),d={},f=[],p=[],h=!1,m={serverActionHandlers:{init:function(e){return d=e.header,f=[],p=[],h=!1,!1}},viewActionHandlers:{showMessage:function(e){f.push(e)},showError:function(e){p.push(e)},showSpinner:function(){h=!0},hideMessage:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},hideError:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},hideSpinner:function(){h=!1}}},g=n.HeaderStore=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getLogo",value:function(){return d.logo}},{key:"getMessages",value:function(){return f}},{key:"getErrors",value:function(){return p}},{key:"isSpinning",value:function(){return h}}]),t}(c.Store),v=new g(u["default"],m);n["default"]=v},{"../dispatcher/AppDispatcher":22,"fluent-js":33}],24:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.PageStore=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("fluent-js"),u=e("../dispatcher/AppDispatcher"),c=a(u),d=e("../utils/dictionary"),f=a(d),p=e("../stores/HeaderStore"),h=a(p),m=e("../stores/PostStore"),g=a(m),v=e("../stores/UserStore"),y=a(v),b={},w={},k={},E=null,_=" ≻ ",P={serverActionHandlers:{init:function(e){this.waitFor([h["default"],g["default"],y["default"]]),b=e,w=e.page||w,k=e.hub||k,E="post"===w.type&&e.posts&&e.posts[0]?e.posts[0].title:null},clientReady:function(){return w.serverSide?void(w.serverSide=!1):!1},receiveUpdatedHub:function(e){return e&&e.hid===k.hid?void(k=e):!1}},viewActionHandlers:{setURL:function(e){return w.url=e,history.replaceState(b,"",e),!1}}},C=n.PageStore=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getCurrentState",value:function(){return b}},{key:"getTitle",value:function(e,t){e||(e=k,t=E);var n=[f["default"].get("Site")["/"===e.hid?"Note":"Name"]],a=e.names&&e.names.join(_);return t&&n.unshift(t),a&&n.unshift(a),n.join(" - ")}},{key:"getURL",value:function(){return w.url}},{key:"getType",value:function(){return w.type}},{key:"getHub",value:function(){return k}},{key:"getHubDistinctType",value:function(){return k.distinct&&k.distinct.charAt(0)}},{key:"getHubTierSeparator",value:function(){return _}},{key:"getExtraConfig",value:function(){return w.extraConfig}},{key:"getPageSize",value:function(){return w.pageSize||0}},{key:"getLessPageSize",value:function(){return w.lessPageSize||0}},{key:"hasMore",value:function(){return w.more||!1}},{key:"getNow",value:function(){return w.serverSide&&w.now?w.now:Math.floor(new Date/1e3)}},{key:"atClientSide",value:function(){return!w.serverSide}}]),t}(s.Store),O=new C(c["default"],P);n["default"]=O},{"../dispatcher/AppDispatcher":22,"../stores/HeaderStore":23,"../stores/PostStore":25,"../stores/UserStore":26,"../utils/dictionary":27,"fluent-js":33}],25:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.PostStore=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=e("fluent-js"),c=e("../dispatcher/AppDispatcher"),d=a(c),f=e("../utils/dictionary"),p=a(f),h=e("../stores/UserStore"),m=a(h),g=[],v={},y={},b=0,w="00answer",k={serverActionHandlers:{init:function(e){return e.posts&&(g=e.posts,v={},g.forEach(function(e){return v[e.pid]=e}),y={},g.forEach(function(t,n){return y[t.pid]=e.votes&&e.votes[n]||{}})),v._editing=null,!1},receiveUpdatedPost:function(e){v[e.pid]=e},receiveUpdatedRemark:function(e,t){var n=v[e];if(!n)return!1;var a=m["default"].getCurrent(),r=n.remarks.filter(function(e){return e.by.slice(-a.uid.length-1)==="@"+a.uid})[0];r?n.remarks.splice(n.remarks.indexOf(r),1):n[t.positive?"upvote":"downvote"]+=+m["default"].getPermissions().vote,n.remarks.unshift(t),y[e].remark=t.content},receiveCreatedComment:function(e,t){var n=_.getComment(e,b,!0);n&&(k.viewActionHandlers.submitReply(e,n.cid||0,""),n.replies.indexOf(t.cid)<0&&(n.replies.unshift(t.cid),v[e].commentCount++,+t.rating>0&&(v[e].reviewCount++,v[e].rating+=t.rating)),v[e].comments[t.cid]=t)},receiveUpdatedComment:function(e,t){var n=t.cid,a=_.getComment(e,n);if(a){var r=v[e];t.rating!==r.comments[n].ratingBackup&&(r.reviewCount+=(t.rating>0?1:0)-(r.comments[n].ratingBackup>0?1:0),r.rating+=t.rating-r.comments[n].ratingBackup),r.comments[n]=t}}},viewActionHandlers:{bookmark:function(e,t){(y[e]?y[e]:y[e]={}).bookmark=t},vote:function P(e,t,n){var a=+m["default"].getPermissions().vote,r=_.getVote(e,t),o=t>0?v[e].comments[t]:v[e];if(o){r&&(o[r>0?"upvote":"downvote"]-=a),n&&(o[n>0?"upvote":"downvote"]+=a);var P=y[e]?y[e]:y[e]={};t>0?(P.upvotes=P.upvotes||[],P.downvotes=P.downvotes||[],P.upvotes.indexOf(t)>=0&&P.upvotes.splice(P.upvotes.indexOf(t),1),P.downvotes.indexOf(t)>=0&&P.downvotes.splice(P.downvotes.indexOf(t),1),n&&P[n>0?"upvotes":"downvotes"].push(t)):P.vote=n*a}},collect:function(e,t){v[e].collectDate=t?1:null},answer:function(e){if(e&&e in v){var t=m["default"].getCurrent();g.splice(1,0,v[w]={pid:w,draft:!0,hub:v[e].hub,kind:"Answer",replyTo:e,by:t.name+" @"+t.uid,picture:t.picture,title:v[e].title,commentCount:0,content:"",remarks:[],replies:[],comments:[]})}else!e&&w in v&&(delete v[w],g.splice(1,1))},startEditing:function(e,t){return v._editing=e&&"number"==typeof t?e+"."+t:e,!1},newReply:function(e,t){var n=!(t>0),a=n?v[e]:_.getComment(e,t);if(a){var r=m["default"].getCurrent(),o=b;a.replies.unshift(o),v[e].comments[o]={cid:o,by:r.name+" @"+r.uid,content:"",rating:0,parent:n?0:t,replies:[]}}},submitReply:function(e,t,n){var a=t>0?_.getComment(e,t):v[e];if(!n&&a){var r=b,o=a.replies.indexOf(r);o>=0&&a.replies.splice(o,1),delete v[e].comments[r]}},updateComment:function(e,t,n){var a=_.getComment(e,t);a&&t>0&&"object"===("undefined"==typeof n?"undefined":s(n))&&n.rating>=0&&(a.ratingBackup=a.rating,a.rating=n.rating)}}},E=n.PostStore=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"hasPost",value:function(e){return e in v}},{key:"getPost",value:function(e){return e?v[e]:g[0]}},{key:"getPostState",value:function(e){return v[e]&&(v[e]._state||(v[e]._state={}))}},{key:"getComment",value:function(e,t,n){var a=v[e]&&v[e].comments&&v[e].comments[t];return a&&n?a.parent>0?v[e].comments[a.parent]:v[e]:a}},{key:"getTempCommentId",value:function(){return b}},{key:"isTempCommentId",value:function(e){return e===b}},{key:"getIds",value:function(){return g.map(function(e){return e.pid})}},{key:"getPostList",value:function(){return g}},{key:"getEditing",value:function(){return v._editing}},{key:"getBookmark",value:function(e){return y[e]&&y[e].bookmark||!1}},{key:"getRemark",value:function(e){return y[e]&&y[e].remark}},{key:"getVote",value:function(e,t){var n=y[e];return n?t?(n.upvotes||[]).indexOf(+t)>=0?1:(n.downvotes||[]).indexOf(+t)>=0?-1:0:n.vote:0}},{key:"msgLeavingAlert",value:function(){return p["default"].get("Post").LeavingAlert}},{key:"msgLeavingConfirm",value:function(){return p["default"].get("Post").LeavingConfirm}}]),t}(u.Store),_=new E(d["default"],k);n["default"]=_},{"../dispatcher/AppDispatcher":22,"../stores/UserStore":26,"../utils/dictionary":27,"fluent-js":33}],26:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.UserStore=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=e("fluent-js"),u=e("../dispatcher/AppDispatcher"),c=a(u),d={},f={},p={serverActionHandlers:{init:function(e){return d=e.user||d,f=e.actions||f,!1},receiveUpdatedAccount:function(e){d=e}}},h=n.UserStore=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getCurrent",value:function(){return d}},{key:"isMember",value:function(){return d.memberUntil&&1e3*d.memberUntil>=+new Date||!1}},{key:"isGuest",value:function(){return!d.uid}},{key:"fbConnected",value:function(){return!!d.fbConnected}},{key:"getPermissions",value:function(){return f}}]),t}(s.Store),m=new h(c["default"],p);n["default"]=m},{"../dispatcher/AppDispatcher":22,"fluent-js":33}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={};n["default"]={get:function(e){return e?a[e]:a},set:function(e){
a=e}}},{}],28:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=b[e.page.url];return t&&t.page.time>=e.page.time?t:(b[e.page.url]=e,e)}function o(e){return e=r(e),history.replaceState(e,"",e.page.url),e}function i(e){if(r(g["default"].getCurrentState()),y["default"].getEditing()&&!window.confirm(y["default"].msgLeavingConfirm()))o(g["default"].getCurrentState());else if(e.state&&e.state.page){var t=r(e.state);f["default"].init(t),document.title=g["default"].getTitle()}}function l(e){var t=document.getElementById("_pst"),n=t;n&&(n.value=JSON.stringify(b)),y["default"].getEditing()&&(e.returnValue=y["default"].msgLeavingAlert())}function s(e){if(window.removeEventListener("beforeunload",l,!1),window.addEventListener("beforeunload",l,!1),!history||!history.pushState)return e;window.onpopstate=i;var t=document.getElementById("_pst"),n=t;return n.value.length&&!Object.keys(b).length&&(b=JSON.parse(n.value)),n.value="",o(e)}function u(e){if(history&&history.pushState){for(var t=e.target,n=void 0;t&&!(n=t.getAttribute("href"));)t=t.parentElement;n&&(e.preventDefault(),y["default"].getEditing()&&!window.confirm(y["default"].msgLeavingConfirm())||h["default"].loadURL(n))}}function c(e,t){g["default"].getURL()===e.page.url||t?history.replaceState(e,"",e.page.url):(o(g["default"].getCurrentState()),history.pushState(e,"",e.page.url)),r(e),f["default"].init(e),document.title=g["default"].getTitle(),"undefined"!=typeof window.ga&&(window.ga("set",{page:e.page.url,title:document.title}),window.ga("send","pageview"))}Object.defineProperty(n,"__esModule",{value:!0}),n.setPopstateHandler=s,n.linkHandler=u,n.changeState=c;var d=e("../actions/HubServerActionCreators"),f=a(d),p=e("../actions/PageActionCreators"),h=a(p),m=e("../stores/PageStore"),g=a(m),v=e("../stores/PostStore"),y=a(v),b={}},{"../actions/HubServerActionCreators":4,"../actions/PageActionCreators":5,"../stores/PageStore":24,"../stores/PostStore":25}],29:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,a,r,o){var i=k["default"].get("API"),l="File"in window&&n instanceof File,s=new XMLHttpRequest;s.onload=function(e){if(200!==s.status)_["default"].showError(i.ErrorCode.replace("${code}",s.status)),r&&r(e);else if(a){var t=void 0;try{t=JSON.parse(s.responseText)}catch(e){t={}}a(t)}},o&&s.upload.addEventListener("progress",o),s.onerror=r||function(){return _["default"].showError(i.NetworkError)},s.open(t||P.Get,"/api"+e,!0),l||s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(l?n:n?JSON.stringify(n):null)}function o(e,t,n){r("/posts",P.Post,e,t,n)}function i(e,t,n,a){r("/posts/"+e,P.Patch,t,n,a)}function l(e,t,n){r("/posts/"+e,P.Delete,null,t,n)}function s(e,t,n,a,o,i){var l=t>0?"/posts/"+e+"/comments/"+t+"/"+n:"/posts/"+e+"/"+n;r(l,P.Put,{value:a},o,i)}function u(e,t,n,a,o){"object"!==("undefined"==typeof n?"undefined":b(n))&&(n={parent:0,content:n}),n.parent=t>0?t:0,r("/posts/"+e+"/comments",P.Post,n,a,o)}function c(e,t,n,a,o){r("/posts/"+e+"/comments/"+t,P.Patch,n,a,o)}function d(e,t,n,a){r("/hubs/"+e,P.Patch,t,n,a)}function f(e,t,n,a,o){var i=t>0?"/posts/"+e+"/comments/"+t+"/reports":"/posts/"+e+"/reports";r(i,P.Post,n,a,o)}function p(e,t,n){r("/pages"+e,P.Get,null,t,n)}function h(e,t,n){var a=Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&");r("/check?"+a,P.Post,null,t,n)}function m(e,t,n){r(e.action?"/action":"/account",e.action?P.Post:P.Patch,e,t,n)}function g(e,t,n){r("/payment",P.Post,e,t,n)}function v(e,t,n,a){var o=Object.keys(e).filter(function(e){return"file"!==e}).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&");r("/upload?"+o,P.Post,e.file,t,n,a)}function y(e,t,n){r("/posts/"+e+"/stats",P.Get,null,t,n)}Object.defineProperty(n,"__esModule",{value:!0});var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.createPost=o,n.updatePost=i,n.deletePost=l,n.updatePostField=s,n.createComment=u,n.updateComment=c,n.updateHub=d,n.createReport=f,n.getPageJSON=p,n.checkId=h,n.updateAccount=m,n.updatePayment=g,n.upload=v,n.getPostStats=y;var w=e("./dictionary"),k=a(w),E=e("../actions/HeaderActionCreators"),_=a(E),P={Get:"GET",Post:"POST",Put:"PUT",Delete:"DELETE",Patch:"PATCH"}},{"../actions/HeaderActionCreators":3,"./dictionary":27}],30:[function(e,t,n){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(e){var t,n,a,o,s,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],l(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(a=arguments.length,o=new Array(a-1),s=1;a>s;s++)o[s-1]=arguments[s];n.apply(this,o)}else if(i(n)){for(a=arguments.length,o=new Array(a-1),s=1;a>s;s++)o[s-1]=arguments[s];for(u=n.slice(),a=u.length,s=0;a>s;s++)u[s].apply(this,o)}return!0},a.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var n;n=l(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},a.prototype.removeListener=function(e,t){var n,a,o,l;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(l=o;l-- >0;)if(n[l]===t||n[l].listener&&n[l].listener===t){a=l;break}if(0>a)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},a.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},a.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},a.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],31:[function(e,t,n){!function(){"use strict";function e(t,n){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],l=this,s=0,u=i.length;u>s;s++)l[i[s]]=r(l[i[s]],l);a&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,a){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,a):r.call(t,e,n,a)},t.addEventListener=function(e,n,a){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),a):r.call(t,e,n,a)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,a=navigator.userAgent.indexOf("Android")>0&&!n,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,o=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i=r&&/OS [6-7]_\d/.test(navigator.userAgent),l=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(r&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,a;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),a=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return a&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;r&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,a;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],t.isContentEditable)return!0;if(r){if(a=window.getSelection(),a.rangeCount&&!a.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,n,l,s,u,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,i&&(u=e.changedTouches[0],c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),l=c.tagName.toLowerCase(),"label"===l){if(t=this.findControl(c)){if(this.focus(c),a)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-n>100||r&&window.top!==window&&"input"===l?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),r&&"select"===l||(this.targetElement=null,e.preventDefault()),!1);return r&&!o&&(s=c.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;a&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(l&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof t&&t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()},{}],32:[function(e,t,n){(function(e){"use strict";var n=function(t,n,a,r,o,i,l,s){if("production"!==e.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!t){var u;if(void 0===n)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[a,r,o,i,l,s],d=0;u=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return c[d++]}))}throw u.framesToPop=1,u}};t.exports=n}).call(this,e("_process"))},{_process:37}],33:[function(e,t,n){function a(e,t,n,a){return e.createClass({componentDidMount:function(){this._isMounted=!0,n.forEach(function(e){return e.eventEmitter.on(l,this._onChange)}.bind(this))},componentWillUnmount:function(){this._isMounted=!1,n.forEach(function(e){return e.eventEmitter.removeListener(l,this._onChange)}.bind(this))},_onChange:function(){this._isMounted&&(a?this.refs.wrapped[a].apply(this.refs.wrapped):this.forceUpdate())},render:function(){var n=this.props;return a&&(n=i({ref:"wrapped"},n)),e.createElement(t,n)}})}var r=e("flux").Dispatcher,o=e("events").EventEmitter,i=e("object-assign"),l="change",s="VIEW_ACTION.",u="SERVER_ACTION.",c=function(e,t){var n=t?u:s,a=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),r=this;a.forEach(function(t){"function"==typeof r[t]&&"constructor"!==t&&(r[t]=r[t].bind({_actionType:n+t,dispatch:function(){e.dispatch({type:this._actionType,args:arguments})}}))})},d=function(e,t){this._actionHandlers={},this._dispatcher=e,this.eventEmitter=new o,this.dispatchToken=e.register(function(e){if(e.type in this._actionHandlers){var t=e.type.replace(/\..*/,".*");t in this._actionHandlers&&this._actionHandlers[t].call(this);var n=this._actionHandlers[e.type].apply(this,e.args);n!==!1&&this.eventEmitter.emit(l)}}.bind(this));var n=function(e,t){for(var n in t)this._actionHandlers[e+n]=t[n]}.bind(this);n(s,t.viewActionHandlers||{}),n(u,t.serverActionHandlers||{})};d.prototype.waitFor=function(e){var t=e.map(function(e){return e.dispatchToken});this._dispatcher.waitFor(t)},t.exports={Dispatcher:r,Actions:c,Store:d,connectToStores:a}},{events:30,flux:35,"object-assign":34}],34:[function(e,t,n){"use strict";function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==a.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(e,t){for(var n,r,l=a(e),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var u in n)o.call(n,u)&&(l[u]=n[u]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var c=0;c<r.length;c++)i.call(n,r[c])&&(l[r[c]]=n[r[c]])}}return l}},{}],35:[function(e,t,n){t.exports.Dispatcher=e("./lib/Dispatcher")},{"./lib/Dispatcher":36}],36:[function(e,t,n){(function(a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=e("fbjs/lib/invariant"),i="ID_",l=function(){function e(){r(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(e){var t=i+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){this._callbacks[e]?void 0:"production"!==a.env.NODE_ENV?o(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e):o(!1),delete this._callbacks[e]},e.prototype.waitFor=function(e){this._isDispatching?void 0:"production"!==a.env.NODE_ENV?o(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching."):o(!1);for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?this._isHandled[n]?void 0:"production"!==a.env.NODE_ENV?o(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):o(!1):(this._callbacks[n]?void 0:"production"!==a.env.NODE_ENV?o(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n):o(!1),this._invokeCallback(n))}},e.prototype.dispatch=function(e){this._isDispatching?"production"!==a.env.NODE_ENV?o(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."):o(!1):void 0,this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();t.exports=l}).call(this,e("_process"))},{_process:37,"fbjs/lib/invariant":32}],37:[function(e,t,n){function a(){if(!l){l=!0;for(var e,t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}l=!1}}function r(){}var o=t.exports={},i=[],l=!1;o.nextTick=function(e){i.push(e),l||setTimeout(a,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],38:[function(e,t,n){(function(e){!function(a){function r(e){throw RangeError(T[e])}function o(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function i(e,t){return o(e.split(N),t).join(".")}function l(e){for(var t,n,a=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),r--)):a.push(t);return a}function s(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var a=0;for(e=n?M(e/O):e>>1,e+=M(e/t);e>L*P>>1;a+=E)e=M(e/L);return M(a+(L+1)*e/(e+C))}function f(e){var t,n,a,o,i,l,c,f,p,h,m=[],g=e.length,v=0,y=H,b=S;for(n=e.lastIndexOf(j),0>n&&(n=0),a=0;n>a;++a)e.charCodeAt(a)>=128&&r("not-basic"),m.push(e.charCodeAt(a));for(o=n>0?n+1:0;g>o;){for(i=v,l=1,c=E;o>=g&&r("invalid-input"),f=u(e.charCodeAt(o++)),(f>=E||f>M((k-v)/l))&&r("overflow"),v+=f*l,p=b>=c?_:c>=b+P?P:c-b,!(p>f);c+=E)h=E-p,l>M(k/h)&&r("overflow"),l*=h;t=m.length+1,b=d(v-i,t,0==i),M(v/t)>k-y&&r("overflow"),y+=M(v/t),v%=t,m.splice(v++,0,y)}return s(m)}function p(e){var t,n,a,o,i,s,u,f,p,h,m,g,v,y,b,w=[];for(e=l(e),g=e.length,t=H,n=0,i=S,s=0;g>s;++s)m=e[s],128>m&&w.push(F(m));for(a=o=w.length,o&&w.push(j);g>a;){for(u=k,s=0;g>s;++s)m=e[s],m>=t&&u>m&&(u=m);for(v=a+1,u-t>M((k-n)/v)&&r("overflow"),n+=(u-t)*v,t=u,s=0;g>s;++s)if(m=e[s],t>m&&++n>k&&r("overflow"),m==t){for(f=n,p=E;h=i>=p?_:p>=i+P?P:p-i,!(h>f);p+=E)b=f-h,y=E-h,w.push(F(c(h+b%y,0))),f=M(b/y);w.push(F(c(f,0))),i=d(n,v,a==o),n=0,++a}++n,++t}return w.join("")}function h(e){return i(e,function(e){return A.test(e)?f(e.slice(4).toLowerCase()):e})}function m(e){return i(e,function(e){return x.test(e)?"xn--"+p(e):e})}var g="object"==typeof n&&n,v="object"==typeof t&&t&&t.exports==g&&t,y="object"==typeof e&&e;y.global!==y&&y.window!==y||(a=y);var b,w,k=2147483647,E=36,_=1,P=26,C=38,O=700,S=72,H=128,j="-",A=/^xn--/,x=/[^ -~]/,N=/\x2E|\u3002|\uFF0E|\uFF61/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=E-_,M=Math.floor,F=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:l,encode:s},decode:f,encode:p,toASCII:m,toUnicode:h},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(g&&!g.nodeType)if(v)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else a.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(e,t,n){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var l=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;u>c;++c){var d,f,p,h,m=e[c].replace(l,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),f=m.substr(g+1)):(d=m,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),a(i,p)?r(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],40:[function(e,t,n){"use strict";function a(e,t){if(e.map)return e.map(t);for(var n=[],a=0;a<e.length;a++)n.push(t(e[a],a));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(i(e),function(i){var l=encodeURIComponent(r(i))+n;return o(e[i])?a(e[i],function(e){return l+encodeURIComponent(r(e))}).join(t):l+encodeURIComponent(r(e[i]))}).join(t):l?encodeURIComponent(r(l))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],41:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":39,"./encode":40}],42:[function(e,t,n){function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&u(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,n),r}function o(e){return s(e)&&(e=r(e)),e instanceof a?e.format():a.prototype.format.call(e)}function i(e,t){return r(e,!1,!0).resolve(t)}function l(e,t){return e?r(e,!1,!0).resolveObject(t):t}function s(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function d(e){return null==e}var f=e("punycode");n.parse=r,n.resolve=i,n.resolveObject=l,n.format=o,n.Url=a;var p=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,k=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=e("querystring");a.prototype.parse=function(e,t,n){if(!s(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e;a=a.trim();var r=p.exec(a);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,a=a.substr(r.length)}if(n||r||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var i="//"===a.substr(0,2);!i||r&&P[r]||(a=a.substr(2),this.slashes=!0)}if(!P[r]&&(i||r&&!C[r])){for(var l=-1,u=0;u<b.length;u++){var c=a.indexOf(b[u]);-1!==c&&(-1===l||l>c)&&(l=c)}var d,h;h=-1===l?a.lastIndexOf("@"):a.lastIndexOf("@",l),-1!==h&&(d=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(d)),l=-1;for(var u=0;u<y.length;u++){var c=a.indexOf(y[u]);-1!==c&&(-1===l||l>c)&&(l=c)}-1===l&&(l=a.length),this.host=a.slice(0,l),a=a.slice(l),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),u=0,S=g.length;S>u;u++){var H=g[u];if(H&&!H.match(k)){for(var j="",A=0,x=H.length;x>A;A++)j+=H.charCodeAt(A)>127?"x":H[A];if(!j.match(k)){var N=g.slice(0,u),T=g.slice(u+1),L=H.match(E);L&&(N.push(L[1]),T.unshift(L[2])),T.length&&(a="/"+T.join(".")+a),this.hostname=N.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var M=this.hostname.split("."),F=[],u=0;u<M.length;++u){var R=M[u];F.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(R):R)}this.hostname=F.join(".")}var D=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+D,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[o])for(var u=0,S=v.length;S>u;u++){var U=v[u],B=encodeURIComponent(U);B===U&&(B=escape(U)),a=a.split(U).join(B)}var q=a.indexOf("#");-1!==q&&(this.hash=a.substr(q),a=a.slice(0,q));var $=a.indexOf("?");if(-1!==$?(this.search=a.substr($),this.query=a.substr($+1),t&&(this.query=O.parse(this.query)),a=a.slice(0,$)):t&&(this.search="",this.query={}),a&&(this.pathname=a),C[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",R=this.search||"";this.path=D+R}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",a=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=O.stringify(this.query));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),i&&"?"!==i.charAt(0)&&(i="?"+i),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+r+n+i+a},a.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(s(e)){var t=new a;t.parse(e,!1,!0),e=t}var n=new a;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),C[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!C[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||P[e.protocol])n.pathname=e.pathname;else{for(var r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var o=n.pathname||"",i=n.search||"";n.path=o+i}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var l=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=u||l||n.host&&e.pathname,p=f,h=n.pathname&&n.pathname.split("/")||[],r=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!C[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===h[0]?h[0]=n.host:h.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),f=f&&(""===r[0]||""===h[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,h=r;else if(r.length)h||(h=[]),h.pop(),h=h.concat(r),n.search=e.search,n.query=e.query;else if(!d(e.search)){if(m){n.hostname=n.host=h.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=e.search,
n.query=e.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!h.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=h.slice(-1)[0],y=(n.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=h.length;w>=0;w--)v=h[w],"."==v?h.splice(w,1):".."===v?(h.splice(w,1),b++):b&&(h.splice(w,1),b--);if(!f&&!p)for(;b--;b)h.unshift("..");!f||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),y&&"/"!==h.join("/").substr(-1)&&h.push("");var k=""===h[0]||h[0]&&"/"===h[0].charAt(0);if(m){n.hostname=n.host=k?"":h.length?h.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return f=f||n.host&&h.length,f&&!k&&h.unshift(""),h.length?n.pathname=h.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:38,querystring:41}],43:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var t=document.getElementById("setup");if(!t)throw"Error: `setup` undefined";var n=JSON.parse(t.innerHTML),a=e("strings")["default"];v["default"].set(a),d["default"].setDict(a.Editor),n=b.setPopstateHandler(n),m["default"].init(n),u["default"].render(l["default"].createElement(p["default"],null),document.getElementById("app")),w.FastClick.attach(document.body),m["default"].clientReady()}var i=e("react"),l=r(i),s=e("react-dom"),u=r(s),c=e("twincled"),d=r(c),f=e("./components/HubApp.react"),p=r(f),h=e("./actions/HubServerActionCreators"),m=r(h),g=e("./utils/dictionary"),v=r(g),y=e("./utils/state"),b=a(y),w=e("fastclick");window.React=l["default"],document.addEventListener("DOMContentLoaded",o)},{"./actions/HubServerActionCreators":4,"./components/HubApp.react":9,"./utils/dictionary":27,"./utils/state":28,fastclick:31,react:"react","react-dom":"react-dom",strings:"strings",twincled:"twincled"}],strings:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={Age:{Year:"年",Years:"年",Month:"個月",Months:"個月",Day:"天",Days:"天",H:"小時",M:"分鐘",Sep:"",Ago:"${age}前",Updated:"更新"},Button_PostList:{Select:"選擇",Previous:"上一頁",Next:"下一頁",Config:"設定",Post:"發表文章",Draft:"撰寫草稿",Note:"撰寫記事",HubPost:"文章",HubComment:"討論"},Button_Post:{Collect:"精選",Delete:"刪除",Move:"搬移",Publish:"發表",Edit:"編輯",Stat:"統計",Bookmark:"收藏",Report:"檢舉",Remark:"留言",Upvote:"推薦",Downvote:"不推薦",More:"更多",Back:"返回",SaveDraft:"儲存草稿",Submit:"送出",Cancel:"取消",Image:"圖片",Help:"說明",HelpLink:"/guide/editor",Comment:"回應文章",Answer:"回答問題",Review:"撰寫短評"},Button_Form:{OK:"確認",Submit:"送出",Continue:"繼續",Close:"關閉",Cancel:"取消",Edit:"編輯"},Select:{Kind:"發文類型",KindOptions:"qpost/短文或討論\nlink/連結分享\nquestion/問題\nanswer/回答\nqreview/短評\nreview/評論\nblogpost/部落格文章",Age:"發文日期",AgeDays:"天內",Sortby:"排序依據",SortbyOptions:"/\npostdate/發文日期\nlastcomment/討論日期\nfavored/最受歡迎\ndiscussed/最多討論",Tag:"標籤",Empty:"找不到文章"},HubConfig:{Basic:"基本資料",Subhubs:"子版",Blocks:"區塊",Members:"成員",BasicFields:"版ID|版名|短版名|本版描述|版主|發文限制",FieldHints:"作為父版的短版名\n版主ID（多個ID之間以英文逗號分隔）\n僅限成員發表文章",MoreFields:"連帶父版|閱讀限制|上方|右側",SubhubHints:"新子版ID\n新子版版名\n連帶父版層級數字，例如：12\n僅限成員閱讀文章（非公開）",MoveUp:"往上移",MoveDown:"往下移",NewHub:"開新版",NewHubNote:"注意：新版一旦建立，即不能刪除",NewMembers:"輸入新成員ID（多個ID之間以英文逗號或換行隔開）",EditBlock:"編輯",EditFinish:"完成",AboutMe:"關於我",Updated:"本版設定已更新"},PostList:{LatestComment:"最新討論"},NewPost:{PostOn:"發表在",AlsoPostOn:"同時發表在",Kind:"發文類型　",KindOptions:"QPost/短文/短文或討論\nLink/連結/分享外部連結\nQuestion/問題/提出問題\nQReview/短評邀請/提出短評邀請\nReview/評論/撰寫評論（長評）\nBlogPost/部落格文章/撰寫部落格文章（長文）",Title:"標題",TitleHint:"標題",TitleWithUrlHint:"（若標題未填寫，則從以下網址自動擷取）",Link:"網址",ReviewTarget:"評論對象",ReviewTargetHint:"評論對象的準確名稱",ReviewLinkHint:"評論對象的外部參考連結",Rating:"評價",RatingStars:"顆星"},Post:{PathPart:"文章網址",PathPartHint:"自訂後半段網址（無空白，英文字母請用小寫）",Thumbnail:"縮圖",ThumbnailHint:"文章縮圖（https圖片網址，長寬320x320以內）",Tags:"標籤",TagsHint:"請提供最多${maxsize}個標籤（以半形空白隔開，英文字母請用小寫）",Summary:"摘要",SummaryHint:"請提供最多${maxsize}個字的文章內容摘要",Created:"您的文章已送出",Updated:"您的修改已送出",Deleted:"文章已刪除！",EmptyTitleAlert:"標題不可為空白",HttpImageFound:"圖片不可用http網址: ${image}",InvalidThumbnail:"縮圖網址不正確，請再次檢查！",ThumbnailTooBig:"縮圖長寬不可超過320x320",EditingAlert:"請先完成您正在撰寫的內容",LeavingAlert:"離開此頁面將導致您目前撰寫的內容遺失。",LeavingConfirm:"離開此頁面將導致您目前撰寫的內容遺失，您確定要現在離開嗎？",UncollectConfirm:"您確定要將本篇文章從「精選文章」中移除嗎？",DeleteConfirm:"您確定要刪除此篇內容嗎？",ImageUploadNotSupported:"此瀏覽器不支援上傳圖片所需功能"},Comment:{PluralCount:"筆討論",PluralReviewCount:"筆短評",PluralAnswerCount:"篇回答",PluralPostCount:"篇文章",MoreComments:"顯示下${pagesize}筆討論",Editing:"編輯中",Fold:"往上收",Unfold:"往下拉",Reply:"回應",Report:"檢舉",Delete:"移除",Edit:"編輯",Submit:"送出",Cancel:"取消",Switch:"切換",Help:"說明",Created:"您的回覆已送出",Updated:"您的修改已送出",ReviewedAlert:"您已經寫過一筆短評",DeleteConfirm:"您確定要將此內容移除嗎？"},PostStats:{Caption:"文章瀏覽人次統計",Loading:"統計中...",DateRange:"日期範圍",Weeks:"週",Days:"天",TotalPageviews:"瀏覽人次"},Report:{Caption:"檢舉發文",Target:"被檢舉者",Type:"類別",Reason:"理由",ReasonNote:"請敘述您檢舉${name}（@${id}）的理由",TypeOptions:".=== 請選擇 ===\na.人身攻擊或污穢言詞\nb.垃圾或廣告訊息\nc.違法的內容或行為\no.其它",Submitted:"您的檢舉表單已送出"},Remark:{PluralCount:"條留言",PluralProAndConCount:"${procount}條正評 / ${concount}條負評留言",Caption:"留言",ProHint:"您可在此留言推文或感謝（最多${maxsize}個字）",ConHint:"您可在此寫下負評理由（最多${maxsize}個字）",Submitted:"您的留言已送出"},Publish:{Caption:"發表文章",CaptionMove:"搬移文章",HubName:"目的地版名",HubId:"版ID",HubIdHint:"例: movies 或 https://tw.twincl.com/movies",Checking:"（檢查中……）",ErrorPost:"（您不允許在此處發表文章）",ErrorKind:"（此處不允許這種類型的文章）",PostOn:"發表在"},ImageUpload:{ImageResize:"圖片上傳後最大長寬：",ImagePixel:"像素",DragHere:"拖放圖檔至此以上傳",ImageTooBig:"上傳圖檔大小不可超過30MB",ImageUploadFail:"圖片上傳失敗"},HubBlock:{Hubs:"主題",Tags:"熱門標籤",Collection:"精選文章",NotesCollection:"精選記事",About:"關於",MemberSince:"${year}年${month}月加入社群",Hubtender:"版主",Statistic:"我的統計數字",StatPost:"文章",StatComment:"討論",StatVote:"得票",StatLevel:"級",More:"更多"},Badge:{Contributor:"作者徽章${badge}",H:"版主"},Login:{Login:"登入",FacebookLogin:"使用 Facebook 帳號登入",GoogleLogin:"使用 Google 帳號登入",LoginOr:"或",Register:"註冊",Account:"帳號",Password:"密碼",ForgotPassword:"忘記密碼?",AuthFail:"帳號或密碼錯誤",MyPreference:"社群偏好設定：",FacebookNotVerified:"您的 Facebook 帳號尚未驗證，請先完成 <a target='fbhelp' href='https://www.facebook.com/help/verify'>Facebook 帳號驗證</a>再重新登入！",LoginFirst:"請先登入"},Account:{AccountPath:"/account",Register:"/account/register 註冊帳號",Confirm:"/account/confirm 確認電子郵件",Reset:"/account/reset 重設密碼",Password:"/account/password 更改密碼",Subscription:"/account/subscription 會員訂購",Payment:"/account/payment 付款處理",Player:"/account/player RICH播放器",Posts:"/@${uid} ≻ 我的文章",Drafts:"/draft ≻ 草稿",Notes:"/notes ≻ 記事本",Bookmarks:"/bookmarks ≻ 收藏文章",Membership:"/account/profile 加入社群",Profile:"/account/profile 個人檔案",Logout:"/logout 登出",BackToHome:"回到首頁",BackToProfile:"回到個人檔案",FormProfile:"Twincl ID|顯示名稱|顯示圖像|會員狀態|電子郵件|再次寄出確認電子郵件|登入帳號|密碼|更改密碼|真實姓名|行動電話|使用條款",ProfileHint:"您在社群中公開使用的ID (a-z, 0-9, _)\n您在社群中公開顯示的名稱\n您的電子郵件地址\n您的電子郵件地址尚未確認\n登入帳號（預設為電子郵件地址）\n您的真實姓名\n您的行動電話",Agreement:'我已閱讀並同意遵守網站的<a href="/company/terms" target="terms">使用條款</a>',IdInUse:"「${id}」已被他人使用",BadUserId:"ID只能包含小寫字母a-z、底線及數字0-9",BadUserName:"使用者名稱不可包含「^」或「@」字元",GoogleAccountInUse:"登入失敗：您的 Google 帳號已被用來登入另一組 Twincl 帳號",FacebookAccountInUse:"登入失敗：您的 Facebook 帳號已被用來登入另一組 Twincl 帳號",FacebookNotVerified:"您的 Facebook 帳號尚未驗證，請先完成 Facebook 帳號驗證後，再重新登入！",ProfileUpdated:"個人檔案已更新",ProfileCreated:"帳號註冊完成！",FormPassword:"舊密碼|新密碼|重覆新密碼",PasswordCriteria:"至少包含1個小寫字母\n至少包含1個大寫字母\n至少包含1個數字或特殊符號\n長度至少8個字元\n重覆新密碼",PasswordUpdated:"密碼變更完成",PasswordInvalid:"密碼不正確",SubscribeMembership:'要加入社群，您可使用 Google 或 Facebook 帳號<br>登入（請點選下方連結），或前往<a href="/account/subscription">會員訂購頁面</a>。',ExtendMembership:'您的會員已到期！要延長會員，請前往<a href="/account/subscription">會員訂購頁</a>。',JoinCommunity:"在Twincl網站發表文章及參與討論需要先加入會員。您可以用Facebook帳號登入（免費會員），或前往會員訂購頁（付費會員）。",GoToFacebookLogin:"［使用 Facebook 帳號登入］",GoToSubscription:"［前往會員訂購頁］",NeedConfirmEmail:"［請先完成電子郵件地址確認］",ConfirmEmailSent:"我們已寄出一封確認電子郵件給您",ConfirmEmailChecking:"請稍候……",ConfirmEmailDone:"您的電子郵件地址已完成確認！",ConfirmEmailError:"很抱歉！我們無法辯識您的確認碼。請重新發送一封確認電子郵件，再試一次。",ResetPasswordEmail:"請提供您註冊用的電子郵件地址：",ResetPasswordSent:"我們已將您的登入帳號及重設密碼連結寄給您，請檢查您的電子郵件信箱。",ResetPasswordError:"很抱歉！我們在註冊記錄中找不到這個電子郵件地址。",SetPasswordDone:"您的密碼已設定完成！請用新密碼重新登入。",SetPasswordError:"很抱歉！我們無法辯識您連結中的確認碼。請重新發送一封電子郵件，再試一次。",PlayerUpdateDone:"RICH播放器已設定完成！",PlayerUpdateError:"很抱歉！我們無法為您設定此RICH播放器。",PCodeRegistration:"「${name}」專用註冊表單",InvalidPCode:"無效的pcode: ${code}"},Payment:{Method:"allPay",BackgroundOnly:"1",Params:"https://payment.allpay.com.tw/Cashier/AioCheckOut 1140709 https://tw.twincl.com/api/payment",Images:"https://payment.allpay.com.tw/Content/images/pay_01B.jpg",Items:{150:{name:"會員1年",price:"150"},360:{name:"會員3年",price:"360"},60:{name:"會員3個月",price:"60"}},FieldNames:{item:"TotalAmount",checksum:"CheckMacValue"},NeedFormHandler:"1",FormMarkup:'<form action="${param1}" method="post" onsubmit="return formHandler(event)">\n  <input type="hidden" name="MerchantID" value="${param2}">\n  <input type="hidden" name="MerchantTradeNo" value="${dateEncode}Z${account}">\n  <input type="hidden" name="MerchantTradeDate" value="${datetime}">\n  <input type="hidden" name="PaymentType" value="aio">\n  <input type="hidden" name="TradeDesc" value="會員訂購">\n  <input type="hidden" name="ItemName" value="${item.name}">\n  <input type="hidden" name="ReturnURL" value="${param3}">\n  <input type="hidden" name="ClientBackURL" value="${back}?status=pending">\n  <input type="hidden" name="DeviceSource" value="${deviceType}">\n  <input type="hidden" name="ChoosePayment" value="ALL">\n  <input type="hidden" name="IgnorePayment" value="CVS#BARCODE">\n  <input type="hidden" name="NeedExtraPaidInfo" value="Y">\n  <input type="hidden" name="InvoiceMark" value="Y">\n  <input type="hidden" name="RelateNumber" value="${dateEncode}Z${account}I">\n  <input type="hidden" name="CustomerEmail" value="${emailEncode}">\n  <input type="hidden" name="Print" value="0">\n  <input type="hidden" name="TaxType" value="1">\n  <input type="hidden" name="InvoiceItemName" value="${item.name}">\n  <input type="hidden" name="InvoiceItemCount" value="1">\n  <input type="hidden" name="InvoiceItemWord" value="期">\n  <input type="hidden" name="InvoiceItemPrice" value="${item.price}">\n  <input type="hidden" name="InvoiceItemTaxType" value="1">\n  <input type="hidden" name="DelayDay" value="0">\n  <input type="hidden" name="InvType" value="07">\n  <input type="hidden" name="CheckMacValue" value="">\n  <ol><li>\n  <p>請選擇會員期間：</p>\n  <p><select name="TotalAmount">\n    <option value="150">會員1年 / 150元</option>\n    <option value="360">會員3年 / 360元</option>\n    <option value="60">會員3個月 / 60元</option>\n  </select></p>\n  </li><li>\n  <p>請提供電子發票載具資料：</p>\n  <p>電子發票載具：<select name="CarruerType">\n    <option value="">無（代為捐贈）</option>\n    <option value="3">手機條碼</option>\n    <option value="2">自然人憑證號碼</option>\n  </select></p>\n  <p>載具編號：<input type="text" name="CarruerNum" style="width: 18em" placeholder="8碼手機條碼或16碼自然人憑證號碼"></p>\n  <p style="max-width: 30em"><small>※ 為愛護地球及節能減碳，我們一律開立無紙的電子發票。如果您還沒有電子發票共通性載具，請至<a href="https://www.einvoice.nat.gov.tw" target="_einvoice">財政部電子發票整合服務平台</a>申請手機條碼載具，只需準備手機號碼（非智慧型手機亦可）與電子郵件，數分鐘內即可取得8碼（含斜線）的手機條碼。若您未提供載具，本次交易的電子發票我們亦可代為捐贈給社福團體。</small></p>\n  </li><li>\n  <p>請選擇是否捐贈發票：<select name="Donation">\n    <option value="1">捐贈</option>\n    <option value="2">不捐贈</option>\n  </select></p>\n  <p>愛心碼：<input type="text" name="LoveCode" value="8585" style="width: 5em" placeholder="3至7碼數字"> <small>（預設為8585家扶基金會） <a href="https://www.einvoice.nat.gov.tw" target="_einvoice">查詢愛心碼</a></small></p>\n  </li><li>\n  <p>前往「歐付寶電子支付平台」完成交易。</p>\n  <p style="max-width: 30em"><small>※ 本網站的金流合作夥伴<a href="https://www.allpay.com.tw/" target="_blank">歐付寶電子支付股份有限公司</a>為台灣第一家取得第三方支付機構許可函之公司，並已通過經濟部Cash Inbound/Cash Outbound網路代結匯資格。您不需註冊歐付寶會員，即可利用網路ATM、實體ATM及信用卡等方式付款。</small></p>\n  </li></ol>\n  <p align="center"><input type="image" src="${image1}" border="0" name="submit" alt="歐付寶付款"></p>\n</form>',Pending:"感謝您的訂購！在您完成付款之後，歐付寶會將資料傳送給我們的後端系統，由系統為您更新會員狀態。（根據付款方式不同，可能會有數十分鐘至數小時的延遲。）請留意您的電子郵件信箱，或隨時回到「個人檔案」頁面查看您的最新會員狀態。"},Player:{Fields:"擁有者ID|播放器ID|網址|名稱|說明"},Editor:{MissingLinkText:"請先選取超連結文字",EnterURL:"請輸入網址：",EnterImageURL:"請輸入https圖檔網址：",EnterVideoURL:"請輸入YouTube影片ID或網址：",EnterPlayerID:"請輸入RICH播放器ID：",EmptyParagraphOnly:"RICH內容只能加到空白段落",NonLastParagraphOnly:"RICH內容不能加到最後一個段落",HintRich:"將一段「RICH內容」加到空白段落",HintSwitch:"在Markdown文字模式與HTML編輯模式間切換"},Page:{Private:"非公開",LoadingError:"頁面載入失敗"},Footer:{Links:"/company/terms 使用條款\n/company/privacy 隱私政策\n/company/about 關於我們",Copyright:"網站版權 © ${year} 途聞國際有限公司",CcLicense:'除另有註明，由網站使用者建立之內容<br>皆採用<a href="http://creativecommons.org/licenses/by/4.0/deed.zh_TW">創用CC BY 4.0</a>授權條款'},API:{NetworkError:"網路錯誤",ErrorCode:"HTTP錯誤: ${code}"},Beta:{NotAvailable:"Beta網站未提供此功能"},Site:{Host:"https://tw.twincl.com",Name:"Twincl",Note:"思想星海",Lang:"zh_TW"},CharDensity:"2.0"}},{}]},{},[43]);