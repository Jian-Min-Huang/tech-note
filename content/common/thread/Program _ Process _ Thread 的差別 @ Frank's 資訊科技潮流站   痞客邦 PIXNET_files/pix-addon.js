!function($,window){window.pixAddon=function($,window){var crossDomainRequest=function(addonId,tagName){var d=$.Deferred(),image=new Image(1,1);image.src="http://api.appmarket.pixnet.tw/counter/"+addonId+"/"+tagName+"?timestamp="+ +new Date;image.onload=function(){d.resolve()};image.onerror=function(){d.reject()};return d.promise()};return{track:function(addonId,tagName){return crossDomainRequest(addonId,tagName)},trackLinks:function(expr,addonId,tagName){$(expr).on("click",function(e){var jqThis=$(this),href=jqThis.attr("href")||"",target=jqThis.attr("target");var isRegularAnchor=jqThis.is("a")&&href.match(/^(https?:)?\/\//)&&target!=="_blank";if(isRegularAnchor){e.preventDefault();var redirect=function(){window.location.href=href};crossDomainRequest(addonId,tagName).then(redirect,redirect);window.setTimeout(redirect,700)}else{return crossDomainRequest(addonId,tagName)}})}}}(jQuery,window)}(jQuery,this);